import{a as Q,b as Xe,c as Ly,d as vi,e as po,f as $}from"./chunk-QVHMM4ZF.js";var Yx=vi(Ta=>{(function(i){var e=i.Promise,n=e&&"resolve"in e&&"reject"in e&&"all"in e&&"race"in e&&function(){var F;return new e(function(j){F=j}),typeof F=="function"}();typeof Ta<"u"&&Ta?(Ta.Promise=n?e:X,Ta.Polyfill=X):typeof define=="function"&&define.amd?define(function(){return n?e:X}):n||(i.Promise=X);var t="pending",r="sealed",o="fulfilled",s="rejected",a=function(){};function l(F){return Object.prototype.toString.call(F)==="[object Array]"}var c=typeof setImmediate<"u"?setImmediate:setTimeout,u=[],d;function h(){for(var F=0;F<u.length;F++)u[F][0](u[F][1]);u=[],d=!1}function p(F,j){u.push([F,j]),d||(d=!0,c(h,0))}function f(F,j){function z(se){P(j,se)}function ue(se){b(j,se)}try{F(z,ue)}catch(se){ue(se)}}function m(F){var j=F.owner,z=j.state_,ue=j.data_,se=F[z],ge=F.then;if(typeof se=="function"){z=o;try{ue=se(ue)}catch(Ye){b(ge,Ye)}}_(ge,ue)||(z===o&&P(ge,ue),z===s&&b(ge,ue))}function _(F,j){var z;try{if(F===j)throw new TypeError("A promises callback cannot return that same promise.");if(j&&(typeof j=="function"||typeof j=="object")){var ue=j.then;if(typeof ue=="function")return ue.call(j,function(se){z||(z=!0,j!==se?P(F,se):I(F,se))},function(se){z||(z=!0,b(F,se))}),!0}}catch(se){return z||b(F,se),!0}return!1}function P(F,j){(F===j||!_(F,j))&&I(F,j)}function I(F,j){F.state_===t&&(F.state_=r,F.data_=j,p(k,F))}function b(F,j){F.state_===t&&(F.state_=r,F.data_=j,p(N,F))}function S(F){var j=F.then_;F.then_=void 0;for(var z=0;z<j.length;z++)m(j[z])}function k(F){F.state_=o,S(F)}function N(F){F.state_=s,S(F)}function X(F){if(typeof F!="function")throw new TypeError("Promise constructor takes a function argument");if(!(this instanceof X))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],f(F,this)}X.prototype={constructor:X,state_:t,then_:null,data_:void 0,then:function(F,j){var z={owner:this,then:new this.constructor(a),fulfilled:F,rejected:j};return this.state_===o||this.state_===s?p(m,z):this.then_.push(z),z.then},catch:function(F){return this.then(null,F)}},X.all=function(F){var j=this;if(!l(F))throw new TypeError("You must pass an array to Promise.all().");return new j(function(z,ue){var se=[],ge=0;function Ye(L){return ge++,function(V){se[L]=V,--ge||z(se)}}for(var oe=0,B;oe<F.length;oe++)B=F[oe],B&&typeof B.then=="function"?B.then(Ye(oe),ue):se[oe]=B;ge||z(se)})},X.race=function(F){var j=this;if(!l(F))throw new TypeError("You must pass an array to Promise.race().");return new j(function(z,ue){for(var se=0,ge;se<F.length;se++)ge=F[se],ge&&typeof ge.then=="function"?ge.then(z,ue):z(ge)})},X.resolve=function(F){var j=this;return F&&typeof F=="object"&&F.constructor===j?F:new j(function(z){z(F)})},X.reject=function(F){var j=this;return new j(function(z,ue){ue(F)})}})(typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:Ta)});var Kx=vi((l9,$x)=>{"use strict";var Zx=Object.getOwnPropertySymbols,YR=Object.prototype.hasOwnProperty,ZR=Object.prototype.propertyIsEnumerable;function $R(i){if(i==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(i)}function KR(){try{if(!Object.assign)return!1;var i=new String("abc");if(i[5]="de",Object.getOwnPropertyNames(i)[0]==="5")return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var t=Object.getOwnPropertyNames(e).map(function(o){return e[o]});if(t.join("")!=="0123456789")return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(o){r[o]=o}),Object.keys(Object.assign({},r)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}$x.exports=KR()?Object.assign:function(i,e){for(var n,t=$R(i),r,o=1;o<arguments.length;o++){n=Object(arguments[o]);for(var s in n)YR.call(n,s)&&(t[s]=n[s]);if(Zx){r=Zx(n);for(var a=0;a<r.length;a++)ZR.call(n,r[a])&&(t[r[a]]=n[r[a]])}}return t}});var fM=vi((m9,V_)=>{"use strict";var nF=Object.prototype.hasOwnProperty,Fn="~";function sc(){}Object.create&&(sc.prototype=Object.create(null),new sc().__proto__||(Fn=!1));function iF(i,e,n){this.fn=i,this.context=e,this.once=n||!1}function pM(i,e,n,t,r){if(typeof n!="function")throw new TypeError("The listener must be a function");var o=new iF(n,t||i,r),s=Fn?Fn+e:e;return i._events[s]?i._events[s].fn?i._events[s]=[i._events[s],o]:i._events[s].push(o):(i._events[s]=o,i._eventsCount++),i}function ph(i,e){--i._eventsCount===0?i._events=new sc:delete i._events[e]}function En(){this._events=new sc,this._eventsCount=0}En.prototype.eventNames=function(){var e=[],n,t;if(this._eventsCount===0)return e;for(t in n=this._events)nF.call(n,t)&&e.push(Fn?t.slice(1):t);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(n)):e};En.prototype.listeners=function(e){var n=Fn?Fn+e:e,t=this._events[n];if(!t)return[];if(t.fn)return[t.fn];for(var r=0,o=t.length,s=new Array(o);r<o;r++)s[r]=t[r].fn;return s};En.prototype.listenerCount=function(e){var n=Fn?Fn+e:e,t=this._events[n];return t?t.fn?1:t.length:0};En.prototype.emit=function(e,n,t,r,o,s){var a=Fn?Fn+e:e;if(!this._events[a])return!1;var l=this._events[a],c=arguments.length,u,d;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),c){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,n),!0;case 3:return l.fn.call(l.context,n,t),!0;case 4:return l.fn.call(l.context,n,t,r),!0;case 5:return l.fn.call(l.context,n,t,r,o),!0;case 6:return l.fn.call(l.context,n,t,r,o,s),!0}for(d=1,u=new Array(c-1);d<c;d++)u[d-1]=arguments[d];l.fn.apply(l.context,u)}else{var h=l.length,p;for(d=0;d<h;d++)switch(l[d].once&&this.removeListener(e,l[d].fn,void 0,!0),c){case 1:l[d].fn.call(l[d].context);break;case 2:l[d].fn.call(l[d].context,n);break;case 3:l[d].fn.call(l[d].context,n,t);break;case 4:l[d].fn.call(l[d].context,n,t,r);break;default:if(!u)for(p=1,u=new Array(c-1);p<c;p++)u[p-1]=arguments[p];l[d].fn.apply(l[d].context,u)}}return!0};En.prototype.on=function(e,n,t){return pM(this,e,n,t,!1)};En.prototype.once=function(e,n,t){return pM(this,e,n,t,!0)};En.prototype.removeListener=function(e,n,t,r){var o=Fn?Fn+e:e;if(!this._events[o])return this;if(!n)return ph(this,o),this;var s=this._events[o];if(s.fn)s.fn===n&&(!r||s.once)&&(!t||s.context===t)&&ph(this,o);else{for(var a=0,l=[],c=s.length;a<c;a++)(s[a].fn!==n||r&&!s[a].once||t&&s[a].context!==t)&&l.push(s[a]);l.length?this._events[o]=l.length===1?l[0]:l:ph(this,o)}return this};En.prototype.removeAllListeners=function(e){var n;return e?(n=Fn?Fn+e:e,this._events[n]&&ph(this,n)):(this._events=new sc,this._eventsCount=0),this};En.prototype.off=En.prototype.removeListener;En.prototype.addListener=En.prototype.on;En.prefixed=Fn;En.EventEmitter=En;typeof V_<"u"&&(V_.exports=En)});var yM=vi((g9,W_)=>{"use strict";W_.exports=gh;W_.exports.default=gh;function gh(i,e,n){n=n||2;var t=e&&e.length,r=t?e[0]*n:i.length,o=gM(i,0,r,n,!0),s=[];if(!o||o.next===o.prev)return s;var a,l,c,u,d,h,p;if(t&&(o=lF(i,e,o,n)),i.length>80*n){a=c=i[0],l=u=i[1];for(var f=n;f<r;f+=n)d=i[f],h=i[f+1],d<a&&(a=d),h<l&&(l=h),d>c&&(c=d),h>u&&(u=h);p=Math.max(c-a,u-l),p=p!==0?32767/p:0}return ac(o,s,n,a,l,p,0),s}function gM(i,e,n,t,r){var o,s;if(r===H_(i,e,n,t)>0)for(o=e;o<n;o+=t)s=mM(o,i[o],i[o+1],s);else for(o=n-t;o>=e;o-=t)s=mM(o,i[o],i[o+1],s);return s&&_h(s,s.next)&&(cc(s),s=s.next),s}function ws(i,e){if(!i)return i;e||(e=i);var n=i,t;do if(t=!1,!n.steiner&&(_h(n,n.next)||Wt(n.prev,n,n.next)===0)){if(cc(n),n=e=n.prev,n===n.next)break;t=!0}else n=n.next;while(t||n!==e);return e}function ac(i,e,n,t,r,o,s){if(i){!s&&o&&pF(i,t,r,o);for(var a=i,l,c;i.prev!==i.next;){if(l=i.prev,c=i.next,o?oF(i,t,r,o):rF(i)){e.push(l.i/n|0),e.push(i.i/n|0),e.push(c.i/n|0),cc(i),i=c.next,a=c.next;continue}if(i=c,i===a){s?s===1?(i=sF(ws(i),e,n),ac(i,e,n,t,r,o,2)):s===2&&aF(i,e,n,t,r,o):ac(ws(i),e,n,t,r,o,1);break}}}}function rF(i){var e=i.prev,n=i,t=i.next;if(Wt(e,n,t)>=0)return!1;for(var r=e.x,o=n.x,s=t.x,a=e.y,l=n.y,c=t.y,u=r<o?r<s?r:s:o<s?o:s,d=a<l?a<c?a:c:l<c?l:c,h=r>o?r>s?r:s:o>s?o:s,p=a>l?a>c?a:c:l>c?l:c,f=t.next;f!==e;){if(f.x>=u&&f.x<=h&&f.y>=d&&f.y<=p&&Da(r,a,o,l,s,c,f.x,f.y)&&Wt(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function oF(i,e,n,t){var r=i.prev,o=i,s=i.next;if(Wt(r,o,s)>=0)return!1;for(var a=r.x,l=o.x,c=s.x,u=r.y,d=o.y,h=s.y,p=a<l?a<c?a:c:l<c?l:c,f=u<d?u<h?u:h:d<h?d:h,m=a>l?a>c?a:c:l>c?l:c,_=u>d?u>h?u:h:d>h?d:h,P=U_(p,f,e,n,t),I=U_(m,_,e,n,t),b=i.prevZ,S=i.nextZ;b&&b.z>=P&&S&&S.z<=I;){if(b.x>=p&&b.x<=m&&b.y>=f&&b.y<=_&&b!==r&&b!==s&&Da(a,u,l,d,c,h,b.x,b.y)&&Wt(b.prev,b,b.next)>=0||(b=b.prevZ,S.x>=p&&S.x<=m&&S.y>=f&&S.y<=_&&S!==r&&S!==s&&Da(a,u,l,d,c,h,S.x,S.y)&&Wt(S.prev,S,S.next)>=0))return!1;S=S.nextZ}for(;b&&b.z>=P;){if(b.x>=p&&b.x<=m&&b.y>=f&&b.y<=_&&b!==r&&b!==s&&Da(a,u,l,d,c,h,b.x,b.y)&&Wt(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;S&&S.z<=I;){if(S.x>=p&&S.x<=m&&S.y>=f&&S.y<=_&&S!==r&&S!==s&&Da(a,u,l,d,c,h,S.x,S.y)&&Wt(S.prev,S,S.next)>=0)return!1;S=S.nextZ}return!0}function sF(i,e,n){var t=i;do{var r=t.prev,o=t.next.next;!_h(r,o)&&_M(r,t,t.next,o)&&lc(r,o)&&lc(o,r)&&(e.push(r.i/n|0),e.push(t.i/n|0),e.push(o.i/n|0),cc(t),cc(t.next),t=i=o),t=t.next}while(t!==i);return ws(t)}function aF(i,e,n,t,r,o){var s=i;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&gF(s,a)){var l=vM(s,a);s=ws(s,s.next),l=ws(l,l.next),ac(s,e,n,t,r,o,0),ac(l,e,n,t,r,o,0);return}a=a.next}s=s.next}while(s!==i)}function lF(i,e,n,t){var r=[],o,s,a,l,c;for(o=0,s=e.length;o<s;o++)a=e[o]*t,l=o<s-1?e[o+1]*t:i.length,c=gM(i,a,l,t,!1),c===c.next&&(c.steiner=!0),r.push(mF(c));for(r.sort(cF),o=0;o<r.length;o++)n=uF(r[o],n);return n}function cF(i,e){return i.x-e.x}function uF(i,e){var n=dF(i,e);if(!n)return e;var t=vM(n,i);return ws(t,t.next),ws(n,n.next)}function dF(i,e){var n=e,t=i.x,r=i.y,o=-1/0,s;do{if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){var a=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=t&&a>o&&(o=a,s=n.x<n.next.x?n:n.next,a===t))return s}n=n.next}while(n!==e);if(!s)return null;var l=s,c=s.x,u=s.y,d=1/0,h;n=s;do t>=n.x&&n.x>=c&&t!==n.x&&Da(r<u?t:o,r,c,u,r<u?o:t,r,n.x,n.y)&&(h=Math.abs(r-n.y)/(t-n.x),lc(n,i)&&(h<d||h===d&&(n.x>s.x||n.x===s.x&&hF(s,n)))&&(s=n,d=h)),n=n.next;while(n!==l);return s}function hF(i,e){return Wt(i.prev,i,e.prev)<0&&Wt(e.next,i,i.next)<0}function pF(i,e,n,t){var r=i;do r.z===0&&(r.z=U_(r.x,r.y,e,n,t)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,fF(r)}function fF(i){var e,n,t,r,o,s,a,l,c=1;do{for(n=i,i=null,o=null,s=0;n;){for(s++,t=n,a=0,e=0;e<c&&(a++,t=t.nextZ,!!t);e++);for(l=c;a>0||l>0&&t;)a!==0&&(l===0||!t||n.z<=t.z)?(r=n,n=n.nextZ,a--):(r=t,t=t.nextZ,l--),o?o.nextZ=r:i=r,r.prevZ=o,o=r;n=t}o.nextZ=null,c*=2}while(s>1);return i}function U_(i,e,n,t,r){return i=(i-n)*r|0,e=(e-t)*r|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function mF(i){var e=i,n=i;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==i);return n}function Da(i,e,n,t,r,o,s,a){return(r-s)*(e-a)>=(i-s)*(o-a)&&(i-s)*(t-a)>=(n-s)*(e-a)&&(n-s)*(o-a)>=(r-s)*(t-a)}function gF(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!_F(i,e)&&(lc(i,e)&&lc(e,i)&&vF(i,e)&&(Wt(i.prev,i,e.prev)||Wt(i,e.prev,e))||_h(i,e)&&Wt(i.prev,i,i.next)>0&&Wt(e.prev,e,e.next)>0)}function Wt(i,e,n){return(e.y-i.y)*(n.x-e.x)-(e.x-i.x)*(n.y-e.y)}function _h(i,e){return i.x===e.x&&i.y===e.y}function _M(i,e,n,t){var r=mh(Wt(i,e,n)),o=mh(Wt(i,e,t)),s=mh(Wt(n,t,i)),a=mh(Wt(n,t,e));return!!(r!==o&&s!==a||r===0&&fh(i,n,e)||o===0&&fh(i,t,e)||s===0&&fh(n,i,t)||a===0&&fh(n,e,t))}function fh(i,e,n){return e.x<=Math.max(i.x,n.x)&&e.x>=Math.min(i.x,n.x)&&e.y<=Math.max(i.y,n.y)&&e.y>=Math.min(i.y,n.y)}function mh(i){return i>0?1:i<0?-1:0}function _F(i,e){var n=i;do{if(n.i!==i.i&&n.next.i!==i.i&&n.i!==e.i&&n.next.i!==e.i&&_M(n,n.next,i,e))return!0;n=n.next}while(n!==i);return!1}function lc(i,e){return Wt(i.prev,i,i.next)<0?Wt(i,e,i.next)>=0&&Wt(i,i.prev,e)>=0:Wt(i,e,i.prev)<0||Wt(i,i.next,e)<0}function vF(i,e){var n=i,t=!1,r=(i.x+e.x)/2,o=(i.y+e.y)/2;do n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(t=!t),n=n.next;while(n!==i);return t}function vM(i,e){var n=new z_(i.i,i.x,i.y),t=new z_(e.i,e.x,e.y),r=i.next,o=e.prev;return i.next=e,e.prev=i,n.next=r,r.prev=n,t.next=n,n.prev=t,o.next=t,t.prev=o,t}function mM(i,e,n,t){var r=new z_(i,e,n);return t?(r.next=t.next,r.prev=t,t.next.prev=r,t.next=r):(r.prev=r,r.next=r),r}function cc(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function z_(i,e,n){this.i=i,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}gh.deviation=function(i,e,n,t){var r=e&&e.length,o=r?e[0]*n:i.length,s=Math.abs(H_(i,0,o,n));if(r)for(var a=0,l=e.length;a<l;a++){var c=e[a]*n,u=a<l-1?e[a+1]*n:i.length;s-=Math.abs(H_(i,c,u,n))}var d=0;for(a=0;a<t.length;a+=3){var h=t[a]*n,p=t[a+1]*n,f=t[a+2]*n;d+=Math.abs((i[h]-i[f])*(i[p+1]-i[h+1])-(i[h]-i[p])*(i[f+1]-i[h+1]))}return s===0&&d===0?0:Math.abs((d-s)/s)};function H_(i,e,n,t){for(var r=0,o=e,s=n-t;o<n;o+=t)r+=(i[s]-i[o])*(i[o+1]+i[s+1]),s=o;return r}gh.flatten=function(i){for(var e=i[0][0].length,n={vertices:[],holes:[],dimensions:e},t=0,r=0;r<i.length;r++){for(var o=0;o<i[r].length;o++)for(var s=0;s<e;s++)n.vertices.push(i[r][o][s]);r>0&&(t+=i[r-1].length,n.holes.push(t))}return n}});var CM=vi((ka,Na)=>{(function(i){var e=typeof ka=="object"&&ka&&!ka.nodeType&&ka,n=typeof Na=="object"&&Na&&!Na.nodeType&&Na,t=typeof global=="object"&&global;(t.global===t||t.window===t||t.self===t)&&(i=t);var r,o=2147483647,s=36,a=1,l=26,c=38,u=700,d=72,h=128,p="-",f=/^xn--/,m=/[^\x20-\x7E]/,_=/[\x2E\u3002\uFF0E\uFF61]/g,P={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=s-a,b=Math.floor,S=String.fromCharCode,k;function N(V){throw RangeError(P[V])}function X(V,te){for(var he=V.length,Se=[];he--;)Se[he]=te(V[he]);return Se}function F(V,te){var he=V.split("@"),Se="";he.length>1&&(Se=he[0]+"@",V=he[1]),V=V.replace(_,".");var ve=V.split("."),rt=X(ve,te).join(".");return Se+rt}function j(V){for(var te=[],he=0,Se=V.length,ve,rt;he<Se;)ve=V.charCodeAt(he++),ve>=55296&&ve<=56319&&he<Se?(rt=V.charCodeAt(he++),(rt&64512)==56320?te.push(((ve&1023)<<10)+(rt&1023)+65536):(te.push(ve),he--)):te.push(ve);return te}function z(V){return X(V,function(te){var he="";return te>65535&&(te-=65536,he+=S(te>>>10&1023|55296),te=56320|te&1023),he+=S(te),he}).join("")}function ue(V){return V-48<10?V-22:V-65<26?V-65:V-97<26?V-97:s}function se(V,te){return V+22+75*(V<26)-((te!=0)<<5)}function ge(V,te,he){var Se=0;for(V=he?b(V/u):V>>1,V+=b(V/te);V>I*l>>1;Se+=s)V=b(V/I);return b(Se+(I+1)*V/(V+c))}function Ye(V){var te=[],he=V.length,Se,ve=0,rt=h,Te=d,Lt,Ze,Ae,Le,ae,Qe,Ge,De,jt;for(Lt=V.lastIndexOf(p),Lt<0&&(Lt=0),Ze=0;Ze<Lt;++Ze)V.charCodeAt(Ze)>=128&&N("not-basic"),te.push(V.charCodeAt(Ze));for(Ae=Lt>0?Lt+1:0;Ae<he;){for(Le=ve,ae=1,Qe=s;Ae>=he&&N("invalid-input"),Ge=ue(V.charCodeAt(Ae++)),(Ge>=s||Ge>b((o-ve)/ae))&&N("overflow"),ve+=Ge*ae,De=Qe<=Te?a:Qe>=Te+l?l:Qe-Te,!(Ge<De);Qe+=s)jt=s-De,ae>b(o/jt)&&N("overflow"),ae*=jt;Se=te.length+1,Te=ge(ve-Le,Se,Le==0),b(ve/Se)>o-rt&&N("overflow"),rt+=b(ve/Se),ve%=Se,te.splice(ve++,0,rt)}return z(te)}function oe(V){var te,he,Se,ve,rt,Te,Lt,Ze,Ae,Le,ae,Qe=[],Ge,De,jt,$t;for(V=j(V),Ge=V.length,te=h,he=0,rt=d,Te=0;Te<Ge;++Te)ae=V[Te],ae<128&&Qe.push(S(ae));for(Se=ve=Qe.length,ve&&Qe.push(p);Se<Ge;){for(Lt=o,Te=0;Te<Ge;++Te)ae=V[Te],ae>=te&&ae<Lt&&(Lt=ae);for(De=Se+1,Lt-te>b((o-he)/De)&&N("overflow"),he+=(Lt-te)*De,te=Lt,Te=0;Te<Ge;++Te)if(ae=V[Te],ae<te&&++he>o&&N("overflow"),ae==te){for(Ze=he,Ae=s;Le=Ae<=rt?a:Ae>=rt+l?l:Ae-rt,!(Ze<Le);Ae+=s)$t=Ze-Le,jt=s-Le,Qe.push(S(se(Le+$t%jt,0))),Ze=b($t/jt);Qe.push(S(se(Ze,0))),rt=ge(he,De,Se==ve),he=0,++Se}++he,++te}return Qe.join("")}function B(V){return F(V,function(te){return f.test(te)?Ye(te.slice(4).toLowerCase()):te})}function L(V){return F(V,function(te){return m.test(te)?"xn--"+oe(te):te})}if(r={version:"1.3.2",ucs2:{decode:j,encode:z},decode:Ye,encode:oe,toASCII:L,toUnicode:B},typeof define=="function"&&typeof define.amd=="object"&&define.amd)define("punycode",function(){return r});else if(e&&n)if(Na.exports==e)n.exports=r;else for(k in r)r.hasOwnProperty(k)&&(e[k]=r[k]);else i.punycode=r})(ka)});var PM=vi((_9,bM)=>{"use strict";bM.exports={isString:function(i){return typeof i=="string"},isObject:function(i){return typeof i=="object"&&i!==null},isNull:function(i){return i===null},isNullOrUndefined:function(i){return i==null}}});var xM=vi((v9,wM)=>{"use strict";function yF(i,e){return Object.prototype.hasOwnProperty.call(i,e)}wM.exports=function(i,e,n,t){e=e||"&",n=n||"=";var r={};if(typeof i!="string"||i.length===0)return r;var o=/\+/g;i=i.split(e);var s=1e3;t&&typeof t.maxKeys=="number"&&(s=t.maxKeys);var a=i.length;s>0&&a>s&&(a=s);for(var l=0;l<a;++l){var c=i[l].replace(o,"%20"),u=c.indexOf(n),d,h,p,f;u>=0?(d=c.substr(0,u),h=c.substr(u+1)):(d=c,h=""),p=decodeURIComponent(d),f=decodeURIComponent(h),yF(r,p)?Array.isArray(r[p])?r[p].push(f):r[p]=[r[p],f]:r[p]=f}return r}});var OM=vi((y9,MM)=>{"use strict";var uc=function(i){switch(typeof i){case"string":return i;case"boolean":return i?"true":"false";case"number":return isFinite(i)?i:"";default:return""}};MM.exports=function(i,e,n,t){return e=e||"&",n=n||"=",i===null&&(i=void 0),typeof i=="object"?Object.keys(i).map(function(r){var o=encodeURIComponent(uc(r))+n;return Array.isArray(i[r])?i[r].map(function(s){return o+encodeURIComponent(uc(s))}).join(e):o+encodeURIComponent(uc(i[r]))}).join(e):t?encodeURIComponent(uc(t))+n+encodeURIComponent(uc(i)):""}});var EM=vi(dc=>{"use strict";dc.decode=dc.parse=xM();dc.encode=dc.stringify=OM()});var Y_=vi(Fa=>{"use strict";var CF=CM(),gr=PM();Fa.parse=hc;Fa.resolve=TF;Fa.resolveObject=AF;Fa.format=SF;Fa.Url=xi;function xi(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var bF=/^([a-z0-9.+-]+:)/i,PF=/:[0-9]*$/,wF=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,xF=["<",">",'"',"`"," ","\r",`
`,"	"],MF=["{","}","|","\\","^","`"].concat(xF),G_=["'"].concat(MF),IM=["%","/","?",";","#"].concat(G_),SM=["/","?","#"],OF=255,TM=/^[+a-z0-9A-Z_-]{0,63}$/,EF=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,IF={javascript:!0,"javascript:":!0},X_={javascript:!0,"javascript:":!0},Ra={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},q_=EM();function hc(i,e,n){if(i&&gr.isObject(i)&&i instanceof xi)return i;var t=new xi;return t.parse(i,e,n),t}xi.prototype.parse=function(i,e,n){if(!gr.isString(i))throw new TypeError("Parameter 'url' must be a string, not "+typeof i);var t=i.indexOf("?"),r=t!==-1&&t<i.indexOf("#")?"?":"#",o=i.split(r),s=/\\/g;o[0]=o[0].replace(s,"/"),i=o.join(r);var a=i;if(a=a.trim(),!n&&i.split("#").length===1){var l=wF.exec(a);if(l)return this.path=a,this.href=a,this.pathname=l[1],l[2]?(this.search=l[2],e?this.query=q_.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var c=bF.exec(a);if(c){c=c[0];var u=c.toLowerCase();this.protocol=u,a=a.substr(c.length)}if(n||c||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var d=a.substr(0,2)==="//";d&&!(c&&X_[c])&&(a=a.substr(2),this.slashes=!0)}if(!X_[c]&&(d||c&&!Ra[c])){for(var h=-1,p=0;p<SM.length;p++){var f=a.indexOf(SM[p]);f!==-1&&(h===-1||f<h)&&(h=f)}var m,_;h===-1?_=a.lastIndexOf("@"):_=a.lastIndexOf("@",h),_!==-1&&(m=a.slice(0,_),a=a.slice(_+1),this.auth=decodeURIComponent(m)),h=-1;for(var p=0;p<IM.length;p++){var f=a.indexOf(IM[p]);f!==-1&&(h===-1||f<h)&&(h=f)}h===-1&&(h=a.length),this.host=a.slice(0,h),a=a.slice(h),this.parseHost(),this.hostname=this.hostname||"";var P=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!P)for(var I=this.hostname.split(/\./),p=0,b=I.length;p<b;p++){var S=I[p];if(S&&!S.match(TM)){for(var k="",N=0,X=S.length;N<X;N++)S.charCodeAt(N)>127?k+="x":k+=S[N];if(!k.match(TM)){var F=I.slice(0,p),j=I.slice(p+1),z=S.match(EF);z&&(F.push(z[1]),j.unshift(z[2])),j.length&&(a="/"+j.join(".")+a),this.hostname=F.join(".");break}}}this.hostname.length>OF?this.hostname="":this.hostname=this.hostname.toLowerCase(),P||(this.hostname=CF.toASCII(this.hostname));var ue=this.port?":"+this.port:"",se=this.hostname||"";this.host=se+ue,this.href+=this.host,P&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!IF[u])for(var p=0,b=G_.length;p<b;p++){var ge=G_[p];if(a.indexOf(ge)!==-1){var Ye=encodeURIComponent(ge);Ye===ge&&(Ye=escape(ge)),a=a.split(ge).join(Ye)}}var oe=a.indexOf("#");oe!==-1&&(this.hash=a.substr(oe),a=a.slice(0,oe));var B=a.indexOf("?");if(B!==-1?(this.search=a.substr(B),this.query=a.substr(B+1),e&&(this.query=q_.parse(this.query)),a=a.slice(0,B)):e&&(this.search="",this.query={}),a&&(this.pathname=a),Ra[u]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var ue=this.pathname||"",L=this.search||"";this.path=ue+L}return this.href=this.format(),this};function SF(i){return gr.isString(i)&&(i=hc(i)),i instanceof xi?i.format():xi.prototype.format.call(i)}xi.prototype.format=function(){var i=this.auth||"";i&&(i=encodeURIComponent(i),i=i.replace(/%3A/i,":"),i+="@");var e=this.protocol||"",n=this.pathname||"",t=this.hash||"",r=!1,o="";this.host?r=i+this.host:this.hostname&&(r=i+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&gr.isObject(this.query)&&Object.keys(this.query).length&&(o=q_.stringify(this.query));var s=this.search||o&&"?"+o||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||Ra[e])&&r!==!1?(r="//"+(r||""),n&&n.charAt(0)!=="/"&&(n="/"+n)):r||(r=""),t&&t.charAt(0)!=="#"&&(t="#"+t),s&&s.charAt(0)!=="?"&&(s="?"+s),n=n.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),s=s.replace("#","%23"),e+r+n+s+t};function TF(i,e){return hc(i,!1,!0).resolve(e)}xi.prototype.resolve=function(i){return this.resolveObject(hc(i,!1,!0)).format()};function AF(i,e){return i?hc(i,!1,!0).resolveObject(e):e}xi.prototype.resolveObject=function(i){if(gr.isString(i)){var e=new xi;e.parse(i,!1,!0),i=e}for(var n=new xi,t=Object.keys(this),r=0;r<t.length;r++){var o=t[r];n[o]=this[o]}if(n.hash=i.hash,i.href==="")return n.href=n.format(),n;if(i.slashes&&!i.protocol){for(var s=Object.keys(i),a=0;a<s.length;a++){var l=s[a];l!=="protocol"&&(n[l]=i[l])}return Ra[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(i.protocol&&i.protocol!==n.protocol){if(!Ra[i.protocol]){for(var c=Object.keys(i),u=0;u<c.length;u++){var d=c[u];n[d]=i[d]}return n.href=n.format(),n}if(n.protocol=i.protocol,!i.host&&!X_[i.protocol]){for(var b=(i.pathname||"").split("/");b.length&&!(i.host=b.shift()););i.host||(i.host=""),i.hostname||(i.hostname=""),b[0]!==""&&b.unshift(""),b.length<2&&b.unshift(""),n.pathname=b.join("/")}else n.pathname=i.pathname;if(n.search=i.search,n.query=i.query,n.host=i.host||"",n.auth=i.auth,n.hostname=i.hostname||i.host,n.port=i.port,n.pathname||n.search){var h=n.pathname||"",p=n.search||"";n.path=h+p}return n.slashes=n.slashes||i.slashes,n.href=n.format(),n}var f=n.pathname&&n.pathname.charAt(0)==="/",m=i.host||i.pathname&&i.pathname.charAt(0)==="/",_=m||f||n.host&&i.pathname,P=_,I=n.pathname&&n.pathname.split("/")||[],b=i.pathname&&i.pathname.split("/")||[],S=n.protocol&&!Ra[n.protocol];if(S&&(n.hostname="",n.port=null,n.host&&(I[0]===""?I[0]=n.host:I.unshift(n.host)),n.host="",i.protocol&&(i.hostname=null,i.port=null,i.host&&(b[0]===""?b[0]=i.host:b.unshift(i.host)),i.host=null),_=_&&(b[0]===""||I[0]==="")),m)n.host=i.host||i.host===""?i.host:n.host,n.hostname=i.hostname||i.hostname===""?i.hostname:n.hostname,n.search=i.search,n.query=i.query,I=b;else if(b.length)I||(I=[]),I.pop(),I=I.concat(b),n.search=i.search,n.query=i.query;else if(!gr.isNullOrUndefined(i.search)){if(S){n.hostname=n.host=I.shift();var k=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;k&&(n.auth=k.shift(),n.host=n.hostname=k.shift())}return n.search=i.search,n.query=i.query,(!gr.isNull(n.pathname)||!gr.isNull(n.search))&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!I.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var N=I.slice(-1)[0],X=(n.host||i.host||I.length>1)&&(N==="."||N==="..")||N==="",F=0,j=I.length;j>=0;j--)N=I[j],N==="."?I.splice(j,1):N===".."?(I.splice(j,1),F++):F&&(I.splice(j,1),F--);if(!_&&!P)for(;F--;F)I.unshift("..");_&&I[0]!==""&&(!I[0]||I[0].charAt(0)!=="/")&&I.unshift(""),X&&I.join("/").substr(-1)!=="/"&&I.push("");var z=I[0]===""||I[0]&&I[0].charAt(0)==="/";if(S){n.hostname=n.host=z?"":I.length?I.shift():"";var k=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;k&&(n.auth=k.shift(),n.host=n.hostname=k.shift())}return _=_||n.host&&I.length,_&&!z&&I.unshift(""),I.length?n.pathname=I.join("/"):(n.pathname=null,n.path=null),(!gr.isNull(n.pathname)||!gr.isNull(n.search))&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=i.auth||n.auth,n.slashes=n.slashes||i.slashes,n.href=n.format(),n};xi.prototype.parseHost=function(){var i=this.host,e=PF.exec(i);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),i=i.substr(0,i.length-e.length)),i&&(this.hostname=i)}});var SO=vi((iq,IO)=>{"use strict";IO.exports=(i,e={})=>{if(!i)return;let n={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\d*))?))?((((?:[^?#/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@/]*@)([^:/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#/]*\.[^?#/.]+(?:[?#]|$)))*\/?)?([^?#/]*))(?:\?([^#]*))?(?:#(.*))?)/}},t=n.parser[e.strictMode?"strict":"loose"].exec(i),r={},o=14;for(;o--;)r[n.key[o]]=t[o]||"";return r[n.q.name]={},r[n.key[12]].replace(n.q.parser,function(s,a,l){a&&(r[n.q.name][a]=l)}),r}});var RO=vi((jh,NO)=>{"use strict";Object.defineProperty(jh,"__esModule",{value:!0});var AO=function(){function i(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,n,t){return n&&i(e.prototype,n),t&&i(e,t),e}}();function DO(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}var Mc=function(){function i(e,n,t){n===void 0&&(n=!1),DO(this,i),this._fn=e,this._once=n,this._thisArg=t,this._next=this._prev=this._owner=null}return AO(i,[{key:"detach",value:function(){return this._owner===null?!1:(this._owner.detach(this),!0)}}]),i}();function TO(i,e){return i._head?(i._tail._next=e,e._prev=i._tail,i._tail=e):(i._head=e,i._tail=e),e._owner=i,e}var kO=function(){function i(){DO(this,i),this._head=this._tail=void 0}return AO(i,[{key:"handlers",value:function(){var n=arguments.length<=0||arguments[0]===void 0?!1:arguments[0],t=this._head;if(n)return!!t;for(var r=[];t;)r.push(t),t=t._next;return r}},{key:"has",value:function(n){if(!(n instanceof Mc))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return n._owner===this}},{key:"dispatch",value:function(){var n=this._head;if(!n)return!1;for(;n;)n._once&&this.detach(n),n._fn.apply(n._thisArg,arguments),n=n._next;return!0}},{key:"add",value:function(n){var t=arguments.length<=1||arguments[1]===void 0?null:arguments[1];if(typeof n!="function")throw new Error("MiniSignal#add(): First arg must be a Function.");return TO(this,new Mc(n,!1,t))}},{key:"once",value:function(n){var t=arguments.length<=1||arguments[1]===void 0?null:arguments[1];if(typeof n!="function")throw new Error("MiniSignal#once(): First arg must be a Function.");return TO(this,new Mc(n,!0,t))}},{key:"detach",value:function(n){if(!(n instanceof Mc))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return n._owner!==this?this:(n._prev&&(n._prev._next=n._next),n._next&&(n._next._prev=n._prev),n===this._head?(this._head=n._next,n._next===null&&(this._tail=null)):n===this._tail&&(this._tail=n._prev,this._tail._next=null),n._owner=null,this)}},{key:"detachAll",value:function(){var n=this._head;if(!n)return this;for(this._head=this._tail=null;n;)n._owner=null,n=n._next;return this}}]),i}();kO.MiniSignalBinding=Mc;jh.default=kO;NO.exports=jh.default});var jy=null;var gf=1;function Tn(i){let e=jy;return jy=i,e}var By={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function WS(i){if(!(yf(i)&&!i.dirty)&&!(!i.dirty&&i.lastCleanEpoch===gf)){if(!i.producerMustRecompute(i)&&!_f(i)){i.dirty=!1,i.lastCleanEpoch=gf;return}i.producerRecomputeValue(i),i.dirty=!1,i.lastCleanEpoch=gf}}function Vy(i){return i&&(i.nextProducerIndex=0),Tn(i)}function Uy(i,e){if(Tn(e),!(!i||i.producerNode===void 0||i.producerIndexOfThis===void 0||i.producerLastReadVersion===void 0)){if(yf(i))for(let n=i.nextProducerIndex;n<i.producerNode.length;n++)vf(i.producerNode[n],i.producerIndexOfThis[n]);for(;i.producerNode.length>i.nextProducerIndex;)i.producerNode.pop(),i.producerLastReadVersion.pop(),i.producerIndexOfThis.pop()}}function _f(i){iu(i);for(let e=0;e<i.producerNode.length;e++){let n=i.producerNode[e],t=i.producerLastReadVersion[e];if(t!==n.version||(WS(n),t!==n.version))return!0}return!1}function zy(i){if(iu(i),yf(i))for(let e=0;e<i.producerNode.length;e++)vf(i.producerNode[e],i.producerIndexOfThis[e]);i.producerNode.length=i.producerLastReadVersion.length=i.producerIndexOfThis.length=0,i.liveConsumerNode&&(i.liveConsumerNode.length=i.liveConsumerIndexOfThis.length=0)}function vf(i,e){if(GS(i),iu(i),i.liveConsumerNode.length===1)for(let t=0;t<i.producerNode.length;t++)vf(i.producerNode[t],i.producerIndexOfThis[t]);let n=i.liveConsumerNode.length-1;if(i.liveConsumerNode[e]=i.liveConsumerNode[n],i.liveConsumerIndexOfThis[e]=i.liveConsumerIndexOfThis[n],i.liveConsumerNode.length--,i.liveConsumerIndexOfThis.length--,e<i.liveConsumerNode.length){let t=i.liveConsumerIndexOfThis[e],r=i.liveConsumerNode[e];iu(r),r.producerIndexOfThis[t]=e}}function yf(i){return i.consumerIsAlwaysLive||(i?.liveConsumerNode?.length??0)>0}function iu(i){i.producerNode??=[],i.producerIndexOfThis??=[],i.producerLastReadVersion??=[]}function GS(i){i.liveConsumerNode??=[],i.liveConsumerIndexOfThis??=[]}function XS(){throw new Error}var qS=XS;function Hy(i){qS=i}function Fe(i){return typeof i=="function"}function ru(i){let n=i(t=>{Error.call(t),t.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var ou=ru(i=>function(n){i(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((t,r)=>`${r+1}) ${t.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Qo(i,e){if(i){let n=i.indexOf(e);0<=n&&i.splice(n,1)}}var Pn=class i{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:t}=this;if(Fe(t))try{t()}catch(o){e=o instanceof ou?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{Wy(o)}catch(s){e=e??[],s instanceof ou?e=[...e,...s.errors]:e.push(s)}}if(e)throw new ou(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Wy(e);else{if(e instanceof i){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Qo(n,e)}remove(e){let{_finalizers:n}=this;n&&Qo(n,e),e instanceof i&&e._removeParent(this)}};Pn.EMPTY=(()=>{let i=new Pn;return i.closed=!0,i})();var Cf=Pn.EMPTY;function su(i){return i instanceof Pn||i&&"closed"in i&&Fe(i.remove)&&Fe(i.add)&&Fe(i.unsubscribe)}function Wy(i){Fe(i)?i():i.unsubscribe()}var Di={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Qs={setTimeout(i,e,...n){let{delegate:t}=Qs;return t?.setTimeout?t.setTimeout(i,e,...n):setTimeout(i,e,...n)},clearTimeout(i){let{delegate:e}=Qs;return(e?.clearTimeout||clearTimeout)(i)},delegate:void 0};function au(i){Qs.setTimeout(()=>{let{onUnhandledError:e}=Di;if(e)e(i);else throw i})}function Nr(){}var Gy=(()=>bf("C",void 0,void 0))();function Xy(i){return bf("E",void 0,i)}function qy(i){return bf("N",i,void 0)}function bf(i,e,n){return{kind:i,value:e,error:n}}var Jo=null;function Js(i){if(Di.useDeprecatedSynchronousErrorHandling){let e=!Jo;if(e&&(Jo={errorThrown:!1,error:null}),i(),e){let{errorThrown:n,error:t}=Jo;if(Jo=null,n)throw t}}else i()}function Yy(i){Di.useDeprecatedSynchronousErrorHandling&&Jo&&(Jo.errorThrown=!0,Jo.error=i)}var es=class extends Pn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,su(e)&&e.add(this)):this.destination=$S}static create(e,n,t){return new Rr(e,n,t)}next(e){this.isStopped?wf(qy(e),this):this._next(e)}error(e){this.isStopped?wf(Xy(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?wf(Gy,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},YS=Function.prototype.bind;function Pf(i,e){return YS.call(i,e)}var xf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(t){lu(t)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(t){lu(t)}else lu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){lu(n)}}},Rr=class extends es{constructor(e,n,t){super();let r;if(Fe(e)||!e)r={next:e??void 0,error:n??void 0,complete:t??void 0};else{let o;this&&Di.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&Pf(e.next,o),error:e.error&&Pf(e.error,o),complete:e.complete&&Pf(e.complete,o)}):r=e}this.destination=new xf(r)}};function lu(i){Di.useDeprecatedSynchronousErrorHandling?Yy(i):au(i)}function ZS(i){throw i}function wf(i,e){let{onStoppedNotification:n}=Di;n&&Qs.setTimeout(()=>n(i,e))}var $S={closed:!0,next:Nr,error:ZS,complete:Nr};var ea=(()=>typeof Symbol=="function"&&Symbol.observable||"@@observable")();function fo(i){return i}function Zy(i){return i.length===0?fo:i.length===1?i[0]:function(n){return i.reduce((t,r)=>r(t),n)}}var gt=(()=>{class i{constructor(n){n&&(this._subscribe=n)}lift(n){let t=new i;return t.source=this,t.operator=n,t}subscribe(n,t,r){let o=QS(n)?n:new Rr(n,t,r);return Js(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(t){n.error(t)}}forEach(n,t){return t=$y(t),new t((r,o)=>{let s=new Rr({next:a=>{try{n(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(n){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(n)}[ea](){return this}pipe(...n){return Zy(n)(this)}toPromise(n){return n=$y(n),new n((t,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>t(o))})}}return i.create=e=>new i(e),i})();function $y(i){var e;return(e=i??Di.Promise)!==null&&e!==void 0?e:Promise}function KS(i){return i&&Fe(i.next)&&Fe(i.error)&&Fe(i.complete)}function QS(i){return i&&i instanceof es||KS(i)&&su(i)}function JS(i){return Fe(i?.lift)}function nt(i){return e=>{if(JS(e))return e.lift(function(n){try{return i(n,this)}catch(t){this.error(t)}});throw new TypeError("Unable to lift unknown Observable type")}}function ct(i,e,n,t,r){return new Mf(i,e,n,t,r)}var Mf=class extends es{constructor(e,n,t,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=t?function(){try{t()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var Ky=ru(i=>function(){i(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var _e=(()=>{class i extends gt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let t=new cu(this,this);return t.operator=n,t}_throwIfClosed(){if(this.closed)throw new Ky}next(n){Js(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let t of this.currentObservers)t.next(n)}})}error(n){Js(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:t}=this;for(;t.length;)t.shift().error(n)}})}complete(){Js(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:t,isStopped:r,observers:o}=this;return t||r?Cf:(this.currentObservers=null,o.push(n),new Pn(()=>{this.currentObservers=null,Qo(o,n)}))}_checkFinalizedStatuses(n){let{hasError:t,thrownError:r,isStopped:o}=this;t?n.error(r):o&&n.complete()}asObservable(){let n=new gt;return n.source=this,n}}return i.create=(e,n)=>new cu(e,n),i})(),cu=class extends _e{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,t;(t=(n=this.destination)===null||n===void 0?void 0:n.next)===null||t===void 0||t.call(n,e)}error(e){var n,t;(t=(n=this.destination)===null||n===void 0?void 0:n.error)===null||t===void 0||t.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,t;return(t=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&t!==void 0?t:Cf}};var ts=class extends _e{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:t}=this;if(e)throw n;return this._throwIfClosed(),t}next(e){super.next(this._value=e)}};var vl={now(){return(vl.delegate||Date).now()},delegate:void 0};var An=class extends _e{constructor(e=1/0,n=1/0,t=vl){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=t,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:t,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:s}=this;n||(t.push(e),!r&&t.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:t,_buffer:r}=this,o=r.slice();for(let s=0;s<o.length&&!e.closed;s+=t?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:t,_infiniteTimeWindow:r}=this,o=(r?1:2)*e;if(e<1/0&&o<t.length&&t.splice(0,t.length-o),!r){let s=n.now(),a=0;for(let l=1;l<t.length&&t[l]<=s;l+=2)a=l;a&&t.splice(0,a+1)}}};var uu=class extends Pn{constructor(e,n){super()}schedule(e,n=0){return this}};var yl={setInterval(i,e,...n){let{delegate:t}=yl;return t?.setInterval?t.setInterval(i,e,...n):setInterval(i,e,...n)},clearInterval(i){let{delegate:e}=yl;return(e?.clearInterval||clearInterval)(i)},delegate:void 0};var du=class extends uu{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var t;if(this.closed)return this;this.state=e;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,n)),this.pending=!0,this.delay=n,this.id=(t=this.id)!==null&&t!==void 0?t:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,t=0){return yl.setInterval(e.flush.bind(e,this),t)}recycleAsyncId(e,n,t=0){if(t!=null&&this.delay===t&&this.pending===!1)return n;n!=null&&yl.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let t=this._execute(e,n);if(t)return t;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let t=!1,r;try{this.work(e)}catch(o){t=!0,r=o||new Error("Scheduled action threw falsy error")}if(t)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:t}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Qo(t,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var ta=class i{constructor(e,n=i.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,t){return new this.schedulerActionCtor(this,e).schedule(t,n)}};ta.now=vl.now;var hu=class extends ta{constructor(e,n=ta.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let t;this._active=!0;do if(t=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,t){for(;e=n.shift();)e.unsubscribe();throw t}}};var Of=new hu(du),Qy=Of;var pu=new gt(i=>i.complete());function fu(i){return i&&Fe(i.schedule)}function Ef(i){return i[i.length-1]}function Jy(i){return Fe(Ef(i))?i.pop():void 0}function mo(i){return fu(Ef(i))?i.pop():void 0}function eC(i,e){return typeof Ef(i)=="number"?i.pop():e}function nC(i,e,n,t){function r(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{c(t.next(u))}catch(d){s(d)}}function l(u){try{c(t.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):r(u.value).then(a,l)}c((t=t.apply(i,e||[])).next())})}function tC(i){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&i[e],t=0;if(n)return n.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&t>=i.length&&(i=void 0),{value:i&&i[t++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ns(i){return this instanceof ns?(this.v=i,this):new ns(i)}function iC(i,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n.apply(i,e||[]),r,o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(h){t[h]&&(r[h]=function(p){return new Promise(function(f,m){o.push([h,p,f,m])>1||a(h,p)})})}function a(h,p){try{l(t[h](p))}catch(f){d(o[0][3],f)}}function l(h){h.value instanceof ns?Promise.resolve(h.value.v).then(c,u):d(o[0][2],h)}function c(h){a("next",h)}function u(h){a("throw",h)}function d(h,p){h(p),o.shift(),o.length&&a(o[0][0],o[0][1])}}function rC(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],n;return e?e.call(i):(i=typeof tC=="function"?tC(i):i[Symbol.iterator](),n={},t("next"),t("throw"),t("return"),n[Symbol.asyncIterator]=function(){return this},n);function t(o){n[o]=i[o]&&function(s){return new Promise(function(a,l){s=i[o](s),r(a,l,s.done,s.value)})}}function r(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}}var na=i=>i&&typeof i.length=="number"&&typeof i!="function";function mu(i){return Fe(i?.then)}function gu(i){return Fe(i[ea])}function _u(i){return Symbol.asyncIterator&&Fe(i?.[Symbol.asyncIterator])}function vu(i){return new TypeError(`You provided ${i!==null&&typeof i=="object"?"an invalid object":`'${i}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function eT(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var yu=eT();function Cu(i){return Fe(i?.[yu])}function bu(i){return iC(this,arguments,function*(){let n=i.getReader();try{for(;;){let{value:t,done:r}=yield ns(n.read());if(r)return yield ns(void 0);yield yield ns(t)}}finally{n.releaseLock()}})}function Pu(i){return Fe(i?.getReader)}function _t(i){if(i instanceof gt)return i;if(i!=null){if(gu(i))return tT(i);if(na(i))return nT(i);if(mu(i))return iT(i);if(_u(i))return oC(i);if(Cu(i))return rT(i);if(Pu(i))return oT(i)}throw vu(i)}function tT(i){return new gt(e=>{let n=i[ea]();if(Fe(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function nT(i){return new gt(e=>{for(let n=0;n<i.length&&!e.closed;n++)e.next(i[n]);e.complete()})}function iT(i){return new gt(e=>{i.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,au)})}function rT(i){return new gt(e=>{for(let n of i)if(e.next(n),e.closed)return;e.complete()})}function oC(i){return new gt(e=>{sT(i,e).catch(n=>e.error(n))})}function oT(i){return oC(bu(i))}function sT(i,e){var n,t,r,o;return nC(this,void 0,void 0,function*(){try{for(n=rC(i);t=yield n.next(),!t.done;){let s=t.value;if(e.next(s),e.closed)return}}catch(s){r={error:s}}finally{try{t&&!t.done&&(o=n.return)&&(yield o.call(n))}finally{if(r)throw r.error}}e.complete()})}function yi(i,e,n,t=0,r=!1){let o=e.schedule(function(){n(),r?i.add(this.schedule(null,t)):this.unsubscribe()},t);if(i.add(o),!r)return o}function wu(i,e=0){return nt((n,t)=>{n.subscribe(ct(t,r=>yi(t,i,()=>t.next(r),e),()=>yi(t,i,()=>t.complete(),e),r=>yi(t,i,()=>t.error(r),e)))})}function xu(i,e=0){return nt((n,t)=>{t.add(i.schedule(()=>n.subscribe(t),e))})}function sC(i,e){return _t(i).pipe(xu(e),wu(e))}function aC(i,e){return _t(i).pipe(xu(e),wu(e))}function lC(i,e){return new gt(n=>{let t=0;return e.schedule(function(){t===i.length?n.complete():(n.next(i[t++]),n.closed||this.schedule())})})}function cC(i,e){return new gt(n=>{let t;return yi(n,e,()=>{t=i[yu](),yi(n,e,()=>{let r,o;try{({value:r,done:o}=t.next())}catch(s){n.error(s);return}o?n.complete():n.next(r)},0,!0)}),()=>Fe(t?.return)&&t.return()})}function Mu(i,e){if(!i)throw new Error("Iterable cannot be null");return new gt(n=>{yi(n,e,()=>{let t=i[Symbol.asyncIterator]();yi(n,e,()=>{t.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function uC(i,e){return Mu(bu(i),e)}function dC(i,e){if(i!=null){if(gu(i))return sC(i,e);if(na(i))return lC(i,e);if(mu(i))return aC(i,e);if(_u(i))return Mu(i,e);if(Cu(i))return cC(i,e);if(Pu(i))return uC(i,e)}throw vu(i)}function Vn(i,e){return e?dC(i,e):_t(i)}function Dn(...i){let e=mo(i);return Vn(i,e)}function Fr(i){return!!i&&(i instanceof gt||Fe(i.lift)&&Fe(i.subscribe))}function hC(i){return i instanceof Date&&!isNaN(i)}function xt(i,e){return nt((n,t)=>{let r=0;n.subscribe(ct(t,o=>{t.next(i.call(e,o,r++))}))})}var{isArray:aT}=Array;function lT(i,e){return aT(e)?i(...e):i(e)}function Ou(i){return xt(e=>lT(i,e))}var{isArray:cT}=Array,{getPrototypeOf:uT,prototype:dT,keys:hT}=Object;function pC(i){if(i.length===1){let e=i[0];if(cT(e))return{args:e,keys:null};if(pT(e)){let n=hT(e);return{args:n.map(t=>e[t]),keys:n}}}return{args:i,keys:null}}function pT(i){return i&&typeof i=="object"&&uT(i)===dT}function fC(i,e){return i.reduce((n,t,r)=>(n[t]=e[r],n),{})}function mC(i,e,n,t,r,o,s,a){let l=[],c=0,u=0,d=!1,h=()=>{d&&!l.length&&!c&&e.complete()},p=m=>c<t?f(m):l.push(m),f=m=>{o&&e.next(m),c++;let _=!1;_t(n(m,u++)).subscribe(ct(e,P=>{r?.(P),o?p(P):e.next(P)},()=>{_=!0},void 0,()=>{if(_)try{for(c--;l.length&&c<t;){let P=l.shift();s?yi(e,s,()=>f(P)):f(P)}h()}catch(P){e.error(P)}}))};return i.subscribe(ct(e,p,()=>{d=!0,h()})),()=>{a?.()}}function ir(i,e,n=1/0){return Fe(e)?ir((t,r)=>xt((o,s)=>e(t,o,r,s))(_t(i(t,r))),n):(typeof e=="number"&&(n=e),nt((t,r)=>mC(t,r,i,n)))}function Eu(i=1/0){return ir(fo,i)}function gC(){return Eu(1)}function Lr(...i){return gC()(Vn(i,mo(i)))}function Iu(i){return new gt(e=>{_t(i()).subscribe(e)})}function Cl(...i){let e=Jy(i),{args:n,keys:t}=pC(i),r=new gt(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),l=s,c=s;for(let u=0;u<s;u++){let d=!1;_t(n[u]).subscribe(ct(o,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||o.next(t?fC(t,a):a),o.complete())}))}});return e?r.pipe(Ou(e)):r}var fT=["addListener","removeListener"],mT=["addEventListener","removeEventListener"],gT=["on","off"];function ut(i,e,n,t){if(Fe(n)&&(t=n,n=void 0),t)return ut(i,e,n).pipe(Ou(t));let[r,o]=yT(i)?mT.map(s=>a=>i[s](e,a,n)):_T(i)?fT.map(_C(i,e)):vT(i)?gT.map(_C(i,e)):[];if(!r&&na(i))return ir(s=>ut(s,e,n))(_t(i));if(!r)throw new TypeError("Invalid event target");return new gt(s=>{let a=(...l)=>s.next(1<l.length?l:l[0]);return r(a),()=>o(a)})}function _C(i,e){return n=>t=>i[n](e,t)}function _T(i){return Fe(i.addListener)&&Fe(i.removeListener)}function vT(i){return Fe(i.on)&&Fe(i.off)}function yT(i){return Fe(i.addEventListener)&&Fe(i.removeEventListener)}function is(i=0,e,n=Qy){let t=-1;return e!=null&&(fu(e)?n=e:t=e),new gt(r=>{let o=hC(i)?+i-n.now():i;o<0&&(o=0);let s=0;return n.schedule(function(){r.closed||(r.next(s++),0<=t?this.schedule(void 0,t):r.complete())},o)})}function If(...i){let e=mo(i),n=eC(i,1/0),t=i;return t.length?t.length===1?_t(t[0]):Eu(n)(Vn(t,e)):pu}function ki(i,e){return nt((n,t)=>{let r=0;n.subscribe(ct(t,o=>i.call(e,o,r++)&&t.next(o)))})}function go(i){return nt((e,n)=>{let t=null,r=!1,o;t=e.subscribe(ct(n,void 0,void 0,s=>{o=_t(i(s,go(i)(e))),t?(t.unsubscribe(),t=null,o.subscribe(n)):r=!0})),r&&(t.unsubscribe(),t=null,o.subscribe(n))})}function bl(i,e){return Fe(e)?ir(i,e,1):ir(i,1)}function Sf(i,e=Of){return nt((n,t)=>{let r=null,o=null,s=null,a=()=>{if(r){r.unsubscribe(),r=null;let c=o;o=null,t.next(c)}};function l(){let c=s+i,u=e.now();if(u<c){r=this.schedule(void 0,c-u),t.add(r);return}a()}n.subscribe(ct(t,c=>{o=c,s=e.now(),r||(r=e.schedule(l,i),t.add(r))},()=>{a(),t.complete()},void 0,()=>{o=r=null}))})}function jr(i){return i<=0?()=>pu:nt((e,n)=>{let t=0;e.subscribe(ct(n,r=>{++t<=i&&(n.next(r),i<=t&&n.complete())}))})}function vC(){return nt((i,e)=>{i.subscribe(ct(e,Nr))})}function Pl(i){return xt(()=>i)}function Su(i,e){return e?n=>Lr(e.pipe(jr(1),vC()),n.pipe(Su(i))):ir((n,t)=>_t(i(n,t)).pipe(jr(1),Pl(n)))}function wl(i,e=fo){return i=i??CT,nt((n,t)=>{let r,o=!0;n.subscribe(ct(t,s=>{let a=e(s);(o||!i(r,a))&&(o=!1,r=a,t.next(s))}))})}function CT(i,e){return i===e}function Tu(i){return nt((e,n)=>{try{e.subscribe(n)}finally{n.add(i)}})}function yC(i={}){let{connector:e=()=>new _e,resetOnError:n=!0,resetOnComplete:t=!0,resetOnRefCountZero:r=!0}=i;return o=>{let s,a,l,c=0,u=!1,d=!1,h=()=>{a?.unsubscribe(),a=void 0},p=()=>{h(),s=l=void 0,u=d=!1},f=()=>{let m=s;p(),m?.unsubscribe()};return nt((m,_)=>{c++,!d&&!u&&h();let P=l=l??e();_.add(()=>{c--,c===0&&!d&&!u&&(a=Tf(f,r))}),P.subscribe(_),!s&&c>0&&(s=new Rr({next:I=>P.next(I),error:I=>{d=!0,h(),a=Tf(p,n,I),P.error(I)},complete:()=>{u=!0,h(),a=Tf(p,t),P.complete()}}),_t(m).subscribe(s))})(o)}}function Tf(i,e,...n){if(e===!0){i();return}if(e===!1)return;let t=new Rr({next:()=>{t.unsubscribe(),i()}});return _t(e(...n)).subscribe(t)}function ia(i,e,n){let t,r=!1;return i&&typeof i=="object"?{bufferSize:t=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:n}=i:t=i??1/0,yC({connector:()=>new An(t,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function Af(i){return nt((e,n)=>{let t=!1,r=ct(n,()=>{r?.unsubscribe(),t=!0},Nr);_t(i).subscribe(r),e.subscribe(ct(n,o=>t&&n.next(o)))})}function Df(...i){let e=mo(i);return nt((n,t)=>{(e?Lr(i,n,e):Lr(i,n)).subscribe(t)})}function Ni(i,e){return nt((n,t)=>{let r=null,o=0,s=!1,a=()=>s&&!r&&t.complete();n.subscribe(ct(t,l=>{r?.unsubscribe();let c=0,u=o++;_t(i(l,u)).subscribe(r=ct(t,d=>t.next(e?e(l,d,u,c++):d),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function xe(i){return nt((e,n)=>{_t(i).subscribe(ct(n,()=>n.complete(),Nr)),!n.closed&&e.subscribe(n)})}function kf(i,e=!1){return nt((n,t)=>{let r=0;n.subscribe(ct(t,o=>{let s=i(o,r++);(s||e)&&t.next(o),!s&&t.complete()}))})}function Au(i,e,n){let t=Fe(i)||e||n?{next:i,error:e,complete:n}:i;return t?nt((r,o)=>{var s;(s=t.subscribe)===null||s===void 0||s.call(t);let a=!0;r.subscribe(ct(o,l=>{var c;(c=t.next)===null||c===void 0||c.call(t,l),o.next(l)},()=>{var l;a=!1,(l=t.complete)===null||l===void 0||l.call(t),o.complete()},l=>{var c;a=!1,(c=t.error)===null||c===void 0||c.call(t,l),o.error(l)},()=>{var l,c;a&&((l=t.unsubscribe)===null||l===void 0||l.call(t)),(c=t.finalize)===null||c===void 0||c.call(t)}))}):fo}function It(i){for(let e in i)if(i[e]===It)return e;throw Error("Could not find renamed property on target object.")}function Du(i,e){for(let n in e)e.hasOwnProperty(n)&&!i.hasOwnProperty(n)&&(i[n]=e[n])}function wn(i){if(typeof i=="string")return i;if(Array.isArray(i))return"["+i.map(wn).join(", ")+"]";if(i==null)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;let e=i.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Zf(i,e){return i==null||i===""?e===null?"":e:e==null||e===""?i:i+" "+e}var PT=It({__forward_ref__:It});function Xt(i){return i.__forward_ref__=Xt,i.toString=function(){return wn(this())},i}function kn(i){return ab(i)?i():i}function ab(i){return typeof i=="function"&&i.hasOwnProperty(PT)&&i.__forward_ref__===Xt}function lb(i){return i&&!!i.\u0275providers}var cb="https://g.co/ng/security#xss",ne=class extends Error{constructor(e,n){super(hd(e,n)),this.code=e}};function hd(i,e){return`${`NG0${Math.abs(i)}`}${e?": "+e:""}`}var wT=It({\u0275cmp:It}),xT=It({\u0275dir:It}),MT=It({\u0275pipe:It}),OT=It({\u0275mod:It}),Xu=It({\u0275fac:It}),xl=It({__NG_ELEMENT_ID__:It}),CC=It({__NG_ENV_ID__:It});function ss(i){return typeof i=="string"?i:i==null?"":String(i)}function ET(i){return typeof i=="function"?i.name||i.toString():typeof i=="object"&&i!=null&&typeof i.type=="function"?i.type.name||i.type.toString():ss(i)}function IT(i,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${i}`:"";throw new ne(-200,`Circular dependency in DI detected for ${i}${n}`)}function Jm(i,e){let n=e?` in ${e}`:"";throw new ne(-201,!1)}function ST(i,e){i==null&&TT(e,i,null,"!=")}function TT(i,e,n,t){throw new Error(`ASSERTION ERROR: ${i}`+(t==null?"":` [Expected=> ${n} ${t} ${e} <=Actual]`))}function Y(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function qt(i){return{providers:i.providers||[],imports:i.imports||[]}}function eg(i){return bC(i,ub)||bC(i,db)}function bC(i,e){return i.hasOwnProperty(e)?i[e]:null}function AT(i){let e=i&&(i[ub]||i[db]);return e||null}function PC(i){return i&&(i.hasOwnProperty(wC)||i.hasOwnProperty(DT))?i[wC]:null}var ub=It({\u0275prov:It}),wC=It({\u0275inj:It}),db=It({ngInjectableDef:It}),DT=It({ngInjectorDef:It}),ot=function(i){return i[i.Default=0]="Default",i[i.Host=1]="Host",i[i.Self=2]="Self",i[i.SkipSelf=4]="SkipSelf",i[i.Optional=8]="Optional",i}(ot||{}),$f;function kT(){return $f}function Un(i){let e=$f;return $f=i,e}function hb(i,e,n){let t=eg(i);if(t&&t.providedIn=="root")return t.value===void 0?t.value=t.factory():t.value;if(n&ot.Optional)return null;if(e!==void 0)return e;Jm(wn(i),"Injector")}var Kt=globalThis;var fe=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=Y({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};var NT={},Il=NT,Kf="__NG_DI_FLAG__",qu="ngTempTokenPath",RT="ngTokenPath",FT=/\n/gm,LT="\u0275",xC="__source",Ml;function _o(i){let e=Ml;return Ml=i,e}function jT(i,e=ot.Default){if(Ml===void 0)throw new ne(-203,!1);return Ml===null?hb(i,void 0,e):Ml.get(i,e&ot.Optional?null:void 0,e)}function D(i,e=ot.Default){return(kT()||jT)(kn(i),e)}function vt(i,e=ot.Default){return D(i,pd(e))}function pd(i){return typeof i>"u"||typeof i=="number"?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function Qf(i){let e=[];for(let n=0;n<i.length;n++){let t=kn(i[n]);if(Array.isArray(t)){if(t.length===0)throw new ne(900,!1);let r,o=ot.Default;for(let s=0;s<t.length;s++){let a=t[s],l=BT(a);typeof l=="number"?l===-1?r=a.token:o|=l:r=a}e.push(D(r,o))}else e.push(D(t))}return e}function pb(i,e){return i[Kf]=e,i.prototype[Kf]=e,i}function BT(i){return i[Kf]}function VT(i,e,n,t){let r=i[qu];throw e[xC]&&r.unshift(e[xC]),i.message=UT(`
`+i.message,r,n,t),i[RT]=r,i[qu]=null,i}function UT(i,e,n,t=null){i=i&&i.charAt(0)===`
`&&i.charAt(1)==LT?i.slice(2):i;let r=wn(e);if(Array.isArray(e))r=e.map(wn).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):wn(a)))}r=`{${o.join(", ")}}`}return`${n}${t?"("+t+")":""}[${r}]: ${i.replace(FT,`
  `)}`}function Ll(i){return{toString:i}.toString()}var fb=function(i){return i[i.OnPush=0]="OnPush",i[i.Default=1]="Default",i}(fb||{}),ar=function(i){return i[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",i}(ar||{}),la={},zn=[];function mb(i,e,n){let t=i.length;for(;;){let r=i.indexOf(e,n);if(r===-1)return r;if(r===0||i.charCodeAt(r-1)<=32){let o=e.length;if(r+o===t||i.charCodeAt(r+o)<=32)return r}n=r+1}}function Jf(i,e,n){let t=0;for(;t<n.length;){let r=n[t];if(typeof r=="number"){if(r!==0)break;t++;let o=n[t++],s=n[t++],a=n[t++];i.setAttribute(e,s,a,o)}else{let o=r,s=n[++t];HT(o)?i.setProperty(e,o,s):i.setAttribute(e,o,s),t++}}return t}function zT(i){return i===3||i===4||i===6}function HT(i){return i.charCodeAt(0)===64}function Sl(i,e){if(!(e===null||e.length===0))if(i===null||i.length===0)i=e.slice();else{let n=-1;for(let t=0;t<e.length;t++){let r=e[t];typeof r=="number"?n=r:n===0||(n===-1||n===2?MC(i,n,r,null,e[++t]):MC(i,n,r,null,null))}}return i}function MC(i,e,n,t,r){let o=0,s=i.length;if(e===-1)s=-1;else for(;o<i.length;){let a=i[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<i.length;){let a=i[o];if(typeof a=="number")break;if(a===n){if(t===null){r!==null&&(i[o+1]=r);return}else if(t===i[o+1]){i[o+2]=r;return}}o++,t!==null&&o++,r!==null&&o++}s!==-1&&(i.splice(s,0,e),o=s+1),i.splice(o++,0,n),t!==null&&i.splice(o++,0,t),r!==null&&i.splice(o++,0,r)}var gb="ng-template";function WT(i,e,n){let t=0,r=!0;for(;t<i.length;){let o=i[t++];if(typeof o=="string"&&r){let s=i[t++];if(n&&o==="class"&&mb(s.toLowerCase(),e,0)!==-1)return!0}else if(o===1){for(;t<i.length&&typeof(o=i[t++])=="string";)if(o.toLowerCase()===e)return!0;return!1}else typeof o=="number"&&(r=!1)}return!1}function _b(i){return i.type===4&&i.value!==gb}function GT(i,e,n){let t=i.type===4&&!n?gb:i.value;return e===t}function XT(i,e,n){let t=4,r=i.attrs||[],o=ZT(r),s=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!s&&!Ri(t)&&!Ri(l))return!1;if(s&&Ri(l))continue;s=!1,t=l|t&1;continue}if(!s)if(t&4){if(t=2|t&1,l!==""&&!GT(i,l,n)||l===""&&e.length===1){if(Ri(t))return!1;s=!0}}else{let c=t&8?l:e[++a];if(t&8&&i.attrs!==null){if(!WT(i.attrs,c,n)){if(Ri(t))return!1;s=!0}continue}let u=t&8?"class":l,d=qT(u,r,_b(i),n);if(d===-1){if(Ri(t))return!1;s=!0;continue}if(c!==""){let h;d>o?h="":h=r[d+1].toLowerCase();let p=t&8?h:null;if(p&&mb(p,c,0)!==-1||t&2&&c!==h){if(Ri(t))return!1;s=!0}}}}return Ri(t)||s}function Ri(i){return(i&1)===0}function qT(i,e,n,t){if(e===null)return-1;let r=0;if(t||!n){let o=!1;for(;r<e.length;){let s=e[r];if(s===i)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return $T(e,i)}function vb(i,e,n=!1){for(let t=0;t<e.length;t++)if(XT(i,e[t],n))return!0;return!1}function YT(i){let e=i.attrs;if(e!=null){let n=e.indexOf(5);if(!(n&1))return e[n+1]}return null}function ZT(i){for(let e=0;e<i.length;e++){let n=i[e];if(zT(n))return e}return i.length}function $T(i,e){let n=i.indexOf(4);if(n>-1)for(n++;n<i.length;){let t=i[n];if(typeof t=="number")return-1;if(t===e)return n;n++}return-1}function KT(i,e){e:for(let n=0;n<e.length;n++){let t=e[n];if(i.length===t.length){for(let r=0;r<i.length;r++)if(i[r]!==t[r])continue e;return!0}}return!1}function OC(i,e){return i?":not("+e.trim()+")":e}function QT(i){let e=i[0],n=1,t=2,r="",o=!1;for(;n<i.length;){let s=i[n];if(typeof s=="string")if(t&2){let a=i[++n];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else t&8?r+="."+s:t&4&&(r+=" "+s);else r!==""&&!Ri(s)&&(e+=OC(o,r),r=""),t=s,o=o||!Ri(t);n++}return r!==""&&(e+=OC(o,r)),e}function JT(i){return i.map(QT).join(",")}function e1(i){let e=[],n=[],t=1,r=2;for(;t<i.length;){let o=i[t];if(typeof o=="string")r===2?o!==""&&e.push(o,i[++t]):r===8&&n.push(o);else{if(!Ri(r))break;r=o}t++}return{attrs:e,classes:n}}function ie(i){return Ll(()=>{let e=bb(i),n=Xe(Q({},e),{decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===fb.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&i.dependencies||null,getStandaloneInjector:null,signals:i.signals??!1,data:i.data||{},encapsulation:i.encapsulation||ar.Emulated,styles:i.styles||zn,_:null,schemas:i.schemas||null,tView:null,id:""});Pb(n);let t=i.dependencies;return n.directiveDefs=IC(t,!1),n.pipeDefs=IC(t,!0),n.id=o1(n),n})}function t1(i){return ca(i)||yb(i)}function n1(i){return i!==null}function Yt(i){return Ll(()=>({type:i.type,bootstrap:i.bootstrap||zn,declarations:i.declarations||zn,imports:i.imports||zn,exports:i.exports||zn,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function EC(i,e){if(i==null)return la;let n={};for(let t in i)if(i.hasOwnProperty(t)){let r=i[t],o=r;Array.isArray(r)&&(o=r[1],r=r[0]),n[r]=t,e&&(e[r]=o)}return n}function He(i){return Ll(()=>{let e=bb(i);return Pb(e),e})}function dr(i){return{type:i.type,name:i.name,factory:null,pure:i.pure!==!1,standalone:i.standalone===!0,onDestroy:i.type.prototype.ngOnDestroy||null}}function ca(i){return i[wT]||null}function yb(i){return i[xT]||null}function Cb(i){return i[MT]||null}function i1(i){let e=ca(i)||yb(i)||Cb(i);return e!==null?e.standalone:!1}function r1(i,e){let n=i[OT]||null;if(!n&&e===!0)throw new Error(`Type ${wn(i)} does not have '\u0275mod' property.`);return n}function bb(i){let e={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:i.inputs||la,exportAs:i.exportAs||null,standalone:i.standalone===!0,signals:i.signals===!0,selectors:i.selectors||zn,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:EC(i.inputs,e),outputs:EC(i.outputs),debugInfo:null}}function Pb(i){i.features?.forEach(e=>e(i))}function IC(i,e){if(!i)return null;let n=e?Cb:t1;return()=>(typeof i=="function"?i():i).map(t=>n(t)).filter(n1)}function o1(i){let e=0,n=[i.selectors,i.ngContentSelectors,i.hostVars,i.hostAttrs,i.consts,i.vars,i.decls,i.encapsulation,i.standalone,i.signals,i.exportAs,JSON.stringify(i.inputs),JSON.stringify(i.outputs),Object.getOwnPropertyNames(i.type.prototype),!!i.contentQueries,!!i.viewQuery].join("|");for(let r of n)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483647+1,"c"+e}var hr=0,$e=1,je=2,tn=3,Li=4,ti=5,Tl=6,Al=7,ji=8,ua=9,Br=10,Gt=11,Dl=12,SC=13,ga=14,Bi=15,jl=16,ra=17,sr=18,fd=19,wb=20,Ol=21,Nf=22,as=23,Hn=25,tg=1;var ls=7,Yu=8,da=9,ei=10,ha=function(i){return i[i.None=0]="None",i[i.HasTransplantedViews=2]="HasTransplantedViews",i[i.HasChildViewsToRefresh=4]="HasChildViewsToRefresh",i}(ha||{});function vo(i){return Array.isArray(i)&&typeof i[tg]=="object"}function Vi(i){return Array.isArray(i)&&i[tg]===!0}function ng(i){return(i.flags&4)!==0}function md(i){return i.componentOffset>-1}function gd(i){return(i.flags&1)===1}function Vr(i){return!!i.template}function s1(i){return(i[je]&512)!==0}function cs(i,e){let n=i.hasOwnProperty(Xu);return n?i[Xu]:null}var em=class{constructor(e,n,t){this.previousValue=e,this.currentValue=n,this.firstChange=t}isFirstChange(){return this.firstChange}};function cn(){return xb}function xb(i){return i.type.prototype.ngOnChanges&&(i.setInput=l1),a1}cn.ngInherit=!0;function a1(){let i=Ob(this),e=i?.current;if(e){let n=i.previous;if(n===la)i.previous=e;else for(let t in e)n[t]=e[t];i.current=null,this.ngOnChanges(e)}}function l1(i,e,n,t){let r=this.declaredInputs[n],o=Ob(i)||c1(i,{previous:la,current:null}),s=o.current||(o.current={}),a=o.previous,l=a[r];s[r]=new em(l&&l.currentValue,e,a===la),i[t]=e}var Mb="__ngSimpleChanges__";function Ob(i){return i[Mb]||null}function c1(i,e){return i[Mb]=e}var TC=null;var rr=function(i,e,n){TC?.(i,e,n)},u1="svg",d1="math",h1=!1;function p1(){return h1}function lr(i){for(;Array.isArray(i);)i=i[hr];return i}function f1(i){for(;Array.isArray(i);){if(typeof i[tg]=="object")return i;i=i[hr]}return null}function Eb(i,e){return lr(e[i])}function Ci(i,e){return lr(e[i.index])}function Ib(i,e){return i.data[e]}function ig(i,e){return i[e]}function bo(i,e){let n=e[i];return vo(n)?n:n[hr]}function m1(i){return(i[je]&4)===4}function rg(i){return(i[je]&128)===128}function g1(i){return Vi(i[tn])}function pa(i,e){return e==null?null:i[e]}function Sb(i){i[ra]=0}function _1(i){i[je]&1024||(i[je]|=1024,rg(i)&&kl(i))}function v1(i,e){for(;i>0;)e=e[ga],i--;return e}function Tb(i){return i[je]&9216||i[as]?.dirty}function tm(i){Tb(i)?kl(i):i[je]&64&&(p1()?(i[je]|=1024,kl(i)):i[Br].changeDetectionScheduler?.notify())}function kl(i){i[Br].changeDetectionScheduler?.notify();let e=i[tn];for(;e!==null&&!(Vi(e)&&e[je]&ha.HasChildViewsToRefresh||vo(e)&&e[je]&8192);){if(Vi(e))e[je]|=ha.HasChildViewsToRefresh;else if(e[je]|=8192,!rg(e))break;e=e[tn]}}function y1(i,e){if((i[je]&256)===256)throw new ne(911,!1);i[Ol]===null&&(i[Ol]=[]),i[Ol].push(e)}var qe={lFrame:jb(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function C1(){return qe.lFrame.elementDepthCount}function b1(){qe.lFrame.elementDepthCount++}function P1(){qe.lFrame.elementDepthCount--}function Ab(){return qe.bindingsEnabled}function Db(){return qe.skipHydrationRootTNode!==null}function w1(i){return qe.skipHydrationRootTNode===i}function x1(){qe.skipHydrationRootTNode=null}function it(){return qe.lFrame.lView}function an(){return qe.lFrame.tView}function H(i){return qe.lFrame.contextLView=i,i[ji]}function W(i){return qe.lFrame.contextLView=null,i}function ni(){let i=kb();for(;i!==null&&i.type===64;)i=i.parent;return i}function kb(){return qe.lFrame.currentTNode}function M1(){let i=qe.lFrame,e=i.currentTNode;return i.isParent?e:e.parent}function _s(i,e){let n=qe.lFrame;n.currentTNode=i,n.isParent=e}function og(){return qe.lFrame.isParent}function sg(){qe.lFrame.isParent=!1}function O1(){return qe.lFrame.contextLView}function _d(){let i=qe.lFrame,e=i.bindingRootIndex;return e===-1&&(e=i.bindingRootIndex=i.tView.bindingStartIndex),e}function E1(){return qe.lFrame.bindingIndex}function I1(i){return qe.lFrame.bindingIndex=i}function vd(){return qe.lFrame.bindingIndex++}function ag(i){let e=qe.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+i,n}function S1(){return qe.lFrame.inI18n}function T1(i,e){let n=qe.lFrame;n.bindingIndex=n.bindingRootIndex=i,nm(e)}function A1(){return qe.lFrame.currentDirectiveIndex}function nm(i){qe.lFrame.currentDirectiveIndex=i}function Nb(i){let e=qe.lFrame.currentDirectiveIndex;return e===-1?null:i[e]}function Rb(){return qe.lFrame.currentQueryIndex}function lg(i){qe.lFrame.currentQueryIndex=i}function D1(i){let e=i[$e];return e.type===2?e.declTNode:e.type===1?i[ti]:null}function Fb(i,e,n){if(n&ot.SkipSelf){let r=e,o=i;for(;r=r.parent,r===null&&!(n&ot.Host);)if(r=D1(o),r===null||(o=o[ga],r.type&10))break;if(r===null)return!1;e=r,i=o}let t=qe.lFrame=Lb();return t.currentTNode=e,t.lView=i,!0}function cg(i){let e=Lb(),n=i[$e];qe.lFrame=e,e.currentTNode=n.firstChild,e.lView=i,e.tView=n,e.contextLView=i,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Lb(){let i=qe.lFrame,e=i===null?null:i.child;return e===null?jb(i):e}function jb(i){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return i!==null&&(i.child=e),e}function Bb(){let i=qe.lFrame;return qe.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}var Vb=Bb;function ug(){let i=Bb();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function k1(i){return(qe.lFrame.contextLView=v1(i,qe.lFrame.contextLView))[ji]}function Po(){return qe.lFrame.selectedIndex}function us(i){qe.lFrame.selectedIndex=i}function dg(){let i=qe.lFrame;return Ib(i.tView,i.selectedIndex)}function N1(){return qe.lFrame.currentNamespace}var Ub=!0;function yd(){return Ub}function Cd(i){Ub=i}function R1(i,e,n){let{ngOnChanges:t,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(t){let s=xb(e);(n.preOrderHooks??=[]).push(i,s),(n.preOrderCheckHooks??=[]).push(i,s)}r&&(n.preOrderHooks??=[]).push(0-i,r),o&&((n.preOrderHooks??=[]).push(i,o),(n.preOrderCheckHooks??=[]).push(i,o))}function bd(i,e){for(let n=e.directiveStart,t=e.directiveEnd;n<t;n++){let o=i.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=o;s&&(i.contentHooks??=[]).push(-n,s),a&&((i.contentHooks??=[]).push(n,a),(i.contentCheckHooks??=[]).push(n,a)),l&&(i.viewHooks??=[]).push(-n,l),c&&((i.viewHooks??=[]).push(n,c),(i.viewCheckHooks??=[]).push(n,c)),u!=null&&(i.destroyHooks??=[]).push(n,u)}}function Vu(i,e,n){zb(i,e,3,n)}function Uu(i,e,n,t){(i[je]&3)===n&&zb(i,e,n,t)}function Rf(i,e){let n=i[je];(n&3)===e&&(n&=16383,n+=1,i[je]=n)}function zb(i,e,n,t){let r=t!==void 0?i[ra]&65535:0,o=t??-1,s=e.length-1,a=0;for(let l=r;l<s;l++)if(typeof e[l+1]=="number"){if(a=e[l],t!=null&&a>=t)break}else e[l]<0&&(i[ra]+=65536),(a<o||o==-1)&&(F1(i,n,e,l),i[ra]=(i[ra]&4294901760)+l+2),l++}function AC(i,e){rr(4,i,e);let n=Tn(null);try{e.call(i)}finally{Tn(n),rr(5,i,e)}}function F1(i,e,n,t){let r=n[t]<0,o=n[t+1],s=r?-n[t]:n[t],a=i[s];r?i[je]>>14<i[ra]>>16&&(i[je]&3)===e&&(i[je]+=16384,AC(a,o)):AC(a,o)}var aa=-1,ds=class{constructor(e,n,t){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=t}};function L1(i){return i instanceof ds}function j1(i){return(i.flags&8)!==0}function B1(i){return(i.flags&16)!==0}function Hb(i){return i!==aa}function Zu(i){let e=i&32767;return i&32767}function V1(i){return i>>16}function $u(i,e){let n=V1(i),t=e;for(;n>0;)t=t[ga],n--;return t}var im=!0;function Ku(i){let e=im;return im=i,e}var U1=256,Wb=U1-1,Gb=5,z1=0,or={};function H1(i,e,n){let t;typeof n=="string"?t=n.charCodeAt(0)||0:n.hasOwnProperty(xl)&&(t=n[xl]),t==null&&(t=n[xl]=z1++);let r=t&Wb,o=1<<r;e.data[i+(r>>Gb)]|=o}function Qu(i,e){let n=Xb(i,e);if(n!==-1)return n;let t=e[$e];t.firstCreatePass&&(i.injectorIndex=e.length,Ff(t.data,i),Ff(e,null),Ff(t.blueprint,null));let r=hg(i,e),o=i.injectorIndex;if(Hb(r)){let s=Zu(r),a=$u(r,e),l=a[$e].data;for(let c=0;c<8;c++)e[o+c]=a[s+c]|l[s+c]}return e[o+8]=r,o}function Ff(i,e){i.push(0,0,0,0,0,0,0,0,e)}function Xb(i,e){return i.injectorIndex===-1||i.parent&&i.parent.injectorIndex===i.injectorIndex||e[i.injectorIndex+8]===null?-1:i.injectorIndex}function hg(i,e){if(i.parent&&i.parent.injectorIndex!==-1)return i.parent.injectorIndex;let n=0,t=null,r=e;for(;r!==null;){if(t=Kb(r),t===null)return aa;if(n++,r=r[ga],t.injectorIndex!==-1)return t.injectorIndex|n<<16}return aa}function rm(i,e,n){H1(i,e,n)}function qb(i,e,n){if(n&ot.Optional||i!==void 0)return i;Jm(e,"NodeInjector")}function Yb(i,e,n,t){if(n&ot.Optional&&t===void 0&&(t=null),!(n&(ot.Self|ot.Host))){let r=i[ua],o=Un(void 0);try{return r?r.get(e,t,n&ot.Optional):hb(e,t,n&ot.Optional)}finally{Un(o)}}return qb(t,e,n)}function Zb(i,e,n,t=ot.Default,r){if(i!==null){if(e[je]&2048&&!(t&ot.Self)){let s=q1(i,e,n,t,or);if(s!==or)return s}let o=$b(i,e,n,t,or);if(o!==or)return o}return Yb(e,n,t,r)}function $b(i,e,n,t,r){let o=G1(n);if(typeof o=="function"){if(!Fb(e,i,t))return t&ot.Host?qb(r,n,t):Yb(e,n,t,r);try{let s;if(s=o(t),s==null&&!(t&ot.Optional))Jm(n);else return s}finally{Vb()}}else if(typeof o=="number"){let s=null,a=Xb(i,e),l=aa,c=t&ot.Host?e[Bi][ti]:null;for((a===-1||t&ot.SkipSelf)&&(l=a===-1?hg(i,e):e[a+8],l===aa||!kC(t,!1)?a=-1:(s=e[$e],a=Zu(l),e=$u(l,e)));a!==-1;){let u=e[$e];if(DC(o,a,u.data)){let d=W1(a,e,n,s,t,c);if(d!==or)return d}l=e[a+8],l!==aa&&kC(t,e[$e].data[a+8]===c)&&DC(o,a,e)?(s=u,a=Zu(l),e=$u(l,e)):a=-1}}return r}function W1(i,e,n,t,r,o){let s=e[$e],a=s.data[i+8],l=t==null?md(a)&&im:t!=s&&(a.type&3)!==0,c=r&ot.Host&&o===a,u=zu(a,s,n,l,c);return u!==null?hs(e,s,u,a):or}function zu(i,e,n,t,r){let o=i.providerIndexes,s=e.data,a=o&1048575,l=i.directiveStart,c=i.directiveEnd,u=o>>20,d=t?a:a+u,h=r?a+u:c;for(let p=d;p<h;p++){let f=s[p];if(p<l&&n===f||p>=l&&f.type===n)return p}if(r){let p=s[l];if(p&&Vr(p)&&p.type===n)return l}return null}function hs(i,e,n,t){let r=i[n],o=e.data;if(L1(r)){let s=r;s.resolving&&IT(ET(o[n]));let a=Ku(s.canSeeViewProviders);s.resolving=!0;let l,c=s.injectImpl?Un(s.injectImpl):null,u=Fb(i,t,ot.Default);try{r=i[n]=s.factory(void 0,o,i,t),e.firstCreatePass&&n>=t.directiveStart&&R1(n,o[n],e)}finally{c!==null&&Un(c),Ku(a),s.resolving=!1,Vb()}}return r}function G1(i){if(typeof i=="string")return i.charCodeAt(0)||0;let e=i.hasOwnProperty(xl)?i[xl]:void 0;return typeof e=="number"?e>=0?e&Wb:X1:e}function DC(i,e,n){let t=1<<i;return!!(n[e+(i>>Gb)]&t)}function kC(i,e){return!(i&ot.Self)&&!(i&ot.Host&&e)}var os=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,t){return Zb(this._tNode,this._lView,e,pd(t),n)}};function X1(){return new os(ni(),it())}function un(i){return Ll(()=>{let e=i.prototype.constructor,n=e[Xu]||om(e),t=Object.prototype,r=Object.getPrototypeOf(i.prototype).constructor;for(;r&&r!==t;){let o=r[Xu]||om(r);if(o&&o!==n)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function om(i){return ab(i)?()=>{let e=om(kn(i));return e&&e()}:cs(i)}function q1(i,e,n,t,r){let o=i,s=e;for(;o!==null&&s!==null&&s[je]&2048&&!(s[je]&512);){let a=$b(o,s,n,t|ot.Self,or);if(a!==or)return a;let l=o.parent;if(!l){let c=s[wb];if(c){let u=c.get(n,or,t);if(u!==or)return u}l=Kb(s),s=s[ga]}o=l}return r}function Kb(i){let e=i[$e],n=e.type;return n===2?e.declTNode:n===1?i[ti]:null}var ku="__parameters__";function Y1(i){return function(...n){if(i){let t=i(...n);for(let r in t)this[r]=t[r]}}}function Qb(i,e,n){return Ll(()=>{let t=Y1(e);function r(...o){if(this instanceof r)return t.apply(this,o),this;let s=new r(...o);return a.annotation=s,a;function a(l,c,u){let d=l.hasOwnProperty(ku)?l[ku]:Object.defineProperty(l,ku,{value:[]})[ku];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),l}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=i,r.annotationCls=r,r})}function Z1(i){let e=Kt.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function $1(i){return typeof i=="function"}function K1(i,e,n){if(i.length!==e.length)return!1;for(let t=0;t<i.length;t++){let r=i[t],o=e[t];if(n&&(r=n(r),o=n(o)),o!==r)return!1}return!0}function Q1(i){return i.flat(Number.POSITIVE_INFINITY)}function pg(i,e){i.forEach(n=>Array.isArray(n)?pg(n,e):e(n))}function Jb(i,e,n){e>=i.length?i.push(n):i.splice(e,0,n)}function Ju(i,e){return e>=i.length-1?i.pop():i.splice(e,1)[0]}function eP(i,e){let n=[];for(let t=0;t<i;t++)n.push(e);return n}function J1(i,e,n,t){let r=i.length;if(r==e)i.push(n,t);else if(r===1)i.push(t,i[0]),i[0]=n;else{for(r--,i.push(i[r-1],i[r]);r>e;){let o=r-2;i[r]=i[o],r--}i[e]=n,i[e+1]=t}}function fg(i,e,n){let t=Bl(i,e);return t>=0?i[t|1]=n:(t=~t,J1(i,t,e,n)),t}function Lf(i,e){let n=Bl(i,e);if(n>=0)return i[n|1]}function Bl(i,e){return eA(i,e,1)}function eA(i,e,n){let t=0,r=i.length>>n;for(;r!==t;){let o=t+(r-t>>1),s=i[o<<n];if(e===s)return o<<n;s>e?r=o:t=o+1}return~(r<<n)}var mg=pb(Qb("Optional"),8);var tP=pb(Qb("SkipSelf"),4);function tA(i){let e=[],n=new Map;function t(r){let o=n.get(r);if(!o){let s=i(r);n.set(r,o=s.then(oA))}return o}return ed.forEach((r,o)=>{let s=[];r.templateUrl&&s.push(t(r.templateUrl).then(c=>{r.template=c}));let a=typeof r.styles=="string"?[r.styles]:r.styles||[];if(r.styles=a,r.styleUrl&&r.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(r.styleUrls?.length){let c=r.styles.length,u=r.styleUrls;r.styleUrls.forEach((d,h)=>{a.push(""),s.push(t(d).then(p=>{a[c+h]=p,u.splice(u.indexOf(d),1),u.length==0&&(r.styleUrls=void 0)}))})}else r.styleUrl&&s.push(t(r.styleUrl).then(c=>{a.push(c),r.styleUrl=void 0}));let l=Promise.all(s).then(()=>sA(o));e.push(l)}),iA(),Promise.all(e).then(()=>{})}var ed=new Map,nA=new Set;function iA(){let i=ed;return ed=new Map,i}function rA(){return ed.size===0}function oA(i){return typeof i=="string"?i:i.text()}function sA(i){nA.delete(i)}var Nl=new fe("ENVIRONMENT_INITIALIZER"),nP=new fe("INJECTOR",-1),iP=new fe("INJECTOR_DEF_TYPES"),td=class{get(e,n=Il){if(n===Il){let t=new Error(`NullInjectorError: No provider for ${wn(e)}!`);throw t.name="NullInjectorError",t}return n}};function Vl(i){return{\u0275providers:i}}function aA(...i){return{\u0275providers:rP(!0,i),\u0275fromNgModule:!0}}function rP(i,...e){let n=[],t=new Set,r,o=s=>{n.push(s)};return pg(e,s=>{let a=s;sm(a,o,[],t)&&(r||=[],r.push(a))}),r!==void 0&&oP(r,o),n}function oP(i,e){for(let n=0;n<i.length;n++){let{ngModule:t,providers:r}=i[n];gg(r,o=>{e(o,t)})}}function sm(i,e,n,t){if(i=kn(i),!i)return!1;let r=null,o=PC(i),s=!o&&ca(i);if(!o&&!s){let l=i.ngModule;if(o=PC(l),o)r=l;else return!1}else{if(s&&!s.standalone)return!1;r=i}let a=t.has(r);if(s){if(a)return!1;if(t.add(r),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of l)sm(c,e,n,t)}}else if(o){if(o.imports!=null&&!a){t.add(r);let c;try{pg(o.imports,u=>{sm(u,e,n,t)&&(c||=[],c.push(u))})}finally{}c!==void 0&&oP(c,e)}if(!a){let c=cs(r)||(()=>new r);e({provide:r,useFactory:c,deps:zn},r),e({provide:iP,useValue:r,multi:!0},r),e({provide:Nl,useValue:()=>D(r),multi:!0},r)}let l=o.providers;if(l!=null&&!a){let c=i;gg(l,u=>{e(u,c)})}}else return!1;return r!==i&&i.providers!==void 0}function gg(i,e){for(let n of i)lb(n)&&(n=n.\u0275providers),Array.isArray(n)?gg(n,e):e(n)}var lA=It({provide:String,useValue:It});function sP(i){return i!==null&&typeof i=="object"&&lA in i}function cA(i){return!!(i&&i.useExisting)}function uA(i){return!!(i&&i.useFactory)}function fa(i){return typeof i=="function"}function dA(i){return!!i.useClass}var Pd=new fe("Set Injector scope."),Hu={},hA={},jf;function _g(){return jf===void 0&&(jf=new td),jf}var cr=class{},Rl=class extends cr{get destroyed(){return this._destroyed}constructor(e,n,t,r){super(),this.parent=n,this.source=t,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,lm(e,s=>this.processProvider(s)),this.records.set(nP,oa(void 0,this)),r.has("environment")&&this.records.set(cr,oa(void 0,this));let o=this.records.get(Pd);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(iP,zn,ot.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=_o(this),t=Un(void 0),r;try{return e()}finally{_o(n),Un(t)}}get(e,n=Il,t=ot.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(CC))return e[CC](this);t=pd(t);let r,o=_o(this),s=Un(void 0);try{if(!(t&ot.SkipSelf)){let l=this.records.get(e);if(l===void 0){let c=_A(e)&&eg(e);c&&this.injectableDefInScope(c)?l=oa(am(e),Hu):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let a=t&ot.Self?_g():this.parent;return n=t&ot.Optional&&n===Il?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[qu]=a[qu]||[]).unshift(wn(e)),o)throw a;return VT(a,e,"R3InjectorError",this.source)}else throw a}finally{Un(s),_o(o)}}resolveInjectorInitializers(){let e=_o(this),n=Un(void 0),t;try{let r=this.get(Nl,zn,ot.Self);for(let o of r)o()}finally{_o(e),Un(n)}}toString(){let e=[],n=this.records;for(let t of n.keys())e.push(wn(t));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ne(205,!1)}processProvider(e){e=kn(e);let n=fa(e)?e:kn(e&&e.provide),t=fA(e);if(!fa(e)&&e.multi===!0){let r=this.records.get(n);r||(r=oa(void 0,Hu,!0),r.factory=()=>Qf(r.multi),this.records.set(n,r)),n=e,r.multi.push(e)}else{let r=this.records.get(n)}this.records.set(n,t)}hydrate(e,n){return n.value===Hu&&(n.value=hA,n.value=n.factory()),typeof n.value=="object"&&n.value&&gA(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;let n=kn(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function am(i){let e=eg(i),n=e!==null?e.factory:cs(i);if(n!==null)return n;if(i instanceof fe)throw new ne(204,!1);if(i instanceof Function)return pA(i);throw new ne(204,!1)}function pA(i){let e=i.length;if(e>0){let t=eP(e,"?");throw new ne(204,!1)}let n=AT(i);return n!==null?()=>n.factory(i):()=>new i}function fA(i){if(sP(i))return oa(void 0,i.useValue);{let e=aP(i);return oa(e,Hu)}}function aP(i,e,n){let t;if(fa(i)){let r=kn(i);return cs(r)||am(r)}else if(sP(i))t=()=>kn(i.useValue);else if(uA(i))t=()=>i.useFactory(...Qf(i.deps||[]));else if(cA(i))t=()=>D(kn(i.useExisting));else{let r=kn(i&&(i.useClass||i.provide));if(mA(i))t=()=>new r(...Qf(i.deps));else return cs(r)||am(r)}return t}function oa(i,e,n=!1){return{factory:i,value:e,multi:n?[]:void 0}}function mA(i){return!!i.deps}function gA(i){return i!==null&&typeof i=="object"&&typeof i.ngOnDestroy=="function"}function _A(i){return typeof i=="function"||typeof i=="object"&&i instanceof fe}function lm(i,e){for(let n of i)Array.isArray(n)?lm(n,e):n&&lb(n)?lm(n.\u0275providers,e):e(n)}function lP(i,e){i instanceof Rl&&i.assertNotDestroyed();let n,t=_o(i),r=Un(void 0);try{return e()}finally{_o(t),Un(r)}}function NC(i,e=null,n=null,t){let r=cP(i,e,n,t);return r.resolveInjectorInitializers(),r}function cP(i,e=null,n=null,t,r=new Set){let o=[n||zn,aA(i)];return t=t||(typeof i=="object"?void 0:wn(i)),new Rl(o,e||_g(),t||null,r)}var nn=(()=>{let e=class e{static create(t,r){if(Array.isArray(t))return NC({name:""},r,t,"");{let o=t.name??"";return NC({name:o},t.parent,t.providers,o)}}};e.THROW_IF_NOT_FOUND=Il,e.NULL=new td,e.\u0275prov=Y({token:e,providedIn:"any",factory:()=>D(nP)}),e.__NG_ELEMENT_ID__=-1;let i=e;return i})();var cm;function uP(i){cm=i}function dP(){if(cm!==void 0)return cm;if(typeof document<"u")return document;throw new ne(210,!1)}var wd=new fe("AppId",{providedIn:"root",factory:()=>vA}),vA="ng",vg=new fe("Platform Initializer"),Wn=new fe("Platform ID",{providedIn:"platform",factory:()=>"unknown"});var yg=new fe("AnimationModuleType"),Cg=new fe("CSP nonce",{providedIn:"root",factory:()=>dP().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function hP(i){return i.ownerDocument}function yA(i){return i instanceof Function?i():i}function pP(i){return(i.flags&128)===128}var ur=function(i){return i[i.Important=1]="Important",i[i.DashCase=2]="DashCase",i}(ur||{}),CA=/^>|^->|<!--|-->|--!>|<!-$/g,bA=/(<|>)/g,PA="\u200B$1\u200B";function wA(i){return i.replace(CA,e=>e.replace(bA,PA))}var fP=new Map,xA=0;function MA(){return xA++}function OA(i){fP.set(i[fd],i)}function EA(i){fP.delete(i[fd])}var RC="__ngContext__";function yo(i,e){vo(e)?(i[RC]=e[fd],OA(e)):i[RC]=e}var IA;function bg(i,e){return IA(i,e)}function Pg(i){let e=i[tn];return Vi(e)?e[tn]:e}function mP(i){return _P(i[Dl])}function gP(i){return _P(i[Li])}function _P(i){for(;i!==null&&!Vi(i);)i=i[Li];return i}function sa(i,e,n,t,r){if(t!=null){let o,s=!1;Vi(t)?o=t:vo(t)&&(s=!0,t=t[hr]);let a=lr(t);i===0&&n!==null?r==null?PP(e,n,a):nd(e,n,a,r||null,!0):i===1&&n!==null?nd(e,n,a,r||null,!0):i===2?GA(e,a,s):i===3&&e.destroyNode(a),o!=null&&qA(e,i,o,n,r)}}function SA(i,e){return i.createText(e)}function TA(i,e,n){i.setValue(e,n)}function AA(i,e){return i.createComment(wA(e))}function vP(i,e,n){return i.createElement(e,n)}function DA(i,e){let n=e[Gt];Ul(i,e,n,2,null,null),e[hr]=null,e[ti]=null}function kA(i,e,n,t,r,o){t[hr]=r,t[ti]=e,Ul(i,t,n,1,r,o)}function NA(i,e){Ul(i,e,e[Gt],2,null,null)}function RA(i){let e=i[Dl];if(!e)return Bf(i[$e],i);for(;e;){let n=null;if(vo(e))n=e[Dl];else{let t=e[ei];t&&(n=t)}if(!n){for(;e&&!e[Li]&&e!==i;)vo(e)&&Bf(e[$e],e),e=e[tn];e===null&&(e=i),vo(e)&&Bf(e[$e],e),n=e&&e[Li]}e=n}}function FA(i,e,n,t){let r=ei+t,o=n.length;t>0&&(n[r-1][Li]=e),t<o-ei?(e[Li]=n[r],Jb(n,ei+t,e)):(n.push(e),e[Li]=null),e[tn]=n;let s=e[jl];s!==null&&n!==s&&LA(s,e);let a=e[sr];a!==null&&a.insertView(i),tm(e),e[je]|=128}function LA(i,e){let n=i[da],r=e[tn][tn][Bi];e[Bi]!==r&&(i[je]|=ha.HasTransplantedViews),n===null?i[da]=[e]:n.push(e)}function yP(i,e){let n=i[da],t=n.indexOf(e),r=e[tn];n.splice(t,1)}function um(i,e){if(i.length<=ei)return;let n=ei+e,t=i[n];if(t){let r=t[jl];r!==null&&r!==i&&yP(r,t),e>0&&(i[n-1][Li]=t[Li]);let o=Ju(i,ei+e);DA(t[$e],t);let s=o[sr];s!==null&&s.detachView(o[$e]),t[tn]=null,t[Li]=null,t[je]&=-129}return t}function CP(i,e){if(!(e[je]&256)){let n=e[Gt];n.destroyNode&&Ul(i,e,n,3,null,null),RA(e)}}function Bf(i,e){if(!(e[je]&256)){e[je]&=-129,e[je]|=256,e[as]&&zy(e[as]),BA(i,e),jA(i,e),e[$e].type===1&&e[Gt].destroy();let n=e[jl];if(n!==null&&Vi(e[tn])){n!==e[tn]&&yP(n,e);let t=e[sr];t!==null&&t.detachView(i)}EA(e)}}function jA(i,e){let n=i.cleanup,t=e[Al];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?t[s]():t[-s].unsubscribe(),o+=2}else{let s=t[n[o+1]];n[o].call(s)}t!==null&&(e[Al]=null);let r=e[Ol];if(r!==null){e[Ol]=null;for(let o=0;o<r.length;o++){let s=r[o];s()}}}function BA(i,e){let n;if(i!=null&&(n=i.destroyHooks)!=null)for(let t=0;t<n.length;t+=2){let r=e[n[t]];if(!(r instanceof ds)){let o=n[t+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=r[o[s]],l=o[s+1];rr(4,a,l);try{l.call(a)}finally{rr(5,a,l)}}else{rr(4,r,o);try{o.call(r)}finally{rr(5,r,o)}}}}}function bP(i,e,n){return VA(i,e.parent,n)}function VA(i,e,n){let t=e;for(;t!==null&&t.type&40;)e=t,t=e.parent;if(t===null)return n[hr];{let{componentOffset:r}=t;if(r>-1){let{encapsulation:o}=i.data[t.directiveStart+r];if(o===ar.None||o===ar.Emulated)return null}return Ci(t,n)}}function nd(i,e,n,t,r){i.insertBefore(e,n,t,r)}function PP(i,e,n){i.appendChild(e,n)}function FC(i,e,n,t,r){t!==null?nd(i,e,n,t,r):PP(i,e,n)}function UA(i,e,n,t){i.removeChild(e,n,t)}function wg(i,e){return i.parentNode(e)}function zA(i,e){return i.nextSibling(e)}function wP(i,e,n){return WA(i,e,n)}function HA(i,e,n){return i.type&40?Ci(i,n):null}var WA=HA,LC;function xd(i,e,n,t){let r=bP(i,t,e),o=e[Gt],s=t.parent||e[ti],a=wP(s,t,e);if(r!=null)if(Array.isArray(n))for(let l=0;l<n.length;l++)FC(o,r,n[l],a,!1);else FC(o,r,n,a,!1);LC!==void 0&&LC(o,t,e,n,r)}function Wu(i,e){if(e!==null){let n=e.type;if(n&3)return Ci(e,i);if(n&4)return dm(-1,i[e.index]);if(n&8){let t=e.child;if(t!==null)return Wu(i,t);{let r=i[e.index];return Vi(r)?dm(-1,r):lr(r)}}else{if(n&32)return bg(e,i)()||lr(i[e.index]);{let t=xP(i,e);if(t!==null){if(Array.isArray(t))return t[0];let r=Pg(i[Bi]);return Wu(r,t)}else return Wu(i,e.next)}}}return null}function xP(i,e){if(e!==null){let t=i[Bi][ti],r=e.projection;return t.projection[r]}return null}function dm(i,e){let n=ei+i+1;if(n<e.length){let t=e[n],r=t[$e].firstChild;if(r!==null)return Wu(t,r)}return e[ls]}function GA(i,e,n){let t=wg(i,e);t&&UA(i,t,e,n)}function xg(i,e,n,t,r,o,s){for(;n!=null;){let a=t[n.index],l=n.type;if(s&&e===0&&(a&&yo(lr(a),t),n.flags|=2),(n.flags&32)!==32)if(l&8)xg(i,e,n.child,t,r,o,!1),sa(e,i,r,a,o);else if(l&32){let c=bg(n,t),u;for(;u=c();)sa(e,i,r,u,o);sa(e,i,r,a,o)}else l&16?MP(i,e,t,n,r,o):sa(e,i,r,a,o);n=s?n.projectionNext:n.next}}function Ul(i,e,n,t,r,o){xg(n,t,i.firstChild,e,r,o,!1)}function XA(i,e,n){let t=e[Gt],r=bP(i,n,e),o=n.parent||e[ti],s=wP(o,n,e);MP(t,0,e,n,r,s)}function MP(i,e,n,t,r,o){let s=n[Bi],l=s[ti].projection[t.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];sa(e,i,r,u,o)}else{let c=l,u=s[tn];pP(t)&&(c.flags|=128),xg(i,e,c,u,r,o,!0)}}function qA(i,e,n,t,r){let o=n[ls],s=lr(n);o!==s&&sa(e,i,t,o,r);for(let a=ei;a<n.length;a++){let l=n[a];Ul(l[$e],l,i,e,t,o)}}function YA(i,e,n,t,r){if(e)r?i.addClass(n,t):i.removeClass(n,t);else{let o=t.indexOf("-")===-1?void 0:ur.DashCase;r==null?i.removeStyle(n,t,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=ur.Important),i.setStyle(n,t,r,o))}}function ZA(i,e,n){i.setAttribute(e,"style",n)}function OP(i,e,n){n===""?i.removeAttribute(e,"class"):i.setAttribute(e,"class",n)}function EP(i,e,n){let{mergedAttrs:t,classes:r,styles:o}=n;t!==null&&Jf(i,e,t),r!==null&&OP(i,e,r),o!==null&&ZA(i,e,o)}var Nu;function $A(){if(Nu===void 0&&(Nu=null,Kt.trustedTypes))try{Nu=Kt.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Nu}function Md(i){return $A()?.createHTML(i)||i}var Ru;function KA(){if(Ru===void 0&&(Ru=null,Kt.trustedTypes))try{Ru=Kt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Ru}function jC(i){return KA()?.createHTML(i)||i}var Ur=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${cb})`}},hm=class extends Ur{getTypeName(){return"HTML"}},pm=class extends Ur{getTypeName(){return"Style"}},fm=class extends Ur{getTypeName(){return"Script"}},mm=class extends Ur{getTypeName(){return"URL"}},gm=class extends Ur{getTypeName(){return"ResourceURL"}};function Ui(i){return i instanceof Ur?i.changingThisBreaksApplicationSecurity:i}function wo(i,e){let n=QA(i);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${cb})`)}return n===e}function QA(i){return i instanceof Ur&&i.getTypeName()||null}function IP(i){return new hm(i)}function SP(i){return new pm(i)}function TP(i){return new fm(i)}function AP(i){return new mm(i)}function DP(i){return new gm(i)}function JA(i){let e=new vm(i);return eD()?new _m(e):e}var _m=class{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let n=new window.DOMParser().parseFromString(Md(e),"text/html").body;return n===null?this.inertDocumentHelper.getInertBodyElement(e):(n.removeChild(n.firstChild),n)}catch{return null}}},vm=class{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let n=this.inertDocument.createElement("template");return n.innerHTML=Md(e),n}};function eD(){try{return!!new window.DOMParser().parseFromString(Md(""),"text/html")}catch{return!1}}var tD=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Od(i){return i=String(i),i.match(tD)?i:"unsafe:"+i}function Wr(i){let e={};for(let n of i.split(","))e[n]=!0;return e}function zl(...i){let e={};for(let n of i)for(let t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}var kP=Wr("area,br,col,hr,img,wbr"),NP=Wr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),RP=Wr("rp,rt"),nD=zl(RP,NP),iD=zl(NP,Wr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),rD=zl(RP,Wr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),BC=zl(kP,iD,rD,nD),FP=Wr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),oD=Wr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),sD=Wr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),aD=zl(FP,oD,sD),lD=Wr("script,style,template"),ym=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let n=e.firstChild,t=!0;for(;n;){if(n.nodeType===Node.ELEMENT_NODE?t=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,t&&n.firstChild){n=n.firstChild;continue}for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let r=this.checkClobberedElement(n,n.nextSibling);if(r){n=r;break}n=this.checkClobberedElement(n,n.parentNode)}}return this.buf.join("")}startElement(e){let n=e.nodeName.toLowerCase();if(!BC.hasOwnProperty(n))return this.sanitizedSomething=!0,!lD.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);let t=e.attributes;for(let r=0;r<t.length;r++){let o=t.item(r),s=o.name,a=s.toLowerCase();if(!aD.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=o.value;FP[a]&&(l=Od(l)),this.buf.push(" ",s,'="',VC(l),'"')}return this.buf.push(">"),!0}endElement(e){let n=e.nodeName.toLowerCase();BC.hasOwnProperty(n)&&!kP.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(VC(e))}checkClobberedElement(e,n){if(n&&(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return n}},cD=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,uD=/([^\#-~ |!])/g;function VC(i){return i.replace(/&/g,"&amp;").replace(cD,function(e){let n=e.charCodeAt(0),t=e.charCodeAt(1);return"&#"+((n-55296)*1024+(t-56320)+65536)+";"}).replace(uD,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Fu;function Mg(i,e){let n=null;try{Fu=Fu||JA(i);let t=e?String(e):"";n=Fu.getInertBodyElement(t);let r=5,o=t;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,t=o,o=n.innerHTML,n=Fu.getInertBodyElement(t)}while(t!==o);let a=new ym().sanitizeChildren(UC(n)||n);return Md(a)}finally{if(n){let t=UC(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function UC(i){return"content"in i&&dD(i)?i.content:null}function dD(i){return i.nodeType===Node.ELEMENT_NODE&&i.nodeName==="TEMPLATE"}var Gn=function(i){return i[i.NONE=0]="NONE",i[i.HTML=1]="HTML",i[i.STYLE=2]="STYLE",i[i.SCRIPT=3]="SCRIPT",i[i.URL=4]="URL",i[i.RESOURCE_URL=5]="RESOURCE_URL",i}(Gn||{});function Gr(i){let e=LP();return e?jC(e.sanitize(Gn.HTML,i)||""):wo(i,"HTML")?jC(Ui(i)):Mg(dP(),ss(i))}function vs(i){let e=LP();return e?e.sanitize(Gn.URL,i)||"":wo(i,"URL")?Ui(i):Od(ss(i))}function LP(){let i=it();return i&&i[Br].sanitizer}var Cm=class{};var hD="h",pD="b";var fD=(i,e,n)=>null;function Og(i,e,n=!1){return fD(i,e,n)}var bm=class{},id=class{};function mD(i){let e=Error(`No component factory found for ${wn(i)}.`);return e[gD]=i,e}var gD="ngComponent";var Pm=class{resolveComponentFactory(e){throw mD(e)}},xn=(()=>{let e=class e{};e.NULL=new Pm;let i=e;return i})();function _D(){return _a(ni(),it())}function _a(i,e){return new zt(Ci(i,e))}var zt=(()=>{let e=class e{constructor(t){this.nativeElement=t}};e.__NG_ELEMENT_ID__=_D;let i=e;return i})();function vD(i){return i instanceof zt?i.nativeElement:i}var ps=class{},Mn=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>yD();let i=e;return i})();function yD(){let i=it(),e=ni(),n=bo(e.index,i);return(vo(n)?n:i)[Gt]}var CD=(()=>{let e=class e{};e.\u0275prov=Y({token:e,providedIn:"root",factory:()=>null});let i=e;return i})(),Vf={};function Eg(i){let e=Tn(null);try{return i()}finally{Tn(e)}}function jP(i){return Ig(i)?Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i:!1}function bD(i,e){if(Array.isArray(i))for(let n=0;n<i.length;n++)e(i[n]);else{let n=i[Symbol.iterator](),t;for(;!(t=n.next()).done;)e(t.value)}}function Ig(i){return i!==null&&(typeof i=="function"||typeof i=="object")}var wm=class{constructor(){}supports(e){return jP(e)}create(e){return new xm(e)}},PD=(i,e)=>e,xm=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||PD}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,t=this._removalsHead,r=0,o=null;for(;n||t;){let s=!t||n&&n.currentIndex<zC(t,r,o)?n:t,a=zC(s,r,o),l=s.currentIndex;if(s===t)r--,t=t._nextRemoved;else if(n=n._next,s.previousIndex==null)r++;else{o||(o=[]);let c=a-r,u=l-r;if(c!=u){for(let h=0;h<c;h++){let p=h<o.length?o[h]:o[h]=0,f=p+h;u<=f&&f<c&&(o[h]=p+1)}let d=s.previousIndex;o[d]=u-c}}a!==l&&e(s,a,l)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!jP(e))throw new ne(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,t=!1,r,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),t=!0):(t&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else r=0,bD(e,a=>{s=this._trackByFn(r,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,r),t=!0):(t&&(n=this._verifyReinsertion(n,a,s,r)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,r++}),this.length=r;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,t,r){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(t,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,r)):(e=this._linkedRecords===null?null:this._linkedRecords.get(t,r),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,r)):e=this._addAfter(new Mm(n,t),o,r)),e}_verifyReinsertion(e,n,t,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(t,null);return o!==null?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,t){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let r=e._prevRemoved,o=e._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,n,t),this._addToMoves(e,t),e}_moveAfter(e,n,t){return this._unlink(e),this._insertAfter(e,n,t),this._addToMoves(e,t),e}_addAfter(e,n,t){return this._insertAfter(e,n,t),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,t){let r=n===null?this._itHead:n._next;return e._next=r,e._prev=n,r===null?this._itTail=e:r._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new rd),this._linkedRecords.put(e),e.currentIndex=t,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,t=e._next;return n===null?this._itHead=t:n._next=t,t===null?this._itTail=n:t._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new rd),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Mm=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Om=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let t;for(t=this._head;t!==null;t=t._nextDup)if((n===null||n<=t.currentIndex)&&Object.is(t.trackById,e))return t;return null}remove(e){let n=e._prevDup,t=e._nextDup;return n===null?this._head=t:n._nextDup=t,t===null?this._tail=n:t._prevDup=n,this._head===null}},rd=class{constructor(){this.map=new Map}put(e){let n=e.trackById,t=this.map.get(n);t||(t=new Om,this.map.set(n,t)),t.add(e)}get(e,n){let t=e,r=this.map.get(t);return r?r.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function zC(i,e,n){let t=i.previousIndex;if(t===null)return t;let r=0;return n&&t<n.length&&(r=n[t]),t+e+r}var Em=class{constructor(){}supports(e){return e instanceof Map||Ig(e)}create(){return new Im}},Im=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let n;for(n=this._mapHead;n!==null;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;n!==null;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;n!==null;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||Ig(e)))throw new ne(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(t,r)=>{if(n&&n.key===r)this._maybeAddToChanges(n,t),this._appendAfter=n,n=n._next;else{let o=this._getOrCreateRecordForKey(r,t);n=this._insertBeforeOrAppend(n,o)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let t=n;t!==null;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){let t=e._prev;return n._next=e,n._prev=t,e._prev=n,t&&(t._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){let r=this._records.get(e);this._maybeAddToChanges(r,n);let o=r._prev,s=r._next;return o&&(o._next=s),s&&(s._prev=o),r._next=null,r._prev=null,r}let t=new Sm(e);return this._records.set(e,t),t.currentValue=n,this._addToAdditions(t),t}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(t=>n(e[t],t))}},Sm=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function HC(){return new Hl([new wm])}var Hl=(()=>{let e=class e{constructor(t){this.factories=t}static create(t,r){if(r!=null){let o=r.factories.slice();t=t.concat(o)}return new e(t)}static extend(t){return{provide:e,useFactory:r=>e.create(t,r||HC()),deps:[[e,new tP,new mg]]}}find(t){let r=this.factories.find(o=>o.supports(t));if(r!=null)return r;throw new ne(901,!1)}};e.\u0275prov=Y({token:e,providedIn:"root",factory:HC});let i=e;return i})();function WC(){return new Sg([new Em])}var Sg=(()=>{let e=class e{constructor(t){this.factories=t}static create(t,r){if(r){let o=r.factories.slice();t=t.concat(o)}return new e(t)}static extend(t){return{provide:e,useFactory:r=>e.create(t,r||WC()),deps:[[e,new tP,new mg]]}}find(t){let r=this.factories.find(o=>o.supports(t));if(r)return r;throw new ne(901,!1)}};e.\u0275prov=Y({token:e,providedIn:"root",factory:WC});let i=e;return i})();function od(i,e,n,t,r=!1){for(;n!==null;){let o=e[n.index];o!==null&&t.push(lr(o)),Vi(o)&&wD(o,t);let s=n.type;if(s&8)od(i,e,n.child,t);else if(s&32){let a=bg(n,e),l;for(;l=a();)t.push(l)}else if(s&16){let a=xP(e,n);if(Array.isArray(a))t.push(...a);else{let l=Pg(e[Bi]);od(l[$e],l,a,t,!0)}}n=r?n.projectionNext:n.next}return t}function wD(i,e){for(let n=ei;n<i.length;n++){let t=i[n],r=t[$e].firstChild;r!==null&&od(t[$e],t,r,e)}i[ls]!==i[hr]&&e.push(i[ls])}var BP=[];function xD(i){return i[as]??MD(i)}function MD(i){let e=BP.pop()??Object.create(ED);return e.lView=i,e}function OD(i){i.lView[as]!==i&&(i.lView=null,BP.push(i))}var ED=Xe(Q({},By),{consumerIsAlwaysLive:!0,consumerMarkedDirty:i=>{kl(i.lView)},consumerOnSignalRead(){this.lView[as]=this}}),ID="ngOriginalError";function Uf(i){return i[ID]}var zr=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Uf(e);for(;n&&Uf(n);)n=Uf(n);return n||null}},VP=new fe("",{providedIn:"root",factory:()=>vt(zr).handleError.bind(void 0)});var UP=!1,SD=new fe("",{providedIn:"root",factory:()=>UP});var zi={};function g(i){zP(an(),it(),Po()+i,!1)}function zP(i,e,n,t){if(!t)if((e[je]&3)===3){let o=i.preOrderCheckHooks;o!==null&&Vu(e,o,n)}else{let o=i.preOrderHooks;o!==null&&Uu(e,o,0,n)}us(n)}function x(i,e=ot.Default){let n=it();if(n===null)return D(i,e);let t=ni();return Zb(t,n,kn(i),e)}function TD(i,e){let n=i.hostBindingOpCodes;if(n!==null)try{for(let t=0;t<n.length;t++){let r=n[t];if(r<0)us(~r);else{let o=r,s=n[++t],a=n[++t];T1(s,o);let l=e[o];a(2,l)}}}finally{us(-1)}}function Ed(i,e,n,t,r,o,s,a,l,c,u){let d=e.blueprint.slice();return d[hr]=r,d[je]=t|4|128|8|64,(c!==null||i&&i[je]&2048)&&(d[je]|=2048),Sb(d),d[tn]=d[ga]=i,d[ji]=n,d[Br]=s||i&&i[Br],d[Gt]=a||i&&i[Gt],d[ua]=l||i&&i[ua]||null,d[ti]=o,d[fd]=MA(),d[Tl]=u,d[wb]=c,d[Bi]=e.type==2?i[Bi]:d,d}function va(i,e,n,t,r){let o=i.data[e];if(o===null)o=AD(i,e,n,t,r),S1()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=t,o.attrs=r;let s=M1();o.injectorIndex=s===null?-1:s.injectorIndex}return _s(o,!0),o}function AD(i,e,n,t,r){let o=kb(),s=og(),a=s?o:o&&o.parent,l=i.data[e]=LD(i,a,n,e,t,r);return i.firstChild===null&&(i.firstChild=l),o!==null&&(s?o.child==null&&l.parent!==null&&(o.child=l):o.next===null&&(o.next=l,l.prev=o)),l}function HP(i,e,n,t){if(n===0)return-1;let r=e.length;for(let o=0;o<n;o++)e.push(t),i.blueprint.push(t),i.data.push(null);return r}function WP(i,e,n,t,r){let o=Po(),s=t&2;try{us(-1),s&&e.length>Hn&&zP(i,e,Hn,!1),rr(s?2:0,r),n(t,r)}finally{us(o),rr(s?3:1,r)}}function Tg(i,e,n){if(ng(e)){let t=Tn(null);try{let r=e.directiveStart,o=e.directiveEnd;for(let s=r;s<o;s++){let a=i.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{Tn(t)}}}function Ag(i,e,n){Ab()&&(HD(i,e,n,Ci(n,e)),(n.flags&64)===64&&YP(i,e,n))}function Dg(i,e,n=Ci){let t=e.localNames;if(t!==null){let r=e.index+1;for(let o=0;o<t.length;o+=2){let s=t[o+1],a=s===-1?n(e,i):i[s];i[r++]=a}}}function GP(i){let e=i.tView;return e===null||e.incompleteFirstPass?i.tView=kg(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts,i.id):e}function kg(i,e,n,t,r,o,s,a,l,c,u){let d=Hn+t,h=d+r,p=DD(d,h),f=typeof c=="function"?c():c;return p[$e]={type:i,blueprint:p,template:n,queries:null,viewQuery:a,declTNode:e,data:p.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1,ssrId:u}}function DD(i,e){let n=[];for(let t=0;t<e;t++)n.push(t<i?null:zi);return n}function kD(i,e,n,t){let o=t.get(SD,UP)||n===ar.ShadowDom,s=i.selectRootElement(e,o);return ND(s),s}function ND(i){RD(i)}var RD=i=>null;function FD(i,e,n,t){let r=QP(e);r.push(n),i.firstCreatePass&&JP(i).push(t,r.length-1)}function LD(i,e,n,t,r,o){let s=e?e.injectorIndex:-1,a=0;return Db()&&(a|=128),{type:n,index:t,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function GC(i,e,n,t){for(let r in i)if(i.hasOwnProperty(r)){n=n===null?{}:n;let o=i[r];t===null?XC(n,e,r,o):t.hasOwnProperty(r)&&XC(n,e,t[r],o)}return n}function XC(i,e,n,t){i.hasOwnProperty(n)?i[n].push(e,t):i[n]=[e,t]}function jD(i,e,n){let t=e.directiveStart,r=e.directiveEnd,o=i.data,s=e.attrs,a=[],l=null,c=null;for(let u=t;u<r;u++){let d=o[u],h=n?n.get(d):null,p=h?h.inputs:null,f=h?h.outputs:null;l=GC(d.inputs,u,l,p),c=GC(d.outputs,u,c,f);let m=l!==null&&s!==null&&!_b(e)?ek(l,u,s):null;a.push(m)}l!==null&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}function BD(i){return i==="class"?"className":i==="for"?"htmlFor":i==="formaction"?"formAction":i==="innerHtml"?"innerHTML":i==="readonly"?"readOnly":i==="tabindex"?"tabIndex":i}function XP(i,e,n,t,r,o,s,a){let l=Ci(e,n),c=e.inputs,u;!a&&c!=null&&(u=c[t])?(Rg(i,n,u,t,r),md(e)&&VD(n,e.index)):e.type&3?(t=BD(t),r=s!=null?s(r,e.value||"",t):r,o.setProperty(l,t,r)):e.type&12}function VD(i,e){let n=bo(e,i);n[je]&16||(n[je]|=64)}function Ng(i,e,n,t){if(Ab()){let r=t===null?null:{"":-1},o=GD(i,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&qP(i,e,n,s,r,a),r&&XD(n,t,r)}n.mergedAttrs=Sl(n.mergedAttrs,n.attrs)}function qP(i,e,n,t,r,o){for(let c=0;c<t.length;c++)rm(Qu(n,e),i,t[c].type);YD(n,i.data.length,t.length);for(let c=0;c<t.length;c++){let u=t[c];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,l=HP(i,e,t.length,null);for(let c=0;c<t.length;c++){let u=t[c];n.mergedAttrs=Sl(n.mergedAttrs,u.hostAttrs),ZD(i,n,e,l,u),qD(l,u,r),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((i.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((i.preOrderCheckHooks??=[]).push(n.index),a=!0),l++}jD(i,n,o)}function UD(i,e,n,t,r){let o=r.hostBindings;if(o){let s=i.hostBindingOpCodes;s===null&&(s=i.hostBindingOpCodes=[]);let a=~e.index;zD(s)!=a&&s.push(a),s.push(n,t,o)}}function zD(i){let e=i.length;for(;e>0;){let n=i[--e];if(typeof n=="number"&&n<0)return n}return 0}function HD(i,e,n,t){let r=n.directiveStart,o=n.directiveEnd;md(n)&&$D(e,n,i.data[r+n.componentOffset]),i.firstCreatePass||Qu(n,e),yo(t,e);let s=n.initialInputs;for(let a=r;a<o;a++){let l=i.data[a],c=hs(e,i,a,n);if(yo(c,e),s!==null&&JD(e,a-r,c,l,n,s),Vr(l)){let u=bo(n.index,e);u[ji]=hs(e,i,a,n)}}}function YP(i,e,n){let t=n.directiveStart,r=n.directiveEnd,o=n.index,s=A1();try{us(o);for(let a=t;a<r;a++){let l=i.data[a],c=e[a];nm(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&WD(l,c)}}finally{us(-1),nm(s)}}function WD(i,e){i.hostBindings!==null&&i.hostBindings(1,e)}function GD(i,e){let n=i.directiveRegistry,t=null,r=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(vb(e,s.selectors,!1))if(t||(t=[]),Vr(s))if(s.findHostDirectiveDefs!==null){let a=[];r=r||new Map,s.findHostDirectiveDefs(s,a,r),t.unshift(...a,s);let l=a.length;Tm(i,e,l)}else t.unshift(s),Tm(i,e,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,t,r),t.push(s)}return t===null?null:[t,r]}function Tm(i,e,n){e.componentOffset=n,(i.components??=[]).push(e.index)}function XD(i,e,n){if(e){let t=i.localNames=[];for(let r=0;r<e.length;r+=2){let o=n[e[r+1]];if(o==null)throw new ne(-301,!1);t.push(e[r],o)}}}function qD(i,e,n){if(n){if(e.exportAs)for(let t=0;t<e.exportAs.length;t++)n[e.exportAs[t]]=i;Vr(e)&&(n[""]=i)}}function YD(i,e,n){i.flags|=1,i.directiveStart=e,i.directiveEnd=e+n,i.providerIndexes=e}function ZD(i,e,n,t,r){i.data[t]=r;let o=r.factory||(r.factory=cs(r.type,!0)),s=new ds(o,Vr(r),x);i.blueprint[t]=s,n[t]=s,UD(i,e,t,HP(i,n,r.hostVars,zi),r)}function $D(i,e,n){let t=Ci(e,i),r=GP(n),o=i[Br].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=Id(i,Ed(i,r,null,s,t,e,null,o.createRenderer(t,n),null,null,null));i[e.index]=a}function KD(i,e,n,t,r,o){let s=Ci(i,e);QD(e[Gt],s,o,i.value,n,t,r)}function QD(i,e,n,t,r,o,s){if(o==null)i.removeAttribute(e,r,n);else{let a=s==null?ss(o):s(o,t||"",r);i.setAttribute(e,r,a,n)}}function JD(i,e,n,t,r,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let l=s[a++],c=s[a++],u=s[a++];ZP(t,n,l,c,u)}}function ZP(i,e,n,t,r){let o=Tn(null);try{let s=i.inputTransforms;s!==null&&s.hasOwnProperty(t)&&(r=s[t].call(e,r)),i.setInput!==null?i.setInput(e,r,n,t):e[t]=r}finally{Tn(o)}}function ek(i,e,n){let t=null,r=0;for(;r<n.length;){let o=n[r];if(o===0){r+=4;continue}else if(o===5){r+=2;continue}if(typeof o=="number")break;if(i.hasOwnProperty(o)){t===null&&(t=[]);let s=i[o];for(let a=0;a<s.length;a+=2)if(s[a]===e){t.push(o,s[a+1],n[r+1]);break}}r+=2}return t}function $P(i,e,n,t){return[i,!0,0,e,null,t,null,n,null,null]}function KP(i,e){let n=i.contentQueries;if(n!==null){let t=Tn(null);try{for(let r=0;r<n.length;r+=2){let o=n[r],s=n[r+1];if(s!==-1){let a=i.data[s];lg(o),a.contentQueries(2,e[s],s)}}}finally{Tn(t)}}}function Id(i,e){return i[Dl]?i[SC][Li]=e:i[Dl]=e,i[SC]=e,e}function Am(i,e,n){lg(0);let t=Tn(null);try{e(i,n)}finally{Tn(t)}}function QP(i){return i[Al]||(i[Al]=[])}function JP(i){return i.cleanup||(i.cleanup=[])}function tk(i,e,n){return(i===null||Vr(i))&&(n=f1(n[e.index])),n[Gt]}function ew(i,e){let n=i[ua],t=n?n.get(zr,null):null;t&&t.handleError(e)}function Rg(i,e,n,t,r){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],l=e[s],c=i.data[s];ZP(c,l,t,a,r)}}function tw(i,e,n){let t=Eb(e,i);TA(i[Gt],t,n)}var nk=100;function ik(i,e=!0){let n=i[Br],t=n.rendererFactory,r=n.afterRenderEventManager,o=!1;o||(t.begin?.(),r?.begin());try{rk(i)}catch(s){throw e&&ew(i,s),s}finally{o||(t.end?.(),n.inlineEffectRunner?.flush(),r?.end())}}function rk(i){Dm(i,0);let e=0;for(;Tb(i);){if(e===nk)throw new ne(103,!1);e++,Dm(i,1)}}function ok(i,e,n,t){let r=e[je];if((r&256)===256)return;let o=!1;!o&&e[Br].inlineEffectRunner?.flush(),cg(e);let s=null,a=null;!o&&sk(i)&&(a=xD(e),s=Vy(a));try{Sb(e),I1(i.bindingStartIndex),n!==null&&WP(i,e,n,2,t);let l=(r&3)===3;if(!o)if(l){let d=i.preOrderCheckHooks;d!==null&&Vu(e,d,null)}else{let d=i.preOrderHooks;d!==null&&Uu(e,d,0,null),Rf(e,0)}if(ak(e),nw(e,0),i.contentQueries!==null&&KP(i,e),!o)if(l){let d=i.contentCheckHooks;d!==null&&Vu(e,d)}else{let d=i.contentHooks;d!==null&&Uu(e,d,1),Rf(e,1)}TD(i,e);let c=i.components;c!==null&&rw(e,c,0);let u=i.viewQuery;if(u!==null&&Am(2,u,t),!o)if(l){let d=i.viewCheckHooks;d!==null&&Vu(e,d)}else{let d=i.viewHooks;d!==null&&Uu(e,d,2),Rf(e,2)}if(i.firstUpdatePass===!0&&(i.firstUpdatePass=!1),e[Nf]){for(let d of e[Nf])d();e[Nf]=null}o||(e[je]&=-73)}catch(l){throw kl(e),l}finally{a!==null&&(Uy(a,s),OD(a)),ug()}}function sk(i){return i.type!==2}function nw(i,e){for(let n=mP(i);n!==null;n=gP(n)){n[je]&=~ha.HasChildViewsToRefresh;for(let t=ei;t<n.length;t++){let r=n[t];iw(r,e)}}}function ak(i){for(let e=mP(i);e!==null;e=gP(e)){if(!(e[je]&ha.HasTransplantedViews))continue;let n=e[da];for(let t=0;t<n.length;t++){let r=n[t],o=r[tn];_1(r)}}}function lk(i,e,n){let t=bo(e,i);iw(t,n)}function iw(i,e){rg(i)&&Dm(i,e)}function Dm(i,e){let t=i[$e],r=i[je],o=i[as],s=!!(e===0&&r&16);if(s||=!!(r&64&&e===0),s||=!!(r&1024),s||=!!(o?.dirty&&_f(o)),o&&(o.dirty=!1),i[je]&=-9217,s)ok(t,i,t.template,i[ji]);else if(r&8192){nw(i,1);let a=t.components;a!==null&&rw(i,a,1)}}function rw(i,e,n){for(let t=0;t<e.length;t++)lk(i,e[t],n)}function Fg(i){for(i[Br].changeDetectionScheduler?.notify();i;){i[je]|=64;let e=Pg(i);if(s1(i)&&!e)return i;i=e}return null}var fs=class{get rootNodes(){let e=this._lView,n=e[$e];return od(n,e,n.firstChild,[])}constructor(e,n,t=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ji]}set context(e){this._lView[ji]=e}get destroyed(){return(this._lView[je]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[tn];if(Vi(e)){let n=e[Yu],t=n?n.indexOf(this):-1;t>-1&&(um(e,t),Ju(n,t))}this._attachedToViewContainer=!1}CP(this._lView[$e],this._lView)}onDestroy(e){y1(this._lView,e)}markForCheck(){Fg(this._cdRefInjectingView||this._lView)}detach(){this._lView[je]&=-129}reattach(){tm(this._lView),this._lView[je]|=128}detectChanges(){this._lView[je]|=1024,ik(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ne(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,NA(this._lView[$e],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ne(902,!1);this._appRef=e,tm(this._lView)}},Zt=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=ck;let i=e;return i})();function ck(i){return uk(ni(),it(),(i&16)===16)}function uk(i,e,n){if(md(i)&&!n){let t=bo(i.index,e);return new fs(t,t)}else if(i.type&47){let t=e[Bi];return new fs(t,e)}return null}var qC=new Set;function Lg(i){qC.has(i)||(qC.add(i),performance?.mark?.("mark_feature_usage",{detail:{feature:i}}))}var km=class extends _e{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,t){let r=e,o=n||(()=>null),s=t;if(e&&typeof e=="object"){let l=e;r=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=zf(o),r&&(r=zf(r)),s&&(s=zf(s)));let a=super.subscribe({next:r,error:o,complete:s});return e instanceof Pn&&e.add(a),a}};function zf(i){return e=>{setTimeout(i,void 0,e)}}var Me=km;function YC(...i){}function dk(){let i=typeof Kt.requestAnimationFrame=="function",e=Kt[i?"requestAnimationFrame":"setTimeout"],n=Kt[i?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let t=e[Zone.__symbol__("OriginalDelegate")];t&&(e=t);let r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var ye=class i{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:t=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Me(!1),this.onMicrotaskEmpty=new Me(!1),this.onStable=new Me(!1),this.onError=new Me(!1),typeof Zone>"u")throw new ne(908,!1);Zone.assertZonePatched();let r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!t&&n,r.shouldCoalesceRunChangeDetection=t,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=dk().nativeRequestAnimationFrame,fk(r)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!i.isInAngularZone())throw new ne(909,!1)}static assertNotInAngularZone(){if(i.isInAngularZone())throw new ne(909,!1)}run(e,n,t){return this._inner.run(e,n,t)}runTask(e,n,t,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,hk,YC,YC);try{return o.runTask(s,n,t)}finally{o.cancelTask(s)}}runGuarded(e,n,t){return this._inner.runGuarded(e,n,t)}runOutsideAngular(e){return this._outer.run(e)}},hk={};function jg(i){if(i._nesting==0&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function pk(i){i.isCheckStableRunning||i.lastRequestAnimationFrameId!==-1||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Kt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Nm(i),i.isCheckStableRunning=!0,jg(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Nm(i))}function fk(i){let e=()=>{pk(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,t,r,o,s,a)=>{if(mk(a))return n.invokeTask(r,o,s,a);try{return ZC(i),n.invokeTask(r,o,s,a)}finally{(i.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||i.shouldCoalesceRunChangeDetection)&&e(),$C(i)}},onInvoke:(n,t,r,o,s,a,l)=>{try{return ZC(i),n.invoke(r,o,s,a,l)}finally{i.shouldCoalesceRunChangeDetection&&e(),$C(i)}},onHasTask:(n,t,r,o)=>{n.hasTask(r,o),t===r&&(o.change=="microTask"?(i._hasPendingMicrotasks=o.microTask,Nm(i),jg(i)):o.change=="macroTask"&&(i.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,t,r,o)=>(n.handleError(r,o),i.runOutsideAngular(()=>i.onError.emit(o)),!1)})}function Nm(i){i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&i.lastRequestAnimationFrameId!==-1?i.hasPendingMicrotasks=!0:i.hasPendingMicrotasks=!1}function ZC(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function $C(i){i._nesting--,jg(i)}var Rm=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Me,this.onMicrotaskEmpty=new Me,this.onStable=new Me,this.onError=new Me}run(e,n,t){return e.apply(n,t)}runGuarded(e,n,t){return e.apply(n,t)}runOutsideAngular(e){return e()}runTask(e,n,t,r){return e.apply(n,t)}};function mk(i){return!Array.isArray(i)||i.length!==1?!1:i[0].data?.__ignore_ng_zone__===!0}function gk(i="zone.js",e){return i==="noop"?new Rm:i==="zone.js"?new ye(e):i}var _k=(()=>{let e=class e{constructor(){this.renderDepth=0,this.handler=null,this.internalCallbacks=[]}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){if(this.renderDepth--,this.renderDepth===0){for(let t of this.internalCallbacks)t();this.internalCallbacks.length=0,this.handler?.execute()}}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=Y({token:e,providedIn:"root",factory:()=>new e});let i=e;return i})();function vk(i,e){let n=bo(e,i),t=n[$e];yk(t,n);let r=n[hr];r!==null&&n[Tl]===null&&(n[Tl]=Og(r,n[ua])),Bg(t,n,n[ji])}function yk(i,e){for(let n=e.length;n<i.blueprint.length;n++)e.push(i.blueprint[n])}function Bg(i,e,n){cg(e);try{let t=i.viewQuery;t!==null&&Am(1,t,n);let r=i.template;r!==null&&WP(i,e,r,1,n),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&KP(i,e),i.staticViewQueries&&Am(2,i.viewQuery,n);let o=i.components;o!==null&&Ck(e,o)}catch(t){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),t}finally{e[je]&=-5,ug()}}function Ck(i,e){for(let n=0;n<e.length;n++)vk(i,e[n])}function sd(i,e,n){let t=n?i.styles:null,r=n?i.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)r=Zf(r,a);else if(o==2){let l=a,c=e[++s];t=Zf(t,l+": "+c+";")}}n?i.styles=t:i.stylesWithoutHost=t,n?i.classes=r:i.classesWithoutHost=r}var ad=class extends xn{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=ca(e);return new ld(n,this.ngModule)}};function KC(i){let e=[];for(let n in i)if(i.hasOwnProperty(n)){let t=i[n];e.push({propName:t,templateName:n})}return e}function bk(i){let e=i.toLowerCase();return e==="svg"?u1:e==="math"?d1:null}var Fm=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,t){t=pd(t);let r=this.injector.get(e,Vf,t);return r!==Vf||n===Vf?r:this.parentInjector.get(e,n,t)}},ld=class extends id{get inputs(){let e=this.componentDef,n=e.inputTransforms,t=KC(e.inputs);if(n!==null)for(let r of t)n.hasOwnProperty(r.propName)&&(r.transform=n[r.propName]);return t}get outputs(){return KC(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=JT(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,t,r){r=r||this.ngModule;let o=r instanceof cr?r:r?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let s=o?new Fm(e,o):e,a=s.get(ps,null);if(a===null)throw new ne(407,!1);let l=s.get(CD,null),c=s.get(_k,null),u=s.get(Cm,null),d={rendererFactory:a,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:c,changeDetectionScheduler:u},h=a.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",f=t?kD(h,t,this.componentDef.encapsulation,s):vP(h,p,bk(p)),m=512;this.componentDef.signals?m|=4096:this.componentDef.onPush||(m|=16);let _=null;f!==null&&(_=Og(f,s,!0));let P=kg(0,null,null,1,0,null,null,null,null,null,null),I=Ed(null,P,null,m,null,null,d,h,s,null,_);cg(I);let b,S;try{let k=this.componentDef,N,X=null;k.findHostDirectiveDefs?(N=[],X=new Map,k.findHostDirectiveDefs(k,N,X),N.push(k)):N=[k];let F=Pk(I,f),j=wk(F,f,k,N,I,d,h);S=Ib(P,Hn),f&&Ok(h,k,f,t),n!==void 0&&Ek(S,this.ngContentSelectors,n),b=Mk(j,k,N,X,I,[Ik]),Bg(P,I,null)}finally{ug()}return new Lm(this.componentType,b,_a(S,I),I,S)}},Lm=class extends bm{constructor(e,n,t,r,o){super(),this.location=t,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new fs(r,void 0,!1),this.componentType=e}setInput(e,n){let t=this._tNode.inputs,r;if(t!==null&&(r=t[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;Rg(o[$e],o,r,e,n),this.previousInputValues.set(e,n);let s=bo(this._tNode.index,o);Fg(s)}}get injector(){return new os(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Pk(i,e){let n=i[$e],t=Hn;return i[t]=e,va(n,t,2,"#host",null)}function wk(i,e,n,t,r,o,s){let a=r[$e];xk(t,i,e,s);let l=null;e!==null&&(l=Og(e,r[ua]));let c=o.rendererFactory.createRenderer(e,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=Ed(r,GP(n),null,u,r[i.index],i,o,c,null,null,l);return a.firstCreatePass&&Tm(a,i,t.length-1),Id(r,d),r[i.index]=d}function xk(i,e,n,t){for(let r of i)e.mergedAttrs=Sl(e.mergedAttrs,r.hostAttrs);e.mergedAttrs!==null&&(sd(e,e.mergedAttrs,!0),n!==null&&EP(t,n,e))}function Mk(i,e,n,t,r,o){let s=ni(),a=r[$e],l=Ci(s,r);qP(a,r,s,n,null,t);for(let u=0;u<n.length;u++){let d=s.directiveStart+u,h=hs(r,a,d,s);yo(h,r)}YP(a,r,s),l&&yo(l,r);let c=hs(r,a,s.directiveStart+s.componentOffset,s);if(i[ji]=r[ji]=c,o!==null)for(let u of o)u(c,e);return Tg(a,s,i),c}function Ok(i,e,n,t){if(t)Jf(i,n,["ng-version","17.0.8"]);else{let{attrs:r,classes:o}=e1(e.selectors[0]);r&&Jf(i,n,r),o&&o.length>0&&OP(i,n,o.join(" "))}}function Ek(i,e,n){let t=i.projection=[];for(let r=0;r<e.length;r++){let o=n[r];t.push(o!=null?Array.from(o):null)}}function Ik(){let i=ni();bd(it()[$e],i)}function Sk(i){return Object.getPrototypeOf(i.prototype).constructor}function ke(i){let e=Sk(i.type),n=!0,t=[i];for(;e;){let r;if(Vr(i))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ne(903,!1);r=e.\u0275dir}if(r){if(n){t.push(r);let s=i;s.inputs=Lu(i.inputs),s.inputTransforms=Lu(i.inputTransforms),s.declaredInputs=Lu(i.declaredInputs),s.outputs=Lu(i.outputs);let a=r.hostBindings;a&&kk(i,a);let l=r.viewQuery,c=r.contentQueries;if(l&&Ak(i,l),c&&Dk(i,c),Du(i.inputs,r.inputs),Du(i.declaredInputs,r.declaredInputs),Du(i.outputs,r.outputs),r.inputTransforms!==null&&(s.inputTransforms===null&&(s.inputTransforms={}),Du(s.inputTransforms,r.inputTransforms)),Vr(r)&&r.data.animation){let u=i.data;u.animation=(u.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(i),a===ke&&(n=!1)}}e=Object.getPrototypeOf(e)}Tk(t)}function Tk(i){let e=0,n=null;for(let t=i.length-1;t>=0;t--){let r=i[t];r.hostVars=e+=r.hostVars,r.hostAttrs=Sl(r.hostAttrs,n=Sl(n,r.hostAttrs))}}function Lu(i){return i===la?{}:i===zn?[]:i}function Ak(i,e){let n=i.viewQuery;n?i.viewQuery=(t,r)=>{e(t,r),n(t,r)}:i.viewQuery=e}function Dk(i,e){let n=i.contentQueries;n?i.contentQueries=(t,r,o)=>{e(t,r,o),n(t,r,o)}:i.contentQueries=e}function kk(i,e){let n=i.hostBindings;n?i.hostBindings=(t,r)=>{e(t,r),n(t,r)}:i.hostBindings=e}function ow(i,e,n){return i[e]=n}function Hr(i,e,n){let t=i[e];return Object.is(t,n)?!1:(i[e]=n,!0)}function sw(i,e,n,t){let r=Hr(i,e,n);return Hr(i,e+1,t)||r}function pr(i,e,n,t){let r=it(),o=vd();if(Hr(r,o,e)){let s=an(),a=dg();KD(a,r,i,e,n,t)}return pr}function Nk(i,e,n,t){return Hr(i,vd(),n)?e+ss(n)+t:zi}function Rk(i,e,n,t,r,o){let s=E1(),a=sw(i,s,n,r);return ag(2),a?e+ss(n)+t+ss(r)+o:zi}function ju(i,e){return i<<17|e<<2}function ms(i){return i>>17&32767}function Fk(i){return(i&2)==2}function Lk(i,e){return i&131071|e<<17}function jm(i){return i|2}function ma(i){return(i&131068)>>2}function Hf(i,e){return i&-131069|e<<2}function jk(i){return(i&1)===1}function Bm(i){return i|1}function Bk(i,e,n,t,r,o){let s=o?e.classBindings:e.styleBindings,a=ms(s),l=ma(s);i[t]=n;let c=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||Bl(d,u)>0)&&(c=!0)}else u=n;if(r)if(l!==0){let h=ms(i[a+1]);i[t+1]=ju(h,a),h!==0&&(i[h+1]=Hf(i[h+1],t)),i[a+1]=Lk(i[a+1],t)}else i[t+1]=ju(a,0),a!==0&&(i[a+1]=Hf(i[a+1],t)),a=t;else i[t+1]=ju(l,0),a===0?a=t:i[l+1]=Hf(i[l+1],t),l=t;c&&(i[t+1]=jm(i[t+1])),QC(i,u,t,!0,o),QC(i,u,t,!1,o),Vk(e,u,i,t,o),s=ju(a,l),o?e.classBindings=s:e.styleBindings=s}function Vk(i,e,n,t,r){let o=r?i.residualClasses:i.residualStyles;o!=null&&typeof e=="string"&&Bl(o,e)>=0&&(n[t+1]=Bm(n[t+1]))}function QC(i,e,n,t,r){let o=i[n+1],s=e===null,a=t?ms(o):ma(o),l=!1;for(;a!==0&&(l===!1||s);){let c=i[a],u=i[a+1];Uk(c,e)&&(l=!0,i[a+1]=t?Bm(u):jm(u)),a=t?ms(u):ma(u)}l&&(i[n+1]=t?jm(o):Bm(o))}function Uk(i,e){return i===null||e==null||(Array.isArray(i)?i[1]:i)===e?!0:Array.isArray(i)&&typeof e=="string"?Bl(i,e)>=0:!1}var Fi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function zk(i){return i.substring(Fi.key,Fi.keyEnd)}function Hk(i){return Wk(i),aw(i,lw(i,0,Fi.textEnd))}function aw(i,e){let n=Fi.textEnd;return n===e?-1:(e=Fi.keyEnd=Gk(i,Fi.key=e,n),lw(i,e,n))}function Wk(i){Fi.key=0,Fi.keyEnd=0,Fi.value=0,Fi.valueEnd=0,Fi.textEnd=i.length}function lw(i,e,n){for(;e<n&&i.charCodeAt(e)<=32;)e++;return e}function Gk(i,e,n){for(;e<n&&i.charCodeAt(e)>32;)e++;return e}function w(i,e,n){let t=it(),r=vd();if(Hr(t,r,e)){let o=an(),s=dg();XP(o,s,t,i,e,t[Gt],n,!1)}return w}function Vm(i,e,n,t,r){let o=e.inputs,s=r?"class":"style";Rg(i,n,o[s],s,t)}function Xr(i,e,n){return cw(i,e,n,!1),Xr}function Ve(i,e){return cw(i,e,null,!0),Ve}function qr(i){qk(Jk,Xk,i,!0)}function Xk(i,e){for(let n=Hk(e);n>=0;n=aw(e,n))fg(i,zk(e),!0)}function cw(i,e,n,t){let r=it(),o=an(),s=ag(2);if(o.firstUpdatePass&&dw(o,i,s,t),e!==zi&&Hr(r,s,e)){let a=o.data[Po()];hw(o,a,r,r[Gt],i,r[s+1]=t2(e,n),t,s)}}function qk(i,e,n,t){let r=an(),o=ag(2);r.firstUpdatePass&&dw(r,null,o,t);let s=it();if(n!==zi&&Hr(s,o,n)){let a=r.data[Po()];if(pw(a,t)&&!uw(r,o)){let l=t?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(n=Zf(l,n||"")),Vm(r,a,s,n,t)}else e2(r,a,s,s[Gt],s[o+1],s[o+1]=Qk(i,e,n),t,o)}}function uw(i,e){return e>=i.expandoStartIndex}function dw(i,e,n,t){let r=i.data;if(r[n+1]===null){let o=r[Po()],s=uw(i,n);pw(o,t)&&e===null&&!s&&(e=!1),e=Yk(r,o,e,t),Bk(r,o,e,n,s,t)}}function Yk(i,e,n,t){let r=Nb(i),o=t?e.residualClasses:e.residualStyles;if(r===null)(t?e.classBindings:e.styleBindings)===0&&(n=Wf(null,i,e,n,t),n=Fl(n,e.attrs,t),o=null);else{let s=e.directiveStylingLast;if(s===-1||i[s]!==r)if(n=Wf(r,i,e,n,t),o===null){let l=Zk(i,e,t);l!==void 0&&Array.isArray(l)&&(l=Wf(null,i,e,l[1],t),l=Fl(l,e.attrs,t),$k(i,e,t,l))}else o=Kk(i,e,t)}return o!==void 0&&(t?e.residualClasses=o:e.residualStyles=o),n}function Zk(i,e,n){let t=n?e.classBindings:e.styleBindings;if(ma(t)!==0)return i[ms(t)]}function $k(i,e,n,t){let r=n?e.classBindings:e.styleBindings;i[ms(r)]=t}function Kk(i,e,n){let t,r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++){let s=i[o].hostAttrs;t=Fl(t,s,n)}return Fl(t,e.attrs,n)}function Wf(i,e,n,t,r){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],t=Fl(t,o.hostAttrs,r),o!==i);)a++;return i!==null&&(n.directiveStylingLast=a),t}function Fl(i,e,n){let t=n?1:2,r=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?r=s:r===t&&(Array.isArray(i)||(i=i===void 0?[]:["",i]),fg(i,s,n?!0:e[++o]))}return i===void 0?null:i}function Qk(i,e,n){if(n==null||n==="")return zn;let t=[],r=Ui(n);if(Array.isArray(r))for(let o=0;o<r.length;o++)i(t,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&i(t,o,r[o]);else typeof r=="string"&&e(t,r);return t}function Jk(i,e,n){let t=String(e);t!==""&&!t.includes(" ")&&fg(i,t,n)}function e2(i,e,n,t,r,o,s,a){r===zi&&(r=zn);let l=0,c=0,u=0<r.length?r[0]:null,d=0<o.length?o[0]:null;for(;u!==null||d!==null;){let h=l<r.length?r[l+1]:void 0,p=c<o.length?o[c+1]:void 0,f=null,m;u===d?(l+=2,c+=2,h!==p&&(f=d,m=p)):d===null||u!==null&&u<d?(l+=2,f=u):(c+=2,f=d,m=p),f!==null&&hw(i,e,n,t,f,m,s,a),u=l<r.length?r[l]:null,d=c<o.length?o[c]:null}}function hw(i,e,n,t,r,o,s,a){if(!(e.type&3))return;let l=i.data,c=l[a+1],u=jk(c)?JC(l,e,n,r,ma(c),s):void 0;if(!cd(u)){cd(o)||Fk(c)&&(o=JC(l,null,n,r,a,s));let d=Eb(Po(),n);YA(t,s,d,r,o)}}function JC(i,e,n,t,r,o){let s=e===null,a;for(;r>0;){let l=i[r],c=Array.isArray(l),u=c?l[1]:l,d=u===null,h=n[r+1];h===zi&&(h=d?zn:void 0);let p=d?Lf(h,t):u===t?h:void 0;if(c&&!cd(p)&&(p=Lf(l,t)),cd(p)&&(a=p,s))return a;let f=i[r+1];r=s?ms(f):ma(f)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(a=Lf(l,t))}return a}function cd(i){return i!==void 0}function t2(i,e){return i==null||i===""||(typeof e=="string"?i=i+e:typeof i=="object"&&(i=wn(Ui(i)))),i}function pw(i,e){return(i.flags&(e?8:16))!==0}var GX=new RegExp(`^(\\d+)*(${pD}|${hD})*(.*)`);var n2=(i,e)=>null;function eb(i,e){return n2(i,e)}function i2(i,e,n,t){let r=e.tView,s=i[je]&4096?4096:16,a=Ed(i,r,n,s,null,e,null,null,null,t?.injector??null,t?.dehydratedView??null),l=i[e.index];a[jl]=l;let c=i[sr];return c!==null&&(a[sr]=c.createEmbeddedView(r)),Bg(r,a,n),a}function tb(i,e){return!e||e.firstChild===null||pP(i)}function r2(i,e,n,t=!0){let r=e[$e];if(FA(r,e,i,n),t){let s=dm(n,i),a=e[Gt],l=wg(a,i[ls]);l!==null&&kA(r,i[ti],a,e,l,s)}let o=e[Tl];o!==null&&o.firstChild!==null&&(o.firstChild=null)}var dn=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=o2;let i=e;return i})();function o2(){let i=ni();return mw(i,it())}var s2=dn,fw=class extends s2{constructor(e,n,t){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=t}get element(){return _a(this._hostTNode,this._hostLView)}get injector(){return new os(this._hostTNode,this._hostLView)}get parentInjector(){let e=hg(this._hostTNode,this._hostLView);if(Hb(e)){let n=$u(e,this._hostLView),t=Zu(e),r=n[$e].data[t+8];return new os(r,n)}else return new os(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=nb(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-ei}createEmbeddedView(e,n,t){let r,o;typeof t=="number"?r=t:t!=null&&(r=t.index,o=t.injector);let s=eb(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,r,tb(this._hostTNode,s)),a}createComponent(e,n,t,r,o){let s=e&&!$1(e),a;if(s)a=n;else{let f=n||{};a=f.index,t=f.injector,r=f.projectableNodes,o=f.environmentInjector||f.ngModuleRef}let l=s?e:new ld(ca(e)),c=t||this.parentInjector;if(!o&&l.ngModule==null){let m=(s?c:this.parentInjector).get(cr,null);m&&(o=m)}let u=ca(l.componentType??{}),d=eb(this._lContainer,u?.id??null),h=d?.firstChild??null,p=l.create(c,r,h,o);return this.insertImpl(p.hostView,a,tb(this._hostTNode,d)),p}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,t){let r=e._lView;if(g1(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=r[tn],c=new fw(l,l[ti],l[tn]);c.detach(c.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return r2(s,r,o,t),e.attachToViewContainerRef(),Jb(Gf(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=nb(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),t=um(this._lContainer,n);t&&(Ju(Gf(this._lContainer),n),CP(t[$e],t))}detach(e){let n=this._adjustIndex(e,-1),t=um(this._lContainer,n);return t&&Ju(Gf(this._lContainer),n)!=null?new fs(t):null}_adjustIndex(e,n=0){return e??this.length+n}};function nb(i){return i[Yu]}function Gf(i){return i[Yu]||(i[Yu]=[])}function mw(i,e){let n,t=e[i.index];return Vi(t)?n=t:(n=$P(t,e,null,i),e[i.index]=n,Id(e,n)),l2(n,e,i,t),new fw(n,i,e)}function a2(i,e){let n=i[Gt],t=n.createComment(""),r=Ci(e,i),o=wg(n,r);return nd(n,o,t,zA(n,r),!1),t}var l2=d2,c2=(i,e,n)=>!1;function u2(i,e,n){return c2(i,e,n)}function d2(i,e,n,t){if(i[ls])return;let r;n.type&8?r=lr(t):r=a2(e,n),i[ls]=r}function h2(i,e,n,t,r,o,s,a,l){let c=e.consts,u=va(e,i,4,s||null,pa(c,a));Ng(e,n,u,pa(c,l)),bd(e,u);let d=u.tView=kg(2,u,t,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function J(i,e,n,t,r,o,s,a){let l=it(),c=an(),u=i+Hn,d=c.firstCreatePass?h2(u,c,l,e,n,t,r,o,s):c.data[u];_s(d,!1);let h=p2(c,l,d,i);yd()&&xd(c,l,h,d),yo(h,l);let p=$P(h,l,h,d);return l[u]=p,Id(l,p),u2(p,d,l),gd(d)&&Ag(c,l,d),s!=null&&Dg(l,d,a),J}var p2=f2;function f2(i,e,n,t){return Cd(!0),e[Gt].createComment("")}function m2(i,e,n,t,r,o){let s=e.consts,a=pa(s,r),l=va(e,i,2,t,a);return Ng(e,n,l,pa(s,o)),l.attrs!==null&&sd(l,l.attrs,!1),l.mergedAttrs!==null&&sd(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function v(i,e,n,t){let r=it(),o=an(),s=Hn+i,a=r[Gt],l=o.firstCreatePass?m2(s,o,r,e,n,t):o.data[s],c=g2(o,r,l,a,e,i);r[s]=c;let u=gd(l);return _s(l,!0),EP(a,c,l),(l.flags&32)!==32&&yd()&&xd(o,r,c,l),C1()===0&&yo(c,r),b1(),u&&(Ag(o,r,l),Tg(o,l,r)),t!==null&&Dg(r,l),v}function y(){let i=ni();og()?sg():(i=i.parent,_s(i,!1));let e=i;w1(e)&&x1(),P1();let n=an();return n.firstCreatePass&&(bd(n,i),ng(i)&&n.queries.elementEnd(i)),e.classesWithoutHost!=null&&j1(e)&&Vm(n,e,it(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&B1(e)&&Vm(n,e,it(),e.stylesWithoutHost,!1),y}function q(i,e,n,t){return v(i,e,n,t),y(),q}var g2=(i,e,n,t,r,o)=>(Cd(!0),vP(t,r,N1()));function _2(i,e,n,t,r){let o=e.consts,s=pa(o,t),a=va(e,i,8,"ng-container",s);s!==null&&sd(a,s,!0);let l=pa(o,r);return Ng(e,n,a,l),e.queries!==null&&e.queries.elementStart(e,a),a}function st(i,e,n){let t=it(),r=an(),o=i+Hn,s=r.firstCreatePass?_2(o,r,t,e,n):r.data[o];_s(s,!0);let a=v2(r,t,s,i);return t[o]=a,yd()&&xd(r,t,a,s),yo(a,t),gd(s)&&(Ag(r,t,s),Tg(r,s,t)),n!=null&&Dg(t,s),st}function at(){let i=ni(),e=an();return og()?sg():(i=i.parent,_s(i,!1)),e.firstCreatePass&&(bd(e,i),ng(i)&&e.queries.elementEnd(i)),at}function Hi(i,e,n){return st(i,e,n),at(),Hi}var v2=(i,e,n,t)=>(Cd(!0),AA(e[Gt],""));function le(){return it()}function Vg(i,e,n){let t=it(),r=vd();if(Hr(t,r,e)){let o=an(),s=dg(),a=Nb(o.data),l=tk(a,s,t);XP(o,s,t,i,e,l,n,!0)}return Vg}var rs=void 0;function y2(i){let e=i,n=Math.floor(Math.abs(i)),t=i.toString().replace(/^[^.]*\.?/,"").length;return n===1&&t===0?1:5}var C2=["en",[["a","p"],["AM","PM"],rs],[["AM","PM"],rs,rs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],rs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],rs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",rs,"{1} 'at' {0}",rs],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",y2],Xf={};function bi(i){let e=b2(i),n=ib(e);if(n)return n;let t=e.split("-")[0];if(n=ib(t),n)return n;if(t==="en")return C2;throw new ne(701,!1)}function ib(i){return i in Xf||(Xf[i]=Kt.ng&&Kt.ng.common&&Kt.ng.common.locales&&Kt.ng.common.locales[i]),Xf[i]}var Qt=function(i){return i[i.LocaleId=0]="LocaleId",i[i.DayPeriodsFormat=1]="DayPeriodsFormat",i[i.DayPeriodsStandalone=2]="DayPeriodsStandalone",i[i.DaysFormat=3]="DaysFormat",i[i.DaysStandalone=4]="DaysStandalone",i[i.MonthsFormat=5]="MonthsFormat",i[i.MonthsStandalone=6]="MonthsStandalone",i[i.Eras=7]="Eras",i[i.FirstDayOfWeek=8]="FirstDayOfWeek",i[i.WeekendRange=9]="WeekendRange",i[i.DateFormat=10]="DateFormat",i[i.TimeFormat=11]="TimeFormat",i[i.DateTimeFormat=12]="DateTimeFormat",i[i.NumberSymbols=13]="NumberSymbols",i[i.NumberFormats=14]="NumberFormats",i[i.CurrencyCode=15]="CurrencyCode",i[i.CurrencySymbol=16]="CurrencySymbol",i[i.CurrencyName=17]="CurrencyName",i[i.Currencies=18]="Currencies",i[i.Directionality=19]="Directionality",i[i.PluralCase=20]="PluralCase",i[i.ExtraData=21]="ExtraData",i}(Qt||{});function b2(i){return i.toLowerCase().replace(/_/g,"-")}var ud="en-US";var P2=ud;function w2(i){ST(i,"Expected localeId to be defined"),typeof i=="string"&&(P2=i.toLowerCase().replace(/_/g,"-"))}function ya(i){return!!i&&typeof i.then=="function"}function Ug(i){return!!i&&typeof i.subscribe=="function"}function T(i,e,n,t){let r=it(),o=an(),s=ni();return M2(o,r,r[Gt],s,i,e,t),T}function x2(i,e,n,t){let r=i.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===n&&r[o+1]===t){let a=e[Al],l=r[o+2];return a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function M2(i,e,n,t,r,o,s){let a=gd(t),c=i.firstCreatePass&&JP(i),u=e[ji],d=QP(e),h=!0;if(t.type&3||s){let m=Ci(t,e),_=s?s(m):m,P=d.length,I=s?S=>s(lr(S[t.index])):t.index,b=null;if(!s&&a&&(b=x2(i,e,r,t.index)),b!==null){let S=b.__ngLastListenerFn__||b;S.__ngNextListenerFn__=o,b.__ngLastListenerFn__=o,h=!1}else{o=ob(t,e,u,o,!1);let S=n.listen(_,r,o);d.push(o,S),c&&c.push(r,I,P,P+1)}}else o=ob(t,e,u,o,!1);let p=t.outputs,f;if(h&&p!==null&&(f=p[r])){let m=f.length;if(m)for(let _=0;_<m;_+=2){let P=f[_],I=f[_+1],k=e[P][I].subscribe(o),N=d.length;d.push(o,k),c&&c.push(r,t.index,N,-(N+1))}}}function rb(i,e,n,t){try{return rr(6,e,n),n(t)!==!1}catch(r){return ew(i,r),!1}finally{rr(7,e,n)}}function ob(i,e,n,t,r){return function o(s){if(s===Function)return t;let a=i.componentOffset>-1?bo(i.index,e):e;Fg(a);let l=rb(e,n,t,s),c=o.__ngNextListenerFn__;for(;c;)l=rb(e,n,c,s)&&l,c=c.__ngNextListenerFn__;return r&&l===!1&&s.preventDefault(),l}}function A(i=1){return k1(i)}function O2(i,e){let n=null,t=YT(i);for(let r=0;r<e.length;r++){let o=e[r];if(o==="*"){n=r;continue}if(t===null?vb(i,o,!0):KT(t,o))return r}return n}function Ca(i){let e=it()[Bi][ti];if(!e.projection){let n=i?i.length:1,t=e.projection=eP(n,null),r=t.slice(),o=e.child;for(;o!==null;){let s=i?O2(o,i):0;s!==null&&(r[s]?r[s].projectionNext=o:t[s]=o,r[s]=o),o=o.next}}}function ba(i,e=0,n){let t=it(),r=an(),o=va(r,Hn+i,16,null,n||null);o.projection===null&&(o.projection=e),sg(),(!t[Tl]||Db())&&(o.flags&32)!==32&&XA(r,t,o)}function E2(i,e,n,t){n>=i.data.length&&(i.data[n]=null,i.blueprint[n]=null),e[n]=t}function ii(i){let e=O1();return ig(e,Hn+i)}function O(i,e=""){let n=it(),t=an(),r=i+Hn,o=t.firstCreatePass?va(t,r,1,e,null):t.data[r],s=I2(t,n,o,e,i);n[r]=s,yd()&&xd(t,n,s,o),_s(o,!1)}var I2=(i,e,n,t,r)=>(Cd(!0),SA(e[Gt],t));function K(i){return U("",i,""),K}function U(i,e,n){let t=it(),r=Nk(t,i,e,n);return r!==zi&&tw(t,Po(),r),U}function zg(i,e,n,t,r){let o=it(),s=Rk(o,i,e,n,t,r);return s!==zi&&tw(o,Po(),s),zg}function S2(i,e,n){let t=an();if(t.firstCreatePass){let r=Vr(i);Um(n,t.data,t.blueprint,r,!0),Um(e,t.data,t.blueprint,r,!1)}}function Um(i,e,n,t,r){if(i=kn(i),Array.isArray(i))for(let o=0;o<i.length;o++)Um(i[o],e,n,t,r);else{let o=an(),s=it(),a=ni(),l=fa(i)?i:kn(i.provide),c=aP(i),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(fa(i)||!i.multi){let p=new ds(c,r,x),f=Yf(l,e,r?u:u+h,d);f===-1?(rm(Qu(a,s),o,l),qf(o,i,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(p),s.push(p)):(n[f]=p,s[f]=p)}else{let p=Yf(l,e,u+h,d),f=Yf(l,e,u,u+h),m=p>=0&&n[p],_=f>=0&&n[f];if(r&&!_||!r&&!m){rm(Qu(a,s),o,l);let P=D2(r?A2:T2,n.length,r,t,c);!r&&_&&(n[f].providerFactory=P),qf(o,i,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(P),s.push(P)}else{let P=gw(n[r?f:p],c,!r&&t);qf(o,i,p>-1?p:f,P)}!r&&t&&_&&n[f].componentProviders++}}}function qf(i,e,n,t){let r=fa(e),o=dA(e);if(r||o){let l=(o?kn(e.useClass):e).prototype.ngOnDestroy;if(l){let c=i.destroyHooks||(i.destroyHooks=[]);if(!r&&e.multi){let u=c.indexOf(n);u===-1?c.push(n,[t,l]):c[u+1].push(t,l)}else c.push(n,l)}}}function gw(i,e,n){return n&&i.componentProviders++,i.multi.push(e)-1}function Yf(i,e,n,t){for(let r=n;r<t;r++)if(e[r]===i)return r;return-1}function T2(i,e,n,t){return zm(this.multi,[])}function A2(i,e,n,t){let r=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=hs(n,n[$e],this.providerFactory.index,t);o=a.slice(0,s),zm(r,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],zm(r,o);return o}function zm(i,e){for(let n=0;n<i.length;n++){let t=i[n];e.push(t())}return e}function D2(i,e,n,t,r){let o=new ds(i,n,x);return o.multi=[],o.index=e,o.componentProviders=0,gw(o,r,t&&!n),o}function rn(i,e=[]){return n=>{n.providersResolver=(t,r)=>S2(t,r?r(i):i,e)}}var Co=class{},Hm=class{};var dd=class extends Co{constructor(e,n,t){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ad(this);let r=r1(e);this._bootstrapComponents=yA(r.bootstrap),this._r3Injector=cP(e,n,[{provide:Co,useValue:this},{provide:xn,useValue:this.componentFactoryResolver},...t],wn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Wm=class extends Hm{constructor(e){super(),this.moduleType=e}create(e){return new dd(this.moduleType,e,[])}};function k2(i,e,n){return new dd(i,e,n)}var Gm=class extends Co{constructor(e){super(),this.componentFactoryResolver=new ad(this),this.instance=null;let n=new Rl([...e.providers,{provide:Co,useValue:this},{provide:xn,useValue:this.componentFactoryResolver}],e.parent||_g(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function N2(i,e,n=null){return new Gm({providers:i,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var R2=(()=>{let e=class e{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=rP(!1,t.type),o=r.length>0?N2([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,o)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=Y({token:e,providedIn:"environment",factory:()=>new e(D(cr))});let i=e;return i})();function Pa(i){Lg("NgStandalone"),i.getStandaloneInjector=e=>e.get(R2).getOrCreateStandaloneInjector(i)}function _w(i,e,n,t){return Cw(it(),_d(),i,e,n,t)}function vw(i,e,n,t,r){return bw(it(),_d(),i,e,n,t,r)}function yw(i,e){let n=i[e];return n===zi?void 0:n}function Cw(i,e,n,t,r,o){let s=e+n;return Hr(i,s,r)?ow(i,s+1,o?t.call(o,r):t(r)):yw(i,s+1)}function bw(i,e,n,t,r,o,s){let a=e+n;return sw(i,a,r,o)?ow(i,a+2,s?t.call(s,r,o):t(r,o)):yw(i,a+2)}function M(i,e){let n=an(),t,r=i+Hn;n.firstCreatePass?(t=F2(e,n.pipeRegistry),n.data[r]=t,t.onDestroy&&(n.destroyHooks??=[]).push(r,t.onDestroy)):t=n.data[r];let o=t.factory||(t.factory=cs(t.type,!0)),s,a=Un(x);try{let l=Ku(!1),c=o();return Ku(l),E2(n,it(),r,c),c}finally{Un(a)}}function F2(i,e){if(e)for(let n=e.length-1;n>=0;n--){let t=e[n];if(i===t.name)return t}}function E(i,e,n){let t=i+Hn,r=it(),o=ig(r,t);return Pw(r,t)?Cw(r,_d(),e,o.transform,n,o):o.transform(n)}function xo(i,e,n,t){let r=i+Hn,o=it(),s=ig(o,r);return Pw(o,r)?bw(o,_d(),e,s.transform,n,t,s):s.transform(n,t)}function Pw(i,e){return i[$e].data[e].pure}function L2(){return this._results[Symbol.iterator]()}var Xm=class i{get changes(){return this._changes??=new Me}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=i.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=L2)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let t=Q1(e);(this._changesDetected=!K1(this._results,t,n))&&(this._results=t,this.length=t.length,this.last=t[this.length-1],this.first=t[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}},gs=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=V2;let i=e;return i})(),j2=gs,B2=class extends j2{constructor(e,n,t){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=t}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,t){let r=i2(this._declarationLView,this._declarationTContainer,e,{injector:n,dehydratedView:t});return new fs(r)}};function V2(){return Sd(ni(),it())}function Sd(i,e){return i.type&4?new B2(e,i,_a(i,e)):null}var qm=class i{constructor(e){this.queryList=e,this.matches=null}clone(){return new i(this.queryList)}setDirty(){this.queryList.setDirty()}},Ym=class i{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let t=e.contentQueries!==null?e.contentQueries[0]:n.length,r=[];for(let o=0;o<t;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];r.push(a.clone())}return new i(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)xw(e,n).matches!==null&&this.queries[n].setDirty()}},Zm=class{constructor(e,n,t=null){this.predicate=e,this.flags=n,this.read=t}},$m=class i{constructor(e=[]){this.queries=e}elementStart(e,n){for(let t=0;t<this.queries.length;t++)this.queries[t].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let t=0;t<this.length;t++){let r=n!==null?n.length:0,o=this.getByIndex(t).embeddedTView(e,r);o&&(o.indexInDeclarationView=t,n!==null?n.push(o):n=[o])}return n!==null?new i(n):null}template(e,n){for(let t=0;t<this.queries.length;t++)this.queries[t].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Km=class i{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new i(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,t=e.parent;for(;t!==null&&t.type&8&&t.index!==n;)t=t.parent;return n===(t!==null?t.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let t=this.metadata.predicate;if(Array.isArray(t))for(let r=0;r<t.length;r++){let o=t[r];this.matchTNodeWithReadOption(e,n,U2(n,o)),this.matchTNodeWithReadOption(e,n,zu(n,e,o,!1,!1))}else t===gs?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,zu(n,e,t,!1,!1))}matchTNodeWithReadOption(e,n,t){if(t!==null){let r=this.metadata.read;if(r!==null)if(r===zt||r===dn||r===gs&&n.type&4)this.addMatch(n.index,-2);else{let o=zu(n,e,r,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,t)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function U2(i,e){let n=i.localNames;if(n!==null){for(let t=0;t<n.length;t+=2)if(n[t]===e)return n[t+1]}return null}function z2(i,e){return i.type&11?_a(i,e):i.type&4?Sd(i,e):null}function H2(i,e,n,t){return n===-1?z2(e,i):n===-2?W2(i,e,t):hs(i,i[$e],n,e)}function W2(i,e,n){if(n===zt)return _a(e,i);if(n===gs)return Sd(e,i);if(n===dn)return mw(e,i)}function ww(i,e,n,t){let r=e[sr].queries[t];if(r.matches===null){let o=i.data,s=n.matches,a=[];for(let l=0;l<s.length;l+=2){let c=s[l];if(c<0)a.push(null);else{let u=o[c];a.push(H2(e,u,s[l+1],n.metadata.read))}}r.matches=a}return r.matches}function Qm(i,e,n,t){let r=i.queries.getByIndex(n),o=r.matches;if(o!==null){let s=ww(i,e,r,n);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)t.push(s[a/2]);else{let c=o[a+1],u=e[-l];for(let d=ei;d<u.length;d++){let h=u[d];h[jl]===h[tn]&&Qm(h[$e],h,c,t)}if(u[da]!==null){let d=u[da];for(let h=0;h<d.length;h++){let p=d[h];Qm(p[$e],p,c,t)}}}}}return t}function Je(i){let e=it(),n=an(),t=Rb();lg(t+1);let r=xw(n,t);if(i.dirty&&m1(e)===((r.metadata.flags&2)===2)){if(r.matches===null)i.reset([]);else{let o=r.crossesNgTemplate?Qm(n,e,t,[]):ww(n,e,r,t);i.reset(o,vD),i.notifyOnChanges()}return!0}return!1}function et(i,e,n){let t=an();t.firstCreatePass&&(q2(t,new Zm(i,e,n),-1),(e&2)===2&&(t.staticViewQueries=!0)),X2(t,it(),e)}function tt(){return G2(it(),Rb())}function G2(i,e){return i[sr].queries[e].queryList}function X2(i,e,n){let t=new Xm((n&4)===4);FD(i,e,t,t.destroy),e[sr]===null&&(e[sr]=new Ym),e[sr].queries.push(new qm(t))}function q2(i,e,n){i.queries===null&&(i.queries=new $m),i.queries.track(new Km(e,n))}function xw(i,e){return i.queries.getByIndex(e)}function Td(i,e){return Sd(i,e)}var Bu=null;function Y2(i){Bu!==null&&(i.defaultEncapsulation!==Bu.defaultEncapsulation||i.preserveWhitespaces!==Bu.preserveWhitespaces)||(Bu=i)}var Z2=new fe("compilerOptions");var Wl=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ts(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var Hg=new fe(""),Gl=new fe(""),Ad=(()=>{let e=class e{constructor(t,r,o){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Wg||($2(o),o.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ye.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,o){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:o})}whenStable(t,r,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,o){return[]}};e.\u0275fac=function(r){return new(r||e)(D(ye),D(Dd),D(Gl))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let i=e;return i})(),Dd=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return Wg?.findTestabilityInTree(this,t,r)??null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"platform"});let i=e;return i})();function $2(i){Wg=i}var Wg,K2=new fe("Application Initializer"),Mw=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=vt(K2,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let o of this.appInits){let s=o();if(ya(s))t.push(s);else if(Ug(s)){let a=new Promise((l,c)=>{s.subscribe({complete:l,error:c})});t.push(a)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(o=>{this.reject(o)}),t.length===0&&r(),this.initialized=!0}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),Ow=new fe("appBootstrapListener");function Q2(i,e,n){let t=new Wm(n);return Promise.resolve(t)}function J2(){Hy(()=>{throw new ne(600,!1)})}function eN(i){return i.isBoundToModule}function tN(i,e,n){try{let t=n();return ya(t)?t.catch(r=>{throw e.runOutsideAngular(()=>i.handleError(r)),r}):t}catch(t){throw e.runOutsideAngular(()=>i.handleError(t)),t}}function Ew(i,e){return Array.isArray(e)?e.reduce(Ew,i):Q(Q({},i),e)}var vn=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=vt(VP),this.componentTypes=[],this.components=[],this.isStable=vt(Wl).hasPendingTasks.pipe(xt(t=>!t)),this._injector=vt(cr)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){let o=t instanceof id;if(!this._injector.get(Mw).done){let f="Cannot bootstrap as there are still asynchronous initializers running."+(!o&&i1(t)?"":" Bootstrap components in the `ngDoBootstrap` method of the root module.");throw new ne(405,!1)}let a;o?a=t:a=this._injector.get(xn).resolveComponentFactory(t),this.componentTypes.push(a.componentType);let l=eN(a)?void 0:this._injector.get(Co),c=r||a.selector,u=a.create(nn.NULL,[],c,l),d=u.location.nativeElement,h=u.injector.get(Hg,null);return h?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),Gu(this.components,u),h?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new ne(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Gu(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(Ow,[]);[...this._bootstrapListeners,...r].forEach(o=>o(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Gu(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ne(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();function Gu(i,e){let n=i.indexOf(e);n>-1&&i.splice(n,1)}function sb(i){for(let e=i.length-1;e>=0;e--)if(i[e]!==void 0)return i[e]}var nN=(()=>{let e=class e{constructor(){this.zone=vt(ye),this.applicationRef=vt(vn)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();function iN(i){return[{provide:ye,useFactory:i},{provide:Nl,multi:!0,useFactory:()=>{let e=vt(nN,{optional:!0});return()=>e.initialize()}},{provide:Nl,multi:!0,useFactory:()=>{let e=vt(sN);return()=>{e.initialize()}}},{provide:VP,useFactory:rN}]}function rN(){let i=vt(ye),e=vt(zr);return n=>i.runOutsideAngular(()=>e.handleError(n))}function oN(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:i?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:i?.runCoalescing??!1}}var sN=(()=>{let e=class e{constructor(){this.subscription=new Pn,this.initialized=!1,this.zone=vt(ye),this.pendingTasks=vt(Wl)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ye.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ye.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();function aN(){return typeof $localize<"u"&&$localize.locale||ud}var kd=new fe("LocaleId",{providedIn:"root",factory:()=>vt(kd,ot.Optional|ot.SkipSelf)||aN()});var Iw=new fe("PlatformDestroyListeners"),Sw=(()=>{let e=class e{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){let o=gk(r?.ngZone,oN({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return o.run(()=>{let s=k2(t.moduleType,this.injector,iN(()=>o)),a=s.injector.get(zr,null);return o.runOutsideAngular(()=>{let l=o.onError.subscribe({next:c=>{a.handleError(c)}});s.onDestroy(()=>{Gu(this._modules,s),l.unsubscribe()})}),tN(a,o,()=>{let l=s.injector.get(Mw);return l.runInitializers(),l.donePromise.then(()=>{let c=s.injector.get(kd,ud);return w2(c||ud),this._moduleDoBootstrap(s),s})})})}bootstrapModule(t,r=[]){let o=Ew({},r);return Q2(this.injector,o,t).then(s=>this.bootstrapModuleFactory(s,o))}_moduleDoBootstrap(t){let r=t.injector.get(vn);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(o=>r.bootstrap(o));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(r);else throw new ne(-403,!1);this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ne(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(Iw,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};e.\u0275fac=function(r){return new(r||e)(D(nn))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"platform"});let i=e;return i})(),El=null,Tw=new fe("AllowMultipleToken");function lN(i){if(El&&!El.get(Tw,!1))throw new ne(400,!1);J2(),El=i;let e=i.get(Sw);return dN(i),e}function Gg(i,e,n=[]){let t=`Platform: ${e}`,r=new fe(t);return(o=[])=>{let s=Aw();if(!s||s.injector.get(Tw,!1)){let a=[...n,...o,{provide:r,useValue:!0}];i?i(a):lN(cN(a,t))}return uN(r)}}function cN(i=[],e){return nn.create({name:e,providers:[{provide:Pd,useValue:"platform"},{provide:Iw,useValue:new Set([()=>El=null])},...i]})}function uN(i){let e=Aw();if(!e)throw new ne(401,!1);return e}function Aw(){return El?.get(Sw)??null}function dN(i){i.get(vg,null)?.forEach(n=>n())}var Dw=Gg(null,"core",[]),kw=(()=>{let e=class e{constructor(t){}};e.\u0275fac=function(r){return new(r||e)(D(vn))},e.\u0275mod=Yt({type:e}),e.\u0275inj=qt({});let i=e;return i})();function Xg(i){return typeof i=="boolean"?i:i!=null&&i!=="false"}var $g=null;function ys(){return $g}function jw(i){$g||($g=i)}var Ud=class{},Bt=new fe("DocumentToken");var Nn=function(i){return i[i.Format=0]="Format",i[i.Standalone=1]="Standalone",i}(Nn||{}),St=function(i){return i[i.Narrow=0]="Narrow",i[i.Abbreviated=1]="Abbreviated",i[i.Wide=2]="Wide",i[i.Short=3]="Short",i}(St||{}),ri=function(i){return i[i.Short=0]="Short",i[i.Medium=1]="Medium",i[i.Long=2]="Long",i[i.Full=3]="Full",i}(ri||{}),Zr=function(i){return i[i.Decimal=0]="Decimal",i[i.Group=1]="Group",i[i.List=2]="List",i[i.PercentSign=3]="PercentSign",i[i.PlusSign=4]="PlusSign",i[i.MinusSign=5]="MinusSign",i[i.Exponential=6]="Exponential",i[i.SuperscriptingExponent=7]="SuperscriptingExponent",i[i.PerMille=8]="PerMille",i[i.Infinity=9]="Infinity",i[i.NaN=10]="NaN",i[i.TimeSeparator=11]="TimeSeparator",i[i.CurrencyDecimal=12]="CurrencyDecimal",i[i.CurrencyGroup=13]="CurrencyGroup",i}(Zr||{});function hN(i){return bi(i)[Qt.LocaleId]}function pN(i,e,n){let t=bi(i),r=[t[Qt.DayPeriodsFormat],t[Qt.DayPeriodsStandalone]],o=Pi(r,e);return Pi(o,n)}function fN(i,e,n){let t=bi(i),r=[t[Qt.DaysFormat],t[Qt.DaysStandalone]],o=Pi(r,e);return Pi(o,n)}function mN(i,e,n){let t=bi(i),r=[t[Qt.MonthsFormat],t[Qt.MonthsStandalone]],o=Pi(r,e);return Pi(o,n)}function gN(i,e){let t=bi(i)[Qt.Eras];return Pi(t,e)}function Nd(i,e){let n=bi(i);return Pi(n[Qt.DateFormat],e)}function Rd(i,e){let n=bi(i);return Pi(n[Qt.TimeFormat],e)}function Fd(i,e){let t=bi(i)[Qt.DateTimeFormat];return Pi(t,e)}function Hd(i,e){let n=bi(i),t=n[Qt.NumberSymbols][e];if(typeof t>"u"){if(e===Zr.CurrencyDecimal)return n[Qt.NumberSymbols][Zr.Decimal];if(e===Zr.CurrencyGroup)return n[Qt.NumberSymbols][Zr.Group]}return t}function Bw(i){if(!i[Qt.ExtraData])throw new Error(`Missing extra locale data for the locale "${i[Qt.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function _N(i){let e=bi(i);return Bw(e),(e[Qt.ExtraData][2]||[]).map(t=>typeof t=="string"?qg(t):[qg(t[0]),qg(t[1])])}function vN(i,e,n){let t=bi(i);Bw(t);let r=[t[Qt.ExtraData][0],t[Qt.ExtraData][1]],o=Pi(r,e)||[];return Pi(o,n)||[]}function Pi(i,e){for(let n=e;n>-1;n--)if(typeof i[n]<"u")return i[n];throw new Error("Locale data API: locale data undefined")}function qg(i){let[e,n]=i.split(":");return{hours:+e,minutes:+n}}var yN=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Xl={},CN=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,$r=function(i){return i[i.Short=0]="Short",i[i.ShortGMT=1]="ShortGMT",i[i.Long=2]="Long",i[i.Extended=3]="Extended",i}($r||{}),Ct=function(i){return i[i.FullYear=0]="FullYear",i[i.Month=1]="Month",i[i.Date=2]="Date",i[i.Hours=3]="Hours",i[i.Minutes=4]="Minutes",i[i.Seconds=5]="Seconds",i[i.FractionalSeconds=6]="FractionalSeconds",i[i.Day=7]="Day",i}(Ct||{}),yt=function(i){return i[i.DayPeriods=0]="DayPeriods",i[i.Days=1]="Days",i[i.Months=2]="Months",i[i.Eras=3]="Eras",i}(yt||{});function bN(i,e,n,t){let r=TN(i);e=Yr(n,e)||e;let s=[],a;for(;e;)if(a=CN.exec(e),a){s=s.concat(a.slice(1));let u=s.pop();if(!u)break;e=u}else{s.push(e);break}let l=r.getTimezoneOffset();t&&(l=Uw(t,l),r=SN(r,t,!0));let c="";return s.forEach(u=>{let d=EN(u);c+=d?d(r,n,l):u==="''"?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}function zd(i,e,n){let t=new Date(0);return t.setFullYear(i,e,n),t.setHours(0,0,0),t}function Yr(i,e){let n=hN(i);if(Xl[n]=Xl[n]||{},Xl[n][e])return Xl[n][e];let t="";switch(e){case"shortDate":t=Nd(i,ri.Short);break;case"mediumDate":t=Nd(i,ri.Medium);break;case"longDate":t=Nd(i,ri.Long);break;case"fullDate":t=Nd(i,ri.Full);break;case"shortTime":t=Rd(i,ri.Short);break;case"mediumTime":t=Rd(i,ri.Medium);break;case"longTime":t=Rd(i,ri.Long);break;case"fullTime":t=Rd(i,ri.Full);break;case"short":let r=Yr(i,"shortTime"),o=Yr(i,"shortDate");t=Ld(Fd(i,ri.Short),[r,o]);break;case"medium":let s=Yr(i,"mediumTime"),a=Yr(i,"mediumDate");t=Ld(Fd(i,ri.Medium),[s,a]);break;case"long":let l=Yr(i,"longTime"),c=Yr(i,"longDate");t=Ld(Fd(i,ri.Long),[l,c]);break;case"full":let u=Yr(i,"fullTime"),d=Yr(i,"fullDate");t=Ld(Fd(i,ri.Full),[u,d]);break}return t&&(Xl[n][e]=t),t}function Ld(i,e){return e&&(i=i.replace(/\{([^}]+)}/g,function(n,t){return e!=null&&t in e?e[t]:n})),i}function Wi(i,e,n="-",t,r){let o="";(i<0||r&&i<=0)&&(r?i=-i+1:(i=-i,o=n));let s=String(i);for(;s.length<e;)s="0"+s;return t&&(s=s.slice(s.length-e)),o+s}function PN(i,e){return Wi(i,3).substring(0,e)}function on(i,e,n=0,t=!1,r=!1){return function(o,s){let a=wN(i,o);if((n>0||a>-n)&&(a+=n),i===Ct.Hours)a===0&&n===-12&&(a=12);else if(i===Ct.FractionalSeconds)return PN(a,e);let l=Hd(s,Zr.MinusSign);return Wi(a,e,l,t,r)}}function wN(i,e){switch(i){case Ct.FullYear:return e.getFullYear();case Ct.Month:return e.getMonth();case Ct.Date:return e.getDate();case Ct.Hours:return e.getHours();case Ct.Minutes:return e.getMinutes();case Ct.Seconds:return e.getSeconds();case Ct.FractionalSeconds:return e.getMilliseconds();case Ct.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${i}".`)}}function Dt(i,e,n=Nn.Format,t=!1){return function(r,o){return xN(r,o,i,e,n,t)}}function xN(i,e,n,t,r,o){switch(n){case yt.Months:return mN(e,r,t)[i.getMonth()];case yt.Days:return fN(e,r,t)[i.getDay()];case yt.DayPeriods:let s=i.getHours(),a=i.getMinutes();if(o){let c=_N(e),u=vN(e,r,t),d=c.findIndex(h=>{if(Array.isArray(h)){let[p,f]=h,m=s>=p.hours&&a>=p.minutes,_=s<f.hours||s===f.hours&&a<f.minutes;if(p.hours<f.hours){if(m&&_)return!0}else if(m||_)return!0}else if(h.hours===s&&h.minutes===a)return!0;return!1});if(d!==-1)return u[d]}return pN(e,r,t)[s<12?0:1];case yt.Eras:return gN(e,t)[i.getFullYear()<=0?0:1];default:let l=n;throw new Error(`unexpected translation type ${l}`)}}function jd(i){return function(e,n,t){let r=-1*t,o=Hd(n,Zr.MinusSign),s=r>0?Math.floor(r/60):Math.ceil(r/60);switch(i){case $r.Short:return(r>=0?"+":"")+Wi(s,2,o)+Wi(Math.abs(r%60),2,o);case $r.ShortGMT:return"GMT"+(r>=0?"+":"")+Wi(s,1,o);case $r.Long:return"GMT"+(r>=0?"+":"")+Wi(s,2,o)+":"+Wi(Math.abs(r%60),2,o);case $r.Extended:return t===0?"Z":(r>=0?"+":"")+Wi(s,2,o)+":"+Wi(Math.abs(r%60),2,o);default:throw new Error(`Unknown zone width "${i}"`)}}}var MN=0,Vd=4;function ON(i){let e=zd(i,MN,1).getDay();return zd(i,0,1+(e<=Vd?Vd:Vd+7)-e)}function Vw(i){return zd(i.getFullYear(),i.getMonth(),i.getDate()+(Vd-i.getDay()))}function Yg(i,e=!1){return function(n,t){let r;if(e){let o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,s=n.getDate();r=1+Math.floor((s+o)/7)}else{let o=Vw(n),s=ON(o.getFullYear()),a=o.getTime()-s.getTime();r=1+Math.round(a/6048e5)}return Wi(r,i,Hd(t,Zr.MinusSign))}}function Bd(i,e=!1){return function(n,t){let o=Vw(n).getFullYear();return Wi(o,i,Hd(t,Zr.MinusSign),e)}}var Zg={};function EN(i){if(Zg[i])return Zg[i];let e;switch(i){case"G":case"GG":case"GGG":e=Dt(yt.Eras,St.Abbreviated);break;case"GGGG":e=Dt(yt.Eras,St.Wide);break;case"GGGGG":e=Dt(yt.Eras,St.Narrow);break;case"y":e=on(Ct.FullYear,1,0,!1,!0);break;case"yy":e=on(Ct.FullYear,2,0,!0,!0);break;case"yyy":e=on(Ct.FullYear,3,0,!1,!0);break;case"yyyy":e=on(Ct.FullYear,4,0,!1,!0);break;case"Y":e=Bd(1);break;case"YY":e=Bd(2,!0);break;case"YYY":e=Bd(3);break;case"YYYY":e=Bd(4);break;case"M":case"L":e=on(Ct.Month,1,1);break;case"MM":case"LL":e=on(Ct.Month,2,1);break;case"MMM":e=Dt(yt.Months,St.Abbreviated);break;case"MMMM":e=Dt(yt.Months,St.Wide);break;case"MMMMM":e=Dt(yt.Months,St.Narrow);break;case"LLL":e=Dt(yt.Months,St.Abbreviated,Nn.Standalone);break;case"LLLL":e=Dt(yt.Months,St.Wide,Nn.Standalone);break;case"LLLLL":e=Dt(yt.Months,St.Narrow,Nn.Standalone);break;case"w":e=Yg(1);break;case"ww":e=Yg(2);break;case"W":e=Yg(1,!0);break;case"d":e=on(Ct.Date,1);break;case"dd":e=on(Ct.Date,2);break;case"c":case"cc":e=on(Ct.Day,1);break;case"ccc":e=Dt(yt.Days,St.Abbreviated,Nn.Standalone);break;case"cccc":e=Dt(yt.Days,St.Wide,Nn.Standalone);break;case"ccccc":e=Dt(yt.Days,St.Narrow,Nn.Standalone);break;case"cccccc":e=Dt(yt.Days,St.Short,Nn.Standalone);break;case"E":case"EE":case"EEE":e=Dt(yt.Days,St.Abbreviated);break;case"EEEE":e=Dt(yt.Days,St.Wide);break;case"EEEEE":e=Dt(yt.Days,St.Narrow);break;case"EEEEEE":e=Dt(yt.Days,St.Short);break;case"a":case"aa":case"aaa":e=Dt(yt.DayPeriods,St.Abbreviated);break;case"aaaa":e=Dt(yt.DayPeriods,St.Wide);break;case"aaaaa":e=Dt(yt.DayPeriods,St.Narrow);break;case"b":case"bb":case"bbb":e=Dt(yt.DayPeriods,St.Abbreviated,Nn.Standalone,!0);break;case"bbbb":e=Dt(yt.DayPeriods,St.Wide,Nn.Standalone,!0);break;case"bbbbb":e=Dt(yt.DayPeriods,St.Narrow,Nn.Standalone,!0);break;case"B":case"BB":case"BBB":e=Dt(yt.DayPeriods,St.Abbreviated,Nn.Format,!0);break;case"BBBB":e=Dt(yt.DayPeriods,St.Wide,Nn.Format,!0);break;case"BBBBB":e=Dt(yt.DayPeriods,St.Narrow,Nn.Format,!0);break;case"h":e=on(Ct.Hours,1,-12);break;case"hh":e=on(Ct.Hours,2,-12);break;case"H":e=on(Ct.Hours,1);break;case"HH":e=on(Ct.Hours,2);break;case"m":e=on(Ct.Minutes,1);break;case"mm":e=on(Ct.Minutes,2);break;case"s":e=on(Ct.Seconds,1);break;case"ss":e=on(Ct.Seconds,2);break;case"S":e=on(Ct.FractionalSeconds,1);break;case"SS":e=on(Ct.FractionalSeconds,2);break;case"SSS":e=on(Ct.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=jd($r.Short);break;case"ZZZZZ":e=jd($r.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=jd($r.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=jd($r.Long);break;default:return null}return Zg[i]=e,e}function Uw(i,e){i=i.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+i)/6e4;return isNaN(n)?e:n}function IN(i,e){return i=new Date(i.getTime()),i.setMinutes(i.getMinutes()+e),i}function SN(i,e,n){let t=n?-1:1,r=i.getTimezoneOffset(),o=Uw(e,r);return IN(i,t*(o-r))}function TN(i){if(Nw(i))return i;if(typeof i=="number"&&!isNaN(i))return new Date(i);if(typeof i=="string"){if(i=i.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(i)){let[r,o=1,s=1]=i.split("-").map(a=>+a);return zd(r,o-1,s)}let n=parseFloat(i);if(!isNaN(i-n))return new Date(n);let t;if(t=i.match(yN))return AN(t)}let e=new Date(i);if(!Nw(e))throw new Error(`Unable to convert "${i}" into a date`);return e}function AN(i){let e=new Date(0),n=0,t=0,r=i[8]?e.setUTCFullYear:e.setFullYear,o=i[8]?e.setUTCHours:e.setHours;i[9]&&(n=Number(i[9]+i[10]),t=Number(i[9]+i[11])),r.call(e,Number(i[1]),Number(i[2])-1,Number(i[3]));let s=Number(i[4]||0)-n,a=Number(i[5]||0)-t,l=Number(i[6]||0),c=Math.floor(parseFloat("0."+(i[7]||0))*1e3);return o.call(e,s,a,l,c),e}function Nw(i){return i instanceof Date&&!isNaN(i.valueOf())}function Wd(i,e){e=encodeURIComponent(e);for(let n of i.split(";")){let t=n.indexOf("="),[r,o]=t==-1?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}var Kg=class{constructor(e,n,t,r){this.$implicit=e,this.ngForOf=n,this.index=t,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},sn=(()=>{let e=class e{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(!1)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((o,s,a)=>{if(o.previousIndex==null)r.createEmbeddedView(this._template,new Kg(o.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)r.remove(s===null?void 0:s);else if(s!==null){let l=r.get(s);r.move(l,a),Rw(l,o)}});for(let o=0,s=r.length;o<s;o++){let l=r.get(o).context;l.index=o,l.count=s,l.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{let s=r.get(o.currentIndex);Rw(s,o)})}static ngTemplateContextGuard(t,r){return!0}};e.\u0275fac=function(r){return new(r||e)(x(dn),x(gs),x(Hl))},e.\u0275dir=He({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let i=e;return i})();function Rw(i,e){i.context.$implicit=e.item}var Be=(()=>{let e=class e{constructor(t,r){this._viewContainer=t,this._context=new Qg,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Fw("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Fw("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}};e.\u0275fac=function(r){return new(r||e)(x(dn),x(gs))},e.\u0275dir=He({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let i=e;return i})(),Qg=class{constructor(){this.$implicit=null,this.ngIf=null}};function Fw(i,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${i} must be a TemplateRef, but received '${wn(e)}'.`)}var zw=(()=>{let e=class e{constructor(t,r,o){this._ngEl=t,this._differs=r,this._renderer=o,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){let t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){let[o,s]=t.split("."),a=o.indexOf("-")===-1?void 0:ur.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,o,s?`${r}${s}`:r,a):this._renderer.removeStyle(this._ngEl.nativeElement,o,a)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}};e.\u0275fac=function(r){return new(r||e)(x(zt),x(Sg),x(Mn))},e.\u0275dir=He({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0});let i=e;return i})();function Hw(i,e){return new ne(2100,!1)}var Jg=class{createSubscription(e,n){return Eg(()=>e.subscribe({next:n,error:t=>{throw t}}))}dispose(e){Eg(()=>e.unsubscribe())}},e_=class{createSubscription(e,n){return e.then(n,t=>{throw t})}dispose(e){}},DN=new e_,kN=new Jg,Mo=(()=>{let e=class e{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(ya(t))return DN;if(Ug(t))return kN;throw Hw(e,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}};e.\u0275fac=function(r){return new(r||e)(x(Zt,16))},e.\u0275pipe=dr({name:"async",type:e,pure:!1,standalone:!0});let i=e;return i})();var NN="mediumDate",RN=new fe("DATE_PIPE_DEFAULT_TIMEZONE"),FN=new fe("DATE_PIPE_DEFAULT_OPTIONS"),Ww=(()=>{let e=class e{constructor(t,r,o){this.locale=t,this.defaultTimezone=r,this.defaultOptions=o}transform(t,r,o,s){if(t==null||t===""||t!==t)return null;try{let a=r??this.defaultOptions?.dateFormat??NN,l=o??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return bN(t,a,s||this.locale,l)}catch(a){throw Hw(e,a.message)}}};e.\u0275fac=function(r){return new(r||e)(x(kd,16),x(RN,24),x(FN,24))},e.\u0275pipe=dr({name:"date",type:e,pure:!0,standalone:!0});let i=e;return i})();var Gd=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Yt({type:e}),e.\u0275inj=qt({});let i=e;return i})(),t_="browser",LN="server";function wi(i){return i===t_}function n_(i){return i===LN}var wa=class{};var Yl=class{},qd=class{},Cs=class i{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let t=n.indexOf(":");if(t>0){let r=n.slice(0,t),o=r.toLowerCase(),s=n.slice(t+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,t)=>{this.setHeaderEntries(t,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,t])=>{this.setHeaderEntries(n,t)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof i?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new i;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof i?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let t=e.value;if(typeof t=="string"&&(t=[t]),t.length===0)return;this.maybeSetNormalizedName(e.name,n);let r=(e.op==="a"?this.headers.get(n):void 0)||[];r.push(...t),this.headers.set(n,r);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}setHeaderEntries(e,n){let t=(Array.isArray(n)?n:[n]).map(o=>o.toString()),r=e.toLowerCase();this.headers.set(r,t),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var r_=class{encodeKey(e){return Gw(e)}encodeValue(e){return Gw(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function VN(i,e){let n=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[s,a]=o==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],l=n.get(s)||[];l.push(a),n.set(s,l)}),n}var UN=/%(\d[a-f0-9])/gi,zN={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Gw(i){return encodeURIComponent(i).replace(UN,(e,n)=>zN[n]??e)}function Xd(i){return`${i}`}var Oo=class i{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new r_,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=VN(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let t=e.fromObject[n],r=Array.isArray(t)?t.map(Xd):[Xd(t)];this.map.set(n,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(t=>{let r=e[t];Array.isArray(r)?r.forEach(o=>{n.push({param:t,value:o,op:"a"})}):n.push({param:t,value:r,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(t=>n+"="+this.encoder.encodeValue(t)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new i({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(Xd(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let t=this.map.get(e.param)||[],r=t.indexOf(Xd(e.value));r!==-1&&t.splice(r,1),t.length>0?this.map.set(e.param,t):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var o_=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function HN(i){switch(i){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Xw(i){return typeof ArrayBuffer<"u"&&i instanceof ArrayBuffer}function qw(i){return typeof Blob<"u"&&i instanceof Blob}function Yw(i){return typeof FormData<"u"&&i instanceof FormData}function WN(i){return typeof URLSearchParams<"u"&&i instanceof URLSearchParams}var ql=class i{constructor(e,n,t,r){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(HN(this.method)||r?(this.body=t!==void 0?t:null,o=r):o=t,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers||(this.headers=new Cs),this.context||(this.context=new o_),!this.params)this.params=new Oo,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),l=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+l+s}}}serializeBody(){return this.body===null?null:Xw(this.body)||qw(this.body)||Yw(this.body)||WN(this.body)||typeof this.body=="string"?this.body:this.body instanceof Oo?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Yw(this.body)?null:qw(this.body)?this.body.type||null:Xw(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Oo?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,t=e.url||this.url,r=e.responseType||this.responseType,o=e.body!==void 0?e.body:this.body,s=e.withCredentials!==void 0?e.withCredentials:this.withCredentials,a=e.reportProgress!==void 0?e.reportProgress:this.reportProgress,l=e.headers||this.headers,c=e.params||this.params,u=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((d,h)=>d.set(h,e.setHeaders[h]),l)),e.setParams&&(c=Object.keys(e.setParams).reduce((d,h)=>d.set(h,e.setParams[h]),c)),new i(n,t,o,{params:c,headers:l,context:u,reportProgress:a,responseType:r,withCredentials:s})}},xa=function(i){return i[i.Sent=0]="Sent",i[i.UploadProgress=1]="UploadProgress",i[i.ResponseHeader=2]="ResponseHeader",i[i.DownloadProgress=3]="DownloadProgress",i[i.Response=4]="Response",i[i.User=5]="User",i}(xa||{}),Zl=class{constructor(e,n=200,t="OK"){this.headers=e.headers||new Cs,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||t,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},s_=class i extends Zl{constructor(e={}){super(e),this.type=xa.ResponseHeader}clone(e={}){return new i({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Yd=class i extends Zl{constructor(e={}){super(e),this.type=xa.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new i({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Zd=class extends Zl{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}};function i_(i,e){return{body:e,headers:i.headers,context:i.context,observe:i.observe,params:i.params,reportProgress:i.reportProgress,responseType:i.responseType,withCredentials:i.withCredentials,transferCache:i.transferCache}}var bs=(()=>{let e=class e{constructor(t){this.handler=t}request(t,r,o={}){let s;if(t instanceof ql)s=t;else{let c;o.headers instanceof Cs?c=o.headers:c=new Cs(o.headers);let u;o.params&&(o.params instanceof Oo?u=o.params:u=new Oo({fromObject:o.params})),s=new ql(t,r,o.body!==void 0?o.body:null,{headers:c,context:o.context,params:u,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let a=Dn(s).pipe(bl(c=>this.handler.handle(c)));if(t instanceof ql||o.observe==="events")return a;let l=a.pipe(ki(c=>c instanceof Yd));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return l.pipe(xt(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return l.pipe(xt(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return l.pipe(xt(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return l.pipe(xt(c=>c.body))}case"response":return l;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new Oo().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,o={}){return this.request("PATCH",t,i_(o,r))}post(t,r,o={}){return this.request("POST",t,i_(o,r))}put(t,r,o={}){return this.request("PUT",t,i_(o,r))}};e.\u0275fac=function(r){return new(r||e)(D(Yl))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let i=e;return i})();function Qw(i,e){return e(i)}function GN(i,e){return(n,t)=>e.intercept(n,{handle:r=>i(r,t)})}function XN(i,e,n){return(t,r)=>lP(n,()=>e(t,o=>i(o,r)))}var qN=new fe(""),a_=new fe(""),YN=new fe(""),ZN=new fe("");function $N(){let i=null;return(e,n)=>{i===null&&(i=(vt(qN,{optional:!0})??[]).reduceRight(GN,Qw));let t=vt(Wl),r=t.add();return i(e,n).pipe(Tu(()=>t.remove(r)))}}var Zw=(()=>{let e=class e extends Yl{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=vt(Wl);let o=vt(ZN,{optional:!0});this.backend=o??t}handle(t){if(this.chain===null){let o=Array.from(new Set([...this.injector.get(a_),...this.injector.get(YN,[])]));this.chain=o.reduceRight((s,a)=>XN(s,a,this.injector),Qw)}let r=this.pendingTasks.add();return this.chain(t,o=>this.backend.handle(o)).pipe(Tu(()=>this.pendingTasks.remove(r)))}};e.\u0275fac=function(r){return new(r||e)(D(qd),D(cr))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let i=e;return i})();var KN=/^\)\]\}',?\n/;function QN(i){return"responseURL"in i&&i.responseURL?i.responseURL:/^X-Request-URL:/m.test(i.getAllResponseHeaders())?i.getResponseHeader("X-Request-URL"):null}var $w=(()=>{let e=class e{constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new ne(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?Vn(r.\u0275loadImpl()):Dn(null)).pipe(Ni(()=>new gt(s=>{let a=r.build();if(a.open(t.method,t.urlWithParams),t.withCredentials&&(a.withCredentials=!0),t.headers.forEach((_,P)=>a.setRequestHeader(_,P.join(","))),t.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){let _=t.detectContentTypeHeader();_!==null&&a.setRequestHeader("Content-Type",_)}if(t.responseType){let _=t.responseType.toLowerCase();a.responseType=_!=="json"?_:"text"}let l=t.serializeBody(),c=null,u=()=>{if(c!==null)return c;let _=a.statusText||"OK",P=new Cs(a.getAllResponseHeaders()),I=QN(a)||t.url;return c=new s_({headers:P,status:a.status,statusText:_,url:I}),c},d=()=>{let{headers:_,status:P,statusText:I,url:b}=u(),S=null;P!==204&&(S=typeof a.response>"u"?a.responseText:a.response),P===0&&(P=S?200:0);let k=P>=200&&P<300;if(t.responseType==="json"&&typeof S=="string"){let N=S;S=S.replace(KN,"");try{S=S!==""?JSON.parse(S):null}catch(X){S=N,k&&(k=!1,S={error:X,text:S})}}k?(s.next(new Yd({body:S,headers:_,status:P,statusText:I,url:b||void 0})),s.complete()):s.error(new Zd({error:S,headers:_,status:P,statusText:I,url:b||void 0}))},h=_=>{let{url:P}=u(),I=new Zd({error:_,status:a.status||0,statusText:a.statusText||"Unknown Error",url:P||void 0});s.error(I)},p=!1,f=_=>{p||(s.next(u()),p=!0);let P={type:xa.DownloadProgress,loaded:_.loaded};_.lengthComputable&&(P.total=_.total),t.responseType==="text"&&a.responseText&&(P.partialText=a.responseText),s.next(P)},m=_=>{let P={type:xa.UploadProgress,loaded:_.loaded};_.lengthComputable&&(P.total=_.total),s.next(P)};return a.addEventListener("load",d),a.addEventListener("error",h),a.addEventListener("timeout",h),a.addEventListener("abort",h),t.reportProgress&&(a.addEventListener("progress",f),l!==null&&a.upload&&a.upload.addEventListener("progress",m)),a.send(l),s.next({type:xa.Sent}),()=>{a.removeEventListener("error",h),a.removeEventListener("abort",h),a.removeEventListener("load",d),a.removeEventListener("timeout",h),t.reportProgress&&(a.removeEventListener("progress",f),l!==null&&a.upload&&a.upload.removeEventListener("progress",m)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(r){return new(r||e)(D(wa))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let i=e;return i})(),Jw=new fe("XSRF_ENABLED"),JN="XSRF-TOKEN",eR=new fe("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>JN}),tR="X-XSRF-TOKEN",nR=new fe("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>tR}),$d=class{},iR=(()=>{let e=class e{constructor(t,r,o){this.doc=t,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Wd(t,this.cookieName),this.lastCookieString=t),this.lastToken}};e.\u0275fac=function(r){return new(r||e)(D(Bt),D(Wn),D(eR))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let i=e;return i})();function rR(i,e){let n=i.url.toLowerCase();if(!vt(Jw)||i.method==="GET"||i.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(i);let t=vt($d).getToken(),r=vt(nR);return t!=null&&!i.headers.has(r)&&(i=i.clone({headers:i.headers.set(r,t)})),e(i)}var ex=function(i){return i[i.Interceptors=0]="Interceptors",i[i.LegacyInterceptors=1]="LegacyInterceptors",i[i.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",i[i.NoXsrfProtection=3]="NoXsrfProtection",i[i.JsonpSupport=4]="JsonpSupport",i[i.RequestsMadeViaParent=5]="RequestsMadeViaParent",i[i.Fetch=6]="Fetch",i}(ex||{});function oR(i,e){return{\u0275kind:i,\u0275providers:e}}function sR(...i){let e=[bs,$w,Zw,{provide:Yl,useExisting:Zw},{provide:qd,useExisting:$w},{provide:a_,useValue:rR,multi:!0},{provide:Jw,useValue:!0},{provide:$d,useClass:iR}];for(let n of i)e.push(...n.\u0275providers);return Vl(e)}var Kw=new fe("LEGACY_INTERCEPTOR_FN");function aR(){return oR(ex.LegacyInterceptors,[{provide:Kw,useFactory:$N},{provide:a_,useExisting:Kw,multi:!0}])}var tx=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Yt({type:e}),e.\u0275inj=qt({providers:[sR(aR())]});let i=e;return i})();var d_=class extends Ud{constructor(){super(...arguments),this.supportsDOMEvents=!0}},h_=class i extends d_{static makeCurrent(){jw(new i)}onAndCancel(e,n,t){return e.addEventListener(n,t),()=>{e.removeEventListener(n,t)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=cR();return n==null?null:uR(n)}resetBaseElement(){$l=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Wd(document.cookie,e)}},$l=null;function cR(){return $l=$l||document.querySelector("base"),$l?$l.getAttribute("href"):null}function uR(i){return new URL(i,document.baseURI).pathname}var p_=class{addToWindow(e){Kt.getAngularTestability=(t,r=!0)=>{let o=e.findTestabilityInTree(t,r);if(o==null)throw new ne(5103,!1);return o},Kt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Kt.getAllAngularRootElements=()=>e.getAllRootElements();let n=t=>{let r=Kt.getAllAngularTestabilities(),o=r.length,s=!1,a=function(l){s=s||l,o--,o==0&&t(s)};r.forEach(l=>{l.whenStable(a)})};Kt.frameworkStabilizers||(Kt.frameworkStabilizers=[]),Kt.frameworkStabilizers.push(n)}findTestabilityInTree(e,n,t){if(n==null)return null;let r=e.getTestability(n);return r??(t?ys().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},dR=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let i=e;return i})(),f_=new fe("EventManagerPlugins"),rx=(()=>{let e=class e{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>{o.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new ne(5101,!1);return this._eventNameToPlugin.set(t,r),r}};e.\u0275fac=function(r){return new(r||e)(D(f_),D(ye))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let i=e;return i})(),Kd=class{constructor(e){this._doc=e}},c_="ng-app-id",ox=(()=>{let e=class e{constructor(t,r,o,s={}){this.doc=t,this.appId=r,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=n_(s),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(o=>o.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${c_}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(o=>{o.textContent!=null&&r.set(o.textContent,o)}),r}return null}changeUsageCount(t,r){let o=this.styleRef;if(o.has(t)){let s=o.get(t);return s.usage+=r,s.usage}return o.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let o=this.styleNodesInDOM,s=o?.get(r);if(s?.parentNode===t)return o.delete(r),s.removeAttribute(c_),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(c_,this.appId),t.appendChild(a),a}}addStyleToHost(t,r){let o=this.getStyleElement(t,r),s=this.styleRef,a=s.get(r)?.elements;a?a.push(o):s.set(r,{elements:[o],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)(D(Bt),D(wd),D(Cg,8),D(Wn))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let i=e;return i})(),u_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},g_=/%COMP%/g,sx="%COMP%",hR=`_nghost-${sx}`,pR=`_ngcontent-${sx}`,fR=!0,mR=new fe("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>fR});function gR(i){return pR.replace(g_,i)}function _R(i){return hR.replace(g_,i)}function ax(i,e){return e.map(n=>n.replace(g_,i))}var Qd=(()=>{let e=class e{constructor(t,r,o,s,a,l,c,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=l,this.ngZone=c,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=n_(l),this.defaultRenderer=new Kl(t,a,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===ar.ShadowDom&&(r=Xe(Q({},r),{encapsulation:ar.Emulated}));let o=this.getOrCreateRenderer(t,r);return o instanceof Jd?o.applyToHost(t):o instanceof Ql&&o.applyStyles(),o}getOrCreateRenderer(t,r){let o=this.rendererByCompId,s=o.get(r.id);if(!s){let a=this.doc,l=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(r.encapsulation){case ar.Emulated:s=new Jd(c,u,r,this.appId,d,a,l,h);break;case ar.ShadowDom:return new m_(c,u,t,r,a,l,this.nonce,h);default:s=new Ql(c,u,r,d,a,l,h);break}o.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)(D(rx),D(ox),D(wd),D(mR),D(Bt),D(Wn),D(ye),D(Cg))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let i=e;return i})(),Kl=class{constructor(e,n,t,r){this.eventManager=e,this.doc=n,this.ngZone=t,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(u_[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(nx(e)?e.content:e).appendChild(n)}insertBefore(e,n,t){e&&(nx(e)?e.content:e).insertBefore(n,t)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let t=typeof e=="string"?this.doc.querySelector(e):e;if(!t)throw new ne(-5104,!1);return n||(t.textContent=""),t}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,t,r){if(r){n=r+":"+n;let o=u_[r];o?e.setAttributeNS(o,n,t):e.setAttribute(n,t)}else e.setAttribute(n,t)}removeAttribute(e,n,t){if(t){let r=u_[t];r?e.removeAttributeNS(r,n):e.removeAttribute(`${t}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,t,r){r&(ur.DashCase|ur.Important)?e.style.setProperty(n,t,r&ur.Important?"important":""):e.style[n]=t}removeStyle(e,n,t){t&ur.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,t){e!=null&&(e[n]=t)}setValue(e,n){e.nodeValue=n}listen(e,n,t){if(typeof e=="string"&&(e=ys().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(t))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function nx(i){return i.tagName==="TEMPLATE"&&i.content!==void 0}var m_=class extends Kl{constructor(e,n,t,r,o,s,a,l){super(e,o,s,l),this.sharedStylesHost=n,this.hostEl=t,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=ax(r.id,r.styles);for(let u of c){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,t){return super.insertBefore(this.nodeOrShadowRoot(e),n,t)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ql=class extends Kl{constructor(e,n,t,r,o,s,a,l){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r,this.styles=l?ax(l,t.styles):t.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Jd=class extends Ql{constructor(e,n,t,r,o,s,a,l){let c=r+"-"+t.id;super(e,n,t,o,s,a,l,c),this.contentAttr=gR(c),this.hostAttr=_R(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let t=super.createElement(e,n);return super.setAttribute(t,this.contentAttr,""),t}},vR=(()=>{let e=class e extends Kd{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}};e.\u0275fac=function(r){return new(r||e)(D(Bt))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let i=e;return i})(),ix=["alt","control","meta","shift"],yR={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},CR={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey},bR=(()=>{let e=class e extends Kd{constructor(t){super(t)}supports(t){return e.parseEventName(t)!=null}addEventListener(t,r,o){let s=e.parseEventName(r),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ys().onAndCancel(t,s.domEventName,a))}static parseEventName(t){let r=t.toLowerCase().split("."),o=r.shift();if(r.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(r.pop()),a="",l=r.indexOf("code");if(l>-1&&(r.splice(l,1),a="code."),ix.forEach(u=>{let d=r.indexOf(u);d>-1&&(r.splice(d,1),a+=u+".")}),a+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=o,c.fullKey=a,c}static matchEventFullKeyCode(t,r){let o=yR[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(o=t.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),ix.forEach(a=>{if(a!==o){let l=CR[a];l(t)&&(s+=a+".")}}),s+=o,s===r)}static eventCallback(t,r,o){return s=>{e.matchEventFullKeyCode(s,t)&&o.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}};e.\u0275fac=function(r){return new(r||e)(D(Bt))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let i=e;return i})();function PR(){h_.makeCurrent()}function wR(){return new zr}function xR(){return uP(document),document}var MR=[{provide:Wn,useValue:t_},{provide:vg,useValue:PR,multi:!0},{provide:Bt,useFactory:xR,deps:[]}],lx=Gg(Dw,"browser",MR),OR=new fe(""),ER=[{provide:Gl,useClass:p_,deps:[]},{provide:Hg,useClass:Ad,deps:[ye,Dd,Gl]},{provide:Ad,useClass:Ad,deps:[ye,Dd,Gl]}],IR=[{provide:Pd,useValue:"root"},{provide:zr,useFactory:wR,deps:[]},{provide:f_,useClass:vR,multi:!0,deps:[Bt,ye,Wn]},{provide:f_,useClass:bR,multi:!0,deps:[Bt]},Qd,ox,rx,{provide:ps,useExisting:Qd},{provide:wa,useClass:dR,deps:[]},[]],eh=(()=>{let e=class e{constructor(t){}static withServerTransition(t){return{ngModule:e,providers:[{provide:wd,useValue:t.appId}]}}};e.\u0275fac=function(r){return new(r||e)(D(OR,12))},e.\u0275mod=Yt({type:e}),e.\u0275inj=qt({providers:[...IR,...ER],imports:[Gd,kw]});let i=e;return i})();var Jl=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Y({token:e,factory:function(r){let o=null;return r?o=new(r||e):o=D(cx),o},providedIn:"root"});let i=e;return i})();function SR(i){return new cx(i.get(Bt))}var cx=(()=>{let e=class e extends Jl{constructor(t){super(),this._doc=t}sanitize(t,r){if(r==null)return null;switch(t){case Gn.NONE:return r;case Gn.HTML:return wo(r,"HTML")?Ui(r):Mg(this._doc,String(r)).toString();case Gn.STYLE:return wo(r,"Style")?Ui(r):r;case Gn.SCRIPT:if(wo(r,"Script"))return Ui(r);throw new ne(5200,!1);case Gn.URL:return wo(r,"URL")?Ui(r):Od(String(r));case Gn.RESOURCE_URL:if(wo(r,"ResourceURL"))return Ui(r);throw new ne(5201,!1);default:throw new ne(5202,!1)}}bypassSecurityTrustHtml(t){return IP(t)}bypassSecurityTrustStyle(t){return SP(t)}bypassSecurityTrustScript(t){return TP(t)}bypassSecurityTrustUrl(t){return AP(t)}bypassSecurityTrustResourceUrl(t){return DP(t)}};e.\u0275fac=function(r){return new(r||e)(D(Bt))},e.\u0275prov=Y({token:e,factory:function(r){let o=null;return r?o=new r:o=SR(D(nn)),o},providedIn:"root"});let i=e;return i})();var Xn=new fe("StorageService Injection Token"),th=class{};var C={production:!0,chunkSize:16,gridPixelWidth:16,api:"https://logigator.com/api",url:"https://logigator.com/editor",homeUrl:"https://logigator.com"};var yx="opt-in",ec="opt-out",Cx="show--consent",bx="show--preferences",ux="disable--interaction",rh="data-category",dt="div",Gi="button",Xi="aria-hidden",tc="btn-group",On="click",Oa="data-role",E_="consentModal",I_="preferencesModal",w_=class{constructor(){this.t={mode:yx,revision:0,autoShow:!0,lazyHtmlGeneration:!0,autoClearCookies:!0,manageScriptTags:!0,hideFromBots:!0,cookie:{name:"cc_cookie",expiresAfterDays:182,domain:"",path:"/",sameSite:"Lax"}},this.o={i:{},l:"",_:{},u:{},p:{},m:[],v:!1,h:null,C:null,S:null,M:"",D:!0,T:!1,k:!1,A:!1,N:!1,H:[],V:!1,I:!0,L:[],j:!1,F:"",P:!1,O:[],R:[],B:[],G:[],J:!1,U:!1,$:!1,q:[],K:[],W:[],X:{},Y:{},Z:{},ee:{},te:{},ne:[]},this.oe={se:{},ae:{}},this.ce={},this.re={ie:"cc:onFirstConsent",le:"cc:onConsent",de:"cc:onChange",fe:"cc:onModalShow",_e:"cc:onModalHide",ue:"cc:onModalReady"}}},G=new w_,Px=(i,e)=>i.indexOf(e),Mt=(i,e)=>Px(i,e)!==-1,sh=i=>Array.isArray(i),Ea=i=>typeof i=="string",x_=i=>!!i&&typeof i=="object"&&!sh(i),Kr=i=>typeof i=="function",Ps=i=>Object.keys(i),wx=i=>Array.from(new Set(i)),oh=()=>document.activeElement,Ma=i=>i.preventDefault(),S_=(i,e)=>i.querySelectorAll(e);var pe=i=>{let e=document.createElement(i);return i===Gi&&(e.type=i),e},Ue=(i,e,n)=>i.setAttribute(e,n),v_=(i,e,n)=>{i.removeAttribute(n?"data-"+e:e)},nh=(i,e,n)=>i.getAttribute(n?"data-"+e:e),de=(i,e)=>i.appendChild(e),Tt=(i,e)=>i.classList.add(e),Rn=(i,e)=>Tt(i,"cm__"+e),lt=(i,e)=>Tt(i,"pm__"+e),Io=(i,e)=>i.classList.remove(e),Eo=i=>{if(typeof i!="object")return i;if(i instanceof Date)return new Date(i.getTime());let e=Array.isArray(i)?[]:{};for(let n in i){let t=i[n];e[n]=Eo(t)}return e};var dx=(i,e)=>dispatchEvent(new CustomEvent(i,{detail:e})),Ht=(i,e,n,t)=>{i.addEventListener(e,n),t&&G.o.m.push({pe:i,me:e,ge:n})},hx=()=>{let i=G.t.cookie.expiresAfterDays;return Kr(i)?i(G.o.F):i},y_=(i,e)=>{let n=i||[],t=e||[];return n.filter(r=>!Mt(t,r)).concat(t.filter(r=>!Mt(n,r)))},xx=i=>{G.o.R=wx(i),G.o.F=(()=>{let e="custom",{R:n,O:t,B:r}=G.o,o=n.length;return o===t.length?e="all":o===r.length&&(e="necessary"),e})()},Mx=(i,e,n,t)=>{let r="accept-",{show:o,showPreferences:s,hide:a,hidePreferences:l,acceptCategory:c}=e,u=i||document,d=b=>S_(u,`[data-cc="${b}"]`),h=(b,S)=>{Ma(b),c(S),l(),a()},p=d("show-preferencesModal"),f=d("show-consentModal"),m=d(r+"all"),_=d(r+"necessary"),P=d(r+"custom"),I=G.t.lazyHtmlGeneration;for(let b of p)Ue(b,"aria-haspopup","dialog"),Ht(b,On,S=>{Ma(S),s()}),I&&(Ht(b,"mouseenter",S=>{Ma(S),G.o.N||n(e,t)},!0),Ht(b,"focus",()=>{G.o.N||n(e,t)}));for(let b of f)Ue(b,"aria-haspopup","dialog"),Ht(b,On,S=>{Ma(S),o(!0)},!0);for(let b of m)Ht(b,On,S=>{h(S,"all")},!0);for(let b of P)Ht(b,On,S=>{h(S)},!0);for(let b of _)Ht(b,On,S=>{h(S,[])},!0)},fr=(i,e)=>{i&&(e&&(i.tabIndex=-1),i.focus(),e&&i.removeAttribute("tabindex"))},Ox=(i,e)=>{let n=t=>{t.target.removeEventListener("transitionend",n),t.propertyName==="opacity"&&getComputedStyle(i).opacity==="1"&&fr((r=>r===1?G.oe.be:G.oe.ve)(e))};Ht(i,"transitionend",n)},px,Ex=i=>{clearTimeout(px),i?Tt(G.oe.ye,ux):px=setTimeout(()=>{Io(G.oe.ye,ux)},500)},TR=["M 19.5 4.5 L 4.5 19.5 M 4.5 4.501 L 19.5 19.5","M 3.572 13.406 L 8.281 18.115 L 20.428 5.885","M 21.999 6.94 L 11.639 17.18 L 2.001 6.82 "],ic=(i=0,e=1.5)=>`<svg viewBox="0 0 24 24" stroke-width="${e}"><path d="${TR[i]}"/></svg>`,Ix=i=>{let e=G.oe,n=G.o;(t=>{let r=t===e.he,o=n.i.disablePageInteraction?e.ye:r?e.Ce:e.ye;Ht(o,"keydown",s=>{if(s.key!=="Tab"||!(r?n.k&&!n.A:n.A))return;let a=oh(),l=r?n.q:n.K;l.length!==0&&(s.shiftKey?a!==l[0]&&t.contains(a)||(Ma(s),fr(l[1])):a!==l[1]&&t.contains(a)||(Ma(s),fr(l[0])))},!0)})(i)},AR=["[href]",Gi,"input","details","[tabindex]"].map(i=>i+':not([tabindex="-1"])').join(","),Sx=i=>{let{o:e,oe:n}=G,t=(r,o)=>{let s=S_(r,AR);o[0]=s[0],o[1]=s[s.length-1]};i===1&&e.T&&t(n.he,e.q),i===2&&e.N&&t(n.we,e.K)},mr=(i,e,n)=>{let{de:t,le:r,ie:o,_e:s,ue:a,fe:l}=G.ce,c=G.re;if(e){let d={modalName:e};return i===c.fe?Kr(l)&&l(d):i===c._e?Kr(s)&&s(d):(d.modal=n,Kr(a)&&a(d)),dx(i,d)}let u={cookie:G.o.p};i===c.ie?Kr(o)&&o(Eo(u)):i===c.le?Kr(r)&&r(Eo(u)):(u.changedCategories=G.o.L,u.changedServices=G.o.ee,Kr(t)&&t(Eo(u))),dx(i,Eo(u))},rc=(i,e)=>{try{return i()}catch(n){return!e&&console.warn("CookieConsent:",n),!1}},M_=i=>{let{Y:e,ee:n,O:t,X:r,ne:o,p:s,L:a}=G.o;for(let d of t){let h=n[d]||e[d]||[];for(let p of h){let f=r[d][p];if(!f)continue;let{onAccept:m,onReject:_}=f;!f.Se&&Mt(e[d],p)&&Kr(m)?(f.Se=!0,m()):f.Se&&!Mt(e[d],p)&&Kr(_)&&(f.Se=!1,_())}}if(!G.t.manageScriptTags)return;let l=o,c=i||s.categories||[],u=(d,h)=>{if(h>=d.length)return;let p=o[h];if(p.xe)return u(d,h+1);let f=p.Me,m=p.De,_=p.Te,P=Mt(c,m),I=!!_&&Mt(e[m],_);if(!_&&!p.ke&&P||!_&&p.ke&&!P&&Mt(a,m)||_&&!p.ke&&I||_&&p.ke&&!I&&Mt(n[m]||[],_)){p.xe=!0;let b=nh(f,"type",!0);v_(f,"type",!!b),v_(f,rh);let S=nh(f,"src",!0);S&&v_(f,"src",!0);let k=pe("script");k.textContent=f.innerHTML;for(let{nodeName:X}of f.attributes)Ue(k,X,f[X]||nh(f,X));b&&(k.type=b),S?k.src=S:S=f.src;let N=!!S&&(!b||["text/javascript","module"].includes(b));if(N&&(k.onload=k.onerror=()=>{u(d,++h)}),f.replaceWith(k),N)return}u(d,++h)};u(l,0)},ih="bottom",O_="left",Tx="center",T_="right",C_="inline",Ax="wide",Dx="pm--",b_=["middle","top",ih],fx=[O_,Tx,T_],DR={box:{Ae:[Ax,C_],Ee:b_,Ne:fx,He:ih,Ve:T_},cloud:{Ae:[C_],Ee:b_,Ne:fx,He:ih,Ve:Tx},bar:{Ae:[C_],Ee:b_.slice(1),Ne:[],He:ih,Ve:""}},kR={box:{Ae:[],Ee:[],Ne:[],He:"",Ve:""},bar:{Ae:[Ax],Ee:[],Ne:[O_,T_],He:"",Ve:O_}},kx=i=>{let e=G.o.i.guiOptions,n=e&&e.consentModal,t=e&&e.preferencesModal;i===0&&mx(G.oe.he,DR,n,"cm--","box","cm"),i===1&&mx(G.oe.we,kR,t,Dx,"box","pm")},mx=(i,e,n,t,r,o)=>{i.className=o;let s=n&&n.layout,a=n&&n.position,l=n&&n.flipButtons,c=!n||n.equalWeightButtons!==!1,u=s&&s.split(" ")||[],d=u[0],h=u[1],p=d in e?d:r,f=e[p],m=Mt(f.Ae,h)&&h,_=a&&a.split(" ")||[],P=_[0],I=t===Dx?_[0]:_[1],b=Mt(f.Ee,P)?P:f.He,S=Mt(f.Ne,I)?I:f.Ve,k=X=>{X&&Tt(i,t+X)};k(p),k(m),k(b),k(S),l&&k("flip");let N=o+"__btn--secondary";if(o==="cm"){let{Ie:X,Le:F}=G.oe;X&&(c?Io(X,N):Tt(X,N)),F&&(c?Io(F,N):Tt(F,N))}else{let{je:X}=G.oe;X&&(c?Io(X,N):Tt(X,N))}},oc=(i,e)=>{let n=G.o,t=G.oe,{hide:r,hidePreferences:o,acceptCategory:s}=i,a=S=>{s(S),o(),r()},l=n.u&&n.u.preferencesModal;if(!l)return;let c=l.title,u=l.closeIconLabel,d=l.acceptAllBtn,h=l.acceptNecessaryBtn,p=l.savePreferencesBtn,f=l.sections||[],m=d||h||p;if(t.Fe)t.Pe=pe(dt),lt(t.Pe,"body");else{t.Fe=pe(dt),Tt(t.Fe,"pm-wrapper");let S=pe("div");Tt(S,"pm-overlay"),de(t.Fe,S),Ht(S,On,o),t.we=pe(dt),Tt(t.we,"pm"),Ue(t.we,"role","dialog"),Ue(t.we,Xi,!0),Ue(t.we,"aria-modal",!0),Ue(t.we,"aria-labelledby","pm__title"),Ht(t.ye,"keydown",k=>{k.keyCode===27&&o()},!0),t.Oe=pe(dt),lt(t.Oe,"header"),t.Re=pe("h2"),lt(t.Re,"title"),t.Re.id="pm__title",t.Be=pe(Gi),lt(t.Be,"close-btn"),Ue(t.Be,"aria-label",l.closeIconLabel||""),Ht(t.Be,On,o),t.Ge=pe("span"),t.Ge.innerHTML=ic(),de(t.Be,t.Ge),t.Je=pe(dt),lt(t.Je,"body"),t.Ue=pe(dt),lt(t.Ue,"footer");var _=pe(dt);Tt(_,"btns");var P=pe(dt),I=pe(dt);lt(P,tc),lt(I,tc),de(t.Ue,P),de(t.Ue,I),de(t.Oe,t.Re),de(t.Oe,t.Be),t.ve=pe(dt),Ue(t.ve,"tabIndex",-1),de(t.we,t.ve),de(t.we,t.Oe),de(t.we,t.Je),m&&de(t.we,t.Ue),de(t.Fe,t.we)}let b;c&&(t.Re.innerHTML=c,u&&Ue(t.Be,"aria-label",u)),f.forEach((S,k)=>{let N=S.title,X=S.description,F=S.linkedCategory,j=F&&n.P[F],z=S.cookieTable,ue=z&&z.body,se=z&&z.caption,ge=ue&&ue.length>0,Ye=!!j,oe=Ye&&n.X[F],B=x_(oe)&&Ps(oe)||[],L=Ye&&(!!X||!!ge||Ps(oe).length>0);var V=pe(dt);if(lt(V,"section"),L||X){var te=pe(dt);lt(te,"section-desc-wrapper")}let he=B.length;if(L&&he>0){let Ze=pe(dt);lt(Ze,"section-services");for(let Ae of B){let Le=oe[Ae],ae=Le&&Le.label||Ae,Qe=pe(dt),Ge=pe(dt),De=pe(dt),jt=pe(dt);lt(Qe,"service"),lt(jt,"service-title"),lt(Ge,"service-header"),lt(De,"service-icon");let $t=gx(ae,Ae,j,!0,F);jt.innerHTML=ae,de(Ge,De),de(Ge,jt),de(Qe,Ge),de(Qe,$t),de(Ze,Qe)}de(te,Ze)}if(N){var Se=pe(dt),ve=pe(Ye?Gi:dt);if(lt(Se,"section-title-wrapper"),lt(ve,"section-title"),ve.innerHTML=N,de(Se,ve),Ye){let Ze=pe("span");Ze.innerHTML=ic(2,3.5),lt(Ze,"section-arrow"),de(Se,Ze),V.className+="--toggle";let Ae=gx(N,F,j),Le=l.serviceCounterLabel;if(he>0&&Ea(Le)){let ae=pe("span");lt(ae,"badge"),lt(ae,"service-counter"),Ue(ae,Xi,!0),Ue(ae,"data-servicecounter",he),Le&&(Le=Le.split("|"),Le=Le.length>1&&he>1?Le[1]:Le[0],Ue(ae,"data-counterlabel",Le)),ae.innerHTML=he+(Le?" "+Le:""),de(ve,ae)}if(L){lt(V,"section--expandable");var rt=F+"-desc";Ue(ve,"aria-expanded",!1),Ue(ve,"aria-controls",rt)}de(Se,Ae)}else Ue(ve,"role","heading"),Ue(ve,"aria-level","3");de(V,Se)}if(X){var Te=pe("p");lt(Te,"section-desc"),Te.innerHTML=X,de(te,Te)}if(L&&(Ue(te,Xi,"true"),te.id=rt,((Ze,Ae,Le)=>{Ht(ve,On,()=>{Ae.classList.contains("is-expanded")?(Io(Ae,"is-expanded"),Ue(Le,"aria-expanded","false"),Ue(Ze,Xi,"true")):(Tt(Ae,"is-expanded"),Ue(Le,"aria-expanded","true"),Ue(Ze,Xi,"false"))})})(te,V,ve),ge)){let Ze=pe("table"),Ae=pe("thead"),Le=pe("tbody");if(se){let $t=pe("caption");lt($t,"table-caption"),$t.innerHTML=se,Ze.appendChild($t)}lt(Ze,"section-table"),lt(Ae,"table-head"),lt(Le,"table-body");let ae=z.headers,Qe=Ps(ae),Ge=t.$e.createDocumentFragment(),De=pe("tr");for(let $t of Qe){let Qn=ae[$t],Jn=pe("th");Jn.id="cc__row-"+Qn+k,Ue(Jn,"scope","col"),lt(Jn,"table-th"),Jn.innerHTML=Qn,de(Ge,Jn)}de(De,Ge),de(Ae,De);let jt=t.$e.createDocumentFragment();for(let $t of ue){let Qn=pe("tr");lt(Qn,"table-tr");for(let Jn of Qe){let Ko=ae[Jn],Ks=$t[Jn],ho=pe("td"),Fy=pe(dt);lt(ho,"table-td"),Ue(ho,"data-column",Ko),Ue(ho,"headers","cc__row-"+Ko+k),Fy.insertAdjacentHTML("beforeend",Ks),de(ho,Fy),de(Qn,ho)}de(jt,Qn)}de(Le,jt),de(Ze,Ae),de(Ze,Le),de(te,Ze)}(L||X)&&de(V,te);let Lt=t.Pe||t.Je;Ye?(b||(b=pe(dt),lt(b,"section-toggles")),b.appendChild(V)):b=null,de(Lt,b||V)}),d&&(t.ze||(t.ze=pe(Gi),lt(t.ze,"btn"),Ue(t.ze,Oa,"all"),de(P,t.ze),Ht(t.ze,On,()=>a("all"))),t.ze.innerHTML=d),h&&(t.je||(t.je=pe(Gi),lt(t.je,"btn"),Ue(t.je,Oa,"necessary"),de(P,t.je),Ht(t.je,On,()=>a([]))),t.je.innerHTML=h),p&&(t.qe||(t.qe=pe(Gi),lt(t.qe,"btn"),lt(t.qe,"btn--secondary"),Ue(t.qe,Oa,"save"),de(I,t.qe),Ht(t.qe,On,()=>a())),t.qe.innerHTML=p),t.Pe&&(t.we.replaceChild(t.Pe,t.Je),t.Je=t.Pe),kx(1),n.N||(n.N=!0,mr(G.re.ue,I_,t.we),e(i),de(t.Ce,t.Fe),Ix(t.we),setTimeout(()=>Tt(t.Fe,"cc--anim"),100)),Sx(2)};function gx(i,e,n,t,r){let o=G.o,s=G.oe,a=pe("label"),l=pe("input"),c=pe("span"),u=pe("span"),d=pe("span"),h=pe("span"),p=pe("span");if(h.innerHTML=ic(1,3),p.innerHTML=ic(0,3),l.type="checkbox",Tt(a,"section__toggle-wrapper"),Tt(l,"section__toggle"),Tt(h,"toggle__icon-on"),Tt(p,"toggle__icon-off"),Tt(c,"toggle__icon"),Tt(u,"toggle__icon-circle"),Tt(d,"toggle__label"),Ue(c,Xi,"true"),t?(Tt(a,"toggle-service"),Ue(l,rh,r),s.ae[r][e]=l):s.se[e]=l,t?(f=>{Ht(l,"change",()=>{let m=s.ae[f],_=s.se[f];o.Z[f]=[];for(let P in m){let I=m[P];I.checked&&o.Z[f].push(I.value)}_.checked=o.Z[f].length>0})})(r):(f=>{Ht(l,On,()=>{let m=s.ae[f],_=l.checked;o.Z[f]=[];for(let P in m)m[P].checked=_,_&&o.Z[f].push(P)})})(e),l.value=e,d.textContent=i.replace(/<.*>.*<\/.*>/gm,""),de(u,p),de(u,h),de(c,u),o.D)(n.readOnly||n.enabled)&&(l.checked=!0);else if(t){let f=o.Y[r];l.checked=n.readOnly||Mt(f,e)}else Mt(o.R,e)&&(l.checked=!0);return n.readOnly&&(l.disabled=!0),de(a,l),de(a,c),de(a,d),a}var P_=()=>{let i=pe("span");return G.oe.Ke||(G.oe.Ke=i),i},Nx=(i,e)=>{let n=G.o,t=G.oe,{hide:r,showPreferences:o,acceptCategory:s}=i,a=n.u&&n.u.consentModal;if(!a)return;let l=a.acceptAllBtn,c=a.acceptNecessaryBtn,u=a.showPreferencesBtn,d=a.closeIconLabel,h=a.footer,p=a.label,f=a.title,m=P=>{r(),s(P)};if(!t.Qe){t.Qe=pe(dt),t.he=pe(dt),t.We=pe(dt),t.Xe=pe(dt),t.Ye=pe(dt),Tt(t.Qe,"cm-wrapper"),Tt(t.he,"cm"),Rn(t.We,"body"),Rn(t.Xe,"texts"),Rn(t.Ye,"btns"),Ue(t.he,"role","dialog"),Ue(t.he,"aria-modal","true"),Ue(t.he,Xi,"false"),Ue(t.he,"aria-describedby","cm__desc"),p?Ue(t.he,"aria-label",p):f&&Ue(t.he,"aria-labelledby","cm__title");let P="box",I=n.i.guiOptions,b=I&&I.consentModal,S=(b&&b.layout||P).split(" ")[0]===P;f&&d&&S&&(t.Le||(t.Le=pe(Gi),t.Le.innerHTML=ic(),Rn(t.Le,"btn"),Rn(t.Le,"btn--close"),Ht(t.Le,On,()=>{m([])}),de(t.We,t.Le)),Ue(t.Le,"aria-label",d)),de(t.We,t.Xe),(l||c||u)&&de(t.We,t.Ye),t.be=pe(dt),Ue(t.be,"tabIndex",-1),de(t.he,t.be),de(t.he,t.We),de(t.Qe,t.he)}f&&(t.Ze||(t.Ze=pe("h2"),t.Ze.className=t.Ze.id="cm__title",de(t.Xe,t.Ze)),t.Ze.innerHTML=f);let _=a.description;if(_&&(n.V&&(_=_.replace("{{revisionMessage}}",n.I?"":a.revisionMessage||"")),t.et||(t.et=pe("p"),t.et.className=t.et.id="cm__desc",de(t.Xe,t.et)),t.et.innerHTML=_),l&&(t.tt||(t.tt=pe(Gi),de(t.tt,P_()),Rn(t.tt,"btn"),Ue(t.tt,Oa,"all"),Ht(t.tt,On,()=>{m("all")})),t.tt.firstElementChild.innerHTML=l),c&&(t.Ie||(t.Ie=pe(Gi),de(t.Ie,P_()),Rn(t.Ie,"btn"),Ue(t.Ie,Oa,"necessary"),Ht(t.Ie,On,()=>{m([])})),t.Ie.firstElementChild.innerHTML=c),u&&(t.nt||(t.nt=pe(Gi),de(t.nt,P_()),Rn(t.nt,"btn"),Rn(t.nt,"btn--secondary"),Ue(t.nt,Oa,"show"),Ht(t.nt,"mouseenter",()=>{n.N||oc(i,e)}),Ht(t.nt,On,o)),t.nt.firstElementChild.innerHTML=u),t.ot||(t.ot=pe(dt),Rn(t.ot,tc),l&&de(t.ot,t.tt),c&&de(t.ot,t.Ie),(l||c)&&de(t.We,t.ot),de(t.Ye,t.ot)),t.nt&&!t.st&&(t.st=pe(dt),t.Ie&&t.tt?(Rn(t.st,tc),de(t.st,t.nt),de(t.Ye,t.st)):(de(t.ot,t.nt),Rn(t.ot,tc+"--uneven"))),h){if(!t.ct){let P=pe(dt),I=pe(dt);t.ct=pe(dt),Rn(P,"footer"),Rn(I,"links"),Rn(t.ct,"link-group"),de(I,t.ct),de(P,I),de(t.he,P)}t.ct.innerHTML=h}kx(0),n.T||(n.T=!0,mr(G.re.ue,E_,t.he),e(i),de(t.Ce,t.Qe),Ix(t.he),setTimeout(()=>Tt(t.Qe,"cc--anim"),100)),Sx(1),Mx(t.We,i,oc,e)},Rx=i=>{if(!Ea(i))return null;if(i in G.o._)return i;let e=i.slice(0,2);return e in G.o._?e:null},Fx=()=>G.o.l||G.o.i.language.default,Lx=i=>{i&&(G.o.l=i)},NR=i=>$(void 0,null,function*(){let e=G.o,n=Rx(i)?i:Fx(),t=e._[n];if(!t)return!1;if(Ea(t)){let r=yield(o=>$(void 0,null,function*(){try{return yield(yield fetch(o)).json()}catch(s){return console.error(s),!1}}))(t);if(!r)return!1;t=r}return e.u=t,Lx(n),!0}),RR=()=>{let i=G.o.i.language.rtl,e=G.oe.Ce;i&&e&&(sh(i)||(i=[i]),Mt(i,G.o.l)?Tt(e,"cc--rtl"):Io(e,"cc--rtl"))},nc=()=>{let i=G.oe;if(i.Ce)return;i.Ce=pe(dt),i.Ce.id="cc-main",i.Ce.setAttribute("data-nosnippet",""),RR();let e=G.o.i.root;e&&Ea(e)&&(e=document.querySelector(e)),(e||i.$e.body).appendChild(i.Ce)},FR=i=>rc(()=>localStorage.removeItem(i)),_x=(i,e)=>{if(e instanceof RegExp)return i.filter(n=>e.test(n));{let n=Px(i,e);return n>-1?[i[n]]:[]}},LR=i=>{let{hostname:e,protocol:n}=location,{name:t,path:r,domain:o,sameSite:s,useLocalStorage:a}=G.t.cookie,l=i?(()=>{let h=G.o.S,p=h?new Date-h:0;return 864e5*hx()-p})():864e5*hx(),c=new Date;c.setTime(c.getTime()+l),G.o.p.expirationTime=c.getTime();let u=JSON.stringify(G.o.p),d=t+"="+encodeURIComponent(u)+(l!==0?"; expires="+c.toUTCString():"")+"; Path="+r+"; SameSite="+s;Mt(e,".")&&(d+="; Domain="+o),n==="https:"&&(d+="; Secure"),a?((h,p)=>{rc(()=>localStorage.setItem(h,p))})(t,u):document.cookie=d,G.o.p},vx=(i,e,n)=>{if(i.length===0)return;let t=n||G.t.cookie.domain,r=e||G.t.cookie.path,o=t.slice(0,4)==="www.",s=o&&t.substring(4),a=(l,c)=>{document.cookie=l+"=; path="+r+(c?"; domain=."+c:"")+"; expires=Thu, 01 Jan 1970 00:00:01 GMT;"};for(let l of i)a(l),a(l,t),o&&a(l,s)},jR=i=>{let e=i||G.t.cookie.name,n=G.t.cookie.useLocalStorage;return((r,o)=>{let s;return s=rc(()=>JSON.parse(o?r:decodeURIComponent(r)),!0)||{},s})(n?(t=e,rc(()=>localStorage.getItem(t))||""):BR(e,!0),n);var t},BR=(i,e)=>{let n=document.cookie.match("(^|;)\\s*"+i+"\\s*=\\s*([^;]+)");return n?e?n.pop():i:""},VR=i=>{let e=document.cookie.split(/;\s*/),n=[];for(let t of e){let r=t.split("=")[0];i?rc(()=>{i.test(r)&&n.push(r)}):n.push(r)}return n},UR=(i,e=[])=>{((n,t)=>{let{O:r,R:o,B:s,N:a,Z:l,X:c}=G.o,u=[];if(n){sh(n)?u.push(...n):Ea(n)&&(u=n==="all"?r:[n]);for(let d of r)l[d]=Mt(u,d)?Ps(c[d]):[]}else u=o,a&&(u=(()=>{let d=G.oe.se;if(!d)return[];let h=[];for(let p in d)d[p].checked&&h.push(p);return h})());u=u.filter(d=>!Mt(r,d)||!Mt(t,d)),u.push(...s),xx(u)})(i,e),(n=>{let t=G.o,{Z:r,B:o,Y:s,X:a,O:l}=t,c=l;t.te=Eo(s);for(let u of c){let d=a[u],h=Ps(d),p=r[u]&&r[u].length>0,f=Mt(o,u);if(h.length!==0){if(s[u]=[],f)s[u].push(...h);else if(p){let m=r[u];s[u].push(...m)}else s[u]=[];s[u]=wx(s[u])}}})(),(()=>{let n=G.o;n.L=G.t.mode===ec&&n.D?y_(n.G,n.R):y_(n.R,n.p.categories);let t=n.L.length>0,r=!1;for(let l of n.O)n.ee[l]=y_(n.Y[l],n.te[l]),n.ee[l].length>0&&(r=!0);let o=G.oe.se;for(let l in o)o[l].checked=Mt(n.R,l);for(let l of n.O){let c=G.oe.ae[l],u=n.Y[l];for(let d in c)c[d].checked=Mt(u,d)}n.C||(n.C=new Date),n.M||(n.M=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,l=>(l^crypto.getRandomValues(new Uint8Array(1))[0]&15>>l/4).toString(16))),n.p={categories:Eo(n.R),revision:G.t.revision,data:n.h,consentTimestamp:n.C.toISOString(),consentId:n.M,services:Eo(n.Y)};let s=!1,a=t||r;(n.D||a)&&(n.D&&(n.D=!1,s=!0),n.S=n.S?new Date:n.C,n.p.lastConsentTimestamp=n.S.toISOString(),LR(),G.t.autoClearCookies&&(s||a)&&(l=>{let c=G.o,u=VR(),d=(h=>{let p=G.o;return(h?p.O:p.L).filter(f=>{let m=p.P[f];return!!m&&!m.readOnly&&!!m.autoClear})})(l);for(let h in c.ee)for(let p of c.ee[h]){let f=c.X[h][p].cookies;if(!Mt(c.Y[h],p)&&f)for(let m of f){let _=_x(u,m.name);vx(_,m.path,m.domain)}}for(let h of d){let p=c.P[h].autoClear,f=p&&p.cookies||[],m=Mt(c.L,h),_=!Mt(c.R,h),P=m&&_;if(l?_:P){p.reloadPage&&P&&(c.j=!0);for(let I of f){let b=_x(u,I.name);vx(b,I.path,I.domain)}}}})(s),M_()),s&&(mr(G.re.ie),mr(G.re.le),G.t.mode===yx)||(a&&mr(G.re.de),n.j&&(n.j=!1,location.reload()))})()},zR=i=>{let e=G.o.D?[]:G.o.R;return Mt(e,i)};var HR=(i,e)=>{let n=G.o.D?[]:G.o.Y[e];return Mt(n,i)};var jx=i=>{let{oe:e,o:n}=G;if(!n.k){if(!n.T){if(!i)return;Nx(A_,nc)}n.k=!0,n.U=oh(),n.v&&Ex(!0),Ox(e.he,1),Tt(e.ye,Cx),Ue(e.he,Xi,"false"),setTimeout(()=>{fr(G.oe.be)},100),mr(G.re.fe,E_)}},WR=()=>{let{oe:i,o:e,re:n}=G;e.k&&(e.k=!1,e.v&&Ex(),fr(i.Ke,!0),Io(i.ye,Cx),Ue(i.he,Xi,"true"),fr(e.U),e.U=null,mr(n._e,E_))},GR=()=>{let i=G.o;i.A||(i.N||oc(A_,nc),i.A=!0,i.k?i.$=oh():i.U=oh(),Ox(G.oe.we,2),Tt(G.oe.ye,bx),Ue(G.oe.we,Xi,"false"),setTimeout(()=>{fr(G.oe.ve)},100),mr(G.re.fe,I_))},XR=()=>{let i=G.o;i.A&&(i.A=!1,(()=>{let e=Bx(),n=G.o.P,t=G.oe.se,r=G.oe.ae,o=s=>Mt(G.o.G,s);for(let s in t){let a=!!n[s].readOnly;t[s].checked=a||(e?zR(s):o(s));for(let l in r[s])r[s][l].checked=a||(e?HR(l,s):o(s))}})(),fr(G.oe.Ge,!0),Io(G.oe.ye,bx),Ue(G.oe.we,Xi,"true"),i.k?(fr(i.$),i.$=null):(fr(i.U),i.U=null),mr(G.re._e,I_))},A_={show:jx,hide:WR,showPreferences:GR,hidePreferences:XR,acceptCategory:UR};var Bx=()=>!G.o.D,Vx=i=>$(void 0,null,function*(){let{o:e,t:n,re:t}=G,r=window;if(!r._ccRun){if(r._ccRun=!0,(a=>{let{oe:l,t:c,o:u}=G,d=c,h=u,{cookie:p}=d,f=G.ce,m=a.cookie,_=a.categories,P=Ps(_)||[],I=navigator,b=document;l.$e=b,l.ye=b.documentElement,p.domain=location.hostname,h.i=a,h.P=_,h.O=P,h._=a.language.translations,h.v=!!a.disablePageInteraction,f.ie=a.onFirstConsent,f.le=a.onConsent,f.de=a.onChange,f._e=a.onModalHide,f.fe=a.onModalShow,f.ue=a.onModalReady;let{mode:S,autoShow:k,lazyHtmlGeneration:N,autoClearCookies:X,revision:F,manageScriptTags:j,hideFromBots:z}=a;S===ec&&(d.mode=S),typeof X=="boolean"&&(d.autoClearCookies=X),typeof j=="boolean"&&(d.manageScriptTags=j),typeof F=="number"&&F>=0&&(d.revision=F,h.V=!0),typeof k=="boolean"&&(d.autoShow=k),typeof N=="boolean"&&(d.lazyHtmlGeneration=N),z===!1&&(d.hideFromBots=!1),d.hideFromBots===!0&&I&&(h.J=I.userAgent&&/bot|crawl|spider|slurp|teoma/i.test(I.userAgent)||I.webdriver),x_(m)&&(d.cookie=Q(Q({},p),m)),d.autoClearCookies,h.V,d.manageScriptTags,(ue=>{let{P:se,X:ge,Y:Ye,Z:oe,B}=G.o;for(let L of ue){let V=se[L],te=V.services||{},he=x_(te)&&Ps(te)||[];ge[L]={},Ye[L]=[],oe[L]=[],V.readOnly&&(B.push(L),Ye[L]=he),G.oe.ae[L]={};for(let Se of he){let ve=te[Se];ve.Se=!1,ge[L][Se]=ve}}})(P),(()=>{if(!G.t.manageScriptTags)return;let ue=G.o,se=S_(document,"script["+rh+"]");for(let ge of se){let Ye=nh(ge,rh),oe=ge.dataset.service||"",B=!1;if(Ye&&Ye.charAt(0)==="!"&&(Ye=Ye.slice(1),B=!0),oe.charAt(0)==="!"&&(oe=oe.slice(1),B=!0),Mt(ue.O,Ye)&&(ue.ne.push({Me:ge,xe:!1,ke:B,De:Ye,Te:oe}),oe)){let L=ue.X[Ye];L[oe]||(L[oe]={Se:!1})}}})(),Lx((()=>{let ue=G.o.i.language.autoDetect;if(ue){let se={browser:navigator.language,document:document.documentElement.lang},ge=Rx(se[ue]);if(ge)return ge}return Fx()})())})(i),e.J)return;(()=>{let a=G.o,l=G.t,c=jR(),{categories:u,services:d,consentId:h,consentTimestamp:p,lastConsentTimestamp:f,data:m,revision:_}=c,P=sh(u);a.p=c,a.M=h;let I=!!h&&Ea(h);a.C=p,a.C&&(a.C=new Date(p)),a.S=f,a.S&&(a.S=new Date(f)),a.h=m!==void 0?m:null,a.V&&I&&_!==l.revision&&(a.I=!1),a.D=!(I&&a.I&&a.C&&a.S&&P),l.cookie.useLocalStorage&&!a.D&&(a.D=new Date().getTime()>(c.expirationTime||0),a.D&&FR(l.cookie.name)),a.D,(()=>{let b=G.o;for(let S of b.O){let k=b.P[S];if(k.readOnly||k.enabled&&b.i.mode===ec){b.G.push(S);let N=b.X[S]||{};for(let X in N)b.Y[S].push(X)}}})(),a.D?l.mode===ec&&(a.R=[...a.G]):(a.Y=Q(Q({},a.Y),d),xx([...a.B,...u])),a.Z=Q({},a.Y)})();let s=Bx();if(!(yield NR()))return!1;if(Mx(null,o=A_,oc,nc),G.o.D&&Nx(o,nc),G.t.lazyHtmlGeneration||oc(o,nc),n.autoShow&&!s&&jx(!0),s)return M_(),mr(t.le);n.mode===ec&&M_(e.G)}var o});var Nt=(()=>{let e=class e{constructor(){this.requestClose=new Me}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=He({type:e,inputs:{inputFromOpener:"inputFromOpener"},outputs:{requestClose:"requestClose"}});let i=e;return i})();var To=class{},Ux=(()=>{class i extends To{getTranslation(n){return Dn({})}static \u0275fac=(()=>{let n;return function(r){return(n||(n=un(i)))(r||i)}})();static \u0275prov=Y({token:i,factory:i.\u0275fac})}return i})(),Qr=class{},zx=(()=>{class i{handle(n){return n.key}static \u0275fac=function(t){return new(t||i)};static \u0275prov=Y({token:i,factory:i.\u0275fac})}return i})();function ah(i,e){if(i===e)return!0;if(i===null||e===null)return!1;if(i!==i&&e!==e)return!0;let n=typeof i,t=typeof e,r,o,s;if(n==t&&n=="object")if(Array.isArray(i)){if(!Array.isArray(e))return!1;if((r=i.length)==e.length){for(o=0;o<r;o++)if(!ah(i[o],e[o]))return!1;return!0}}else{if(Array.isArray(e))return!1;s=Object.create(null);for(o in i){if(!ah(i[o],e[o]))return!1;s[o]=!0}for(o in e)if(!(o in s)&&typeof e[o]<"u")return!1;return!0}return!1}function So(i){return typeof i<"u"&&i!==null}function D_(i){return i&&typeof i=="object"&&!Array.isArray(i)}function Gx(i,e){let n=Object.assign({},i);return D_(i)&&D_(e)&&Object.keys(e).forEach(t=>{D_(e[t])?t in i?n[t]=Gx(i[t],e[t]):Object.assign(n,{[t]:e[t]}):Object.assign(n,{[t]:e[t]})}),n}var Ia=class{},Hx=(()=>{class i extends Ia{templateMatcher=/{{\s?([^{}\s]*)\s?}}/g;interpolate(n,t){let r;return typeof n=="string"?r=this.interpolateString(n,t):typeof n=="function"?r=this.interpolateFunction(n,t):r=n,r}getValue(n,t){let r=typeof t=="string"?t.split("."):[t];t="";do t+=r.shift(),So(n)&&So(n[t])&&(typeof n[t]=="object"||!r.length)?(n=n[t],t=""):r.length?t+=".":n=void 0;while(r.length);return n}interpolateFunction(n,t){return n(t)}interpolateString(n,t){return t?n.replace(this.templateMatcher,(r,o)=>{let s=this.getValue(t,o);return So(s)?s:r}):n}static \u0275fac=(()=>{let n;return function(r){return(n||(n=un(i)))(r||i)}})();static \u0275prov=Y({token:i,factory:i.\u0275fac})}return i})(),Sa=class{},Wx=(()=>{class i extends Sa{compile(n,t){return n}compileTranslations(n,t){return n}static \u0275fac=(()=>{let n;return function(r){return(n||(n=un(i)))(r||i)}})();static \u0275prov=Y({token:i,factory:i.\u0275fac})}return i})(),lh=class{defaultLang;currentLang=this.defaultLang;translations={};langs=[];onTranslationChange=new Me;onLangChange=new Me;onDefaultLangChange=new Me},k_=new fe("USE_STORE"),N_=new fe("USE_DEFAULT_LANG"),R_=new fe("DEFAULT_LANGUAGE"),F_=new fe("USE_EXTEND"),yn=(()=>{class i{store;currentLoader;compiler;parser;missingTranslationHandler;useDefaultLang;isolate;extend;loadingTranslations;pending=!1;_onTranslationChange=new Me;_onLangChange=new Me;_onDefaultLangChange=new Me;_defaultLang;_currentLang;_langs=[];_translations={};_translationRequests={};get onTranslationChange(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange}get onLangChange(){return this.isolate?this._onLangChange:this.store.onLangChange}get onDefaultLangChange(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange}get defaultLang(){return this.isolate?this._defaultLang:this.store.defaultLang}set defaultLang(n){this.isolate?this._defaultLang=n:this.store.defaultLang=n}get currentLang(){return this.isolate?this._currentLang:this.store.currentLang}set currentLang(n){this.isolate?this._currentLang=n:this.store.currentLang=n}get langs(){return this.isolate?this._langs:this.store.langs}set langs(n){this.isolate?this._langs=n:this.store.langs=n}get translations(){return this.isolate?this._translations:this.store.translations}set translations(n){this.isolate?this._translations=n:this.store.translations=n}constructor(n,t,r,o,s,a=!0,l=!1,c=!1,u){this.store=n,this.currentLoader=t,this.compiler=r,this.parser=o,this.missingTranslationHandler=s,this.useDefaultLang=a,this.isolate=l,this.extend=c,u&&this.setDefaultLang(u)}setDefaultLang(n){if(n===this.defaultLang)return;let t=this.retrieveTranslations(n);typeof t<"u"?(this.defaultLang==null&&(this.defaultLang=n),t.pipe(jr(1)).subscribe(r=>{this.changeDefaultLang(n)})):this.changeDefaultLang(n)}getDefaultLang(){return this.defaultLang}use(n){if(n===this.currentLang)return Dn(this.translations[n]);let t=this.retrieveTranslations(n);return typeof t<"u"?(this.currentLang||(this.currentLang=n),t.pipe(jr(1)).subscribe(r=>{this.changeLang(n)}),t):(this.changeLang(n),Dn(this.translations[n]))}retrieveTranslations(n){let t;return(typeof this.translations[n]>"u"||this.extend)&&(this._translationRequests[n]=this._translationRequests[n]||this.getTranslation(n),t=this._translationRequests[n]),t}getTranslation(n){this.pending=!0;let t=this.currentLoader.getTranslation(n).pipe(ia(1),jr(1));return this.loadingTranslations=t.pipe(xt(r=>this.compiler.compileTranslations(r,n)),ia(1),jr(1)),this.loadingTranslations.subscribe({next:r=>{this.translations[n]=this.extend&&this.translations[n]?Q(Q({},r),this.translations[n]):r,this.updateLangs(),this.pending=!1},error:r=>{this.pending=!1}}),t}setTranslation(n,t,r=!1){t=this.compiler.compileTranslations(t,n),(r||this.extend)&&this.translations[n]?this.translations[n]=Gx(this.translations[n],t):this.translations[n]=t,this.updateLangs(),this.onTranslationChange.emit({lang:n,translations:this.translations[n]})}getLangs(){return this.langs}addLangs(n){n.forEach(t=>{this.langs.indexOf(t)===-1&&this.langs.push(t)})}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResult(n,t,r){let o;if(t instanceof Array){let s={},a=!1;for(let l of t)s[l]=this.getParsedResult(n,l,r),Fr(s[l])&&(a=!0);if(a){let l=t.map(c=>Fr(s[c])?s[c]:Dn(s[c]));return Cl(l).pipe(xt(c=>{let u={};return c.forEach((d,h)=>{u[t[h]]=d}),u}))}return s}if(n&&(o=this.parser.interpolate(this.parser.getValue(n,t),r)),typeof o>"u"&&this.defaultLang!=null&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(o=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],t),r)),typeof o>"u"){let s={key:t,translateService:this};typeof r<"u"&&(s.interpolateParams=r),o=this.missingTranslationHandler.handle(s)}return typeof o<"u"?o:t}get(n,t){if(!So(n)||!n.length)throw new Error('Parameter "key" required');if(this.pending)return this.loadingTranslations.pipe(bl(r=>(r=this.getParsedResult(r,n,t),Fr(r)?r:Dn(r))));{let r=this.getParsedResult(this.translations[this.currentLang],n,t);return Fr(r)?r:Dn(r)}}getStreamOnTranslationChange(n,t){if(!So(n)||!n.length)throw new Error('Parameter "key" required');return Lr(Iu(()=>this.get(n,t)),this.onTranslationChange.pipe(Ni(r=>{let o=this.getParsedResult(r.translations,n,t);return typeof o.subscribe=="function"?o:Dn(o)})))}stream(n,t){if(!So(n)||!n.length)throw new Error('Parameter "key" required');return Lr(Iu(()=>this.get(n,t)),this.onLangChange.pipe(Ni(r=>{let o=this.getParsedResult(r.translations,n,t);return Fr(o)?o:Dn(o)})))}instant(n,t){if(!So(n)||!n.length)throw new Error('Parameter "key" required');let r=this.getParsedResult(this.translations[this.currentLang],n,t);if(Fr(r)){if(n instanceof Array){let o={};return n.forEach((s,a)=>{o[n[a]]=n[a]}),o}return n}else return r}set(n,t,r=this.currentLang){this.translations[r][n]=this.compiler.compile(t,r),this.updateLangs(),this.onTranslationChange.emit({lang:r,translations:this.translations[r]})}changeLang(n){this.currentLang=n,this.onLangChange.emit({lang:n,translations:this.translations[n]}),this.defaultLang==null&&this.changeDefaultLang(n)}changeDefaultLang(n){this.defaultLang=n,this.onDefaultLangChange.emit({lang:n,translations:this.translations[n]})}reloadLang(n){return this.resetLang(n),this.getTranslation(n)}resetLang(n){this._translationRequests[n]=void 0,this.translations[n]=void 0}getBrowserLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let n=window.navigator.languages?window.navigator.languages[0]:null;if(n=n||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,!(typeof n>"u"))return n.indexOf("-")!==-1&&(n=n.split("-")[0]),n.indexOf("_")!==-1&&(n=n.split("_")[0]),n}getBrowserCultureLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let n=window.navigator.languages?window.navigator.languages[0]:null;return n=n||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,n}static \u0275fac=function(t){return new(t||i)(D(lh),D(To),D(Sa),D(Ia),D(Qr),D(N_),D(k_),D(F_),D(R_))};static \u0275prov=Y({token:i,factory:i.\u0275fac})}return i})();var Pe=(()=>{class i{translate;_ref;value="";lastKey=null;lastParams=[];onTranslationChange;onLangChange;onDefaultLangChange;constructor(n,t){this.translate=n,this._ref=t}updateValue(n,t,r){let o=s=>{this.value=s!==void 0?s:n,this.lastKey=n,this._ref.markForCheck()};if(r){let s=this.translate.getParsedResult(r,n,t);Fr(s.subscribe)?s.subscribe(o):o(s)}this.translate.get(n,t).subscribe(o)}transform(n,...t){if(!n||!n.length)return n;if(ah(n,this.lastKey)&&ah(t,this.lastParams))return this.value;let r;if(So(t[0])&&t.length)if(typeof t[0]=="string"&&t[0].length){let o=t[0].replace(/(\')?([a-zA-Z0-9_]+)(\')?(\s)?:/g,'"$2":').replace(/:(\s)?(\')(.*?)(\')/g,':"$3"');try{r=JSON.parse(o)}catch{throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${t[0]}`)}}else typeof t[0]=="object"&&!Array.isArray(t[0])&&(r=t[0]);return this.lastKey=n,this.lastParams=t,this.updateValue(n,r),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(o=>{this.lastKey&&o.lang===this.translate.currentLang&&(this.lastKey=null,this.updateValue(n,r,o.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(o=>{this.lastKey&&(this.lastKey=null,this.updateValue(n,r,o.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(n,r))})),this.value}_dispose(){typeof this.onTranslationChange<"u"&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),typeof this.onLangChange<"u"&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),typeof this.onDefaultLangChange<"u"&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}ngOnDestroy(){this._dispose()}static \u0275fac=function(t){return new(t||i)(x(yn,16),x(Zt,16))};static \u0275pipe=dr({name:"translate",type:i,pure:!1});static \u0275prov=Y({token:i,factory:i.\u0275fac})}return i})(),Xx=(()=>{class i{static forRoot(n={}){return{ngModule:i,providers:[n.loader||{provide:To,useClass:Ux},n.compiler||{provide:Sa,useClass:Wx},n.parser||{provide:Ia,useClass:Hx},n.missingTranslationHandler||{provide:Qr,useClass:zx},lh,{provide:k_,useValue:n.isolate},{provide:N_,useValue:n.useDefaultLang},{provide:F_,useValue:n.extend},{provide:R_,useValue:n.defaultLanguage},yn]}}static forChild(n={}){return{ngModule:i,providers:[n.loader||{provide:To,useClass:Ux},n.compiler||{provide:Sa,useClass:Wx},n.parser||{provide:Ia,useClass:Hx},n.missingTranslationHandler||{provide:Qr,useClass:zx},{provide:k_,useValue:n.isolate},{provide:N_,useValue:n.useDefaultLang},{provide:F_,useValue:n.extend},{provide:R_,useValue:n.defaultLanguage},yn]}}static \u0275fac=function(t){return new(t||i)};static \u0275mod=Yt({type:i});static \u0275inj=qt({})}return i})();var qx=(()=>{let e=class e extends Nt{constructor(){super()}okClick(){this.requestClose.emit(!0)}cancelClick(){this.requestClose.emit(!1)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ie({type:e,selectors:[["app-unsaved-changes"]],features:[ke],decls:11,vars:9,consts:[[1,"unsaved-changes"],[1,"buttons"],[1,"btn-raised","danger",3,"click"],[1,"btn-raised","primary",3,"click"]],template:function(r,o){r&1&&(v(0,"div",0)(1,"p"),O(2),M(3,"translate"),y(),v(4,"div",1)(5,"button",2),T("click",function(){return o.okClick()}),O(6),M(7,"translate"),y(),v(8,"button",3),T("click",function(){return o.cancelClick()}),O(9),M(10,"translate"),y()()()),r&2&&(g(2),K(E(3,3,"POPUP.UNSAVED_CHANGES.QUESTION")),g(4),U(" ",E(7,5,"POPUP.UNSAVED_CHANGES.OK")," "),g(3),U(" ",E(10,7,"POPUP.UNSAVED_CHANGES.CANCEL")," "))},dependencies:[Pe],styles:[".unsaved-changes[_ngcontent-%COMP%]{margin:2rem 1.5rem}.unsaved-changes[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.unsaved-changes[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:.5rem}"],changeDetection:0});let i=e;return i})();var eM=po(Yx()),tM=po(Kx());window.Promise||(window.Promise=eM.Polyfill);Object.assign||(Object.assign=tM.default);var QR=16;Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()});window.performance&&window.performance.now||(Qx=Date.now(),window.performance||(window.performance={}),window.performance.now=function(){return Date.now()-Qx});var Qx,L_=Date.now(),Jx=["ms","moz","webkit","o"];for(ch=0;ch<Jx.length&&!window.requestAnimationFrame;++ch)uh=Jx[ch],window.requestAnimationFrame=window[uh+"RequestAnimationFrame"],window.cancelAnimationFrame=window[uh+"CancelAnimationFrame"]||window[uh+"CancelRequestAnimationFrame"];var uh,ch;window.requestAnimationFrame||(window.requestAnimationFrame=function(i){if(typeof i!="function")throw new TypeError(i+"is not a function");var e=Date.now(),n=QR+L_-e;return n<0&&(n=0),L_=e,window.setTimeout(function(){L_=Date.now(),i(performance.now())},n)});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(i){return clearTimeout(i)});Math.sign||(Math.sign=function(e){return e=Number(e),e===0||isNaN(e)?e:e>0?1:-1});Number.isInteger||(Number.isInteger=function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e});window.ArrayBuffer||(window.ArrayBuffer=Array);window.Float32Array||(window.Float32Array=Array);window.Uint32Array||(window.Uint32Array=Array);window.Uint16Array||(window.Uint16Array=Array);window.Uint8Array||(window.Uint8Array=Array);window.Int32Array||(window.Int32Array=Array);var j_=/iPhone/i,nM=/iPod/i,iM=/iPad/i,rM=/\biOS-universal(?:.+)Mac\b/i,B_=/\bAndroid(?:.+)Mobile\b/i,oM=/Android/i,Aa=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,dh=/Silk/i,Jr=/Windows Phone/i,sM=/\bWindows(?:.+)ARM\b/i,aM=/BlackBerry/i,lM=/BB10/i,cM=/Opera Mini/i,uM=/\b(CriOS|Chrome)(?:.+)Mobile/i,dM=/Mobile(?:.+)Firefox\b/i,hM=function(i){return typeof i<"u"&&i.platform==="MacIntel"&&typeof i.maxTouchPoints=="number"&&i.maxTouchPoints>1&&typeof MSStream>"u"};function JR(i){return function(e){return e.test(i)}}function hh(i){var e={userAgent:"",platform:"",maxTouchPoints:0};!i&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof i=="string"?e.userAgent=i:i&&i.userAgent&&(e={userAgent:i.userAgent,platform:i.platform,maxTouchPoints:i.maxTouchPoints||0});var n=e.userAgent,t=n.split("[FBAN");typeof t[1]<"u"&&(n=t[0]),t=n.split("Twitter"),typeof t[1]<"u"&&(n=t[0]);var r=JR(n),o={apple:{phone:r(j_)&&!r(Jr),ipod:r(nM),tablet:!r(j_)&&(r(iM)||hM(e))&&!r(Jr),universal:r(rM),device:(r(j_)||r(nM)||r(iM)||r(rM)||hM(e))&&!r(Jr)},amazon:{phone:r(Aa),tablet:!r(Aa)&&r(dh),device:r(Aa)||r(dh)},android:{phone:!r(Jr)&&r(Aa)||!r(Jr)&&r(B_),tablet:!r(Jr)&&!r(Aa)&&!r(B_)&&(r(dh)||r(oM)),device:!r(Jr)&&(r(Aa)||r(dh)||r(B_)||r(oM))||r(/\bokhttp\b/i)},windows:{phone:r(Jr),tablet:r(sM),device:r(Jr)||r(sM)},other:{blackberry:r(aM),blackberry10:r(lM),opera:r(cM),firefox:r(dM),chrome:r(uM),device:r(aM)||r(lM)||r(cM)||r(dM)||r(uM)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}var oi=hh(window.navigator);function eF(i){var e=!0;if(oi.tablet||oi.phone){if(oi.apple.device){var n=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(n){var t=parseInt(n[1],10);t<11&&(e=!1)}}if(oi.android.device){var n=navigator.userAgent.match(/Android\s([0-9.]*)/);if(n){var t=parseInt(n[1],10);t<7&&(e=!1)}}}return e?i:4}function tF(){return!oi.apple.device}var me={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:eF(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:oi.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:tF(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var no=po(fM()),xh=po(yM()),NM=po(Y_()),nv=po(Y_());var eo=function(i){return i[i.WEBGL_LEGACY=0]="WEBGL_LEGACY",i[i.WEBGL=1]="WEBGL",i[i.WEBGL2=2]="WEBGL2",i}(eo||{}),pc=function(i){return i[i.UNKNOWN=0]="UNKNOWN",i[i.WEBGL=1]="WEBGL",i[i.CANVAS=2]="CANVAS",i}(pc||{}),vh=function(i){return i[i.COLOR=16384]="COLOR",i[i.DEPTH=256]="DEPTH",i[i.STENCIL=1024]="STENCIL",i}(vh||{}),Oe=function(i){return i[i.NORMAL=0]="NORMAL",i[i.ADD=1]="ADD",i[i.MULTIPLY=2]="MULTIPLY",i[i.SCREEN=3]="SCREEN",i[i.OVERLAY=4]="OVERLAY",i[i.DARKEN=5]="DARKEN",i[i.LIGHTEN=6]="LIGHTEN",i[i.COLOR_DODGE=7]="COLOR_DODGE",i[i.COLOR_BURN=8]="COLOR_BURN",i[i.HARD_LIGHT=9]="HARD_LIGHT",i[i.SOFT_LIGHT=10]="SOFT_LIGHT",i[i.DIFFERENCE=11]="DIFFERENCE",i[i.EXCLUSION=12]="EXCLUSION",i[i.HUE=13]="HUE",i[i.SATURATION=14]="SATURATION",i[i.COLOR=15]="COLOR",i[i.LUMINOSITY=16]="LUMINOSITY",i[i.NORMAL_NPM=17]="NORMAL_NPM",i[i.ADD_NPM=18]="ADD_NPM",i[i.SCREEN_NPM=19]="SCREEN_NPM",i[i.NONE=20]="NONE",i[i.SRC_OVER=0]="SRC_OVER",i[i.SRC_IN=21]="SRC_IN",i[i.SRC_OUT=22]="SRC_OUT",i[i.SRC_ATOP=23]="SRC_ATOP",i[i.DST_OVER=24]="DST_OVER",i[i.DST_IN=25]="DST_IN",i[i.DST_OUT=26]="DST_OUT",i[i.DST_ATOP=27]="DST_ATOP",i[i.ERASE=26]="ERASE",i[i.SUBTRACT=28]="SUBTRACT",i[i.XOR=29]="XOR",i}(Oe||{}),si=function(i){return i[i.POINTS=0]="POINTS",i[i.LINES=1]="LINES",i[i.LINE_LOOP=2]="LINE_LOOP",i[i.LINE_STRIP=3]="LINE_STRIP",i[i.TRIANGLES=4]="TRIANGLES",i[i.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",i[i.TRIANGLE_FAN=6]="TRIANGLE_FAN",i}(si||{}),fc=function(i){return i[i.RGBA=6408]="RGBA",i[i.RGB=6407]="RGB",i[i.ALPHA=6406]="ALPHA",i[i.LUMINANCE=6409]="LUMINANCE",i[i.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",i[i.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",i[i.DEPTH_STENCIL=34041]="DEPTH_STENCIL",i}(fc||{}),xs=function(i){return i[i.TEXTURE_2D=3553]="TEXTURE_2D",i[i.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",i[i.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",i[i.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",i[i.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",i[i.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",i[i.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",i}(xs||{}),Jt=function(i){return i[i.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",i[i.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",i[i.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",i[i.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",i[i.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",i[i.FLOAT=5126]="FLOAT",i[i.HALF_FLOAT=36193]="HALF_FLOAT",i}(Jt||{}),to=function(i){return i[i.NEAREST=0]="NEAREST",i[i.LINEAR=1]="LINEAR",i}(to||{}),qi=function(i){return i[i.CLAMP=33071]="CLAMP",i[i.REPEAT=10497]="REPEAT",i[i.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",i}(qi||{}),mc=function(i){return i[i.OFF=0]="OFF",i[i.POW2=1]="POW2",i[i.ON=2]="ON",i}(mc||{}),Ao=function(i){return i[i.NPM=0]="NPM",i[i.UNPACK=1]="UNPACK",i[i.PMA=2]="PMA",i[i.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",i[i.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",i[i.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",i}(Ao||{}),_r=function(i){return i[i.NO=0]="NO",i[i.YES=1]="YES",i[i.AUTO=2]="AUTO",i[i.BLEND=0]="BLEND",i[i.CLEAR=1]="CLEAR",i[i.BLIT=2]="BLIT",i}(_r||{}),Z_=function(i){return i[i.AUTO=0]="AUTO",i[i.MANUAL=1]="MANUAL",i}(Z_||{}),vr=function(i){return i.LOW="lowp",i.MEDIUM="mediump",i.HIGH="highp",i}(vr||{}),ai=function(i){return i[i.NONE=0]="NONE",i[i.SCISSOR=1]="SCISSOR",i[i.STENCIL=2]="STENCIL",i[i.SPRITE=3]="SPRITE",i}(ai||{}),La=function(i){return i[i.NONE=0]="NONE",i[i.LOW=2]="LOW",i[i.MEDIUM=4]="MEDIUM",i[i.HIGH=8]="HIGH",i}(La||{});me.RETINA_PREFIX=/@([0-9\.]+)x/;me.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!0;var AM=!1,DM="5.3.12";function RM(i){var e;if(!AM){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var n=[`
 %c %c %c PixiJS `+DM+" - \u2730 "+i+` \u2730  %c  %c  http://www.pixijs.com/  %c %c \u2665%c\u2665%c\u2665 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(e=window.console).log.apply(e,n)}else window.console&&window.console.log("PixiJS "+DM+" - "+i+" - http://www.pixijs.com/");AM=!0}}var $_;function FM(){return typeof $_>"u"&&($_=function(){var e={stencil:!0,failIfMajorPerformanceCaveat:me.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!window.WebGLRenderingContext)return!1;var n=document.createElement("canvas"),t=n.getContext("webgl",e)||n.getContext("experimental-webgl",e),r=!!(t&&t.getContextAttributes().stencil);if(t){var o=t.getExtension("WEBGL_lose_context");o&&o.loseContext()}return t=null,r}catch{return!1}}()),$_}function Yi(i,e){return e===void 0&&(e=[]),e[0]=(i>>16&255)/255,e[1]=(i>>8&255)/255,e[2]=(i&255)/255,e}function Ch(i){var e=i.toString(16);return e="000000".substr(0,6-e.length)+e,"#"+e}function bh(i){return typeof i=="string"&&i[0]==="#"&&(i=i.substr(1)),parseInt(i,16)}function DF(){for(var i=[],e=[],n=0;n<32;n++)i[n]=n,e[n]=n;i[Oe.NORMAL_NPM]=Oe.NORMAL,i[Oe.ADD_NPM]=Oe.ADD,i[Oe.SCREEN_NPM]=Oe.SCREEN,e[Oe.NORMAL]=Oe.NORMAL_NPM,e[Oe.ADD]=Oe.ADD_NPM,e[Oe.SCREEN]=Oe.SCREEN_NPM;var t=[];return t.push(e),t.push(i),t}var K_=DF();function Ph(i,e){return K_[e?1:0][i]}function LM(i,e,n,t){return n=n||new Float32Array(4),t||t===void 0?(n[0]=i[0]*e,n[1]=i[1]*e,n[2]=i[2]*e):(n[0]=i[0],n[1]=i[1],n[2]=i[2]),n[3]=e,n}function ja(i,e){if(e===1)return(e*255<<24)+i;if(e===0)return 0;var n=i>>16&255,t=i>>8&255,r=i&255;return n=n*e+.5|0,t=t*e+.5|0,r=r*e+.5|0,(e*255<<24)+(n<<16)+(t<<8)+r}function wh(i,e,n,t){return n=n||new Float32Array(4),n[0]=(i>>16&255)/255,n[1]=(i>>8&255)/255,n[2]=(i&255)/255,(t||t===void 0)&&(n[0]*=e,n[1]*=e,n[2]*=e),n[3]=e,n}function jM(i,e){e===void 0&&(e=null);var n=i*6;if(e=e||new Uint16Array(n),e.length!==n)throw new Error("Out buffer length is incorrect, got "+e.length+" and expected "+n);for(var t=0,r=0;t<n;t+=6,r+=4)e[t+0]=r+0,e[t+1]=r+1,e[t+2]=r+2,e[t+3]=r+0,e[t+4]=r+2,e[t+5]=r+3;return e}function gc(i){return i+=i===0?1:0,--i,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i+1}function Q_(i){return!(i&i-1)&&!!i}function J_(i){var e=(i>65535?1:0)<<4;i>>>=e;var n=(i>255?1:0)<<3;return i>>>=n,e|=n,n=(i>15?1:0)<<2,i>>>=n,e|=n,n=(i>3?1:0)<<1,i>>>=n,e|=n,e|i>>1}function yr(i,e,n){var t=i.length,r;if(!(e>=t||n===0)){n=e+n>t?t-e:n;var o=t-n;for(r=e;r<o;++r)i[r]=i[r+n];i.length=o}}function Do(i){return i===0?0:i<0?-1:1}var kF=0;function ko(){return++kF}var kM={};function li(i,e,n){if(n===void 0&&(n=3),!kM[e]){var t=new Error().stack;typeof t>"u"?console.warn("PixiJS Deprecation Warning: ",e+`
Deprecated since v`+i):(t=t.split(`
`).splice(n).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+`
Deprecated since v`+i),console.warn(t),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+`
Deprecated since v`+i),console.warn(t))),kM[e]=!0}}var ev={},Cr=Object.create(null),No=Object.create(null);var tv=function(){function i(e,n,t){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=t||me.RESOLUTION,this.resize(e,n)}return i.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},i.prototype.resize=function(e,n){this.canvas.width=e*this.resolution,this.canvas.height=n*this.resolution},i.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(i.prototype,"width",{get:function(){return this.canvas.width},set:function(e){this.canvas.width=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this.canvas.height},set:function(e){this.canvas.height=e},enumerable:!1,configurable:!0}),i}();function BM(i){var e=i.width,n=i.height,t=i.getContext("2d"),r=t.getImageData(0,0,e,n),o=r.data,s=o.length,a={top:null,left:null,right:null,bottom:null},l=null,c,u,d;for(c=0;c<s;c+=4)o[c+3]!==0&&(u=c/4%e,d=~~(c/4/e),a.top===null&&(a.top=d),(a.left===null||u<a.left)&&(a.left=u),(a.right===null||a.right<u)&&(a.right=u+1),(a.bottom===null||a.bottom<d)&&(a.bottom=d));return a.top!==null&&(e=a.right-a.left,n=a.bottom-a.top+1,l=t.getImageData(a.left,a.top,e,n)),{height:n,width:e,data:l}}var yh;function VM(i,e){if(e===void 0&&(e=window.location),i.indexOf("data:")===0)return"";e=e||window.location,yh||(yh=document.createElement("a")),yh.href=i;var n=(0,NM.parse)(yh.href),t=!n.port&&e.port===""||n.port===e.port;return n.hostname!==e.hostname||!t||n.protocol!==e.protocol?"anonymous":""}function Ms(i,e){var n=me.RETINA_PREFIX.exec(i);return n?parseFloat(n[1]):e!==void 0?e:1}var Ba=Math.PI*2,UM=180/Math.PI,zM=Math.PI/180,en=function(i){return i[i.POLY=0]="POLY",i[i.RECT=1]="RECT",i[i.CIRC=2]="CIRC",i[i.ELIP=3]="ELIP",i[i.RREC=4]="RREC",i}(en||{}),ze=function(){function i(e,n,t,r){e===void 0&&(e=0),n===void 0&&(n=0),t===void 0&&(t=0),r===void 0&&(r=0),this.x=Number(e),this.y=Number(n),this.width=Number(t),this.height=Number(r),this.type=en.RECT}return Object.defineProperty(i.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(i,"EMPTY",{get:function(){return new i(0,0,0,0)},enumerable:!1,configurable:!0}),i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height)},i.prototype.copyFrom=function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this},i.prototype.copyTo=function(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e},i.prototype.contains=function(e,n){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&n>=this.y&&n<this.y+this.height},i.prototype.pad=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=e),this.x-=e,this.y-=n,this.width+=e*2,this.height+=n*2,this},i.prototype.fit=function(e){var n=Math.max(this.x,e.x),t=Math.min(this.x+this.width,e.x+e.width),r=Math.max(this.y,e.y),o=Math.min(this.y+this.height,e.y+e.height);return this.x=n,this.width=Math.max(t-n,0),this.y=r,this.height=Math.max(o-r,0),this},i.prototype.ceil=function(e,n){e===void 0&&(e=1),n===void 0&&(n=.001);var t=Math.ceil((this.x+this.width-n)*e)/e,r=Math.ceil((this.y+this.height-n)*e)/e;return this.x=Math.floor((this.x+n)*e)/e,this.y=Math.floor((this.y+n)*e)/e,this.width=t-this.x,this.height=r-this.y,this},i.prototype.enlarge=function(e){var n=Math.min(this.x,e.x),t=Math.max(this.x+this.width,e.x+e.width),r=Math.min(this.y,e.y),o=Math.max(this.y+this.height,e.y+e.height);return this.x=n,this.width=t-n,this.y=r,this.height=o-r,this},i}(),HM=function(){function i(e,n,t){e===void 0&&(e=0),n===void 0&&(n=0),t===void 0&&(t=0),this.x=e,this.y=n,this.radius=t,this.type=en.CIRC}return i.prototype.clone=function(){return new i(this.x,this.y,this.radius)},i.prototype.contains=function(e,n){if(this.radius<=0)return!1;var t=this.radius*this.radius,r=this.x-e,o=this.y-n;return r*=r,o*=o,r+o<=t},i.prototype.getBounds=function(){return new ze(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)},i}(),WM=function(){function i(e,n,t,r){e===void 0&&(e=0),n===void 0&&(n=0),t===void 0&&(t=0),r===void 0&&(r=0),this.x=e,this.y=n,this.width=t,this.height=r,this.type=en.ELIP}return i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height)},i.prototype.contains=function(e,n){if(this.width<=0||this.height<=0)return!1;var t=(e-this.x)/this.width,r=(n-this.y)/this.height;return t*=t,r*=r,t+r<=1},i.prototype.getBounds=function(){return new ze(this.x-this.width,this.y-this.height,this.width,this.height)},i}(),Ft=function(){function i(){for(var e=arguments,n=[],t=0;t<arguments.length;t++)n[t]=e[t];var r=Array.isArray(n[0])?n[0]:n;if(typeof r[0]!="number"){for(var o=[],s=0,a=r.length;s<a;s++)o.push(r[s].x,r[s].y);r=o}this.points=r,this.type=en.POLY,this.closeStroke=!0}return i.prototype.clone=function(){var e=this.points.slice(),n=new i(e);return n.closeStroke=this.closeStroke,n},i.prototype.contains=function(e,n){for(var t=!1,r=this.points.length/2,o=0,s=r-1;o<r;s=o++){var a=this.points[o*2],l=this.points[o*2+1],c=this.points[s*2],u=this.points[s*2+1],d=l>n!=u>n&&e<(c-a)*((n-l)/(u-l))+a;d&&(t=!t)}return t},i}(),GM=function(){function i(e,n,t,r,o){e===void 0&&(e=0),n===void 0&&(n=0),t===void 0&&(t=0),r===void 0&&(r=0),o===void 0&&(o=20),this.x=e,this.y=n,this.width=t,this.height=r,this.radius=o,this.type=en.RREC}return i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.radius)},i.prototype.contains=function(e,n){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&n>=this.y&&n<=this.y+this.height){if(n>=this.y+this.radius&&n<=this.y+this.height-this.radius||e>=this.x+this.radius&&e<=this.x+this.width-this.radius)return!0;var t=e-(this.x+this.radius),r=n-(this.y+this.radius),o=this.radius*this.radius;if(t*t+r*r<=o||(t=e-(this.x+this.width-this.radius),t*t+r*r<=o)||(r=n-(this.y+this.height-this.radius),t*t+r*r<=o)||(t=e-(this.x+this.radius),t*t+r*r<=o))return!0}return!1},i}(),R=function(){function i(e,n){e===void 0&&(e=0),n===void 0&&(n=0),this.x=e,this.y=n}return i.prototype.clone=function(){return new i(this.x,this.y)},i.prototype.copyFrom=function(e){return this.set(e.x,e.y),this},i.prototype.copyTo=function(e){return e.set(this.x,this.y),e},i.prototype.equals=function(e){return e.x===this.x&&e.y===this.y},i.prototype.set=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=e),this.x=e,this.y=n,this},i}(),Ro=function(){function i(e,n,t,r){t===void 0&&(t=0),r===void 0&&(r=0),this._x=t,this._y=r,this.cb=e,this.scope=n}return i.prototype.clone=function(e,n){return e===void 0&&(e=this.cb),n===void 0&&(n=this.scope),new i(e,n,this._x,this._y)},i.prototype.set=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=e),(this._x!==e||this._y!==n)&&(this._x=e,this._y=n,this.cb.call(this.scope)),this},i.prototype.copyFrom=function(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this},i.prototype.copyTo=function(e){return e.set(this._x,this._y),e},i.prototype.equals=function(e){return e.x===this._x&&e.y===this._y},Object.defineProperty(i.prototype,"x",{get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"y",{get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),i}(),Rt=function(){function i(e,n,t,r,o,s){e===void 0&&(e=1),n===void 0&&(n=0),t===void 0&&(t=0),r===void 0&&(r=1),o===void 0&&(o=0),s===void 0&&(s=0),this.array=null,this.a=e,this.b=n,this.c=t,this.d=r,this.tx=o,this.ty=s}return i.prototype.fromArray=function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]},i.prototype.set=function(e,n,t,r,o,s){return this.a=e,this.b=n,this.c=t,this.d=r,this.tx=o,this.ty=s,this},i.prototype.toArray=function(e,n){this.array||(this.array=new Float32Array(9));var t=n||this.array;return e?(t[0]=this.a,t[1]=this.b,t[2]=0,t[3]=this.c,t[4]=this.d,t[5]=0,t[6]=this.tx,t[7]=this.ty,t[8]=1):(t[0]=this.a,t[1]=this.c,t[2]=this.tx,t[3]=this.b,t[4]=this.d,t[5]=this.ty,t[6]=0,t[7]=0,t[8]=1),t},i.prototype.apply=function(e,n){n=n||new R;var t=e.x,r=e.y;return n.x=this.a*t+this.c*r+this.tx,n.y=this.b*t+this.d*r+this.ty,n},i.prototype.applyInverse=function(e,n){n=n||new R;var t=1/(this.a*this.d+this.c*-this.b),r=e.x,o=e.y;return n.x=this.d*t*r+-this.c*t*o+(this.ty*this.c-this.tx*this.d)*t,n.y=this.a*t*o+-this.b*t*r+(-this.ty*this.a+this.tx*this.b)*t,n},i.prototype.translate=function(e,n){return this.tx+=e,this.ty+=n,this},i.prototype.scale=function(e,n){return this.a*=e,this.d*=n,this.c*=e,this.b*=n,this.tx*=e,this.ty*=n,this},i.prototype.rotate=function(e){var n=Math.cos(e),t=Math.sin(e),r=this.a,o=this.c,s=this.tx;return this.a=r*n-this.b*t,this.b=r*t+this.b*n,this.c=o*n-this.d*t,this.d=o*t+this.d*n,this.tx=s*n-this.ty*t,this.ty=s*t+this.ty*n,this},i.prototype.append=function(e){var n=this.a,t=this.b,r=this.c,o=this.d;return this.a=e.a*n+e.b*r,this.b=e.a*t+e.b*o,this.c=e.c*n+e.d*r,this.d=e.c*t+e.d*o,this.tx=e.tx*n+e.ty*r+this.tx,this.ty=e.tx*t+e.ty*o+this.ty,this},i.prototype.setTransform=function(e,n,t,r,o,s,a,l,c){return this.a=Math.cos(a+c)*o,this.b=Math.sin(a+c)*o,this.c=-Math.sin(a-l)*s,this.d=Math.cos(a-l)*s,this.tx=e-(t*this.a+r*this.c),this.ty=n-(t*this.b+r*this.d),this},i.prototype.prepend=function(e){var n=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){var t=this.a,r=this.c;this.a=t*e.a+this.b*e.c,this.b=t*e.b+this.b*e.d,this.c=r*e.a+this.d*e.c,this.d=r*e.b+this.d*e.d}return this.tx=n*e.a+this.ty*e.c+e.tx,this.ty=n*e.b+this.ty*e.d+e.ty,this},i.prototype.decompose=function(e){var n=this.a,t=this.b,r=this.c,o=this.d,s=-Math.atan2(-r,o),a=Math.atan2(t,n),l=Math.abs(s+a);return l<1e-5||Math.abs(Ba-l)<1e-5?(e.rotation=a,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=s,e.skew.y=a),e.scale.x=Math.sqrt(n*n+t*t),e.scale.y=Math.sqrt(r*r+o*o),e.position.x=this.tx,e.position.y=this.ty,e},i.prototype.invert=function(){var e=this.a,n=this.b,t=this.c,r=this.d,o=this.tx,s=e*r-n*t;return this.a=r/s,this.b=-n/s,this.c=-t/s,this.d=e/s,this.tx=(t*this.ty-r*o)/s,this.ty=-(e*this.ty-n*o)/s,this},i.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},i.prototype.clone=function(){var e=new i;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},i.prototype.copyTo=function(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},i.prototype.copyFrom=function(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this},Object.defineProperty(i,"IDENTITY",{get:function(){return new i},enumerable:!1,configurable:!0}),Object.defineProperty(i,"TEMP_MATRIX",{get:function(){return new i},enumerable:!1,configurable:!0}),i}(),Os=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Es=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Is=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Ss=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],iv=[],XM=[],Mh=Math.sign;function RF(){for(var i=0;i<16;i++){var e=[];iv.push(e);for(var n=0;n<16;n++)for(var t=Mh(Os[i]*Os[n]+Is[i]*Es[n]),r=Mh(Es[i]*Os[n]+Ss[i]*Es[n]),o=Mh(Os[i]*Is[n]+Is[i]*Ss[n]),s=Mh(Es[i]*Is[n]+Ss[i]*Ss[n]),a=0;a<16;a++)if(Os[a]===t&&Es[a]===r&&Is[a]===o&&Ss[a]===s){e.push(a);break}}for(var i=0;i<16;i++){var l=new Rt;l.set(Os[i],Es[i],Is[i],Ss[i],0,0),XM.push(l)}}RF();var Vt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(i){return Os[i]},uY:function(i){return Es[i]},vX:function(i){return Is[i]},vY:function(i){return Ss[i]},inv:function(i){return i&8?i&15:-i&7},add:function(i,e){return iv[i][e]},sub:function(i,e){return iv[i][Vt.inv(e)]},rotate180:function(i){return i^4},isVertical:function(i){return(i&3)===2},byDirection:function(i,e){return Math.abs(i)*2<=Math.abs(e)?e>=0?Vt.S:Vt.N:Math.abs(e)*2<=Math.abs(i)?i>0?Vt.E:Vt.W:e>0?i>0?Vt.SE:Vt.SW:i>0?Vt.NE:Vt.NW},matrixAppendRotationInv:function(i,e,n,t){n===void 0&&(n=0),t===void 0&&(t=0);var r=XM[Vt.inv(e)];r.tx=n,r.ty=t,i.append(r)}},Oh=function(){function i(){this.worldTransform=new Rt,this.localTransform=new Rt,this.position=new Ro(this.onChange,this,0,0),this.scale=new Ro(this.onChange,this,1,1),this.pivot=new Ro(this.onChange,this,0,0),this.skew=new Ro(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return i.prototype.onChange=function(){this._localID++},i.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},i.prototype.updateLocalTransform=function(){var e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)},i.prototype.updateTransform=function(e){var n=this.localTransform;if(this._localID!==this._currentLocalID&&(n.a=this._cx*this.scale.x,n.b=this._sx*this.scale.x,n.c=this._cy*this.scale.y,n.d=this._sy*this.scale.y,n.tx=this.position.x-(this.pivot.x*n.a+this.pivot.y*n.c),n.ty=this.position.y-(this.pivot.x*n.b+this.pivot.y*n.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){var t=e.worldTransform,r=this.worldTransform;r.a=n.a*t.a+n.b*t.c,r.b=n.a*t.b+n.b*t.d,r.c=n.c*t.a+n.d*t.c,r.d=n.c*t.b+n.d*t.d,r.tx=n.tx*t.a+n.ty*t.c+t.tx,r.ty=n.tx*t.b+n.ty*t.d+t.ty,this._parentID=e._worldID,this._worldID++}},i.prototype.setFromMatrix=function(e){e.decompose(this),this._localID++},Object.defineProperty(i.prototype,"rotation",{get:function(){return this._rotation},set:function(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())},enumerable:!1,configurable:!0}),i.IDENTITY=new i,i}();me.SORTABLE_CHILDREN=!1;var Ts=function(){function i(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return i.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},i.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},i.prototype.getRectangle=function(e){return this.minX>this.maxX||this.minY>this.maxY?ze.EMPTY:(e=e||new ze(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)},i.prototype.addPoint=function(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)},i.prototype.addQuad=function(e){var n=this.minX,t=this.minY,r=this.maxX,o=this.maxY,s=e[0],a=e[1];n=s<n?s:n,t=a<t?a:t,r=s>r?s:r,o=a>o?a:o,s=e[2],a=e[3],n=s<n?s:n,t=a<t?a:t,r=s>r?s:r,o=a>o?a:o,s=e[4],a=e[5],n=s<n?s:n,t=a<t?a:t,r=s>r?s:r,o=a>o?a:o,s=e[6],a=e[7],n=s<n?s:n,t=a<t?a:t,r=s>r?s:r,o=a>o?a:o,this.minX=n,this.minY=t,this.maxX=r,this.maxY=o},i.prototype.addFrame=function(e,n,t,r,o){this.addFrameMatrix(e.worldTransform,n,t,r,o)},i.prototype.addFrameMatrix=function(e,n,t,r,o){var s=e.a,a=e.b,l=e.c,c=e.d,u=e.tx,d=e.ty,h=this.minX,p=this.minY,f=this.maxX,m=this.maxY,_=s*n+l*t+u,P=a*n+c*t+d;h=_<h?_:h,p=P<p?P:p,f=_>f?_:f,m=P>m?P:m,_=s*r+l*t+u,P=a*r+c*t+d,h=_<h?_:h,p=P<p?P:p,f=_>f?_:f,m=P>m?P:m,_=s*n+l*o+u,P=a*n+c*o+d,h=_<h?_:h,p=P<p?P:p,f=_>f?_:f,m=P>m?P:m,_=s*r+l*o+u,P=a*r+c*o+d,h=_<h?_:h,p=P<p?P:p,f=_>f?_:f,m=P>m?P:m,this.minX=h,this.minY=p,this.maxX=f,this.maxY=m},i.prototype.addVertexData=function(e,n,t){for(var r=this.minX,o=this.minY,s=this.maxX,a=this.maxY,l=n;l<t;l+=2){var c=e[l],u=e[l+1];r=c<r?c:r,o=u<o?u:o,s=c>s?c:s,a=u>a?u:a}this.minX=r,this.minY=o,this.maxX=s,this.maxY=a},i.prototype.addVertices=function(e,n,t,r){this.addVerticesMatrix(e.worldTransform,n,t,r)},i.prototype.addVerticesMatrix=function(e,n,t,r,o,s){o===void 0&&(o=0),s===void 0&&(s=o);for(var a=e.a,l=e.b,c=e.c,u=e.d,d=e.tx,h=e.ty,p=this.minX,f=this.minY,m=this.maxX,_=this.maxY,P=t;P<r;P+=2){var I=n[P],b=n[P+1],S=a*I+c*b+d,k=u*b+l*I+h;p=Math.min(p,S-o),m=Math.max(m,S+o),f=Math.min(f,k-s),_=Math.max(_,k+s)}this.minX=p,this.minY=f,this.maxX=m,this.maxY=_},i.prototype.addBounds=function(e){var n=this.minX,t=this.minY,r=this.maxX,o=this.maxY;this.minX=e.minX<n?e.minX:n,this.minY=e.minY<t?e.minY:t,this.maxX=e.maxX>r?e.maxX:r,this.maxY=e.maxY>o?e.maxY:o},i.prototype.addBoundsMask=function(e,n){var t=e.minX>n.minX?e.minX:n.minX,r=e.minY>n.minY?e.minY:n.minY,o=e.maxX<n.maxX?e.maxX:n.maxX,s=e.maxY<n.maxY?e.maxY:n.maxY;if(t<=o&&r<=s){var a=this.minX,l=this.minY,c=this.maxX,u=this.maxY;this.minX=t<a?t:a,this.minY=r<l?r:l,this.maxX=o>c?o:c,this.maxY=s>u?s:u}},i.prototype.addBoundsMatrix=function(e,n){this.addFrameMatrix(n,e.minX,e.minY,e.maxX,e.maxY)},i.prototype.addBoundsArea=function(e,n){var t=e.minX>n.x?e.minX:n.x,r=e.minY>n.y?e.minY:n.y,o=e.maxX<n.x+n.width?e.maxX:n.x+n.width,s=e.maxY<n.y+n.height?e.maxY:n.y+n.height;if(t<=o&&r<=s){var a=this.minX,l=this.minY,c=this.maxX,u=this.maxY;this.minX=t<a?t:a,this.minY=r<l?r:l,this.maxX=o>c?o:c,this.maxY=s>u?s:u}},i.prototype.pad=function(e,n){e===void 0&&(e=0),n===void 0&&(n=e),this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=n,this.maxY+=n)},i.prototype.addFramePad=function(e,n,t,r,o,s){e-=o,n-=s,t+=o,r+=s,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>t?this.maxX:t,this.minY=this.minY<n?this.minY:n,this.maxY=this.maxY>r?this.maxY:r},i}();var rv=function(i,e){return rv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r])},rv(i,e)};function ov(i,e){rv(i,e);function n(){this.constructor=i}i.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Ut=function(i){ov(e,i);function e(){var n=i.call(this)||this;return n.tempDisplayObjectParent=null,n.transform=new Oh,n.alpha=1,n.visible=!0,n.renderable=!0,n.parent=null,n.worldAlpha=1,n._lastSortedIndex=0,n._zIndex=0,n.filterArea=null,n.filters=null,n._enabledFilters=null,n._bounds=new Ts,n._localBounds=null,n._boundsID=0,n._boundsRect=null,n._localBoundsRect=null,n._mask=null,n._destroyed=!1,n.isSprite=!1,n.isMask=!1,n}return e.mixin=function(n){for(var t=Object.keys(n),r=0;r<t.length;++r){var o=t[r];Object.defineProperty(e.prototype,o,Object.getOwnPropertyDescriptor(n,o))}},e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.prototype.getBounds=function(n,t){return n||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),t||(this._boundsRect||(this._boundsRect=new ze),t=this._boundsRect),this._bounds.getRectangle(t)},e.prototype.getLocalBounds=function(n){n||(this._localBoundsRect||(this._localBoundsRect=new ze),n=this._localBoundsRect),this._localBounds||(this._localBounds=new Ts);var t=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var o=this._bounds,s=this._boundsID;this._bounds=this._localBounds;var a=this.getBounds(!1,n);return this.parent=r,this.transform=t,this._bounds=o,this._bounds.updateID+=this._boundsID-s,a},e.prototype.toGlobal=function(n,t,r){return r===void 0&&(r=!1),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(n,t)},e.prototype.toLocal=function(n,t,r,o){return t&&(n=t.toGlobal(n,r,o)),o||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(n,r)},e.prototype.setParent=function(n){if(!n||!n.addChild)throw new Error("setParent: Argument must be a Container");return n.addChild(this),n},e.prototype.setTransform=function(n,t,r,o,s,a,l,c,u){return n===void 0&&(n=0),t===void 0&&(t=0),r===void 0&&(r=1),o===void 0&&(o=1),s===void 0&&(s=0),a===void 0&&(a=0),l===void 0&&(l=0),c===void 0&&(c=0),u===void 0&&(u=0),this.position.x=n,this.position.y=t,this.scale.x=r||1,this.scale.y=o||1,this.rotation=s,this.skew.x=a,this.skew.y=l,this.pivot.x=c,this.pivot.y=u,this},e.prototype.destroy=function(n){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(e.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new sv),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),e.prototype.enableTempParent=function(){var n=this.parent;return this.parent=this._tempDisplayObjectParent,n},e.prototype.disableTempParent=function(n){this.parent=n},Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(n){this.transform.position.x=n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(n){this.transform.position.y=n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transform.position},set:function(n){this.transform.position.copyFrom(n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.transform.scale},set:function(n){this.transform.scale.copyFrom(n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(n){this.transform.pivot.copyFrom(n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skew",{get:function(){return this.transform.skew},set:function(n){this.transform.skew.copyFrom(n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(n){this.transform.rotation=n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.transform.rotation*UM},set:function(n){this.transform.rotation=n*zM},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(n){this._zIndex=n,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldVisible",{get:function(){var n=this;do{if(!n.visible)return!1;n=n.parent}while(n);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(n){if(this._mask){var t=this._mask.maskObject||this._mask;t.renderable=!0,t.isMask=!1}if(this._mask=n,this._mask){var t=this._mask.maskObject||this._mask;t.renderable=!1,t.isMask=!0}},enumerable:!1,configurable:!0}),e}(no.default),sv=function(i){ov(e,i);function e(){var n=i!==null&&i.apply(this,arguments)||this;return n.sortDirty=null,n}return e}(Ut);Ut.prototype.displayObjectUpdateTransform=Ut.prototype.updateTransform;function FF(i,e){return i.zIndex===e.zIndex?i._lastSortedIndex-e._lastSortedIndex:i.zIndex-e.zIndex}var At=function(i){ov(e,i);function e(){var n=i.call(this)||this;return n.children=[],n.sortableChildren=me.SORTABLE_CHILDREN,n.sortDirty=!1,n}return e.prototype.onChildrenChange=function(n){},e.prototype.addChild=function(){for(var n=arguments,t=[],r=0;r<arguments.length;r++)t[r]=n[r];if(t.length>1)for(var o=0;o<t.length;o++)this.addChild(t[o]);else{var s=t[0];s.parent&&s.parent.removeChild(s),s.parent=this,this.sortDirty=!0,s.transform._parentID=-1,this.children.push(s),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",s,this,this.children.length-1),s.emit("added",this)}return t[0]},e.prototype.addChildAt=function(n,t){if(t<0||t>this.children.length)throw new Error(n+"addChildAt: The index "+t+" supplied is out of bounds "+this.children.length);return n.parent&&n.parent.removeChild(n),n.parent=this,this.sortDirty=!0,n.transform._parentID=-1,this.children.splice(t,0,n),this._boundsID++,this.onChildrenChange(t),n.emit("added",this),this.emit("childAdded",n,this,t),n},e.prototype.swapChildren=function(n,t){if(n!==t){var r=this.getChildIndex(n),o=this.getChildIndex(t);this.children[r]=t,this.children[o]=n,this.onChildrenChange(r<o?r:o)}},e.prototype.getChildIndex=function(n){var t=this.children.indexOf(n);if(t===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return t},e.prototype.setChildIndex=function(n,t){if(t<0||t>=this.children.length)throw new Error("The index "+t+" supplied is out of bounds "+this.children.length);var r=this.getChildIndex(n);yr(this.children,r,1),this.children.splice(t,0,n),this.onChildrenChange(t)},e.prototype.getChildAt=function(n){if(n<0||n>=this.children.length)throw new Error("getChildAt: Index ("+n+") does not exist.");return this.children[n]},e.prototype.removeChild=function(){for(var n=arguments,t=[],r=0;r<arguments.length;r++)t[r]=n[r];if(t.length>1)for(var o=0;o<t.length;o++)this.removeChild(t[o]);else{var s=t[0],a=this.children.indexOf(s);if(a===-1)return null;s.parent=null,s.transform._parentID=-1,yr(this.children,a,1),this._boundsID++,this.onChildrenChange(a),s.emit("removed",this),this.emit("childRemoved",s,this,a)}return t[0]},e.prototype.removeChildAt=function(n){var t=this.getChildAt(n);return t.parent=null,t.transform._parentID=-1,yr(this.children,n,1),this._boundsID++,this.onChildrenChange(n),t.emit("removed",this),this.emit("childRemoved",t,this,n),t},e.prototype.removeChildren=function(n,t){n===void 0&&(n=0),t===void 0&&(t=this.children.length);var r=n,o=t,s=o-r,a;if(s>0&&s<=o){a=this.children.splice(r,s);for(var l=0;l<a.length;++l)a[l].parent=null,a[l].transform&&(a[l].transform._parentID=-1);this._boundsID++,this.onChildrenChange(n);for(var l=0;l<a.length;++l)a[l].emit("removed",this),this.emit("childRemoved",a[l],this,l);return a}else if(s===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var n=!1,t=0,r=this.children.length;t<r;++t){var o=this.children[t];o._lastSortedIndex=t,!n&&o.zIndex!==0&&(n=!0)}n&&this.children.length>1&&this.children.sort(FF),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var n=0,t=this.children.length;n<t;++n){var r=this.children[n];r.visible&&r.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var n=0;n<this.children.length;n++){var t=this.children[n];if(!(!t.visible||!t.renderable))if(t.calculateBounds(),t._mask){var r=t._mask.maskObject||t._mask;r.calculateBounds(),this._bounds.addBoundsMask(t._bounds,r._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID},e.prototype.getLocalBounds=function(n,t){t===void 0&&(t=!1);var r=i.prototype.getLocalBounds.call(this,n);if(!t)for(var o=0,s=this.children.length;o<s;++o){var a=this.children[o];a.visible&&a.updateTransform()}return r},e.prototype._calculateBounds=function(){},e.prototype.render=function(n){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(n);else{this._render(n);for(var t=0,r=this.children.length;t<r;++t)this.children[t].render(n)}},e.prototype.renderAdvanced=function(n){n.batch.flush();var t=this.filters,r=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var o=0;o<t.length;o++)t[o].enabled&&this._enabledFilters.push(t[o]);this._enabledFilters.length&&n.filter.push(this,this._enabledFilters)}r&&n.mask.push(this,this._mask),this._render(n);for(var o=0,s=this.children.length;o<s;o++)this.children[o].render(n);n.batch.flush(),r&&n.mask.pop(this),t&&this._enabledFilters&&this._enabledFilters.length&&n.filter.pop()},e.prototype._render=function(n){},e.prototype.destroy=function(n){i.prototype.destroy.call(this),this.sortDirty=!1;var t=typeof n=="boolean"?n:n&&n.children,r=this.removeChildren(0,this.children.length);if(t)for(var o=0;o<r.length;++o)r[o].destroy(n)},Object.defineProperty(e.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(n){var t=this.getLocalBounds().width;t!==0?this.scale.x=n/t:this.scale.x=1,this._width=n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(n){var t=this.getLocalBounds().height;t!==0?this.scale.y=n/t:this.scale.y=1,this._height=n},enumerable:!1,configurable:!0}),e}(Ut);At.prototype.containerUpdateTransform=At.prototype.updateTransform;var LF={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};Ut.mixin(LF);var jF=9,Eh=100,BF=0,VF=0,qM=2,YM=1,UF=-1e3,zF=-1e3,HF=2,ZM=function(){function i(e){this._hookDiv=null,(oi.tablet||oi.phone)&&this.createTouchHook();var n=document.createElement("div");n.style.width=Eh+"px",n.style.height=Eh+"px",n.style.position="absolute",n.style.top=BF+"px",n.style.left=VF+"px",n.style.zIndex=qM.toString(),this.div=n,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=e,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._isActive=!1,this._isMobileAccessibility=!1,this.androidUpdateCount=0,this.androidUpdateFrequency=500,window.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(i.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),i.prototype.createTouchHook=function(){var e=this,n=document.createElement("button");n.style.width=YM+"px",n.style.height=YM+"px",n.style.position="absolute",n.style.top=UF+"px",n.style.left=zF+"px",n.style.zIndex=HF.toString(),n.style.backgroundColor="#FF0000",n.title="select to enable accessability for this content",n.addEventListener("focus",function(){e._isMobileAccessibility=!0,e.activate(),e.destroyTouchHook()}),document.body.appendChild(n),this._hookDiv=n},i.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},i.prototype.activate=function(){this._isActive||(this._isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},i.prototype.deactivate=function(){!this._isActive||this._isMobileAccessibility||(this._isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},i.prototype.updateAccessibleObjects=function(e){if(!(!e.visible||!e.accessibleChildren)){e.accessible&&e.interactive&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);for(var n=e.children,t=0;t<n.length;t++)this.updateAccessibleObjects(n[t])}},i.prototype.update=function(){var e=performance.now();if(!(oi.android.device&&e<this.androidUpdateCount)&&(this.androidUpdateCount=e+this.androidUpdateFrequency,!!this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var n=this.renderer.view.getBoundingClientRect(),t=this.renderer.resolution,r=n.width/this.renderer.width*t,o=n.height/this.renderer.height*t,s=this.div;s.style.left=n.left+"px",s.style.top=n.top+"px",s.style.width=this.renderer.width+"px",s.style.height=this.renderer.height+"px";for(var a=0;a<this.children.length;a++){var l=this.children[a];if(l.renderId!==this.renderId)l._accessibleActive=!1,yr(this.children,a,1),this.div.removeChild(l._accessibleDiv),this.pool.push(l._accessibleDiv),l._accessibleDiv=null,a--;else{s=l._accessibleDiv;var c=l.hitArea,u=l.worldTransform;l.hitArea?(s.style.left=(u.tx+c.x*u.a)*r+"px",s.style.top=(u.ty+c.y*u.d)*o+"px",s.style.width=c.width*u.a*r+"px",s.style.height=c.height*u.d*o+"px"):(c=l.getBounds(),this.capHitArea(c),s.style.left=c.x*r+"px",s.style.top=c.y*o+"px",s.style.width=c.width*r+"px",s.style.height=c.height*o+"px",s.title!==l.accessibleTitle&&l.accessibleTitle!==null&&(s.title=l.accessibleTitle),s.getAttribute("aria-label")!==l.accessibleHint&&l.accessibleHint!==null&&s.setAttribute("aria-label",l.accessibleHint)),(l.accessibleTitle!==s.title||l.tabIndex!==s.tabIndex)&&(s.title=l.accessibleTitle,s.tabIndex=l.tabIndex,this.debug&&this.updateDebugHTML(s))}}this.renderId++}},i.prototype.updateDebugHTML=function(e){e.innerHTML="type: "+e.type+"</br> title : "+e.title+"</br> tabIndex: "+e.tabIndex},i.prototype.capHitArea=function(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0),e.x+e.width>this.renderer.width&&(e.width=this.renderer.width-e.x),e.y+e.height>this.renderer.height&&(e.height=this.renderer.height-e.y)},i.prototype.addChild=function(e){var n=this.pool.pop();n||(n=document.createElement("button"),n.style.width=Eh+"px",n.style.height=Eh+"px",n.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",n.style.position="absolute",n.style.zIndex=qM.toString(),n.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?n.setAttribute("aria-live","off"):n.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?n.setAttribute("aria-relevant","additions"):n.setAttribute("aria-relevant","text"),n.addEventListener("click",this._onClick.bind(this)),n.addEventListener("focus",this._onFocus.bind(this)),n.addEventListener("focusout",this._onFocusOut.bind(this))),n.style.pointerEvents=e.accessiblePointerEvents,n.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?n.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(n.title="displayObject "+e.tabIndex),e.accessibleHint&&e.accessibleHint!==null&&n.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(n),e._accessibleActive=!0,e._accessibleDiv=n,n.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex},i.prototype._onClick=function(e){var n=this.renderer.plugins.interaction;n.dispatchEvent(e.target.displayObject,"click",n.eventData),n.dispatchEvent(e.target.displayObject,"pointertap",n.eventData),n.dispatchEvent(e.target.displayObject,"tap",n.eventData)},i.prototype._onFocus=function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive");var n=this.renderer.plugins.interaction;n.dispatchEvent(e.target.displayObject,"mouseover",n.eventData)},i.prototype._onFocusOut=function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite");var n=this.renderer.plugins.interaction;n.dispatchEvent(e.target.displayObject,"mouseout",n.eventData)},i.prototype._onKeyDown=function(e){e.keyCode===jF&&this.activate()},i.prototype._onMouseMove=function(e){e.movementX===0&&e.movementY===0||this.deactivate()},i.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},i}();me.TARGET_FPMS=.06;var Zi=function(i){return i[i.INTERACTION=50]="INTERACTION",i[i.HIGH=25]="HIGH",i[i.NORMAL=0]="NORMAL",i[i.LOW=-25]="LOW",i[i.UTILITY=-50]="UTILITY",i}(Zi||{}),av=function(){function i(e,n,t,r){n===void 0&&(n=null),t===void 0&&(t=0),r===void 0&&(r=!1),this.fn=e,this.context=n,this.priority=t,this.once=r,this.next=null,this.previous=null,this._destroyed=!1}return i.prototype.match=function(e,n){return n===void 0&&(n=null),this.fn===e&&this.context===n},i.prototype.emit=function(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));var n=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),n},i.prototype.connect=function(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this},i.prototype.destroy=function(e){e===void 0&&(e=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var n=this.next;return this.next=e?null:n,this.previous=null,n},i}(),Ot=function(){function i(){var e=this;this._head=new av(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this.autoStart=!1,this.deltaTime=1,this.deltaMS=1/me.TARGET_FPMS,this.elapsedMS=1/me.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._protected=!1,this._lastFrame=-1,this._tick=function(n){e._requestId=null,e.started&&(e.update(n),e.started&&e._requestId===null&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}return i.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},i.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},i.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},i.prototype.add=function(e,n,t){return t===void 0&&(t=Zi.NORMAL),this._addListener(new av(e,n,t))},i.prototype.addOnce=function(e,n,t){return t===void 0&&(t=Zi.NORMAL),this._addListener(new av(e,n,t,!0))},i.prototype._addListener=function(e){var n=this._head.next,t=this._head;if(!n)e.connect(t);else{for(;n;){if(e.priority>n.priority){e.connect(t);break}t=n,n=n.next}e.previous||e.connect(t)}return this._startIfPossible(),this},i.prototype.remove=function(e,n){for(var t=this._head.next;t;)t.match(e,n)?t=t.destroy():t=t.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(i.prototype,"count",{get:function(){if(!this._head)return 0;for(var e=0,n=this._head;n=n.next;)e++;return e},enumerable:!1,configurable:!0}),i.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},i.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},i.prototype.destroy=function(){if(!this._protected){this.stop();for(var e=this._head.next;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}},i.prototype.update=function(e){e===void 0&&(e=performance.now());var n;if(e>this.lastTime){if(n=this.elapsedMS=e-this.lastTime,n>this._maxElapsedMS&&(n=this._maxElapsedMS),n*=this.speed,this._minElapsedMS){var t=e-this._lastFrame|0;if(t<this._minElapsedMS)return;this._lastFrame=e-t%this._minElapsedMS}this.deltaMS=n,this.deltaTime=this.deltaMS*me.TARGET_FPMS;for(var r=this._head,o=r.next;o;)o=o.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e},Object.defineProperty(i.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(e){var n=Math.min(this.maxFPS,e),t=Math.min(Math.max(0,n)/1e3,me.TARGET_FPMS);this._maxElapsedMS=1/t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(e){if(e===0)this._minElapsedMS=0;else{var n=Math.max(this.minFPS,e);this._minElapsedMS=1/(n/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(i,"shared",{get:function(){if(!i._shared){var e=i._shared=new i;e.autoStart=!0,e._protected=!0}return i._shared},enumerable:!1,configurable:!0}),Object.defineProperty(i,"system",{get:function(){if(!i._system){var e=i._system=new i;e.autoStart=!0,e._protected=!0}return i._system},enumerable:!1,configurable:!0}),i}(),$M=function(){function i(){}return i.init=function(e){var n=this;e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,Zi.LOW)},get:function(){return this._ticker}}),this.stop=function(){n._ticker.stop()},this.start=function(){n._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?Ot.shared:new Ot,e.autoStart&&this.start()},i.destroy=function(){if(this._ticker){var e=this._ticker;this.ticker=null,e.destroy()}},i}();var KM=function(){function i(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new R,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(i.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),i.prototype.getLocalPosition=function(e,n,t){return e.worldTransform.applyInverse(t||this.global,n)},i.prototype.copyEvent=function(e){"isPrimary"in e&&e.isPrimary&&(this.isPrimary=!0),this.button="button"in e&&e.button;var n="buttons"in e&&e.buttons;this.buttons=Number.isInteger(n)?n:"which"in e&&e.which,this.width="width"in e&&e.width,this.height="height"in e&&e.height,this.tiltX="tiltX"in e&&e.tiltX,this.tiltY="tiltY"in e&&e.tiltY,this.pointerType="pointerType"in e&&e.pointerType,this.pressure="pressure"in e&&e.pressure,this.rotationAngle="rotationAngle"in e&&e.rotationAngle,this.twist="twist"in e&&e.twist||0,this.tangentialPressure="tangentialPressure"in e&&e.tangentialPressure||0},i.prototype.reset=function(){this.isPrimary=!1},i}();var cv=function(i,e){return cv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r])},cv(i,e)};function WF(i,e){cv(i,e);function n(){this.constructor=i}i.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var GF=function(){function i(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return i.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},i.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},i}(),lv=function(){function i(e){this._pointerId=e,this._flags=i.FLAGS.NONE}return i.prototype._doSet=function(e,n){n?this._flags=this._flags|e:this._flags=this._flags&~e},Object.defineProperty(i.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"flags",{get:function(){return this._flags},set:function(e){this._flags=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"none",{get:function(){return this._flags===i.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"over",{get:function(){return(this._flags&i.FLAGS.OVER)!==0},set:function(e){this._doSet(i.FLAGS.OVER,e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightDown",{get:function(){return(this._flags&i.FLAGS.RIGHT_DOWN)!==0},set:function(e){this._doSet(i.FLAGS.RIGHT_DOWN,e)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"leftDown",{get:function(){return(this._flags&i.FLAGS.LEFT_DOWN)!==0},set:function(e){this._doSet(i.FLAGS.LEFT_DOWN,e)},enumerable:!1,configurable:!0}),i.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),i}(),XF=function(){function i(){this._tempPoint=new R}return i.prototype.recursiveFindHit=function(e,n,t,r,o){if(!n||!n.visible)return!1;var s=e.data.global;o=n.interactive||o;var a=!1,l=o,c=!0;if(n.hitArea?(r&&(n.worldTransform.applyInverse(s,this._tempPoint),n.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?a=!0:(r=!1,c=!1)),l=!1):n._mask&&r&&(n._mask.containsPoint&&n._mask.containsPoint(s)||(r=!1)),c&&n.interactiveChildren&&n.children)for(var u=n.children,d=u.length-1;d>=0;d--){var h=u[d],p=this.recursiveFindHit(e,h,t,r,l);if(p){if(!h.parent)continue;l=!1,p&&(e.target&&(r=!1),a=!0)}}return o&&(r&&!e.target&&!n.hitArea&&n.containsPoint&&n.containsPoint(s)&&(a=!0),n.interactive&&(a&&!e.target&&(e.target=n),t&&t(e,n,!!a))),a},i.prototype.findHit=function(e,n,t,r){this.recursiveFindHit(e,n,t,r,!1)},i}(),qF={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return this.cursor==="pointer"},set buttonMode(i){i?this.cursor="pointer":this.cursor==="pointer"&&(this.cursor=null)},cursor:null,get trackedPointers(){return this._trackedPointers===void 0&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};Ut.mixin(qF);var Ih=1,Sh={target:null,data:{global:null}},QM=function(i){WF(e,i);function e(n,t){var r=i.call(this)||this;return t=t||{},r.renderer=n,r.autoPreventDefault=t.autoPreventDefault!==void 0?t.autoPreventDefault:!0,r.interactionFrequency=t.interactionFrequency||10,r.mouse=new KM,r.mouse.identifier=Ih,r.mouse.global.set(-999999),r.activeInteractionData={},r.activeInteractionData[Ih]=r.mouse,r.interactionDataPool=[],r.eventData=new GF,r.interactionDOMElement=null,r.moveWhenInside=!1,r.eventsAdded=!1,r.tickerAdded=!1,r.mouseOverRenderer=!1,r.supportsTouchEvents="ontouchstart"in window,r.supportsPointerEvents=!!window.PointerEvent,r.onPointerUp=r.onPointerUp.bind(r),r.processPointerUp=r.processPointerUp.bind(r),r.onPointerCancel=r.onPointerCancel.bind(r),r.processPointerCancel=r.processPointerCancel.bind(r),r.onPointerDown=r.onPointerDown.bind(r),r.processPointerDown=r.processPointerDown.bind(r),r.onPointerMove=r.onPointerMove.bind(r),r.processPointerMove=r.processPointerMove.bind(r),r.onPointerOut=r.onPointerOut.bind(r),r.processPointerOverOut=r.processPointerOverOut.bind(r),r.onPointerOver=r.onPointerOver.bind(r),r.cursorStyles={default:"inherit",pointer:"pointer"},r.currentCursorMode=null,r.cursor=null,r.resolution=1,r.delayedEvents=[],r.search=new XF,r._tempDisplayObject=new sv,r._useSystemTicker=t.useSystemTicker!==void 0?t.useSystemTicker:!0,r.setTargetElement(r.renderer.view,r.renderer.resolution),r}return Object.defineProperty(e.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(n){this._useSystemTicker=n,n?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),e.prototype.hitTest=function(n,t){return Sh.target=null,Sh.data.global=n,t||(t=this.lastObjectRendered),this.processInteractive(Sh,t,null,!0),Sh.target},e.prototype.setTargetElement=function(n,t){t===void 0&&(t=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=n,this.resolution=t,this.addEvents(),this.addTickerListener()},e.prototype.addTickerListener=function(){this.tickerAdded||!this.interactionDOMElement||!this._useSystemTicker||(Ot.system.add(this.tickerUpdate,this,Zi.INTERACTION),this.tickerAdded=!0)},e.prototype.removeTickerListener=function(){this.tickerAdded&&(Ot.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},e.prototype.addEvents=function(){if(!(this.eventsAdded||!this.interactionDOMElement)){var n=this.interactionDOMElement.style;window.navigator.msPointerEnabled?(n.msContentZooming="none",n.msTouchAction="none"):this.supportsPointerEvents&&(n.touchAction="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0}},e.prototype.removeEvents=function(){if(!(!this.eventsAdded||!this.interactionDOMElement)){var n=this.interactionDOMElement.style;window.navigator.msPointerEnabled?(n.msContentZooming="",n.msTouchAction=""):this.supportsPointerEvents&&(n.touchAction=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1}},e.prototype.tickerUpdate=function(n){this._deltaTime+=n,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())},e.prototype.update=function(){if(this.interactionDOMElement){if(this._didMove){this._didMove=!1;return}this.cursor=null;for(var n in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(n)){var t=this.activeInteractionData[n];if(t.originalEvent&&t.pointerType!=="touch"){var r=this.configureInteractionEventForDOMEvent(this.eventData,t.originalEvent,t);this.processInteractive(r,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(n){if(n=n||"default",this.currentCursorMode!==n){this.currentCursorMode=n;var t=this.cursorStyles[n];if(t)switch(typeof t){case"string":this.interactionDOMElement.style.cursor=t;break;case"function":t(n);break;case"object":Object.assign(this.interactionDOMElement.style,t);break}else typeof n=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,n)&&(this.interactionDOMElement.style.cursor=n)}},e.prototype.dispatchEvent=function(n,t,r){(!r.stopPropagationHint||n===r.stopsPropagatingAt)&&(r.currentTarget=n,r.type=t,n.emit(t,r),n[t]&&n[t](r))},e.prototype.delayDispatchEvent=function(n,t,r){this.delayedEvents.push({displayObject:n,eventString:t,eventData:r})},e.prototype.mapPositionToPoint=function(n,t,r){var o;this.interactionDOMElement.parentElement?o=this.interactionDOMElement.getBoundingClientRect():o={x:0,y:0,width:0,height:0};var s=1/this.resolution;n.x=(t-o.left)*(this.interactionDOMElement.width/o.width)*s,n.y=(r-o.top)*(this.interactionDOMElement.height/o.height)*s},e.prototype.processInteractive=function(n,t,r,o){var s=this.search.findHit(n,t,r,o),a=this.delayedEvents;if(!a.length)return s;n.stopPropagationHint=!1;var l=a.length;this.delayedEvents=[];for(var c=0;c<l;c++){var u=a[c],d=u.displayObject,h=u.eventString,p=u.eventData;p.stopsPropagatingAt===d&&(p.stopPropagationHint=!0),this.dispatchEvent(d,h,p)}return s},e.prototype.onPointerDown=function(n){if(!(this.supportsTouchEvents&&n.pointerType==="touch")){var t=this.normalizeToPointerData(n);if(this.autoPreventDefault&&t[0].isNormalized){var r=n.cancelable||!("cancelable"in n);r&&n.preventDefault()}for(var o=t.length,s=0;s<o;s++){var a=t[s],l=this.getInteractionDataForPointerId(a),c=this.configureInteractionEventForDOMEvent(this.eventData,a,l);if(c.data.originalEvent=n,this.processInteractive(c,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",c),a.pointerType==="touch")this.emit("touchstart",c);else if(a.pointerType==="mouse"||a.pointerType==="pen"){var u=a.button===2;this.emit(u?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(n,t,r){var o=n.data,s=n.data.identifier;if(r){if(t.trackedPointers[s]||(t.trackedPointers[s]=new lv(s)),this.dispatchEvent(t,"pointerdown",n),o.pointerType==="touch")this.dispatchEvent(t,"touchstart",n);else if(o.pointerType==="mouse"||o.pointerType==="pen"){var a=o.button===2;a?t.trackedPointers[s].rightDown=!0:t.trackedPointers[s].leftDown=!0,this.dispatchEvent(t,a?"rightdown":"mousedown",n)}}},e.prototype.onPointerComplete=function(n,t,r){for(var o=this.normalizeToPointerData(n),s=o.length,a=n.target!==this.interactionDOMElement?"outside":"",l=0;l<s;l++){var c=o[l],u=this.getInteractionDataForPointerId(c),d=this.configureInteractionEventForDOMEvent(this.eventData,c,u);if(d.data.originalEvent=n,this.processInteractive(d,this.lastObjectRendered,r,t||!a),this.emit(t?"pointercancel":"pointerup"+a,d),c.pointerType==="mouse"||c.pointerType==="pen"){var h=c.button===2;this.emit(h?"rightup"+a:"mouseup"+a,d)}else c.pointerType==="touch"&&(this.emit(t?"touchcancel":"touchend"+a,d),this.releaseInteractionDataForPointerId(c.pointerId))}},e.prototype.onPointerCancel=function(n){this.supportsTouchEvents&&n.pointerType==="touch"||this.onPointerComplete(n,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(n,t){var r=n.data,o=n.data.identifier;t.trackedPointers[o]!==void 0&&(delete t.trackedPointers[o],this.dispatchEvent(t,"pointercancel",n),r.pointerType==="touch"&&this.dispatchEvent(t,"touchcancel",n))},e.prototype.onPointerUp=function(n){this.supportsTouchEvents&&n.pointerType==="touch"||this.onPointerComplete(n,!1,this.processPointerUp)},e.prototype.processPointerUp=function(n,t,r){var o=n.data,s=n.data.identifier,a=t.trackedPointers[s],l=o.pointerType==="touch",c=o.pointerType==="mouse"||o.pointerType==="pen",u=!1;if(c){var d=o.button===2,h=lv.FLAGS,p=d?h.RIGHT_DOWN:h.LEFT_DOWN,f=a!==void 0&&a.flags&p;r?(this.dispatchEvent(t,d?"rightup":"mouseup",n),f&&(this.dispatchEvent(t,d?"rightclick":"click",n),u=!0)):f&&this.dispatchEvent(t,d?"rightupoutside":"mouseupoutside",n),a&&(d?a.rightDown=!1:a.leftDown=!1)}r?(this.dispatchEvent(t,"pointerup",n),l&&this.dispatchEvent(t,"touchend",n),a&&((!c||u)&&this.dispatchEvent(t,"pointertap",n),l&&(this.dispatchEvent(t,"tap",n),a.over=!1))):a&&(this.dispatchEvent(t,"pointerupoutside",n),l&&this.dispatchEvent(t,"touchendoutside",n)),a&&a.none&&delete t.trackedPointers[s]},e.prototype.onPointerMove=function(n){if(!(this.supportsTouchEvents&&n.pointerType==="touch")){var t=this.normalizeToPointerData(n);(t[0].pointerType==="mouse"||t[0].pointerType==="pen")&&(this._didMove=!0,this.cursor=null);for(var r=t.length,o=0;o<r;o++){var s=t[o],a=this.getInteractionDataForPointerId(s),l=this.configureInteractionEventForDOMEvent(this.eventData,s,a);l.data.originalEvent=n,this.processInteractive(l,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",l),s.pointerType==="touch"&&this.emit("touchmove",l),(s.pointerType==="mouse"||s.pointerType==="pen")&&this.emit("mousemove",l)}t[0].pointerType==="mouse"&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(n,t,r){var o=n.data,s=o.pointerType==="touch",a=o.pointerType==="mouse"||o.pointerType==="pen";a&&this.processPointerOverOut(n,t,r),(!this.moveWhenInside||r)&&(this.dispatchEvent(t,"pointermove",n),s&&this.dispatchEvent(t,"touchmove",n),a&&this.dispatchEvent(t,"mousemove",n))},e.prototype.onPointerOut=function(n){if(!(this.supportsTouchEvents&&n.pointerType==="touch")){var t=this.normalizeToPointerData(n),r=t[0];r.pointerType==="mouse"&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var o=this.getInteractionDataForPointerId(r),s=this.configureInteractionEventForDOMEvent(this.eventData,r,o);s.data.originalEvent=r,this.processInteractive(s,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",s),r.pointerType==="mouse"||r.pointerType==="pen"?this.emit("mouseout",s):this.releaseInteractionDataForPointerId(o.identifier)}},e.prototype.processPointerOverOut=function(n,t,r){var o=n.data,s=n.data.identifier,a=o.pointerType==="mouse"||o.pointerType==="pen",l=t.trackedPointers[s];r&&!l&&(l=t.trackedPointers[s]=new lv(s)),l!==void 0&&(r&&this.mouseOverRenderer?(l.over||(l.over=!0,this.delayDispatchEvent(t,"pointerover",n),a&&this.delayDispatchEvent(t,"mouseover",n)),a&&this.cursor===null&&(this.cursor=t.cursor)):l.over&&(l.over=!1,this.dispatchEvent(t,"pointerout",this.eventData),a&&this.dispatchEvent(t,"mouseout",n),l.none&&delete t.trackedPointers[s]))},e.prototype.onPointerOver=function(n){var t=this.normalizeToPointerData(n),r=t[0],o=this.getInteractionDataForPointerId(r),s=this.configureInteractionEventForDOMEvent(this.eventData,r,o);s.data.originalEvent=r,r.pointerType==="mouse"&&(this.mouseOverRenderer=!0),this.emit("pointerover",s),(r.pointerType==="mouse"||r.pointerType==="pen")&&this.emit("mouseover",s)},e.prototype.getInteractionDataForPointerId=function(n){var t=n.pointerId,r;return t===Ih||n.pointerType==="mouse"?r=this.mouse:this.activeInteractionData[t]?r=this.activeInteractionData[t]:(r=this.interactionDataPool.pop()||new KM,r.identifier=t,this.activeInteractionData[t]=r),r.copyEvent(n),r},e.prototype.releaseInteractionDataForPointerId=function(n){var t=this.activeInteractionData[n];t&&(delete this.activeInteractionData[n],t.reset(),this.interactionDataPool.push(t))},e.prototype.configureInteractionEventForDOMEvent=function(n,t,r){return n.data=r,this.mapPositionToPoint(r.global,t.clientX,t.clientY),t.pointerType==="touch"&&(t.globalX=r.global.x,t.globalY=r.global.y),r.originalEvent=t,n.reset(),n},e.prototype.normalizeToPointerData=function(n){var t=[];if(this.supportsTouchEvents&&n instanceof TouchEvent)for(var r=0,o=n.changedTouches.length;r<o;r++){var s=n.changedTouches[r];typeof s.button>"u"&&(s.button=n.touches.length?1:0),typeof s.buttons>"u"&&(s.buttons=n.touches.length?1:0),typeof s.isPrimary>"u"&&(s.isPrimary=n.touches.length===1&&n.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,t.push(s)}else if(n instanceof MouseEvent&&(!this.supportsPointerEvents||!(n instanceof window.PointerEvent))){var a=n;typeof a.isPrimary>"u"&&(a.isPrimary=!0),typeof a.width>"u"&&(a.width=1),typeof a.height>"u"&&(a.height=1),typeof a.tiltX>"u"&&(a.tiltX=0),typeof a.tiltY>"u"&&(a.tiltY=0),typeof a.pointerType>"u"&&(a.pointerType="mouse"),typeof a.pointerId>"u"&&(a.pointerId=Ih),typeof a.pressure>"u"&&(a.pressure=.5),typeof a.twist>"u"&&(a.twist=0),typeof a.tangentialPressure>"u"&&(a.tangentialPressure=0),a.isNormalized=!0,t.push(a)}else t.push(n);return t},e.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},e}(no.default);var Cn=function(){function i(e){this.items=[],this._name=e,this._aliasCount=0}return i.prototype.emit=function(e,n,t,r,o,s,a,l){if(arguments.length>8)throw new Error("max arguments reached");var c=this,u=c.name,d=c.items;this._aliasCount++;for(var h=0,p=d.length;h<p;h++)d[h][u](e,n,t,r,o,s,a,l);return d===this.items&&this._aliasCount--,this},i.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},i.prototype.add=function(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this},i.prototype.remove=function(e){var n=this.items.indexOf(e);return n!==-1&&(this.ensureNonAliasedItems(),this.items.splice(n,1)),this},i.prototype.contains=function(e){return this.items.indexOf(e)!==-1},i.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},i.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(i.prototype,"empty",{get:function(){return this.items.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),i}();Object.defineProperties(Cn.prototype,{dispatch:{value:Cn.prototype.emit},run:{value:Cn.prototype.emit}});me.PREFER_ENV=oi.any?eo.WEBGL:eo.WEBGL2;me.STRICT_TEXTURE_CACHE=!1;var Cv=[];function dO(i,e){if(!i)return null;var n="";if(typeof i=="string"){var t=/\.(\w{3,4})(?:$|\?|#)/i.exec(i);t&&(n=t[1].toLowerCase())}for(var r=Cv.length-1;r>=0;--r){var o=Cv[r];if(o.test&&o.test(i,n))return new o(i,e)}throw new Error("Unrecognized source type to auto-detect Resource")}var bv=function(i,e){return bv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r])},bv(i,e)};function Ke(i,e){bv(i,e);function n(){this.constructor=i}i.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var bc=function(){function i(e,n){e===void 0&&(e=0),n===void 0&&(n=0),this._width=e,this._height=n,this.destroyed=!1,this.internal=!1,this.onResize=new Cn("setRealSize"),this.onUpdate=new Cn("update"),this.onError=new Cn("onError")}return i.prototype.bind=function(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},i.prototype.unbind=function(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)},i.prototype.resize=function(e,n){(e!==this._width||n!==this._height)&&(this._width=e,this._height=n,this.onResize.emit(e,n))},Object.defineProperty(i.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),i.prototype.update=function(){this.destroyed||this.onUpdate.emit()},i.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(i.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),i.prototype.style=function(e,n,t){return!1},i.prototype.dispose=function(){},i.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},i.test=function(e,n){return!1},i}(),wv=function(i){Ke(e,i);function e(n,t){var r=this,o=t||{},s=o.width,a=o.height;if(!s||!a)throw new Error("BufferResource width or height invalid");return r=i.call(this,s,a)||this,r.data=n,r}return e.prototype.upload=function(n,t,r){var o=n.gl;return o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===Ao.UNPACK),r.width===t.width&&r.height===t.height?o.texSubImage2D(t.target,0,0,0,t.width,t.height,t.format,t.type,this.data):(r.width=t.width,r.height=t.height,o.texImage2D(t.target,0,r.internalFormat,t.width,t.height,0,t.format,r.type,this.data)),!0},e.prototype.dispose=function(){this.data=null},e.test=function(n){return n instanceof Float32Array||n instanceof Uint8Array||n instanceof Uint32Array},e}(bc),YF={scaleMode:to.NEAREST,format:fc.RGBA,alphaMode:Ao.NPM},wt=function(i){Ke(e,i);function e(n,t){n===void 0&&(n=null),t===void 0&&(t=null);var r=i.call(this)||this;t=t||{};var o=t.alphaMode,s=t.mipmap,a=t.anisotropicLevel,l=t.scaleMode,c=t.width,u=t.height,d=t.wrapMode,h=t.format,p=t.type,f=t.target,m=t.resolution,_=t.resourceOptions;return n&&!(n instanceof bc)&&(n=dO(n,_),n.internal=!0),r.width=c||0,r.height=u||0,r.resolution=m||me.RESOLUTION,r.mipmap=s!==void 0?s:me.MIPMAP_TEXTURES,r.anisotropicLevel=a!==void 0?a:me.ANISOTROPIC_LEVEL,r.wrapMode=d||me.WRAP_MODE,r.scaleMode=l!==void 0?l:me.SCALE_MODE,r.format=h||fc.RGBA,r.type=p||Jt.UNSIGNED_BYTE,r.target=f||xs.TEXTURE_2D,r.alphaMode=o!==void 0?o:Ao.UNPACK,t.premultiplyAlpha!==void 0&&(r.premultiplyAlpha=t.premultiplyAlpha),r.uid=ko(),r.touched=0,r.isPowerOfTwo=!1,r._refreshPOT(),r._glTextures={},r.dirtyId=0,r.dirtyStyleId=0,r.cacheId=null,r.valid=c>0&&u>0,r.textureCacheIds=[],r.destroyed=!1,r.resource=null,r._batchEnabled=0,r._batchLocation=0,r.parentTextureArray=null,r.setResource(n),r}return Object.defineProperty(e.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),e.prototype.setStyle=function(n,t){var r;return n!==void 0&&n!==this.scaleMode&&(this.scaleMode=n,r=!0),t!==void 0&&t!==this.mipmap&&(this.mipmap=t,r=!0),r&&this.dirtyStyleId++,this},e.prototype.setSize=function(n,t,r){return this.resolution=r||this.resolution,this.width=n,this.height=t,this._refreshPOT(),this.update(),this},e.prototype.setRealSize=function(n,t,r){return this.resolution=r||this.resolution,this.width=n/this.resolution,this.height=t/this.resolution,this._refreshPOT(),this.update(),this},e.prototype._refreshPOT=function(){this.isPowerOfTwo=Q_(this.realWidth)&&Q_(this.realHeight)},e.prototype.setResolution=function(n){var t=this.resolution;return t===n?this:(this.resolution=n,this.valid&&(this.width=this.width*t/n,this.height=this.height*t/n,this.emit("update",this)),this._refreshPOT(),this)},e.prototype.setResource=function(n){if(this.resource===n)return this;if(this.resource)throw new Error("Resource can be set only once");return n.bind(this),this.resource=n,this},e.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},e.prototype.onError=function(n){this.emit("error",this,n)},e.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete No[this.cacheId],delete Cr[this.cacheId],this.cacheId=null),this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.castToBaseTexture=function(){return this},e.from=function(n,t,r){r===void 0&&(r=me.STRICT_TEXTURE_CACHE);var o=typeof n=="string",s=null;o?s=n:(n._pixiId||(n._pixiId="pixiid_"+ko()),s=n._pixiId);var a=No[s];if(o&&r&&!a)throw new Error('The cacheId "'+s+'" does not exist in BaseTextureCache.');return a||(a=new e(n,t),a.cacheId=s,e.addToCache(a,s)),a},e.fromBuffer=function(n,t,r,o){n=n||new Float32Array(t*r*4);var s=new wv(n,{width:t,height:r}),a=n instanceof Float32Array?Jt.FLOAT:Jt.UNSIGNED_BYTE;return new e(s,Object.assign(YF,o||{width:t,height:r,type:a}))},e.addToCache=function(n,t){t&&(n.textureCacheIds.indexOf(t)===-1&&n.textureCacheIds.push(t),No[t]&&console.warn("BaseTexture added to the cache with an id ["+t+"] that already had an entry"),No[t]=n)},e.removeFromCache=function(n){if(typeof n=="string"){var t=No[n];if(t){var r=t.textureCacheIds.indexOf(n);return r>-1&&t.textureCacheIds.splice(r,1),delete No[n],t}}else if(n&&n.textureCacheIds){for(var o=0;o<n.textureCacheIds.length;++o)delete No[n.textureCacheIds[o]];return n.textureCacheIds.length=0,n}return null},e._globalBatch=0,e}(no.default),hO=function(i){Ke(e,i);function e(n,t){var r=this,o=t||{},s=o.width,a=o.height;r=i.call(this,s,a)||this,r.items=[],r.itemDirtyIds=[];for(var l=0;l<n;l++){var c=new wt;r.items.push(c),r.itemDirtyIds.push(-2)}return r.length=n,r._load=null,r.baseTexture=null,r}return e.prototype.initFromArray=function(n,t){for(var r=0;r<this.length;r++)n[r]&&(n[r].castToBaseTexture?this.addBaseTextureAt(n[r].castToBaseTexture(),r):n[r]instanceof bc?this.addResourceAt(n[r],r):this.addResourceAt(dO(n[r],t),r))},e.prototype.dispose=function(){for(var n=0,t=this.length;n<t;n++)this.items[n].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},e.prototype.addResourceAt=function(n,t){if(!this.items[t])throw new Error("Index "+t+" is out of bounds");return n.valid&&!this.valid&&this.resize(n.width,n.height),this.items[t].setResource(n),this},e.prototype.bind=function(n){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");i.prototype.bind.call(this,n);for(var t=0;t<this.length;t++)this.items[t].parentTextureArray=n,this.items[t].on("update",n.update,n)},e.prototype.unbind=function(n){i.prototype.unbind.call(this,n);for(var t=0;t<this.length;t++)this.items[t].parentTextureArray=null,this.items[t].off("update",n.update,n)},e.prototype.load=function(){var n=this;if(this._load)return this._load;var t=this.items.map(function(o){return o.resource}).filter(function(o){return o}),r=t.map(function(o){return o.load()});return this._load=Promise.all(r).then(function(){var o=n.items[0],s=o.realWidth,a=o.realHeight;return n.resize(s,a),Promise.resolve(n)}),this._load},e}(bc),ZF=function(i){Ke(e,i);function e(n,t){var r=this,o=t||{},s=o.width,a=o.height,l,c;return Array.isArray(n)?(l=n,c=n.length):c=n,r=i.call(this,c,{width:s,height:a})||this,l&&r.initFromArray(l,t),r}return e.prototype.addBaseTextureAt=function(n,t){if(n.resource)this.addResourceAt(n.resource,t);else throw new Error("ArrayResource does not support RenderTexture");return this},e.prototype.bind=function(n){i.prototype.bind.call(this,n),n.target=xs.TEXTURE_2D_ARRAY},e.prototype.upload=function(n,t,r){var o=this,s=o.length,a=o.itemDirtyIds,l=o.items,c=n.gl;r.dirtyId<0&&c.texImage3D(c.TEXTURE_2D_ARRAY,0,t.format,this._width,this._height,s,0,t.format,t.type,null);for(var u=0;u<s;u++){var d=l[u];a[u]<d.dirtyId&&(a[u]=d.dirtyId,d.valid&&c.texSubImage3D(c.TEXTURE_2D_ARRAY,0,0,0,u,d.resource.width,d.resource.height,1,t.format,t.type,d.resource.source))}return!0},e}(hO),Lo=function(i){Ke(e,i);function e(n){var t=this,r=n,o=r.naturalWidth||r.videoWidth||r.width,s=r.naturalHeight||r.videoHeight||r.height;return t=i.call(this,o,s)||this,t.source=n,t.noSubImage=!1,t}return e.crossOrigin=function(n,t,r){r===void 0&&t.indexOf("data:")!==0?n.crossOrigin=VM(t):r!==!1&&(n.crossOrigin=typeof r=="string"?r:"anonymous")},e.prototype.upload=function(n,t,r,o){var s=n.gl,a=t.realWidth,l=t.realHeight;return o=o||this.source,s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===Ao.UNPACK),!this.noSubImage&&t.target===s.TEXTURE_2D&&r.width===a&&r.height===l?s.texSubImage2D(s.TEXTURE_2D,0,0,0,t.format,t.type,o):(r.width=a,r.height=l,s.texImage2D(t.target,0,t.format,t.format,t.type,o)),!0},e.prototype.update=function(){if(!this.destroyed){var n=this.source,t=n.naturalWidth||n.videoWidth||n.width,r=n.naturalHeight||n.videoHeight||n.height;this.resize(t,r),i.prototype.update.call(this)}},e.prototype.dispose=function(){this.source=null},e}(bc),pO=function(i){Ke(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.test=function(n){var t=window.OffscreenCanvas;return t&&n instanceof t?!0:n instanceof HTMLCanvasElement},e}(Lo),$F=function(i){Ke(e,i);function e(n,t){var r=this,o=t||{},s=o.width,a=o.height,l=o.autoLoad,c=o.linkBaseTexture;if(n&&n.length!==e.SIDES)throw new Error("Invalid length. Got "+n.length+", expected 6");r=i.call(this,6,{width:s,height:a})||this;for(var u=0;u<e.SIDES;u++)r.items[u].target=xs.TEXTURE_CUBE_MAP_POSITIVE_X+u;return r.linkBaseTexture=c!==!1,n&&r.initFromArray(n,t),l!==!1&&r.load(),r}return e.prototype.bind=function(n){i.prototype.bind.call(this,n),n.target=xs.TEXTURE_CUBE_MAP},e.prototype.addBaseTextureAt=function(n,t,r){if(r===void 0&&(r=this.linkBaseTexture),!this.items[t])throw new Error("Index "+t+" is out of bounds");if(!this.linkBaseTexture||n.parentTextureArray||Object.keys(n._glTextures).length>0)if(n.resource)this.addResourceAt(n.resource,t);else throw new Error("CubeResource does not support copying of renderTexture.");else n.target=xs.TEXTURE_CUBE_MAP_POSITIVE_X+t,n.parentTextureArray=this.baseTexture,this.items[t]=n;return n.valid&&!this.valid&&this.resize(n.realWidth,n.realHeight),this.items[t]=n,this},e.prototype.upload=function(n,t,r){for(var o=this.itemDirtyIds,s=0;s<e.SIDES;s++){var a=this.items[s];o[s]<a.dirtyId&&(a.valid&&a.resource?(a.resource.upload(n,a,r),o[s]=a.dirtyId):o[s]<-1&&(n.gl.texImage2D(a.target,0,r.internalFormat,t.realWidth,t.realHeight,0,t.format,r.type,null),o[s]=-1))}return!0},e.test=function(n){return Array.isArray(n)&&n.length===e.SIDES},e.SIDES=6,e}(hO),fO=function(i){Ke(e,i);function e(n,t){var r=this;if(t=t||{},!(n instanceof HTMLImageElement)){var o=new Image;Lo.crossOrigin(o,n,t.crossorigin),o.src=n,n=o}return r=i.call(this,n)||this,!n.complete&&r._width&&r._height&&(r._width=0,r._height=0),r.url=n.src,r._process=null,r.preserveBitmap=!1,r.createBitmap=(t.createBitmap!==void 0?t.createBitmap:me.CREATE_IMAGE_BITMAP)&&!!window.createImageBitmap,r.alphaMode=typeof t.alphaMode=="number"?t.alphaMode:null,t.premultiplyAlpha!==void 0&&(r.premultiplyAlpha=t.premultiplyAlpha),r.bitmap=null,r._load=null,t.autoLoad!==!1&&r.load(),r}return e.prototype.load=function(n){var t=this;return this._load?this._load:(n!==void 0&&(this.createBitmap=n),this._load=new Promise(function(r,o){var s=t.source;t.url=s.src;var a=function(){t.destroyed||(s.onload=null,s.onerror=null,t.resize(s.width,s.height),t._load=null,t.createBitmap?r(t.process()):r(t))};s.complete&&s.src?a():(s.onload=a,s.onerror=function(l){o(l),t.onError.emit(l)})}),this._load)},e.prototype.process=function(){var n=this,t=this.source;return this._process!==null?this._process:this.bitmap!==null||!window.createImageBitmap?Promise.resolve(this):(this._process=window.createImageBitmap(t,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===Ao.UNPACK?"premultiply":"none"}).then(function(r){return n.destroyed?Promise.reject():(n.bitmap=r,n.update(),n._process=null,Promise.resolve(n))}),this._process)},e.prototype.upload=function(n,t,r){if(typeof this.alphaMode=="number"&&(t.alphaMode=this.alphaMode),!this.createBitmap)return i.prototype.upload.call(this,n,t,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(i.prototype.upload.call(this,n,t,r,this.bitmap),!this.preserveBitmap){var o=!0,s=t._glTextures;for(var a in s){var l=s[a];if(l!==r&&l.dirtyId!==t.dirtyId){o=!1;break}}o&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},e.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,i.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},e.test=function(n){return typeof n=="string"||n instanceof HTMLImageElement},e}(Lo),KF=function(i){Ke(e,i);function e(n,t){var r=this;return t=t||{},r=i.call(this,document.createElement("canvas"))||this,r._width=0,r._height=0,r.svg=n,r.scale=t.scale||1,r._overrideWidth=t.width,r._overrideHeight=t.height,r._resolve=null,r._crossorigin=t.crossorigin,r._load=null,t.autoLoad!==!1&&r.load(),r}return e.prototype.load=function(){var n=this;return this._load?this._load:(this._load=new Promise(function(t){if(n._resolve=function(){n.resize(n.source.width,n.source.height),t(n)},/^\<svg/.test(n.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");n.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(n.svg)))}n._loadSvg()}),this._load)},e.prototype._loadSvg=function(){var n=this,t=new Image;Lo.crossOrigin(t,this.svg,this._crossorigin),t.src=this.svg,t.onerror=function(r){n._resolve&&(t.onerror=null,n.onError.emit(r))},t.onload=function(){if(n._resolve){var r=t.width,o=t.height;if(!r||!o)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var s=r*n.scale,a=o*n.scale;(n._overrideWidth||n._overrideHeight)&&(s=n._overrideWidth||n._overrideHeight/o*r,a=n._overrideHeight||n._overrideWidth/r*o),s=Math.round(s),a=Math.round(a);var l=n.source;l.width=s,l.height=a,l._pixiId="canvas_"+ko(),l.getContext("2d").drawImage(t,0,0,r,o,0,0,s,a),n._resolve(),n._resolve=null}}},e.getSize=function(n){var t=e.SVG_SIZE.exec(n),r={};return t&&(r[t[1]]=Math.round(parseFloat(t[3])),r[t[5]]=Math.round(parseFloat(t[7]))),r},e.prototype.dispose=function(){i.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},e.test=function(n,t){return t==="svg"||typeof n=="string"&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(n)||typeof n=="string"&&n.indexOf("<svg")===0},e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e}(Lo),QF=function(i){Ke(e,i);function e(n,t){var r=this;if(t=t||{},!(n instanceof HTMLVideoElement)){var o=document.createElement("video");o.setAttribute("preload","auto"),o.setAttribute("webkit-playsinline",""),o.setAttribute("playsinline",""),typeof n=="string"&&(n=[n]);var s=n[0].src||n[0];Lo.crossOrigin(o,s,t.crossorigin);for(var a=0;a<n.length;++a){var l=document.createElement("source"),c=n[a],u=c.src,d=c.mime;u=u||n[a];var h=u.split("?").shift().toLowerCase(),p=h.substr(h.lastIndexOf(".")+1);d=d||e.MIME_TYPES[p]||"video/"+p,l.src=u,l.type=d,o.appendChild(l)}n=o}return r=i.call(this,n)||this,r.noSubImage=!0,r._autoUpdate=!0,r._isConnectedToTicker=!1,r._updateFPS=t.updateFPS||0,r._msToNextUpdate=0,r.autoPlay=t.autoPlay!==!1,r._load=null,r._resolve=null,r._onCanPlay=r._onCanPlay.bind(r),r._onError=r._onError.bind(r),t.autoLoad!==!1&&r.load(),r}return e.prototype.update=function(n){if(n===void 0&&(n=0),!this.destroyed){var t=Ot.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t),(!this._updateFPS||this._msToNextUpdate<=0)&&(i.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},e.prototype.load=function(){var n=this;if(this._load)return this._load;var t=this.source;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart.bind(this)),t.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("error",this._onError,!0)),this._load=new Promise(function(r){n.valid?r(n):(n._resolve=r,t.load())}),this._load},e.prototype._onError=function(n){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(n)},e.prototype._isSourcePlaying=function(){var n=this.source;return n.currentTime>0&&n.paused===!1&&n.ended===!1&&n.readyState>2},e.prototype._isSourceReady=function(){var n=this.source;return n.readyState===3||n.readyState===4},e.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Ot.shared.add(this.update,this),this._isConnectedToTicker=!0)},e.prototype._onPlayStop=function(){this._isConnectedToTicker&&(Ot.shared.remove(this.update,this),this._isConnectedToTicker=!1)},e.prototype._onCanPlay=function(){var n=this.source;n.removeEventListener("canplay",this._onCanPlay),n.removeEventListener("canplaythrough",this._onCanPlay);var t=this.valid;this.resize(n.videoWidth,n.videoHeight),!t&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&n.play()},e.prototype.dispose=function(){this._isConnectedToTicker&&Ot.shared.remove(this.update,this);var n=this.source;n&&(n.removeEventListener("error",this._onError,!0),n.pause(),n.src="",n.load()),i.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(n){n!==this._autoUpdate&&(this._autoUpdate=n,!this._autoUpdate&&this._isConnectedToTicker?(Ot.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Ot.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(n){n!==this._updateFPS&&(this._updateFPS=n)},enumerable:!1,configurable:!0}),e.test=function(n,t){return n instanceof HTMLVideoElement||e.TYPES.indexOf(t)>-1},e.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],e.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},e}(Lo),JF=function(i){Ke(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.test=function(n){return!!window.createImageBitmap&&n instanceof ImageBitmap},e}(Lo);Cv.push(fO,JF,pO,QF,KF,wv,$F,ZF);var ci=function(){function i(e){this.renderer=e}return i.prototype.destroy=function(){this.renderer=null},i}(),eL=function(i){Ke(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.upload=function(n,t,r){var o=n.gl;return o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===Ao.UNPACK),r.width===t.width&&r.height===t.height?o.texSubImage2D(t.target,0,0,0,t.width,t.height,t.format,t.type,this.data):(r.width=t.width,r.height=t.height,o.texImage2D(t.target,0,n.context.webGLVersion===1?o.DEPTH_COMPONENT:o.DEPTH_COMPONENT16,t.width,t.height,0,t.format,t.type,this.data)),!0},e}(wv),Pv=function(){function i(e,n){this.width=Math.ceil(e||100),this.height=Math.ceil(n||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Cn("disposeFramebuffer"),this.multisample=La.NONE}return Object.defineProperty(i.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),i.prototype.addColorTexture=function(e,n){return e===void 0&&(e=0),this.colorTextures[e]=n||new wt(null,{scaleMode:to.NEAREST,resolution:1,mipmap:mc.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},i.prototype.addDepthTexture=function(e){return this.depthTexture=e||new wt(new eL(null,{width:this.width,height:this.height}),{scaleMode:to.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:mc.OFF,format:fc.DEPTH_COMPONENT,type:Jt.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},i.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},i.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},i.prototype.resize=function(e,n){if(e=Math.ceil(e),n=Math.ceil(n),!(e===this.width&&n===this.height)){this.width=e,this.height=n,this.dirtyId++,this.dirtySize++;for(var t=0;t<this.colorTextures.length;t++){var r=this.colorTextures[t],o=r.resolution;r.setSize(e/o,n/o)}if(this.depthTexture){var o=this.depthTexture.resolution;this.depthTexture.setSize(e/o,n/o)}}},i.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},i.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},i}(),kh=function(i){Ke(e,i);function e(n){var t=this;if(typeof n=="number"){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];n={width:r,height:o,scaleMode:s,resolution:a}}t=i.call(this,null,n)||this;var l=n||{},c=l.width,u=l.height;return t.mipmap=0,t.width=Math.ceil(c)||100,t.height=Math.ceil(u)||100,t.valid=!0,t.clearColor=[0,0,0,0],t.framebuffer=new Pv(t.width*t.resolution,t.height*t.resolution).addColorTexture(0,t),t.maskStack=[],t.filterStack=[{}],t}return e.prototype.resize=function(n,t){n=Math.ceil(n),t=Math.ceil(t),this.framebuffer.resize(n*this.resolution,t*this.resolution)},e.prototype.dispose=function(){this.framebuffer.dispose(),i.prototype.dispose.call(this)},e.prototype.destroy=function(){i.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},e}(wt),mO=function(){function i(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return i.prototype.set=function(e,n,t){var r=n.width,o=n.height;if(t){var s=e.width/2/r,a=e.height/2/o,l=e.x/r+s,c=e.y/o+a;t=Vt.add(t,Vt.NW),this.x0=l+s*Vt.uX(t),this.y0=c+a*Vt.uY(t),t=Vt.add(t,2),this.x1=l+s*Vt.uX(t),this.y1=c+a*Vt.uY(t),t=Vt.add(t,2),this.x2=l+s*Vt.uX(t),this.y2=c+a*Vt.uY(t),t=Vt.add(t,2),this.x3=l+s*Vt.uX(t),this.y3=c+a*Vt.uY(t)}else this.x0=e.x/r,this.y0=e.y/o,this.x1=(e.x+e.width)/r,this.y1=e.y/o,this.x2=(e.x+e.width)/r,this.y2=(e.y+e.height)/o,this.x3=e.x/r,this.y3=(e.y+e.height)/o;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},i}(),JM=new mO,Ee=function(i){Ke(e,i);function e(n,t,r,o,s,a){var l=i.call(this)||this;if(l.noFrame=!1,t||(l.noFrame=!0,t=new ze(0,0,1,1)),n instanceof e&&(n=n.baseTexture),l.baseTexture=n,l._frame=t,l.trim=o,l.valid=!1,l._uvs=JM,l.uvMatrix=null,l.orig=r||t,l._rotate=Number(s||0),s===!0)l._rotate=2;else if(l._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return l.defaultAnchor=a?new R(a.x,a.y):new R(0,0),l._updateID=0,l.textureCacheIds=[],n.valid?l.noFrame?n.valid&&l.onBaseTextureUpdated(n):l.frame=t:n.once("loaded",l.onBaseTextureUpdated,l),l.noFrame&&n.on("update",l.onBaseTextureUpdated,l),l}return e.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},e.prototype.onBaseTextureUpdated=function(n){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=n.width,this._frame.height=n.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},e.prototype.destroy=function(n){if(this.baseTexture){if(n){var t=this.baseTexture;t&&t.url&&Cr[t.url]&&e.removeFromCache(t.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){return new e(this.baseTexture,this.frame.clone(),this.orig.clone(),this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor)},e.prototype.updateUvs=function(){this._uvs===JM&&(this._uvs=new mO),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.from=function(n,t,r){t===void 0&&(t={}),r===void 0&&(r=me.STRICT_TEXTURE_CACHE);var o=typeof n=="string",s=null;o?s=n:(n._pixiId||(n._pixiId="pixiid_"+ko()),s=n._pixiId);var a=Cr[s];if(o&&r&&!a)throw new Error('The cacheId "'+s+'" does not exist in TextureCache.');return a||(t.resolution||(t.resolution=Ms(n)),a=new e(new wt(n,t)),a.baseTexture.cacheId=s,wt.addToCache(a.baseTexture,s),e.addToCache(a,s)),a},e.fromURL=function(n,t){var r=Object.assign({autoLoad:!1},t?.resourceOptions),o=e.from(n,Object.assign({resourceOptions:r},t),!1),s=o.baseTexture.resource;return o.baseTexture.valid?Promise.resolve(o):s.load().then(function(){return Promise.resolve(o)})},e.fromBuffer=function(n,t,r,o){return new e(wt.fromBuffer(n,t,r,o))},e.fromLoader=function(n,t,r){var o=new fO(n);o.url=t;var s=new wt(o,{scaleMode:me.SCALE_MODE,resolution:Ms(t)}),a=new e(s);return r||(r=t),wt.addToCache(a.baseTexture,r),e.addToCache(a,r),r!==t&&(wt.addToCache(a.baseTexture,t),e.addToCache(a,t)),a},e.addToCache=function(n,t){t&&(n.textureCacheIds.indexOf(t)===-1&&n.textureCacheIds.push(t),Cr[t]&&console.warn("Texture added to the cache with an id ["+t+"] that already had an entry"),Cr[t]=n)},e.removeFromCache=function(n){if(typeof n=="string"){var t=Cr[n];if(t){var r=t.textureCacheIds.indexOf(n);return r>-1&&t.textureCacheIds.splice(r,1),delete Cr[n],t}}else if(n&&n.textureCacheIds){for(var o=0;o<n.textureCacheIds.length;++o)Cr[n.textureCacheIds[o]]===n&&delete Cr[n.textureCacheIds[o]];return n.textureCacheIds.length=0,n}return null},Object.defineProperty(e.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},set:function(n){this._frame=n,this.noFrame=!1;var t=n.x,r=n.y,o=n.width,s=n.height,a=t+o>this.baseTexture.width,l=r+s>this.baseTexture.height;if(a||l){var c=a&&l?"and":"or",u="X: "+t+" + "+o+" = "+(t+o)+" > "+this.baseTexture.width,d="Y: "+r+" + "+s+" = "+(r+s)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(u+" "+c+" "+d))}this.valid=o&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=n),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return this._rotate},set:function(n){this._rotate=n,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),e.prototype.castToBaseTexture=function(){return this.baseTexture},e}(no.default);function tL(){var i=document.createElement("canvas");i.width=16,i.height=16;var e=i.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,16,16),new Ee(new wt(new pO(i)))}function Nh(i){i.destroy=function(){},i.on=function(){},i.once=function(){},i.emit=function(){}}Ee.EMPTY=new Ee(new wt);Nh(Ee.EMPTY);Nh(Ee.EMPTY.baseTexture);Ee.WHITE=tL();Nh(Ee.WHITE);Nh(Ee.WHITE.baseTexture);var jo=function(i){Ke(e,i);function e(n,t){var r=this,o=null;if(!(n instanceof kh)){var s=arguments[1],a=arguments[2],l=arguments[3],c=arguments[4];console.warn("Please use RenderTexture.create("+s+", "+a+") instead of the ctor directly."),o=arguments[0],t=null,n=new kh({width:s,height:a,scaleMode:l,resolution:c})}return r=i.call(this,n,t)||this,r.legacyRenderer=o,r.valid=!0,r.filterFrame=null,r.filterPoolKey=null,r.updateUvs(),r}return Object.defineProperty(e.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),e.prototype.resize=function(n,t,r){r===void 0&&(r=!0),n=Math.ceil(n),t=Math.ceil(t),this.valid=n>0&&t>0,this._frame.width=this.orig.width=n,this._frame.height=this.orig.height=t,r&&this.baseTexture.resize(n,t),this.updateUvs()},e.prototype.setResolution=function(n){var t=this.baseTexture;t.resolution!==n&&(t.setResolution(n),this.resize(t.width,t.height,!1))},e.create=function(n){return typeof n=="number"&&(n={width:n,height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),new e(new kh(n))},e}(Ee),nL=function(){function i(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return i.prototype.createTexture=function(e,n){var t=new kh(Object.assign({width:e,height:n,resolution:1},this.textureOptions));return new jo(t)},i.prototype.getOptimalTexture=function(e,n,t){t===void 0&&(t=1);var r=i.SCREEN_KEY;e*=t,n*=t,(!this.enableFullScreen||e!==this._pixelsWidth||n!==this._pixelsHeight)&&(e=gc(e),n=gc(n),r=(e&65535)<<16|n&65535),this.texturePool[r]||(this.texturePool[r]=[]);var o=this.texturePool[r].pop();return o||(o=this.createTexture(e,n)),o.filterPoolKey=r,o.setResolution(t),o},i.prototype.getFilterTexture=function(e,n){var t=this.getOptimalTexture(e.width,e.height,n||e.resolution);return t.filterFrame=e.filterFrame,t},i.prototype.returnTexture=function(e){var n=e.filterPoolKey;e.filterFrame=null,this.texturePool[n].push(e)},i.prototype.returnFilterTexture=function(e){this.returnTexture(e)},i.prototype.clear=function(e){if(e=e!==!1,e)for(var n in this.texturePool){var t=this.texturePool[n];if(t)for(var r=0;r<t.length;r++)t[r].destroy(!0)}this.texturePool={}},i.prototype.setScreenSize=function(e){if(!(e.width===this._pixelsWidth&&e.height===this._pixelsHeight)){var n=i.SCREEN_KEY,t=this.texturePool[n];if(this.enableFullScreen=e.width>0&&e.height>0,t)for(var r=0;r<t.length;r++)t[r].destroy(!0);this.texturePool[n]=[],this._pixelsWidth=e.width,this._pixelsHeight=e.height}},i.SCREEN_KEY="screen",i}(),eO=function(){function i(e,n,t,r,o,s,a){n===void 0&&(n=0),t===void 0&&(t=!1),r===void 0&&(r=5126),this.buffer=e,this.size=n,this.normalized=t,this.type=r,this.stride=o,this.start=s,this.instance=a}return i.prototype.destroy=function(){this.buffer=null},i.from=function(e,n,t,r,o){return new i(e,n,t,r,o)},i}(),iL=0,ln=function(){function i(e,n,t){n===void 0&&(n=!0),t===void 0&&(t=!1),this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=t,this.static=n,this.id=iL++,this.disposeRunner=new Cn("disposeBuffer")}return i.prototype.update=function(e){this.data=e||this.data,this._updateID++},i.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},i.prototype.destroy=function(){this.dispose(),this.data=null},i.from=function(e){return e instanceof Array&&(e=new Float32Array(e)),new i(e)},i}();function gO(i){if(i.BYTES_PER_ELEMENT===4)return i instanceof Float32Array?"Float32Array":i instanceof Uint32Array?"Uint32Array":"Int32Array";if(i.BYTES_PER_ELEMENT===2){if(i instanceof Uint16Array)return"Uint16Array"}else if(i.BYTES_PER_ELEMENT===1&&i instanceof Uint8Array)return"Uint8Array";return null}var rL={Float32Array,Uint32Array,Int32Array,Uint8Array};function oL(i,e){for(var n=0,t=0,r={},o=0;o<i.length;o++)t+=e[o],n+=i[o].length;for(var s=new ArrayBuffer(n*4),a=null,l=0,o=0;o<i.length;o++){var c=e[o],u=i[o],d=gO(u);r[d]||(r[d]=new rL[d](s)),a=r[d];for(var h=0;h<u.length;h++){var p=(h/c|0)*t+l,f=h%c;a[p+f]=u[h]}l+=c}return new Float32Array(s)}var tO={5126:4,5123:2,5121:1},sL=0,aL={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},Ds=function(){function i(e,n){e===void 0&&(e=[]),n===void 0&&(n={}),this.buffers=e,this.indexBuffer=null,this.attributes=n,this.glVertexArrayObjects={},this.id=sL++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Cn("disposeGeometry"),this.refCount=0}return i.prototype.addAttribute=function(e,n,t,r,o,s,a,l){if(t===void 0&&(t=0),r===void 0&&(r=!1),l===void 0&&(l=!1),!n)throw new Error("You must pass a buffer when creating an attribute");n instanceof ln||(n instanceof Array&&(n=new Float32Array(n)),n=new ln(n));var c=e.split("|");if(c.length>1){for(var u=0;u<c.length;u++)this.addAttribute(c[u],n,t,r,o);return this}var d=this.buffers.indexOf(n);return d===-1&&(this.buffers.push(n),d=this.buffers.length-1),this.attributes[e]=new eO(d,t,r,o,s,a,l),this.instanced=this.instanced||l,this},i.prototype.getAttribute=function(e){return this.attributes[e]},i.prototype.getBuffer=function(e){return this.buffers[this.getAttribute(e).buffer]},i.prototype.addIndex=function(e){return e instanceof ln||(e instanceof Array&&(e=new Uint16Array(e)),e=new ln(e)),e.index=!0,this.indexBuffer=e,this.buffers.indexOf(e)===-1&&this.buffers.push(e),this},i.prototype.getIndex=function(){return this.indexBuffer},i.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var e=[],n=[],t=new ln,r;for(r in this.attributes){var o=this.attributes[r],s=this.buffers[o.buffer];e.push(s.data),n.push(o.size*tO[o.type]/4),o.buffer=0}for(t.data=oL(e,n),r=0;r<this.buffers.length;r++)this.buffers[r]!==this.indexBuffer&&this.buffers[r].destroy();return this.buffers=[t],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},i.prototype.getSize=function(){for(var e in this.attributes){var n=this.attributes[e],t=this.buffers[n.buffer];return t.data.length/(n.stride/4||n.size)}return 0},i.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},i.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},i.prototype.clone=function(){for(var e=new i,n=0;n<this.buffers.length;n++)e.buffers[n]=new ln(this.buffers[n].data.slice(0));for(var n in this.attributes){var t=this.attributes[n];e.attributes[n]=new eO(t.buffer,t.size,t.normalized,t.type,t.stride,t.start,t.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.index=!0),e},i.merge=function(e){for(var n=new i,t=[],r=[],o=[],s,a=0;a<e.length;a++){s=e[a];for(var l=0;l<s.buffers.length;l++)r[l]=r[l]||0,r[l]+=s.buffers[l].data.length,o[l]=0}for(var a=0;a<s.buffers.length;a++)t[a]=new aL[gO(s.buffers[a].data)](r[a]),n.buffers[a]=new ln(t[a]);for(var a=0;a<e.length;a++){s=e[a];for(var l=0;l<s.buffers.length;l++)t[l].set(s.buffers[l].data,o[l]),o[l]+=s.buffers[l].data.length}if(n.attributes=s.attributes,s.indexBuffer){n.indexBuffer=n.buffers[s.buffers.indexOf(s.indexBuffer)],n.indexBuffer.index=!0;for(var c=0,u=0,d=0,h=0,a=0;a<s.buffers.length;a++)if(s.buffers[a]!==s.indexBuffer){h=a;break}for(var a in s.attributes){var p=s.attributes[a];(p.buffer|0)===h&&(u+=p.size*tO[p.type]/4)}for(var a=0;a<e.length;a++){for(var f=e[a].indexBuffer.data,l=0;l<f.length;l++)n.indexBuffer.data[l+d]+=c;c+=s.buffers[h].data.length/u,d+=f.length}}return n},i}(),lL=function(i){Ke(e,i);function e(){var n=i.call(this)||this;return n.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),n}return e}(Ds),xv=function(i){Ke(e,i);function e(){var n=i.call(this)||this;return n.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),n.uvs=new Float32Array([0,0,1,0,1,1,0,1]),n.vertexBuffer=new ln(n.vertices),n.uvBuffer=new ln(n.uvs),n.addAttribute("aVertexPosition",n.vertexBuffer).addAttribute("aTextureCoord",n.uvBuffer).addIndex([0,1,2,0,2,3]),n}return e.prototype.map=function(n,t){var r=0,o=0;return this.uvs[0]=r,this.uvs[1]=o,this.uvs[2]=r+t.width/n.width,this.uvs[3]=o,this.uvs[4]=r+t.width/n.width,this.uvs[5]=o+t.height/n.height,this.uvs[6]=r,this.uvs[7]=o+t.height/n.height,r=t.x,o=t.y,this.vertices[0]=r,this.vertices[1]=o,this.vertices[2]=r+t.width,this.vertices[3]=o,this.vertices[4]=r+t.width,this.vertices[5]=o+t.height,this.vertices[6]=r,this.vertices[7]=o+t.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}(Ds),cL=0,Fo=function(){function i(e,n){this.uniforms=e,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=cL++,this.static=!!n}return i.prototype.update=function(){this.dirtyId++},i.prototype.add=function(e,n,t){this.uniforms[e]=new i(n,t)},i.from=function(e,n){return new i(e,n)},i}(),uL=function(){function i(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new ze,this.destinationFrame=new ze,this.filters=[]}return i.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},i}(),dL=function(i){Ke(e,i);function e(n){var t=i.call(this,n)||this;return t.defaultFilterStack=[{}],t.texturePool=new nL,t.texturePool.setScreenSize(n.view),t.statePool=[],t.quad=new lL,t.quadUv=new xv,t.tempRect=new ze,t.activeState={},t.globalUniforms=new Fo({outputFrame:t.tempRect,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),t.forceClear=!1,t.useMaxPadding=!1,t}return e.prototype.push=function(n,t){for(var r=this.renderer,o=this.defaultFilterStack,s=this.statePool.pop()||new uL,a=t[0].resolution,l=t[0].padding,c=t[0].autoFit,u=t[0].legacy,d=1;d<t.length;d++){var h=t[d];a=Math.min(a,h.resolution),l=this.useMaxPadding?Math.max(l,h.padding):l+h.padding,c=c&&h.autoFit,u=u||h.legacy}o.length===1&&(this.defaultFilterStack[0].renderTexture=r.renderTexture.current),o.push(s),s.resolution=a,s.legacy=u,s.target=n,s.sourceFrame.copyFrom(n.filterArea||n.getBounds(!0)),s.sourceFrame.pad(l),c&&s.sourceFrame.fit(this.renderer.renderTexture.sourceFrame),s.sourceFrame.ceil(a),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,a),s.filters=t,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;var p=this.tempRect;p.width=s.sourceFrame.width,p.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,r.renderTexture.bind(s.renderTexture,s.sourceFrame,p),r.renderTexture.clear()},e.prototype.pop=function(){var n=this.defaultFilterStack,t=n.pop(),r=t.filters;this.activeState=t;var o=this.globalUniforms.uniforms;o.outputFrame=t.sourceFrame,o.resolution=t.resolution;var s=o.inputSize,a=o.inputPixel,l=o.inputClamp;if(s[0]=t.destinationFrame.width,s[1]=t.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],a[0]=s[0]*t.resolution,a[1]=s[1]*t.resolution,a[2]=1/a[0],a[3]=1/a[1],l[0]=.5*a[2],l[1]=.5*a[3],l[2]=t.sourceFrame.width*s[2]-.5*a[2],l[3]=t.sourceFrame.height*s[3]-.5*a[3],t.legacy){var c=o.filterArea;c[0]=t.destinationFrame.width,c[1]=t.destinationFrame.height,c[2]=t.sourceFrame.x,c[3]=t.sourceFrame.y,o.filterClamp=o.inputClamp}this.globalUniforms.update();var u=n[n.length-1];if(t.renderTexture.framebuffer.multisample>1&&this.renderer.framebuffer.blit(),r.length===1)r[0].apply(this,t.renderTexture,u.renderTexture,_r.BLEND,t),this.returnFilterTexture(t.renderTexture);else{var d=t.renderTexture,h=this.getOptimalFilterTexture(d.width,d.height,t.resolution);h.filterFrame=d.filterFrame;var p=0;for(p=0;p<r.length-1;++p){r[p].apply(this,d,h,_r.CLEAR,t);var f=d;d=h,h=f}r[p].apply(this,d,u.renderTexture,_r.BLEND,t),this.returnFilterTexture(d),this.returnFilterTexture(h)}t.clear(),this.statePool.push(t)},e.prototype.bindAndClear=function(n,t){if(t===void 0&&(t=_r.CLEAR),n&&n.filterFrame){var r=this.tempRect;r.width=n.filterFrame.width,r.height=n.filterFrame.height,this.renderer.renderTexture.bind(n,n.filterFrame,r)}else this.renderer.renderTexture.bind(n);typeof t=="boolean"&&(t=t?_r.CLEAR:_r.BLEND,li("5.2.1","Use CLEAR_MODES when using clear applyFilter option")),(t===_r.CLEAR||t===_r.BLIT&&this.forceClear)&&this.renderer.renderTexture.clear()},e.prototype.applyFilter=function(n,t,r,o){var s=this.renderer;this.bindAndClear(r,o),n.uniforms.uSampler=t,n.uniforms.filterGlobals=this.globalUniforms,s.state.set(n.state),s.shader.bind(n),n.legacy?(this.quadUv.map(t._frame,t.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(si.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(si.TRIANGLE_STRIP))},e.prototype.calculateSpriteMatrix=function(n,t){var r=this.activeState,o=r.sourceFrame,s=r.destinationFrame,a=t._texture.orig,l=n.set(s.width,0,0,s.height,o.x,o.y),c=t.worldTransform.copyTo(Rt.TEMP_MATRIX);return c.invert(),l.prepend(c),l.scale(1/a.width,1/a.height),l.translate(t.anchor.x,t.anchor.y),l},e.prototype.destroy=function(){this.texturePool.clear(!1)},e.prototype.getOptimalFilterTexture=function(n,t,r){return r===void 0&&(r=1),this.texturePool.getOptimalTexture(n,t,r)},e.prototype.getFilterTexture=function(n,t){if(typeof n=="number"){var r=n;n=t,t=r}n=n||this.activeState.renderTexture;var o=this.texturePool.getOptimalTexture(n.width,n.height,t||n.resolution);return o.filterFrame=n.filterFrame,o},e.prototype.returnFilterTexture=function(n){this.texturePool.returnTexture(n)},e.prototype.emptyPool=function(){this.texturePool.clear(!0)},e.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},e}(ci),Va=function(){function i(e){this.renderer=e}return i.prototype.flush=function(){},i.prototype.destroy=function(){this.renderer=null},i.prototype.start=function(){},i.prototype.stop=function(){this.flush()},i.prototype.render=function(e){},i}(),hL=function(i){Ke(e,i);function e(n){var t=i.call(this,n)||this;return t.emptyRenderer=new Va(n),t.currentRenderer=t.emptyRenderer,t}return e.prototype.setObjectRenderer=function(n){this.currentRenderer!==n&&(this.currentRenderer.stop(),this.currentRenderer=n,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.copyBoundTextures=function(n,t){for(var r=this.renderer.texture.boundTextures,o=t-1;o>=0;--o)n[o]=r[o]||null,n[o]&&(n[o]._batchLocation=o)},e.prototype.boundArray=function(n,t,r,o){for(var s=n.elements,a=n.ids,l=n.count,c=0,u=0;u<l;u++){var d=s[u],h=d._batchLocation;if(h>=0&&h<o&&t[h]===d){a[u]=h;continue}for(;c<o;){var p=t[c];if(p&&p._batchEnabled===r&&p._batchLocation===c){c++;continue}a[u]=c,d._batchLocation=c,t[c]=d;break}}},e}(ci),nO=0,pL=function(i){Ke(e,i);function e(n){var t=i.call(this,n)||this;return t.webGLVersion=1,t.extensions={},t.supports={uint32Indices:!1},t.handleContextLost=t.handleContextLost.bind(t),t.handleContextRestored=t.handleContextRestored.bind(t),n.view.addEventListener("webglcontextlost",t.handleContextLost,!1),n.view.addEventListener("webglcontextrestored",t.handleContextRestored,!1),t}return Object.defineProperty(e.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),e.prototype.contextChange=function(n){this.gl=n,this.renderer.gl=n,this.renderer.CONTEXT_UID=nO++,n.isContextLost()&&n.getExtension("WEBGL_lose_context")&&n.getExtension("WEBGL_lose_context").restoreContext()},e.prototype.initFromContext=function(n){this.gl=n,this.validateContext(n),this.renderer.gl=n,this.renderer.CONTEXT_UID=nO++,this.renderer.runners.contextChange.emit(n)},e.prototype.initFromOptions=function(n){var t=this.createContext(this.renderer.view,n);this.initFromContext(t)},e.prototype.createContext=function(n,t){var r;if(me.PREFER_ENV>=eo.WEBGL2&&(r=n.getContext("webgl2",t)),r)this.webGLVersion=2;else if(this.webGLVersion=1,r=n.getContext("webgl",t)||n.getContext("experimental-webgl",t),!r)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl},e.prototype.getExtensions=function(){var n=this.gl;this.webGLVersion===1?Object.assign(this.extensions,{drawBuffers:n.getExtension("WEBGL_draw_buffers"),depthTexture:n.getExtension("WEBGL_depth_texture"),loseContext:n.getExtension("WEBGL_lose_context"),vertexArrayObject:n.getExtension("OES_vertex_array_object")||n.getExtension("MOZ_OES_vertex_array_object")||n.getExtension("WEBKIT_OES_vertex_array_object"),anisotropicFiltering:n.getExtension("EXT_texture_filter_anisotropic"),uint32ElementIndex:n.getExtension("OES_element_index_uint"),floatTexture:n.getExtension("OES_texture_float"),floatTextureLinear:n.getExtension("OES_texture_float_linear"),textureHalfFloat:n.getExtension("OES_texture_half_float"),textureHalfFloatLinear:n.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,{anisotropicFiltering:n.getExtension("EXT_texture_filter_anisotropic"),colorBufferFloat:n.getExtension("EXT_color_buffer_float"),floatTextureLinear:n.getExtension("OES_texture_float_linear")})},e.prototype.handleContextLost=function(n){n.preventDefault()},e.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},e.prototype.destroy=function(){var n=this.renderer.view;n.removeEventListener("webglcontextlost",this.handleContextLost),n.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},e.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},e.prototype.validateContext=function(n){var t=n.getContextAttributes(),r="WebGL2RenderingContext"in window&&n instanceof window.WebGL2RenderingContext;r&&(this.webGLVersion=2),t.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var o=r||!!n.getExtension("OES_element_index_uint");this.supports.uint32Indices=o,o||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},e}(ci),fL=function(){function i(e){this.framebuffer=e,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=La.NONE,this.msaaBuffer=null,this.blitFramebuffer=null}return i}(),mL=new ze,gL=function(i){Ke(e,i);function e(n){var t=i.call(this,n)||this;return t.managedFramebuffers=[],t.unknownFramebuffer=new Pv(10,10),t.msaaSamples=null,t}return e.prototype.contextChange=function(){var n=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new ze,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),this.renderer.context.webGLVersion===1){var t=this.renderer.context.extensions.drawBuffers,r=this.renderer.context.extensions.depthTexture;me.PREFER_ENV===eo.WEBGL_LEGACY&&(t=null,r=null),t?n.drawBuffers=function(o){return t.drawBuffersWEBGL(o)}:(this.hasMRT=!1,n.drawBuffers=function(){}),r||(this.writeDepthTexture=!1)}else this.msaaSamples=n.getInternalformatParameter(n.RENDERBUFFER,n.RGBA8,n.SAMPLES)},e.prototype.bind=function(n,t){var r=this.gl;if(n){var o=n.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(n);this.current!==n&&(this.current=n,r.bindFramebuffer(r.FRAMEBUFFER,o.framebuffer)),o.dirtyId!==n.dirtyId&&(o.dirtyId=n.dirtyId,o.dirtyFormat!==n.dirtyFormat?(o.dirtyFormat=n.dirtyFormat,this.updateFramebuffer(n)):o.dirtySize!==n.dirtySize&&(o.dirtySize=n.dirtySize,this.resizeFramebuffer(n)));for(var s=0;s<n.colorTextures.length;s++){var a=n.colorTextures[s];this.renderer.texture.unbind(a.parentTextureArray||a)}n.depthTexture&&this.renderer.texture.unbind(n.depthTexture),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,n.width,n.height)}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},e.prototype.setViewport=function(n,t,r,o){var s=this.viewport;(s.width!==r||s.height!==o||s.x!==n||s.y!==t)&&(s.x=n,s.y=t,s.width=r,s.height=o,this.gl.viewport(n,t,r,o))},Object.defineProperty(e.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),e.prototype.clear=function(n,t,r,o,s){s===void 0&&(s=vh.COLOR|vh.DEPTH);var a=this.gl;a.clearColor(n,t,r,o),a.clear(s)},e.prototype.initFramebuffer=function(n){var t=this.gl,r=new fL(t.createFramebuffer());return r.multisample=this.detectSamples(n.multisample),n.glFramebuffers[this.CONTEXT_UID]=r,this.managedFramebuffers.push(n),n.disposeRunner.add(this),r},e.prototype.resizeFramebuffer=function(n){var t=this.gl,r=n.glFramebuffers[this.CONTEXT_UID];r.stencil&&(t.bindRenderbuffer(t.RENDERBUFFER,r.stencil),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,n.width,n.height));for(var o=n.colorTextures,s=0;s<o.length;s++)this.renderer.texture.bind(o[s],0);n.depthTexture&&this.renderer.texture.bind(n.depthTexture,0)},e.prototype.updateFramebuffer=function(n){var t=this.gl,r=n.glFramebuffers[this.CONTEXT_UID],o=n.colorTextures,s=o.length;t.drawBuffers||(s=Math.min(s,1)),r.multisample>1&&(r.msaaBuffer=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,r.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,r.multisample,t.RGBA8,n.width,n.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,r.msaaBuffer));for(var a=[],l=0;l<s;l++)if(!(l===0&&r.multisample>1)){var c=n.colorTextures[l],u=c.parentTextureArray||c;this.renderer.texture.bind(u,0),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+l,c.target,u._glTextures[this.CONTEXT_UID].texture,0),a.push(t.COLOR_ATTACHMENT0+l)}if(a.length>1&&t.drawBuffers(a),n.depthTexture){var d=this.writeDepthTexture;if(d){var h=n.depthTexture;this.renderer.texture.bind(h,0),t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,h._glTextures[this.CONTEXT_UID].texture,0)}}!r.stencil&&(n.stencil||n.depth)&&(r.stencil=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,r.stencil),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,n.width,n.height),n.depthTexture||t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,r.stencil))},e.prototype.detectSamples=function(n){var t=this.msaaSamples,r=La.NONE;if(n<=1||t===null)return r;for(var o=0;o<t.length;o++)if(t[o]<=n){r=t[o];break}return r===1&&(r=La.NONE),r},e.prototype.blit=function(n,t,r){var o=this,s=o.current,a=o.renderer,l=o.gl,c=o.CONTEXT_UID;if(a.context.webGLVersion===2&&s){var u=s.glFramebuffers[c];if(u){if(!n){if(u.multisample<=1)return;u.blitFramebuffer||(u.blitFramebuffer=new Pv(s.width,s.height),u.blitFramebuffer.addColorTexture(0,s.colorTextures[0])),n=u.blitFramebuffer,n.width=s.width,n.height=s.height}t||(t=mL,t.width=s.width,t.height=s.height),r||(r=t);var d=t.width===r.width&&t.height===r.height;this.bind(n),l.bindFramebuffer(l.READ_FRAMEBUFFER,u.framebuffer),l.blitFramebuffer(t.x,t.y,t.width,t.height,r.x,r.y,r.width,r.height,l.COLOR_BUFFER_BIT,d?l.NEAREST:l.LINEAR)}}},e.prototype.disposeFramebuffer=function(n,t){var r=n.glFramebuffers[this.CONTEXT_UID],o=this.gl;if(r){delete n.glFramebuffers[this.CONTEXT_UID];var s=this.managedFramebuffers.indexOf(n);s>=0&&this.managedFramebuffers.splice(s,1),n.disposeRunner.remove(this),t||(o.deleteFramebuffer(r.framebuffer),r.stencil&&o.deleteRenderbuffer(r.stencil))}},e.prototype.disposeAll=function(n){var t=this.managedFramebuffers;this.managedFramebuffers=[];for(var r=0;r<t.length;r++)this.disposeFramebuffer(t[r],n)},e.prototype.forceStencil=function(){var n=this.current;if(n){var t=n.glFramebuffers[this.CONTEXT_UID];if(!(!t||t.stencil)){n.enableStencil();var r=n.width,o=n.height,s=this.gl,a=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,a),s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,r,o),t.stencil=a,s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,a)}}},e.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new ze},e}(ci),_L=function(){function i(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return i}(),uv={5126:4,5123:2,5121:1},vL=function(i){Ke(e,i);function e(n){var t=i.call(this,n)||this;return t._activeGeometry=null,t._activeVao=null,t.hasVao=!0,t.hasInstance=!0,t.canUseUInt32ElementIndex=!1,t.managedGeometries={},t.managedBuffers={},t}return e.prototype.contextChange=function(){this.disposeAll(!0);var n=this.gl=this.renderer.gl,t=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,t.webGLVersion!==2){var r=this.renderer.context.extensions.vertexArrayObject;me.PREFER_ENV===eo.WEBGL_LEGACY&&(r=null),r?(n.createVertexArray=function(){return r.createVertexArrayOES()},n.bindVertexArray=function(s){return r.bindVertexArrayOES(s)},n.deleteVertexArray=function(s){return r.deleteVertexArrayOES(s)}):(this.hasVao=!1,n.createVertexArray=function(){return null},n.bindVertexArray=function(){return null},n.deleteVertexArray=function(){return null})}if(t.webGLVersion!==2){var o=n.getExtension("ANGLE_instanced_arrays");o?(n.vertexAttribDivisor=function(s,a){return o.vertexAttribDivisorANGLE(s,a)},n.drawElementsInstanced=function(s,a,l,c,u){return o.drawElementsInstancedANGLE(s,a,l,c,u)},n.drawArraysInstanced=function(s,a,l,c){return o.drawArraysInstancedANGLE(s,a,l,c)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=t.webGLVersion===2||!!t.extensions.uint32ElementIndex},e.prototype.bind=function(n,t){t=t||this.renderer.shader.shader;var r=this.gl,o=n.glVertexArrayObjects[this.CONTEXT_UID],s=!1;o||(this.managedGeometries[n.id]=n,n.disposeRunner.add(this),n.glVertexArrayObjects[this.CONTEXT_UID]=o={},s=!0);var a=o[t.program.id]||this.initGeometryVao(n,t.program,s);this._activeGeometry=n,this._activeVao!==a&&(this._activeVao=a,this.hasVao?r.bindVertexArray(a):this.activateVao(n,t.program)),this.updateBuffers()},e.prototype.reset=function(){this.unbind()},e.prototype.updateBuffers=function(){for(var n=this._activeGeometry,t=this.gl,r=0;r<n.buffers.length;r++){var o=n.buffers[r],s=o._glBuffers[this.CONTEXT_UID];if(o._updateID!==s.updateID){s.updateID=o._updateID;var a=o.index?t.ELEMENT_ARRAY_BUFFER:t.ARRAY_BUFFER;if(t.bindBuffer(a,s.buffer),this._boundBuffer=s,s.byteLength>=o.data.byteLength)t.bufferSubData(a,0,o.data);else{var l=o.static?t.STATIC_DRAW:t.DYNAMIC_DRAW;s.byteLength=o.data.byteLength,t.bufferData(a,o.data,l)}}}},e.prototype.checkCompatibility=function(n,t){var r=n.attributes,o=t.attributeData;for(var s in o)if(!r[s])throw new Error('shader and geometry incompatible, geometry missing the "'+s+'" attribute')},e.prototype.getSignature=function(n,t){var r=n.attributes,o=t.attributeData,s=["g",n.id];for(var a in r)o[a]&&s.push(a);return s.join("-")},e.prototype.initGeometryVao=function(n,t,r){r===void 0&&(r=!0),this.checkCompatibility(n,t);var o=this.gl,s=this.CONTEXT_UID,a=this.getSignature(n,t),l=n.glVertexArrayObjects[this.CONTEXT_UID],c=l[a];if(c)return l[t.id]=c,c;var u=n.buffers,d=n.attributes,h={},p={};for(var f in u)h[f]=0,p[f]=0;for(var f in d)!d[f].size&&t.attributeData[f]?d[f].size=t.attributeData[f].size:d[f].size||console.warn("PIXI Geometry attribute '"+f+"' size cannot be determined (likely the bound shader does not have the attribute)"),h[d[f].buffer]+=d[f].size*uv[d[f].type];for(var f in d){var m=d[f],_=m.size;m.stride===void 0&&(h[m.buffer]===_*uv[m.type]?m.stride=0:m.stride=h[m.buffer]),m.start===void 0&&(m.start=p[m.buffer],p[m.buffer]+=_*uv[m.type])}c=o.createVertexArray(),o.bindVertexArray(c);for(var P=0;P<u.length;P++){var I=u[P];I._glBuffers[s]||(I._glBuffers[s]=new _L(o.createBuffer()),this.managedBuffers[I.id]=I,I.disposeRunner.add(this)),r&&I._glBuffers[s].refCount++}return this.activateVao(n,t),this._activeVao=c,l[t.id]=c,l[a]=c,c},e.prototype.disposeBuffer=function(n,t){if(this.managedBuffers[n.id]){delete this.managedBuffers[n.id];var r=n._glBuffers[this.CONTEXT_UID],o=this.gl;n.disposeRunner.remove(this),r&&(t||o.deleteBuffer(r.buffer),delete n._glBuffers[this.CONTEXT_UID])}},e.prototype.disposeGeometry=function(n,t){if(this.managedGeometries[n.id]){delete this.managedGeometries[n.id];var r=n.glVertexArrayObjects[this.CONTEXT_UID],o=this.gl,s=n.buffers;if(n.disposeRunner.remove(this),!!r){for(var a=0;a<s.length;a++){var l=s[a]._glBuffers[this.CONTEXT_UID];l.refCount--,l.refCount===0&&!t&&this.disposeBuffer(s[a],t)}if(!t){for(var c in r)if(c[0]==="g"){var u=r[c];this._activeVao===u&&this.unbind(),o.deleteVertexArray(u)}}delete n.glVertexArrayObjects[this.CONTEXT_UID]}}},e.prototype.disposeAll=function(n){for(var t=Object.keys(this.managedGeometries),r=0;r<t.length;r++)this.disposeGeometry(this.managedGeometries[t[r]],n);t=Object.keys(this.managedBuffers);for(var r=0;r<t.length;r++)this.disposeBuffer(this.managedBuffers[t[r]],n)},e.prototype.activateVao=function(n,t){var r=this.gl,o=this.CONTEXT_UID,s=n.buffers,a=n.attributes;n.indexBuffer&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,n.indexBuffer._glBuffers[o].buffer);var l=null;for(var c in a){var u=a[c],d=s[u.buffer],h=d._glBuffers[o];if(t.attributeData[c]){l!==h&&(r.bindBuffer(r.ARRAY_BUFFER,h.buffer),l=h);var p=t.attributeData[c].location;if(r.enableVertexAttribArray(p),r.vertexAttribPointer(p,u.size,u.type||r.FLOAT,u.normalized,u.stride,u.start),u.instance)if(this.hasInstance)r.vertexAttribDivisor(p,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},e.prototype.draw=function(n,t,r,o){var s=this.gl,a=this._activeGeometry;if(a.indexBuffer){var l=a.indexBuffer.data.BYTES_PER_ELEMENT,c=l===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;l===2||l===4&&this.canUseUInt32ElementIndex?a.instanced?s.drawElementsInstanced(n,t||a.indexBuffer.data.length,c,(r||0)*l,o||1):s.drawElements(n,t||a.indexBuffer.data.length,c,(r||0)*l):console.warn("unsupported index buffer type: uint32")}else a.instanced?s.drawArraysInstanced(n,r,t||a.getSize(),o||1):s.drawArrays(n,r,t||a.getSize());return this},e.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},e}(ci),yL=function(){function i(e){e===void 0&&(e=null),this.type=ai.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}return i.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=ai.NONE,this.autoDetect=!0),this._target=null},i.prototype.copyCountersOrReset=function(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},i}();function iO(i,e,n){var t=i.createShader(e);return i.shaderSource(t,n),i.compileShader(t),t}function _O(i,e,n,t){var r=iO(i,i.VERTEX_SHADER,e),o=iO(i,i.FRAGMENT_SHADER,n),s=i.createProgram();if(i.attachShader(s,r),i.attachShader(s,o),t)for(var a in t)i.bindAttribLocation(s,t[a],a);return i.linkProgram(s),i.getProgramParameter(s,i.LINK_STATUS)||(i.getShaderParameter(r,i.COMPILE_STATUS)||(console.warn(e),console.error(i.getShaderInfoLog(r))),i.getShaderParameter(o,i.COMPILE_STATUS)||(console.warn(n),console.error(i.getShaderInfoLog(o))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",i.getProgramParameter(s,i.VALIDATE_STATUS)),console.error("gl.getError()",i.getError()),i.getProgramInfoLog(s)!==""&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",i.getProgramInfoLog(s)),i.deleteProgram(s),s=null),i.deleteShader(r),i.deleteShader(o),s}function dv(i){for(var e=new Array(i),n=0;n<e.length;n++)e[n]=!1;return e}function vO(i,e){switch(i){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return dv(2*e);case"bvec3":return dv(3*e);case"bvec4":return dv(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var yO={},_c=yO;function CO(){if(_c===yO||_c&&_c.isContextLost()){var i=document.createElement("canvas"),e=void 0;me.PREFER_ENV>=eo.WEBGL2&&(e=i.getContext("webgl2",{})),e||(e=i.getContext("webgl",{})||i.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),_c=e}return _c}var Th;function CL(){if(!Th){Th=vr.MEDIUM;var i=CO();if(i&&i.getShaderPrecisionFormat){var e=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT);Th=e.precision?vr.HIGH:vr.MEDIUM}}return Th}function rO(i,e,n){if(i.substring(0,9)!=="precision"){var t=e;return e===vr.HIGH&&n!==vr.HIGH&&(t=vr.MEDIUM),"precision "+t+` float;
`+i}else if(n!==vr.HIGH&&i.substring(0,15)==="precision highp")return i.replace("precision highp","precision mediump");return i}var bL={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function PL(i){return bL[i]}var Ah=null,oO={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function sO(i,e){if(!Ah){var n=Object.keys(oO);Ah={};for(var t=0;t<n.length;++t){var r=n[t];Ah[i[r]]=oO[r]}}return Ah[e]}var hv=[{test:function(i){return i.type==="float"&&i.size===1},code:function(i){return`
            if(uv["`+i+'"] !== ud["'+i+`"].value)
            {
                ud["`+i+'"].value = uv["'+i+`"]
                gl.uniform1f(ud["`+i+'"].location, uv["'+i+`"])
            }
            `}},{test:function(i){return(i.type==="sampler2D"||i.type==="samplerCube"||i.type==="sampler2DArray")&&i.size===1&&!i.isArray},code:function(i){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+i+`"], t);

            if(ud["`+i+`"].value !== t)
            {
                ud["`+i+`"].value = t;
                gl.uniform1i(ud["`+i+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(i,e){return i.type==="mat3"&&i.size===1&&e.a!==void 0},code:function(i){return`
            gl.uniformMatrix3fv(ud["`+i+'"].location, false, uv["'+i+`"].toArray(true));
            `}},{test:function(i,e){return i.type==="vec2"&&i.size===1&&e.x!==void 0},code:function(i){return`
                cv = ud["`+i+`"].value;
                v = uv["`+i+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+i+`"].location, v.x, v.y);
                }`}},{test:function(i){return i.type==="vec2"&&i.size===1},code:function(i){return`
                cv = ud["`+i+`"].value;
                v = uv["`+i+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+i+`"].location, v[0], v[1]);
                }
            `}},{test:function(i,e){return i.type==="vec4"&&i.size===1&&e.width!==void 0},code:function(i){return`
                cv = ud["`+i+`"].value;
                v = uv["`+i+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+i+`"].location, v.x, v.y, v.width, v.height)
                }`}},{test:function(i){return i.type==="vec4"&&i.size===1},code:function(i){return`
                cv = ud["`+i+`"].value;
                v = uv["`+i+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+i+`"].location, v[0], v[1], v[2], v[3])
                }`}}],wL={float:`
    if(cv !== v)
    {
        cv.v = v;
        gl.uniform1f(location, v)
    }`,vec2:`
    if(cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},xL={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function ML(i,e){var n=[`
        var v = null;
        var cv = null
        var t = 0;
        var gl = renderer.gl
    `];for(var t in i.uniforms){var r=e[t];if(!r){i.uniforms[t].group&&n.push(`
                    renderer.shader.syncUniformGroup(uv["`+t+`"], syncData);
                `);continue}for(var o=i.uniforms[t],s=!1,a=0;a<hv.length;a++)if(hv[a].test(r,o)){n.push(hv[a].code(t,o)),s=!0;break}if(!s){var l=r.size===1?wL:xL,c=l[r.type].replace("location",'ud["'+t+'"].location');n.push(`
            cv = ud["`+t+`"].value;
            v = uv["`+t+`"];
            `+c+";")}}return new Function("ud","uv","renderer","syncData",n.join(`
`))}var OL=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function EL(i){for(var e="",n=0;n<i;++n)n>0&&(e+=`
else `),n<i-1&&(e+="if(test == "+n+".0){}");return e}function IL(i,e){if(i===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var n=e.createShader(e.FRAGMENT_SHADER);;){var t=OL.replace(/%forloop%/gi,EL(i));if(e.shaderSource(n,t),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))i=i/2|0;else break}return i}var vc;function SL(){if(typeof vc=="boolean")return vc;try{var i=new Function("param1","param2","param3","return param1[param2] === param3;");vc=i({a:"b"},"a","b")===!0}catch{vc=!1}return vc}var TL=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,AL=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,DL=0,Dh={},Pc=function(){function i(e,n,t){t===void 0&&(t="pixi-shader"),this.id=DL++,this.vertexSrc=e||i.defaultVertexSrc,this.fragmentSrc=n||i.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(t=t.replace(/\s+/g,"-"),Dh[t]?(Dh[t]++,t+="-"+Dh[t]):Dh[t]=1,this.vertexSrc="#define SHADER_NAME "+t+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+t+`
`+this.fragmentSrc,this.vertexSrc=rO(this.vertexSrc,me.PRECISION_VERTEX,vr.HIGH),this.fragmentSrc=rO(this.fragmentSrc,me.PRECISION_FRAGMENT,CL())),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}return i.prototype.extractData=function(e,n){var t=CO();if(t){var r=_O(t,e,n);this.attributeData=this.getAttributeData(r,t),this.uniformData=this.getUniformData(r,t),t.deleteProgram(r)}else this.uniformData={},this.attributeData={}},i.prototype.getAttributeData=function(e,n){for(var t={},r=[],o=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES),s=0;s<o;s++){var a=n.getActiveAttrib(e,s),l=sO(n,a.type),c={type:l,name:a.name,size:PL(l),location:0};t[a.name]=c,r.push(c)}r.sort(function(u,d){return u.name>d.name?1:-1});for(var s=0;s<r.length;s++)r[s].location=s;return t},i.prototype.getUniformData=function(e,n){for(var t={},r=n.getProgramParameter(e,n.ACTIVE_UNIFORMS),o=0;o<r;o++){var s=n.getActiveUniform(e,o),a=s.name.replace(/\[.*?\]$/,""),l=s.name.match(/\[.*?\]$/),c=sO(n,s.type);t[a]={type:c,size:s.size,isArray:l,value:vO(c,s.size)}}return t},Object.defineProperty(i,"defaultVertexSrc",{get:function(){return AL},enumerable:!1,configurable:!0}),Object.defineProperty(i,"defaultFragmentSrc",{get:function(){return TL},enumerable:!1,configurable:!0}),i.from=function(e,n,t){var r=e+n,o=ev[r];return o||(ev[r]=o=new i(e,n,t)),o},i}(),$i=function(){function i(e,n){this.program=e,n?n instanceof Fo?this.uniformGroup=n:this.uniformGroup=new Fo(n):this.uniformGroup=new Fo({});for(var t in e.uniformData)this.uniformGroup.uniforms[t]instanceof Array&&(this.uniformGroup.uniforms[t]=new Float32Array(this.uniformGroup.uniforms[t]))}return i.prototype.checkUniformExists=function(e,n){if(n.uniforms[e])return!0;for(var t in n.uniforms){var r=n.uniforms[t];if(r.group&&this.checkUniformExists(e,r))return!0}return!1},i.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(i.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),i.from=function(e,n,t){var r=Pc.from(e,n);return new i(r,t)},i}(),pv=0,fv=1,mv=2,gv=3,_v=4,Ki=function(){function i(){this.data=0,this.blendMode=Oe.NORMAL,this.polygonOffset=0,this.blend=!0}return Object.defineProperty(i.prototype,"blend",{get:function(){return!!(this.data&1<<pv)},set:function(e){!!(this.data&1<<pv)!==e&&(this.data^=1<<pv)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"offsets",{get:function(){return!!(this.data&1<<fv)},set:function(e){!!(this.data&1<<fv)!==e&&(this.data^=1<<fv)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"culling",{get:function(){return!!(this.data&1<<mv)},set:function(e){!!(this.data&1<<mv)!==e&&(this.data^=1<<mv)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"depthTest",{get:function(){return!!(this.data&1<<gv)},set:function(e){!!(this.data&1<<gv)!==e&&(this.data^=1<<gv)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<_v)},set:function(e){!!(this.data&1<<_v)!==e&&(this.data^=1<<_v)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"blendMode",{get:function(){return this._blendMode},set:function(e){this.blend=e!==Oe.NONE,this._blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(e){this.offsets=!!e,this._polygonOffset=e},enumerable:!1,configurable:!0}),i.for2d=function(){var e=new i;return e.depthTest=!1,e.blend=!0,e},i}(),kL=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,NL=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,qn=function(i){Ke(e,i);function e(n,t,r){var o=this,s=Pc.from(n||e.defaultVertexSrc,t||e.defaultFragmentSrc);return o=i.call(this,s,r)||this,o.padding=0,o.resolution=me.FILTER_RESOLUTION,o.enabled=!0,o.autoFit=!0,o.legacy=!!o.program.attributeData.aTextureCoord,o.state=new Ki,o}return e.prototype.apply=function(n,t,r,o,s){n.applyFilter(this,t,r,o)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(n){this.state.blendMode=n},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultVertexSrc",{get:function(){return kL},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return NL},enumerable:!1,configurable:!0}),e}($i),RL=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,FL=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,aO=new Rt,wc=function(){function i(e,n){this._texture=e,this.mapCoord=new Rt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof n>"u"?.5:n,this.isSimple=!1}return Object.defineProperty(i.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture=e,this._textureID=-1},enumerable:!1,configurable:!0}),i.prototype.multiplyUvs=function(e,n){n===void 0&&(n=e);for(var t=this.mapCoord,r=0;r<e.length;r+=2){var o=e[r],s=e[r+1];n[r]=o*t.a+s*t.c+t.tx,n[r+1]=o*t.b+s*t.d+t.ty}return n},i.prototype.update=function(e){var n=this._texture;if(!n||!n.valid||!e&&this._textureID===n._updateID)return!1;this._textureID=n._updateID,this._updateID++;var t=n._uvs;this.mapCoord.set(t.x1-t.x0,t.y1-t.y0,t.x3-t.x0,t.y3-t.y0,t.x0,t.y0);var r=n.orig,o=n.trim;o&&(aO.set(r.width/o.width,0,0,r.height/o.height,-o.x/o.width,-o.y/o.height),this.mapCoord.append(aO));var s=n.baseTexture,a=this.uClampFrame,l=this.clampMargin/s.resolution,c=this.clampOffset;return a[0]=(n._frame.x+l+c)/s.width,a[1]=(n._frame.y+l+c)/s.height,a[2]=(n._frame.x+n._frame.width-l+c)/s.width,a[3]=(n._frame.y+n._frame.height-l+c)/s.height,this.uClampOffset[0]=c/s.realWidth,this.uClampOffset[1]=c/s.realHeight,this.isSimple=n._frame.width===s.width&&n._frame.height===s.height&&n.rotate===0,!0},i}(),LL=function(i){Ke(e,i);function e(n){var t=this,r=new Rt;return t=i.call(this,RL,FL)||this,n.renderable=!1,t.maskSprite=n,t.maskMatrix=r,t}return e.prototype.apply=function(n,t,r,o){var s=this.maskSprite,a=s._texture;a.valid&&(a.uvMatrix||(a.uvMatrix=new wc(a,0)),a.uvMatrix.update(),this.uniforms.npmAlpha=a.baseTexture.alphaMode?0:1,this.uniforms.mask=a,this.uniforms.otherMatrix=n.calculateSpriteMatrix(this.maskMatrix,s).prepend(a.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=a.uvMatrix.uClampFrame,n.applyFilter(this,t,r,o))},e}(qn),jL=function(i){Ke(e,i);function e(n){var t=i.call(this,n)||this;return t.enableScissor=!1,t.alphaMaskPool=[],t.maskDataPool=[],t.maskStack=[],t.alphaMaskIndex=0,t}return e.prototype.setMaskStack=function(n){this.maskStack=n,this.renderer.scissor.setMaskStack(n),this.renderer.stencil.setMaskStack(n)},e.prototype.push=function(n,t){var r=t;if(!r.isMaskData){var o=this.maskDataPool.pop()||new yL;o.pooled=!0,o.maskObject=t,r=o}switch(r.autoDetect&&this.detect(r),r.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),r._target=n,r.type){case ai.SCISSOR:this.maskStack.push(r),this.renderer.scissor.push(r);break;case ai.STENCIL:this.maskStack.push(r),this.renderer.stencil.push(r);break;case ai.SPRITE:r.copyCountersOrReset(null),this.pushSpriteMask(r),this.maskStack.push(r);break;default:break}},e.prototype.pop=function(n){var t=this.maskStack.pop();if(!(!t||t._target!==n)){switch(t.type){case ai.SCISSOR:this.renderer.scissor.pop();break;case ai.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case ai.SPRITE:this.popSpriteMask();break;default:break}t.reset(),t.pooled&&this.maskDataPool.push(t)}},e.prototype.detect=function(n){var t=n.maskObject;if(t.isSprite){n.type=ai.SPRITE;return}if(n.type=ai.STENCIL,this.enableScissor&&t.isFastRect&&t.isFastRect()){var r=t.worldTransform,o=Math.atan2(r.b,r.a),s=Math.atan2(r.d,r.c);o=Math.round(o*(180/Math.PI)*100),s=Math.round(s*(180/Math.PI)*100)-o,o=(o%9e3+9e3)%9e3,s=(s%18e3+18e3)%18e3,o===0&&s===9e3&&(n.type=ai.SCISSOR)}},e.prototype.pushSpriteMask=function(n){var t=n.maskObject,r=n._target,o=this.alphaMaskPool[this.alphaMaskIndex];o||(o=this.alphaMaskPool[this.alphaMaskIndex]=[new LL(t)]),o[0].resolution=this.renderer.resolution,o[0].maskSprite=t;var s=r.filterArea;r.filterArea=t.getBounds(!0),this.renderer.filter.push(r,o),r.filterArea=s,this.alphaMaskIndex++},e.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},e}(ci),bO=function(i){Ke(e,i);function e(n){var t=i.call(this,n)||this;return t.maskStack=[],t.glConst=0,t}return e.prototype.getStackLength=function(){return this.maskStack.length},e.prototype.setMaskStack=function(n){var t=this.renderer.gl,r=this.getStackLength();this.maskStack=n;var o=this.getStackLength();o!==r&&(o===0?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()))},e.prototype._useCurrent=function(){},e.prototype.destroy=function(){i.prototype.destroy.call(this),this.maskStack=null},e}(ci),BL=function(i){Ke(e,i);function e(n){var t=i.call(this,n)||this;return t.glConst=WebGLRenderingContext.SCISSOR_TEST,t}return e.prototype.getStackLength=function(){var n=this.maskStack[this.maskStack.length-1];return n?n._scissorCounter:0},e.prototype.push=function(n){var t=n.maskObject;t.renderable=!0;var r=n._scissorRect,o=t.getBounds(!0),s=this.renderer.gl;t.renderable=!1,r?o.fit(r):s.enable(s.SCISSOR_TEST),n._scissorCounter++,n._scissorRect=o,this._useCurrent()},e.prototype.pop=function(){var n=this.renderer.gl;this.getStackLength()>0?this._useCurrent():n.disable(n.SCISSOR_TEST)},e.prototype._useCurrent=function(){var n=this.maskStack[this.maskStack.length-1]._scissorRect,t=this.renderer.renderTexture.current,r=this.renderer.projection,o=r.transform,s=r.sourceFrame,a=r.destinationFrame,l=t?t.resolution:this.renderer.resolution,c=(n.x-s.x)*l+a.x,u=(n.y-s.y)*l+a.y,d=n.width*l,h=n.height*l;o&&(c+=o.tx*l,u+=o.ty*l),t||(u=this.renderer.height-h-u),this.renderer.gl.scissor(c,u,d,h)},e}(bO),VL=function(i){Ke(e,i);function e(n){var t=i.call(this,n)||this;return t.glConst=WebGLRenderingContext.STENCIL_TEST,t}return e.prototype.getStackLength=function(){var n=this.maskStack[this.maskStack.length-1];return n?n._stencilCounter:0},e.prototype.push=function(n){var t=n.maskObject,r=this.renderer.gl,o=n._stencilCounter;o===0&&(this.renderer.framebuffer.forceStencil(),r.enable(r.STENCIL_TEST)),n._stencilCounter++,r.colorMask(!1,!1,!1,!1),r.stencilFunc(r.EQUAL,o,this._getBitwiseMask()),r.stencilOp(r.KEEP,r.KEEP,r.INCR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent()},e.prototype.pop=function(n){var t=this.renderer.gl;this.getStackLength()===0?(t.disable(t.STENCIL_TEST),t.clear(t.STENCIL_BUFFER_BIT),t.clearStencil(0)):(t.colorMask(!1,!1,!1,!1),t.stencilOp(t.KEEP,t.KEEP,t.DECR),n.renderable=!0,n.render(this.renderer),this.renderer.batch.flush(),n.renderable=!1,this._useCurrent())},e.prototype._useCurrent=function(){var n=this.renderer.gl;n.colorMask(!0,!0,!0,!0),n.stencilFunc(n.EQUAL,this.getStackLength(),this._getBitwiseMask()),n.stencilOp(n.KEEP,n.KEEP,n.KEEP)},e.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},e}(bO),UL=function(i){Ke(e,i);function e(n){var t=i.call(this,n)||this;return t.destinationFrame=null,t.sourceFrame=null,t.defaultFrame=null,t.projectionMatrix=new Rt,t.transform=null,t}return e.prototype.update=function(n,t,r,o){this.destinationFrame=n||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||n,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,o),this.transform&&this.projectionMatrix.append(this.transform);var s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)},e.prototype.calculateProjection=function(n,t,r,o){var s=this.projectionMatrix,a=o?-1:1;s.identity(),s.a=1/t.width*2,s.d=a*(1/t.height*2),s.tx=-1-t.x*s.a,s.ty=-a-t.y*s.d},e.prototype.setTransform=function(n){},e}(ci),As=new ze,yc=new ze,Cc=new ze,zL=function(i){Ke(e,i);function e(n){var t=i.call(this,n)||this;return t.clearColor=n._backgroundColorRgba,t.defaultMaskStack=[],t.current=null,t.sourceFrame=new ze,t.destinationFrame=new ze,t}return e.prototype.bind=function(n,t,r){n===void 0&&(n=null);var o=this.renderer;this.current=n;var s,a,l;n?(s=n.baseTexture,l=s.resolution,t||(As.width=n.frame.width,As.height=n.frame.height,t=As),r||(yc.x=n.frame.x,yc.y=n.frame.y,yc.width=t.width,yc.height=t.height,r=yc),a=s.framebuffer):(l=o.resolution,t||(As.width=o.screen.width,As.height=o.screen.height,t=As),r||(r=As,r.width=t.width,r.height=t.height)),Cc.x=r.x*l,Cc.y=r.y*l,Cc.width=r.width*l,Cc.height=r.height*l,this.renderer.framebuffer.bind(a,Cc),this.renderer.projection.update(r,t,l,!a),n?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(t),this.destinationFrame.copyFrom(r)},e.prototype.clear=function(n,t){this.current?n=n||this.current.baseTexture.clearColor:n=n||this.clearColor,this.renderer.framebuffer.clear(n[0],n[1],n[2],n[3],t)},e.prototype.resize=function(){this.bind(null)},e.prototype.reset=function(){this.bind(null)},e}(ci),Y9=function(){function i(){}return i}(),HL=function(){function i(e,n){this.program=e,this.uniformData=n,this.uniformGroups={}}return i.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},i}(),WL=0,lO={textureCount:0},GL=function(i){Ke(e,i);function e(n){var t=i.call(this,n)||this;return t.destroyed=!1,t.systemCheck(),t.gl=null,t.shader=null,t.program=null,t.cache={},t.id=WL++,t}return e.prototype.systemCheck=function(){if(!SL())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},e.prototype.contextChange=function(n){this.gl=n,this.reset()},e.prototype.bind=function(n,t){n.uniforms.globals=this.renderer.globalUniforms;var r=n.program,o=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(n);return this.shader=n,this.program!==r&&(this.program=r,this.gl.useProgram(o.program)),t||(lO.textureCount=0,this.syncUniformGroup(n.uniformGroup,lO)),o},e.prototype.setUniforms=function(n){var t=this.shader.program,r=t.glPrograms[this.renderer.CONTEXT_UID];t.syncUniforms(r.uniformData,n,this.renderer)},e.prototype.syncUniformGroup=function(n,t){var r=this.getglProgram();(!n.static||n.dirtyId!==r.uniformGroups[n.id])&&(r.uniformGroups[n.id]=n.dirtyId,this.syncUniforms(n,r,t))},e.prototype.syncUniforms=function(n,t,r){var o=n.syncUniforms[this.shader.program.id]||this.createSyncGroups(n);o(t.uniformData,n.uniforms,this.renderer,r)},e.prototype.createSyncGroups=function(n){var t=this.getSignature(n,this.shader.program.uniformData);return this.cache[t]||(this.cache[t]=ML(n,this.shader.program.uniformData)),n.syncUniforms[this.shader.program.id]=this.cache[t],n.syncUniforms[this.shader.program.id]},e.prototype.getSignature=function(n,t){var r=n.uniforms,o=[];for(var s in r)o.push(s),t[s]&&o.push(t[s].type);return o.join("-")},e.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},e.prototype.generateShader=function(n){var t=this.gl,r=n.program,o={};for(var s in r.attributeData)o[s]=r.attributeData[s].location;var a=_O(t,r.vertexSrc,r.fragmentSrc,o),l={};for(var s in r.uniformData){var c=r.uniformData[s];l[s]={location:t.getUniformLocation(a,s),value:vO(c.type,c.size)}}var u=new HL(a,l);return r.glPrograms[this.renderer.CONTEXT_UID]=u,u},e.prototype.reset=function(){this.program=null,this.shader=null},e.prototype.destroy=function(){this.destroyed=!0},e}(ci);function XL(i,e){return e===void 0&&(e=[]),e[Oe.NORMAL]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[Oe.ADD]=[i.ONE,i.ONE],e[Oe.MULTIPLY]=[i.DST_COLOR,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA],e[Oe.SCREEN]=[i.ONE,i.ONE_MINUS_SRC_COLOR,i.ONE,i.ONE_MINUS_SRC_ALPHA],e[Oe.OVERLAY]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[Oe.DARKEN]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[Oe.LIGHTEN]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[Oe.COLOR_DODGE]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[Oe.COLOR_BURN]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[Oe.HARD_LIGHT]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[Oe.SOFT_LIGHT]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[Oe.DIFFERENCE]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[Oe.EXCLUSION]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[Oe.HUE]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[Oe.SATURATION]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[Oe.COLOR]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[Oe.LUMINOSITY]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[Oe.NONE]=[0,0],e[Oe.NORMAL_NPM]=[i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA],e[Oe.ADD_NPM]=[i.SRC_ALPHA,i.ONE,i.ONE,i.ONE],e[Oe.SCREEN_NPM]=[i.SRC_ALPHA,i.ONE_MINUS_SRC_COLOR,i.ONE,i.ONE_MINUS_SRC_ALPHA],e[Oe.SRC_IN]=[i.DST_ALPHA,i.ZERO],e[Oe.SRC_OUT]=[i.ONE_MINUS_DST_ALPHA,i.ZERO],e[Oe.SRC_ATOP]=[i.DST_ALPHA,i.ONE_MINUS_SRC_ALPHA],e[Oe.DST_OVER]=[i.ONE_MINUS_DST_ALPHA,i.ONE],e[Oe.DST_IN]=[i.ZERO,i.SRC_ALPHA],e[Oe.DST_OUT]=[i.ZERO,i.ONE_MINUS_SRC_ALPHA],e[Oe.DST_ATOP]=[i.ONE_MINUS_DST_ALPHA,i.SRC_ALPHA],e[Oe.XOR]=[i.ONE_MINUS_DST_ALPHA,i.ONE_MINUS_SRC_ALPHA],e[Oe.SUBTRACT]=[i.ONE,i.ONE,i.ONE,i.ONE,i.FUNC_REVERSE_SUBTRACT,i.FUNC_ADD],e}var qL=0,YL=1,ZL=2,$L=3,KL=4,QL=function(i){Ke(e,i);function e(n){var t=i.call(this,n)||this;return t.gl=null,t.stateId=0,t.polygonOffset=0,t.blendMode=Oe.NONE,t._blendEq=!1,t.map=[],t.map[qL]=t.setBlend,t.map[YL]=t.setOffset,t.map[ZL]=t.setCullFace,t.map[$L]=t.setDepthTest,t.map[KL]=t.setFrontFace,t.checks=[],t.defaultState=new Ki,t.defaultState.blend=!0,t}return e.prototype.contextChange=function(n){this.gl=n,this.blendModes=XL(n),this.set(this.defaultState),this.reset()},e.prototype.set=function(n){if(n=n||this.defaultState,this.stateId!==n.data){for(var t=this.stateId^n.data,r=0;t;)t&1&&this.map[r].call(this,!!(n.data&1<<r)),t=t>>1,r++;this.stateId=n.data}for(var r=0;r<this.checks.length;r++)this.checks[r](this,n)},e.prototype.forceState=function(n){n=n||this.defaultState;for(var t=0;t<this.map.length;t++)this.map[t].call(this,!!(n.data&1<<t));for(var t=0;t<this.checks.length;t++)this.checks[t](this,n);this.stateId=n.data},e.prototype.setBlend=function(n){this.updateCheck(e.checkBlendMode,n),this.gl[n?"enable":"disable"](this.gl.BLEND)},e.prototype.setOffset=function(n){this.updateCheck(e.checkPolygonOffset,n),this.gl[n?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},e.prototype.setDepthTest=function(n){this.gl[n?"enable":"disable"](this.gl.DEPTH_TEST)},e.prototype.setCullFace=function(n){this.gl[n?"enable":"disable"](this.gl.CULL_FACE)},e.prototype.setFrontFace=function(n){this.gl.frontFace(this.gl[n?"CW":"CCW"])},e.prototype.setBlendMode=function(n){if(n!==this.blendMode){this.blendMode=n;var t=this.blendModes[n],r=this.gl;t.length===2?r.blendFunc(t[0],t[1]):r.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,r.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}},e.prototype.setPolygonOffset=function(n,t){this.gl.polygonOffset(n,t)},e.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},e.prototype.updateCheck=function(n,t){var r=this.checks.indexOf(n);t&&r===-1?this.checks.push(n):!t&&r!==-1&&this.checks.splice(r,1)},e.checkBlendMode=function(n,t){n.setBlendMode(t.blendMode)},e.checkPolygonOffset=function(n,t){n.setPolygonOffset(1,t.polygonOffset)},e}(ci),JL=function(i){Ke(e,i);function e(n){var t=i.call(this,n)||this;return t.count=0,t.checkCount=0,t.maxIdle=me.GC_MAX_IDLE,t.checkCountMax=me.GC_MAX_CHECK_COUNT,t.mode=me.GC_MODE,t}return e.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==Z_.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},e.prototype.run=function(){for(var n=this.renderer.texture,t=n.managedTextures,r=!1,o=0;o<t.length;o++){var s=t[o];!s.framebuffer&&this.count-s.touched>this.maxIdle&&(n.destroyTexture(s,!0),t[o]=null,r=!0)}if(r){for(var a=0,o=0;o<t.length;o++)t[o]!==null&&(t[a++]=t[o]);t.length=a}},e.prototype.unload=function(n){var t=this.renderer.texture,r=n._texture;r&&!r.framebuffer&&t.destroyTexture(r);for(var o=n.children.length-1;o>=0;o--)this.unload(n.children[o])},e}(ci),vv=function(){function i(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121}return i}(),ej=function(i){Ke(e,i);function e(n){var t=i.call(this,n)||this;return t.boundTextures=[],t.currentLocation=-1,t.managedTextures=[],t._unknownBoundTextures=!1,t.unknownTexture=new wt,t}return e.prototype.contextChange=function(){var n=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var t=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(var r=0;r<t;r++)this.boundTextures[r]=null;this.emptyTextures={};var o=new vv(n.createTexture());n.bindTexture(n.TEXTURE_2D,o.texture),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[n.TEXTURE_2D]=o,this.emptyTextures[n.TEXTURE_CUBE_MAP]=new vv(n.createTexture()),n.bindTexture(n.TEXTURE_CUBE_MAP,this.emptyTextures[n.TEXTURE_CUBE_MAP].texture);for(var r=0;r<6;r++)n.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,null);n.texParameteri(n.TEXTURE_CUBE_MAP,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_CUBE_MAP,n.TEXTURE_MIN_FILTER,n.LINEAR);for(var r=0;r<this.boundTextures.length;r++)this.bind(null,r)},e.prototype.bind=function(n,t){t===void 0&&(t=0);var r=this.gl;if(n){if(n=n.castToBaseTexture(),n.parentTextureArray)return;if(n.valid){n.touched=this.renderer.textureGC.count;var o=n._glTextures[this.CONTEXT_UID]||this.initTexture(n);this.boundTextures[t]!==n&&(this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),r.bindTexture(n.target,o.texture)),o.dirtyId!==n.dirtyId&&(this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),this.updateTexture(n)),this.boundTextures[t]=n}}else this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),r.bindTexture(r.TEXTURE_2D,this.emptyTextures[r.TEXTURE_2D].texture),this.boundTextures[t]=null},e.prototype.reset=function(){this._unknownBoundTextures=!0,this.currentLocation=-1;for(var n=0;n<this.boundTextures.length;n++)this.boundTextures[n]=this.unknownTexture},e.prototype.unbind=function(n){var t=this,r=t.gl,o=t.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var s=0;s<o.length;s++)o[s]===this.unknownTexture&&this.bind(null,s)}for(var s=0;s<o.length;s++)o[s]===n&&(this.currentLocation!==s&&(r.activeTexture(r.TEXTURE0+s),this.currentLocation=s),r.bindTexture(n.target,this.emptyTextures[n.target].texture),o[s]=null)},e.prototype.initTexture=function(n){var t=new vv(this.gl.createTexture());return t.dirtyId=-1,n._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(n),n.on("dispose",this.destroyTexture,this),t},e.prototype.initTextureType=function(n,t){if(t.internalFormat=n.format,t.type=n.type,this.webGLVersion===2){var r=this.renderer.gl;n.type===r.FLOAT&&n.format===r.RGBA&&(t.internalFormat=r.RGBA32F),n.type===Jt.HALF_FLOAT&&(t.type=r.HALF_FLOAT),t.type===r.HALF_FLOAT&&n.format===r.RGBA&&(t.internalFormat=r.RGBA16F)}},e.prototype.updateTexture=function(n){var t=n._glTextures[this.CONTEXT_UID];if(t){var r=this.renderer;if(this.initTextureType(n,t),!(n.resource&&n.resource.upload(r,n,t))){var o=n.realWidth,s=n.realHeight,a=r.gl;(t.width!==o||t.height!==s||t.dirtyId<0)&&(t.width=o,t.height=s,a.texImage2D(n.target,0,t.internalFormat,o,s,0,n.format,t.type,null))}n.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(n),t.dirtyId=n.dirtyId}},e.prototype.destroyTexture=function(n,t){var r=this.gl;if(n=n.castToBaseTexture(),n._glTextures[this.CONTEXT_UID]&&(this.unbind(n),r.deleteTexture(n._glTextures[this.CONTEXT_UID].texture),n.off("dispose",this.destroyTexture,this),delete n._glTextures[this.CONTEXT_UID],!t)){var o=this.managedTextures.indexOf(n);o!==-1&&yr(this.managedTextures,o,1)}},e.prototype.updateTextureStyle=function(n){var t=n._glTextures[this.CONTEXT_UID];t&&((n.mipmap===mc.POW2||this.webGLVersion!==2)&&!n.isPowerOfTwo?t.mipmap=!1:t.mipmap=n.mipmap>=1,this.webGLVersion!==2&&!n.isPowerOfTwo?t.wrapMode=qi.CLAMP:t.wrapMode=n.wrapMode,n.resource&&n.resource.style(this.renderer,n,t)||this.setStyle(n,t),t.dirtyStyleId=n.dirtyStyleId)},e.prototype.setStyle=function(n,t){var r=this.gl;if(t.mipmap&&r.generateMipmap(n.target),r.texParameteri(n.target,r.TEXTURE_WRAP_S,t.wrapMode),r.texParameteri(n.target,r.TEXTURE_WRAP_T,t.wrapMode),t.mipmap){r.texParameteri(n.target,r.TEXTURE_MIN_FILTER,n.scaleMode===to.LINEAR?r.LINEAR_MIPMAP_LINEAR:r.NEAREST_MIPMAP_NEAREST);var o=this.renderer.context.extensions.anisotropicFiltering;if(o&&n.anisotropicLevel>0&&n.scaleMode===to.LINEAR){var s=Math.min(n.anisotropicLevel,r.getParameter(o.MAX_TEXTURE_MAX_ANISOTROPY_EXT));r.texParameterf(n.target,o.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else r.texParameteri(n.target,r.TEXTURE_MIN_FILTER,n.scaleMode===to.LINEAR?r.LINEAR:r.NEAREST);r.texParameteri(n.target,r.TEXTURE_MAG_FILTER,n.scaleMode===to.LINEAR?r.LINEAR:r.NEAREST)},e}(ci);var yv=new Rt,tj=function(i){Ke(e,i);function e(n,t){n===void 0&&(n=pc.UNKNOWN);var r=i.call(this)||this;return t=Object.assign({},me.RENDER_OPTIONS,t),t.roundPixels&&(me.ROUND_PIXELS=t.roundPixels,li("5.0.0","Renderer roundPixels option is deprecated, please use PIXI.settings.ROUND_PIXELS",2)),r.options=t,r.type=n,r.screen=new ze(0,0,t.width,t.height),r.view=t.view||document.createElement("canvas"),r.resolution=t.resolution||me.RESOLUTION,r.transparent=t.transparent,r.autoDensity=t.autoDensity||t.autoResize||!1,r.preserveDrawingBuffer=t.preserveDrawingBuffer,r.clearBeforeRender=t.clearBeforeRender,r._backgroundColor=0,r._backgroundColorRgba=[0,0,0,0],r._backgroundColorString="#000000",r.backgroundColor=t.backgroundColor||r._backgroundColor,r._lastObjectRendered=null,r.plugins={},r}return e.prototype.initPlugins=function(n){for(var t in n)this.plugins[t]=new n[t](this)},Object.defineProperty(e.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),e.prototype.resize=function(n,t){this.screen.width=n,this.screen.height=t,this.view.width=n*this.resolution,this.view.height=t*this.resolution,this.autoDensity&&(this.view.style.width=n+"px",this.view.style.height=t+"px"),this.emit("resize",n,t)},e.prototype.generateTexture=function(n,t,r,o){o=o||n.getLocalBounds(null,!0),o.width===0&&(o.width=1),o.height===0&&(o.height=1);var s=jo.create({width:o.width|0,height:o.height|0,scaleMode:t,resolution:r});return yv.tx=-o.x,yv.ty=-o.y,this.render(n,s,!1,yv,!!n.parent),s},e.prototype.destroy=function(n){for(var t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null;n&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var r=this;r.plugins=null,r.type=pc.UNKNOWN,r.view=null,r.screen=null,r._tempDisplayObjectParent=null,r.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(n){this._backgroundColor=n,this._backgroundColorString=Ch(n),Yi(n,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),e}(no.default),Qi=function(i){Ke(e,i);function e(n){var t=i.call(this,pc.WEBGL,n)||this;return n=t.options,t.gl=null,t.CONTEXT_UID=0,t.runners={destroy:new Cn("destroy"),contextChange:new Cn("contextChange"),reset:new Cn("reset"),update:new Cn("update"),postrender:new Cn("postrender"),prerender:new Cn("prerender"),resize:new Cn("resize")},t.globalUniforms=new Fo({projectionMatrix:new Rt},!0),t.addSystem(jL,"mask").addSystem(pL,"context").addSystem(QL,"state").addSystem(GL,"shader").addSystem(ej,"texture").addSystem(vL,"geometry").addSystem(gL,"framebuffer").addSystem(BL,"scissor").addSystem(VL,"stencil").addSystem(UL,"projection").addSystem(JL,"textureGC").addSystem(dL,"filter").addSystem(zL,"renderTexture").addSystem(hL,"batch"),t.initPlugins(e.__plugins),n.context?t.context.initFromContext(n.context):t.context.initFromOptions({alpha:!!t.transparent,antialias:n.antialias,premultipliedAlpha:t.transparent&&t.transparent!=="notMultiplied",stencil:!0,preserveDrawingBuffer:n.preserveDrawingBuffer,powerPreference:t.options.powerPreference}),t.renderingToScreen=!0,RM(t.context.webGLVersion===2?"WebGL 2":"WebGL 1"),t.resize(t.options.width,t.options.height),t}return e.create=function(n){if(FM())return new e(n);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},e.prototype.addSystem=function(n,t){t||(t=n.name);var r=new n(this);if(this[t])throw new Error('Whoops! The name "'+t+'" is already in use');this[t]=r;for(var o in this.runners)this.runners[o].add(r);return this},e.prototype.render=function(n,t,r,o,s){if(this.renderingToScreen=!t,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=o,!this.context.isLost){if(t||(this._lastObjectRendered=n),!s){var a=n.enableTempParent();n.updateTransform(),n.disableTempParent(a)}this.renderTexture.bind(t),this.batch.currentRenderer.start(),(r!==void 0?r:this.clearBeforeRender)&&this.renderTexture.clear(),n.render(this),this.batch.currentRenderer.flush(),t&&t.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},e.prototype.resize=function(n,t){i.prototype.resize.call(this,n,t),this.runners.resize.emit(n,t)},e.prototype.reset=function(){return this.runners.reset.emit(),this},e.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},e.prototype.destroy=function(n){this.runners.destroy.emit();for(var t in this.runners)this.runners[t].destroy();i.prototype.destroy.call(this,n),this.gl=null},e.registerPlugin=function(n,t){e.__plugins=e.__plugins||{},e.__plugins[n]=t},e}(tj);function PO(i){return Qi.create(i)}var wO=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Rh=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,Fh=function(){function i(){this.texArray=null,this.blend=0,this.type=si.TRIANGLES,this.start=0,this.size=0,this.data=null}return i}(),Lh=function(){function i(){this.elements=[],this.ids=[],this.count=0}return i.prototype.clear=function(){for(var e=0;e<this.count;e++)this.elements[e]=null;this.count=0},i}(),nj=function(){function i(e){this.rawBinaryData=new ArrayBuffer(e),this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(i.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),i.prototype.view=function(e){return this[e+"View"]},i.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},i.sizeOf=function(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(e+" isn't a valid view type")}},i}(),ij=function(i){Ke(e,i);function e(n){var t=i.call(this,n)||this;return t.shaderGenerator=null,t.geometryClass=null,t.vertexSize=null,t.state=Ki.for2d(),t.size=me.SPRITE_BATCH_SIZE*4,t._vertexCount=0,t._indexCount=0,t._bufferedElements=[],t._bufferedTextures=[],t._bufferSize=0,t._shader=null,t._packedGeometries=[],t._packedGeometryPoolSize=2,t._flushId=0,t._aBuffers={},t._iBuffers={},t.MAX_TEXTURES=1,t.renderer.on("prerender",t.onPrerender,t),n.runners.contextChange.add(t),t._dcIndex=0,t._aIndex=0,t._iIndex=0,t._attributeBuffer=null,t._indexBuffer=null,t._tempBoundTextures=[],t}return e.prototype.contextChange=function(){var n=this.renderer.gl;me.PREFER_ENV===eo.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),me.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=IL(this.MAX_TEXTURES,n)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()},e.prototype.initFlushBuffers=function(){for(var n=e._drawCallPool,t=e._textureArrayPool,r=this.size/4,o=Math.floor(r/this.MAX_TEXTURES)+1;n.length<r;)n.push(new Fh);for(;t.length<o;)t.push(new Lh);for(var s=0;s<this.MAX_TEXTURES;s++)this._tempBoundTextures[s]=null},e.prototype.onPrerender=function(){this._flushId=0},e.prototype.render=function(n){n._texture.valid&&(this._vertexCount+n.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=n.vertexData.length/2,this._indexCount+=n.indices.length,this._bufferedTextures[this._bufferSize]=n._texture.baseTexture,this._bufferedElements[this._bufferSize++]=n)},e.prototype.buildTexturesAndDrawCalls=function(){var n=this,t=n._bufferedTextures,r=n.MAX_TEXTURES,o=e._textureArrayPool,s=this.renderer.batch,a=this._tempBoundTextures,l=this.renderer.textureGC.count,c=++wt._globalBatch,u=0,d=o[0],h=0;s.copyBoundTextures(a,r);for(var p=0;p<this._bufferSize;++p){var f=t[p];t[p]=null,f._batchEnabled!==c&&(d.count>=r&&(s.boundArray(d,a,c,r),this.buildDrawCalls(d,h,p),h=p,d=o[++u],++c),f._batchEnabled=c,f.touched=l,d.elements[d.count++]=f)}d.count>0&&(s.boundArray(d,a,c,r),this.buildDrawCalls(d,h,this._bufferSize),++u,++c);for(var p=0;p<a.length;p++)a[p]=null;wt._globalBatch=c},e.prototype.buildDrawCalls=function(n,t,r){var o=this,s=o._bufferedElements,a=o._attributeBuffer,l=o._indexBuffer,c=o.vertexSize,u=e._drawCallPool,d=this._dcIndex,h=this._aIndex,p=this._iIndex,f=u[d];f.start=this._iIndex,f.texArray=n;for(var m=t;m<r;++m){var _=s[m],P=_._texture.baseTexture,I=K_[P.alphaMode?1:0][_.blendMode];s[m]=null,t<m&&f.blend!==I&&(f.size=p-f.start,t=m,f=u[++d],f.texArray=n,f.start=p),this.packInterleavedGeometry(_,a,l,h,p),h+=_.vertexData.length/2*c,p+=_.indices.length,f.blend=I}t<r&&(f.size=p-f.start,++d),this._dcIndex=d,this._aIndex=h,this._iIndex=p},e.prototype.bindAndClearTexArray=function(n){for(var t=this.renderer.texture,r=0;r<n.count;r++)t.bind(n.elements[r],n.ids[r]),n.elements[r]=null;n.count=0},e.prototype.updateGeometry=function(){var n=this,t=n._packedGeometries,r=n._attributeBuffer,o=n._indexBuffer;me.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(r.rawBinaryData),t[this._flushId]._indexBuffer.update(o),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(r.rawBinaryData),t[this._flushId]._indexBuffer.update(o),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},e.prototype.drawBatches=function(){for(var n=this._dcIndex,t=this.renderer,r=t.gl,o=t.state,s=e._drawCallPool,a=null,l=0;l<n;l++){var c=s[l],u=c.texArray,d=c.type,h=c.size,p=c.start,f=c.blend;a!==u&&(a=u,this.bindAndClearTexArray(u)),this.state.blendMode=f,o.set(this.state),r.drawElements(d,h,r.UNSIGNED_SHORT,p*2)}},e.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},e.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.shader.bind(this._shader),me.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var n=0;n<this._packedGeometryPoolSize;n++)this._packedGeometries[n]&&this._packedGeometries[n].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),i.prototype.destroy.call(this)},e.prototype.getAttributeBuffer=function(n){var t=gc(Math.ceil(n/8)),r=J_(t),o=t*8;this._aBuffers.length<=r&&(this._iBuffers.length=r+1);var s=this._aBuffers[o];return s||(this._aBuffers[o]=s=new nj(o*this.vertexSize*4)),s},e.prototype.getIndexBuffer=function(n){var t=gc(Math.ceil(n/12)),r=J_(t),o=t*12;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);var s=this._iBuffers[r];return s||(this._iBuffers[r]=s=new Uint16Array(o)),s},e.prototype.packInterleavedGeometry=function(n,t,r,o,s){for(var a=t.uint32View,l=t.float32View,c=o/this.vertexSize,u=n.uvs,d=n.indices,h=n.vertexData,p=n._texture.baseTexture._batchLocation,f=Math.min(n.worldAlpha,1),m=f<1&&n._texture.baseTexture.alphaMode?ja(n._tintRGB,f):n._tintRGB+(f*255<<24),_=0;_<h.length;_+=2)l[o++]=h[_],l[o++]=h[_+1],l[o++]=u[_],l[o++]=u[_+1],a[o++]=m,l[o++]=p;for(var _=0;_<d.length;_++)r[s++]=c+d[_]},e._drawCallPool=[],e._textureArrayPool=[],e}(Va),rj=function(){function i(e,n){if(this.vertexSrc=e,this.fragTemplate=n,this.programCache={},this.defaultGroupCache={},n.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(n.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return i.prototype.generateShader=function(e){if(!this.programCache[e]){for(var n=new Int32Array(e),t=0;t<e;t++)n[t]=t;this.defaultGroupCache[e]=Fo.from({uSamplers:n},!0);var r=this.fragTemplate;r=r.replace(/%count%/gi,""+e),r=r.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new Pc(this.vertexSrc,r)}var o={tint:new Float32Array([1,1,1,1]),translationMatrix:new Rt,default:this.defaultGroupCache[e]};return new $i(this.programCache[e],o)},i.prototype.generateSampleSrc=function(e){var n="";n+=`
`,n+=`
`;for(var t=0;t<e;t++)t>0&&(n+=`
else `),t<e-1&&(n+="if(vTextureId < "+t+".5)"),n+=`
{`,n+=`
	color = texture2D(uSamplers[`+t+"], vTextureCoord);",n+=`
}`;return n+=`
`,n+=`
`,n},i}(),Mv=function(i){Ke(e,i);function e(n){n===void 0&&(n=!1);var t=i.call(this)||this;return t._buffer=new ln(null,n,!1),t._indexBuffer=new ln(null,n,!0),t.addAttribute("aVertexPosition",t._buffer,2,!1,Jt.FLOAT).addAttribute("aTextureCoord",t._buffer,2,!1,Jt.FLOAT).addAttribute("aColor",t._buffer,4,!0,Jt.UNSIGNED_BYTE).addAttribute("aTextureId",t._buffer,1,!0,Jt.FLOAT).addIndex(t._indexBuffer),t}return e}(Ds),cO=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,uO=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,oj=function(){function i(){}return i.create=function(e){var n=Object.assign({vertex:cO,fragment:uO,geometryClass:Mv,vertexSize:6},e),t=n.vertex,r=n.fragment,o=n.vertexSize,s=n.geometryClass;return function(a){Ke(l,a);function l(c){var u=a.call(this,c)||this;return u.shaderGenerator=new rj(t,r),u.geometryClass=s,u.vertexSize=o,u}return l}(ij)},Object.defineProperty(i,"defaultVertexSrc",{get:function(){return cO},enumerable:!1,configurable:!0}),Object.defineProperty(i,"defaultFragmentTemplate",{get:function(){return uO},enumerable:!1,configurable:!0}),i}(),xO=oj.create();var xc=function(){function i(e){var n=this;e=Object.assign({forceCanvas:!1},e),this.renderer=PO(e),this.stage=new At,i._plugins.forEach(function(t){t.init.call(n,e)})}return i.registerPlugin=function(e){i._plugins.push(e)},i.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(i.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),i.prototype.destroy=function(e,n){var t=this,r=i._plugins.slice(0);r.reverse(),r.forEach(function(o){o.destroy.call(t)}),this.stage.destroy(n),this.stage=null,this.renderer.destroy(e),this.renderer=null},i}();xc._plugins=[];var sj=function(){function i(){}return i.init=function(e){var n=this;Object.defineProperty(this,"resizeTo",{set:function(t){window.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(window.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){n._resizeTo&&(n.cancelResize(),n._resizeId=requestAnimationFrame(function(){return n.resize()}))},this.cancelResize=function(){n._resizeId&&(cancelAnimationFrame(n._resizeId),n._resizeId=null)},this.resize=function(){if(n._resizeTo){n.cancelResize();var t,r;if(n._resizeTo===window)t=window.innerWidth,r=window.innerHeight;else{var o=n._resizeTo,s=o.clientWidth,a=o.clientHeight;t=s,r=a}n.renderer.resize(t,r)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null},i.destroy=function(){window.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},i}();xc.registerPlugin(sj);var MO=new ze,OO=4,EO=function(){function i(e){this.renderer=e,e.extract=this}return i.prototype.image=function(e,n,t){var r=new Image;return r.src=this.base64(e,n,t),r},i.prototype.base64=function(e,n,t){return this.canvas(e).toDataURL(n,t)},i.prototype.canvas=function(e){var n=this.renderer,t,r,o=!1,s,a=!1;e&&(e instanceof jo?s=e:(s=this.renderer.generateTexture(e),a=!0)),s?(t=s.baseTexture.resolution,r=s.frame,o=!1,n.renderTexture.bind(s)):(t=this.renderer.resolution,o=!0,r=MO,r.width=this.renderer.width,r.height=this.renderer.height,n.renderTexture.bind(null));var l=Math.floor(r.width*t+1e-4),c=Math.floor(r.height*t+1e-4),u=new tv(l,c,1),d=new Uint8Array(OO*l*c),h=n.gl;h.readPixels(r.x*t,r.y*t,l,c,h.RGBA,h.UNSIGNED_BYTE,d);var p=u.context.getImageData(0,0,l,c);if(i.arrayPostDivide(d,p.data),u.context.putImageData(p,0,0),o){var f=new tv(u.width,u.height,1);f.context.scale(1,-1),f.context.drawImage(u.canvas,0,-c),u.destroy(),u=f}return a&&s.destroy(!0),u.canvas},i.prototype.pixels=function(e){var n=this.renderer,t,r,o,s=!1;e&&(e instanceof jo?o=e:(o=this.renderer.generateTexture(e),s=!0)),o?(t=o.baseTexture.resolution,r=o.frame,n.renderTexture.bind(o)):(t=n.resolution,r=MO,r.width=n.width,r.height=n.height,n.renderTexture.bind(null));var a=r.width*t,l=r.height*t,c=new Uint8Array(OO*a*l),u=n.gl;return u.readPixels(r.x*t,r.y*t,a,l,u.RGBA,u.UNSIGNED_BYTE,c),s&&o.destroy(!0),i.arrayPostDivide(c,c),c},i.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},i.arrayPostDivide=function(e,n){for(var t=0;t<e.length;t+=4){var r=n[t+3]=e[t+3];r!==0?(n[t]=Math.round(Math.min(e[t]*255/r,255)),n[t+1]=Math.round(Math.min(e[t+1]*255/r,255)),n[t+2]=Math.round(Math.min(e[t+2]*255/r,255))):(n[t]=e[t],n[t+1]=e[t+1],n[t+2]=e[t+2])}},i}();var Sv=po(SO()),br=po(RO());function ks(){}function FO(i,e,n,t){var r=0,o=i.length;(function s(a){if(a||r===o){n&&n(a);return}t?setTimeout(function(){e(i[r++],s)},1):e(i[r++],s)})()}function aj(i){return function(){if(i===null)throw new Error("Callback was already called.");var n=i;i=null,n.apply(this,arguments)}}function lj(i,e){if(e==null)e=1;else if(e===0)throw new Error("Concurrency must not be zero");var n=0,t={_tasks:[],concurrency:e,saturated:ks,unsaturated:ks,buffer:e/4,empty:ks,drain:ks,error:ks,started:!1,paused:!1,push:function(a,l){r(a,!1,l)},kill:function(){n=0,t.drain=ks,t.started=!1,t._tasks=[]},unshift:function(a,l){r(a,!0,l)},process:function(){for(;!t.paused&&n<t.concurrency&&t._tasks.length;){var a=t._tasks.shift();t._tasks.length===0&&t.empty(),n+=1,n===t.concurrency&&t.saturated(),i(a.data,aj(o(a)))}},length:function(){return t._tasks.length},running:function(){return n},idle:function(){return t._tasks.length+n===0},pause:function(){t.paused!==!0&&(t.paused=!0)},resume:function(){if(t.paused!==!1){t.paused=!1;for(var a=1;a<=t.concurrency;a++)t.process()}}};function r(s,a,l){if(l!=null&&typeof l!="function")throw new Error("task callback must be a function");if(t.started=!0,s==null&&t.idle()){setTimeout(function(){return t.drain()},1);return}var c={data:s,callback:typeof l=="function"?l:ks};a?t._tasks.unshift(c):t._tasks.push(c),setTimeout(function(){return t.process()},1)}function o(s){return function(){n-=1,s.callback.apply(s,arguments),arguments[0]!=null&&t.error(arguments[0],s.data),n<=t.concurrency-t.buffer&&t.unsaturated(),t.idle()&&t.drain(),t.process()}}return t}var Ov={};function cj(i,e){var n=this;Ov[i.url]?(i.data=Ov[i.url],i.complete()):i.onComplete.once(function(){return Ov[n.url]=n.data}),e()}function LO(i,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(i,t.key,t)}}function UO(i,e,n){return e&&LO(i.prototype,e),n&&LO(i,n),i}var uj=!!(window.XDomainRequest&&!("withCredentials"in new XMLHttpRequest)),Bh=null,dj=0,jO=200,hj=204,pj=1223,fj=2;function mj(){}var Ne=function(){i.setExtensionLoadType=function(t,r){BO(i._loadTypeMap,t,r)},i.setExtensionXhrType=function(t,r){BO(i._xhrTypeMap,t,r)};function i(n,t,r){if(typeof n!="string"||typeof t!="string")throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(i.STATUS_FLAGS.DATA_URL,t.indexOf("data:")===0),this.name=n,this.url=t,this.extension=this._getExtension(),this.data=null,this.crossOrigin=r.crossOrigin===!0?"anonymous":r.crossOrigin,this.timeout=r.timeout||0,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=i.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=mj,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new br.default,this.onProgress=new br.default,this.onComplete=new br.default,this.onAfterMiddleware=new br.default}var e=i.prototype;return e.complete=function(){this._clearEvents(),this._finish()},e.abort=function(t){if(!this.error){if(this.error=new Error(t),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=i.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},e.load=function(t){var r=this;if(!this.isLoading){if(this.isComplete){t&&setTimeout(function(){return t(r)},1);return}else t&&this.onComplete.once(t);switch(this._setFlag(i.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(this.crossOrigin===!1||typeof this.crossOrigin!="string")&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case i.LOAD_TYPE.IMAGE:this.type=i.TYPE.IMAGE,this._loadElement("image");break;case i.LOAD_TYPE.AUDIO:this.type=i.TYPE.AUDIO,this._loadSourceElement("audio");break;case i.LOAD_TYPE.VIDEO:this.type=i.TYPE.VIDEO,this._loadSourceElement("video");break;case i.LOAD_TYPE.XHR:default:uj&&this.crossOrigin?this._loadXdr():this._loadXhr();break}}},e._hasFlag=function(t){return(this._flags&t)!==0},e._setFlag=function(t,r){this._flags=r?this._flags|t:this._flags&~t},e._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},e._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(i.STATUS_FLAGS.COMPLETE,!0),this._setFlag(i.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},e._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:t==="image"&&typeof window.Image<"u"?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},e._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:t==="audio"&&typeof window.Audio<"u"?this.data=new Audio:this.data=document.createElement(t),this.data===null){this.abort("Unsupported element: "+t);return}if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var r=this.metadata.mimeType,o=0;o<this.url.length;++o)this.data.appendChild(this._createSource(t,this.url[o],Array.isArray(r)?r[o]:r));else{var s=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(s)?s[0]:s))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},e._loadXhr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;t.open("GET",this.url,!0),t.timeout=this.timeout,this.xhrType===i.XHR_RESPONSE_TYPE.JSON||this.xhrType===i.XHR_RESPONSE_TYPE.DOCUMENT?t.responseType=i.XHR_RESPONSE_TYPE.TEXT:t.responseType=this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("timeout",this._boundXhrOnTimeout,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},e._loadXdr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){return t.send()},1)},e._createSource=function(t,r,o){o||(o=t+"/"+this._getExtension(r));var s=document.createElement("source");return s.src=r,s.type=o,s},e._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},e._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},e._onTimeout=function(){this.abort("Load timed out.")},e._xhrOnError=function(){var t=this.xhr;this.abort(Ev(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},e._xhrOnTimeout=function(){var t=this.xhr;this.abort(Ev(t)+" Request timed out.")},e._xhrOnAbort=function(){var t=this.xhr;this.abort(Ev(t)+" Request was aborted by the user.")},e._xhrOnLoad=function(){var t=this.xhr,r="",o=typeof t.status>"u"?jO:t.status;(t.responseType===""||t.responseType==="text"||typeof t.responseType>"u")&&(r=t.responseText),o===dj&&(r.length>0||t.responseType===i.XHR_RESPONSE_TYPE.BUFFER)?o=jO:o===pj&&(o=hj);var s=o/100|0;if(s===fj)if(this.xhrType===i.XHR_RESPONSE_TYPE.TEXT)this.data=r,this.type=i.TYPE.TEXT;else if(this.xhrType===i.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(r),this.type=i.TYPE.JSON}catch(c){this.abort("Error trying to parse loaded json: "+c);return}else if(this.xhrType===i.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var a=new DOMParser;this.data=a.parseFromString(r,"text/xml")}else{var l=document.createElement("div");l.innerHTML=r,this.data=l}this.type=i.TYPE.XML}catch(c){this.abort("Error trying to parse loaded xml: "+c);return}else this.data=t.response||r;else{this.abort("["+t.status+"] "+t.statusText+": "+t.responseURL);return}this.complete()},e._determineCrossOrigin=function(t,r){if(t.indexOf("data:")===0)return"";if(window.origin!==window.location.origin)return"anonymous";r=r||window.location,Bh||(Bh=document.createElement("a")),Bh.href=t,t=(0,Sv.default)(Bh.href,{strictMode:!0});var o=!t.port&&r.port===""||t.port===r.port,s=t.protocol?t.protocol+":":"";return t.host!==r.hostname||!o||s!==r.protocol?"anonymous":""},e._determineXhrType=function(){return i._xhrTypeMap[this.extension]||i.XHR_RESPONSE_TYPE.TEXT},e._determineLoadType=function(){return i._loadTypeMap[this.extension]||i.LOAD_TYPE.XHR},e._getExtension=function(){var t=this.url,r="";if(this.isDataUrl){var o=t.indexOf("/");r=t.substring(o+1,t.indexOf(";",o))}else{var s=t.indexOf("?"),a=t.indexOf("#"),l=Math.min(s>-1?s:t.length,a>-1?a:t.length);t=t.substring(0,l),r=t.substring(t.lastIndexOf(".")+1)}return r.toLowerCase()},e._getMimeFromXhrType=function(t){switch(t){case i.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case i.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case i.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case i.XHR_RESPONSE_TYPE.JSON:return"application/json";case i.XHR_RESPONSE_TYPE.DEFAULT:case i.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},UO(i,[{key:"isDataUrl",get:function(){return this._hasFlag(i.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(i.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(i.STATUS_FLAGS.LOADING)}}]),i}();Ne.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4};Ne.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6};Ne.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4};Ne.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"};Ne._loadTypeMap={gif:Ne.LOAD_TYPE.IMAGE,png:Ne.LOAD_TYPE.IMAGE,bmp:Ne.LOAD_TYPE.IMAGE,jpg:Ne.LOAD_TYPE.IMAGE,jpeg:Ne.LOAD_TYPE.IMAGE,tif:Ne.LOAD_TYPE.IMAGE,tiff:Ne.LOAD_TYPE.IMAGE,webp:Ne.LOAD_TYPE.IMAGE,tga:Ne.LOAD_TYPE.IMAGE,svg:Ne.LOAD_TYPE.IMAGE,"svg+xml":Ne.LOAD_TYPE.IMAGE,mp3:Ne.LOAD_TYPE.AUDIO,ogg:Ne.LOAD_TYPE.AUDIO,wav:Ne.LOAD_TYPE.AUDIO,mp4:Ne.LOAD_TYPE.VIDEO,webm:Ne.LOAD_TYPE.VIDEO};Ne._xhrTypeMap={xhtml:Ne.XHR_RESPONSE_TYPE.DOCUMENT,html:Ne.XHR_RESPONSE_TYPE.DOCUMENT,htm:Ne.XHR_RESPONSE_TYPE.DOCUMENT,xml:Ne.XHR_RESPONSE_TYPE.DOCUMENT,tmx:Ne.XHR_RESPONSE_TYPE.DOCUMENT,svg:Ne.XHR_RESPONSE_TYPE.DOCUMENT,tsx:Ne.XHR_RESPONSE_TYPE.DOCUMENT,gif:Ne.XHR_RESPONSE_TYPE.BLOB,png:Ne.XHR_RESPONSE_TYPE.BLOB,bmp:Ne.XHR_RESPONSE_TYPE.BLOB,jpg:Ne.XHR_RESPONSE_TYPE.BLOB,jpeg:Ne.XHR_RESPONSE_TYPE.BLOB,tif:Ne.XHR_RESPONSE_TYPE.BLOB,tiff:Ne.XHR_RESPONSE_TYPE.BLOB,webp:Ne.XHR_RESPONSE_TYPE.BLOB,tga:Ne.XHR_RESPONSE_TYPE.BLOB,json:Ne.XHR_RESPONSE_TYPE.JSON,text:Ne.XHR_RESPONSE_TYPE.TEXT,txt:Ne.XHR_RESPONSE_TYPE.TEXT,ttf:Ne.XHR_RESPONSE_TYPE.BUFFER,otf:Ne.XHR_RESPONSE_TYPE.BUFFER};Ne.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";function BO(i,e,n){e&&e.indexOf(".")===0&&(e=e.substring(1)),e&&(i[e]=n)}function Ev(i){return i.toString().replace("object ","")}var gj="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function _j(i){for(var e="",n=0;n<i.length;){for(var t=[0,0,0],r=[0,0,0,0],o=0;o<t.length;++o)n<i.length?t[o]=i.charCodeAt(n++)&255:t[o]=0;r[0]=t[0]>>2,r[1]=(t[0]&3)<<4|t[1]>>4,r[2]=(t[1]&15)<<2|t[2]>>6,r[3]=t[2]&63;var s=n-(i.length-1);switch(s){case 2:r[3]=64,r[2]=64;break;case 1:r[3]=64;break;default:break}for(var a=0;a<r.length;++a)e+=gj.charAt(r[a])}return e}var VO=window.URL||window.webkitURL;function vj(i,e){if(!i.data){e();return}if(i.xhr&&i.xhrType===Ne.XHR_RESPONSE_TYPE.BLOB){if(!window.Blob||typeof i.data=="string"){var n=i.xhr.getResponseHeader("content-type");if(n&&n.indexOf("image")===0){i.data=new Image,i.data.src="data:"+n+";base64,"+_j(i.xhr.responseText),i.type=Ne.TYPE.IMAGE,i.data.onload=function(){i.data.onload=null,e()};return}}else if(i.data.type.indexOf("image")===0){var t=VO.createObjectURL(i.data);i.blob=i.data,i.data=new Image,i.data.src=t,i.type=Ne.TYPE.IMAGE,i.data.onload=function(){VO.revokeObjectURL(t),i.data.onload=null,e()};return}}e()}var zO={caching:cj,parsing:vj},Iv=100,yj=/(#[\w-]+)?$/,Pr=function(){function i(n,t){var r=this;n===void 0&&(n=""),t===void 0&&(t=10),this.baseUrl=n,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(a,l){return r._loadResource(a,l)},this._queue=lj(this._boundLoadResource,t),this._queue.pause(),this.resources={},this.onProgress=new br.default,this.onError=new br.default,this.onLoad=new br.default,this.onStart=new br.default,this.onComplete=new br.default;for(var o=0;o<i._defaultBeforeMiddleware.length;++o)this.pre(i._defaultBeforeMiddleware[o]);for(var s=0;s<i._defaultAfterMiddleware.length;++s)this.use(i._defaultAfterMiddleware[s])}var e=i.prototype;return e.add=function(t,r,o,s){if(Array.isArray(t)){for(var a=0;a<t.length;++a)this.add(t[a]);return this}if(typeof t=="object"&&(s=r||t.callback||t.onComplete,o=t,r=t.url,t=t.name||t.key||t.url),typeof r!="string"&&(s=o,o=r,r=t),typeof r!="string")throw new Error("No url passed to add resource to loader.");if(typeof o=="function"&&(s=o,o=null),this.loading&&(!o||!o.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(r=this._prepareUrl(r),this.resources[t]=new Ne(t,r,o),typeof s=="function"&&this.resources[t].onAfterMiddleware.once(s),this.loading){for(var l=o.parentResource,c=[],u=0;u<l.children.length;++u)l.children[u].isComplete||c.push(l.children[u]);var d=l.progressChunk*(c.length+1),h=d/(c.length+2);l.children.push(this.resources[t]),l.progressChunk=h;for(var p=0;p<c.length;++p)c[p].progressChunk=h;this.resources[t].progressChunk=h}return this._queue.push(this.resources[t]),this},e.pre=function(t){return this._beforeMiddleware.push(t),this},e.use=function(t){return this._afterMiddleware.push(t),this},e.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var t in this.resources){var r=this.resources[t];r._onLoadBinding&&r._onLoadBinding.detach(),r.isLoading&&r.abort()}return this.resources={},this},e.load=function(t){if(typeof t=="function"&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var r=this._queue._tasks.length,o=Iv/r,s=0;s<this._queue._tasks.length;++s)this._queue._tasks[s].data.progressChunk=o;this._onStart(),this._queue.resume()}return this},e._prepareUrl=function(t){var r=(0,Sv.default)(t,{strictMode:!0}),o;if(r.protocol||!r.path||t.indexOf("//")===0?o=t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&t.charAt(0)!=="/"?o=this.baseUrl+"/"+t:o=this.baseUrl+t,this.defaultQueryString){var s=yj.exec(o)[0];o=o.substr(0,o.length-s.length),o.indexOf("?")!==-1?o+="&"+this.defaultQueryString:o+="?"+this.defaultQueryString,o+=s}return o},e._loadResource=function(t,r){var o=this;t._dequeue=r,FO(this._beforeMiddleware,function(s,a){s.call(o,t,function(){a(t.isComplete?{}:null)})},function(){t.isComplete?o._onLoad(t):(t._onLoadBinding=t.onComplete.once(o._onLoad,o),t.load())},!0)},e._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},e._onComplete=function(){this.progress=Iv,this.loading=!1,this.onComplete.dispatch(this,this.resources)},e._onLoad=function(t){var r=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),FO(this._afterMiddleware,function(o,s){o.call(r,t,s)},function(){t.onAfterMiddleware.dispatch(t),r.progress=Math.min(Iv,r.progress+t.progressChunk),r.onProgress.dispatch(r,t),t.error?r.onError.dispatch(t.error,r,t):r.onLoad.dispatch(r,t),r._resourcesParsing.splice(r._resourcesParsing.indexOf(t),1),r._queue.idle()&&r._resourcesParsing.length===0&&r._onComplete()},!0)},UO(i,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t}}]),i}();Pr._defaultBeforeMiddleware=[];Pr._defaultAfterMiddleware=[];Pr.pre=function(e){return Pr._defaultBeforeMiddleware.push(e),Pr};Pr.use=function(e){return Pr._defaultAfterMiddleware.push(e),Pr};var Ua=Ne;var Tv=function(i,e){return Tv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r])},Tv(i,e)};function Cj(i,e){Tv(i,e);function n(){this.constructor=i}i.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var bj=function(){function i(){}return i.use=function(e,n){e.data&&e.type===Ne.TYPE.IMAGE&&(e.texture=Ee.fromLoader(e.data,e.url,e.name)),n()},i}(),io=function(i){Cj(e,i);function e(n,t){for(var r=i.call(this,n,t)||this,o=0;o<e._plugins.length;++o){var s=e._plugins[o],a=s.pre,l=s.use;a&&r.pre(a),l&&r.use(l)}return r._protected=!1,r}return e.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(e,"shared",{get:function(){var n=e._shared;return n||(n=new e,n._protected=!0,e._shared=n),n},enumerable:!1,configurable:!0}),e.registerPlugin=function(n){return e._plugins.push(n),n.add&&n.add(),e},e._plugins=[],e}(Pr);io.registerPlugin({use:zO.parsing});io.registerPlugin(bj);var HO=function(){function i(){}return i.init=function(e){e=Object.assign({sharedLoader:!1},e),this.loader=e.sharedLoader?io.shared:new io},i.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},i}();var Av=function(i,e){return Av=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r])},Av(i,e)};function GO(i,e){Av(i,e);function n(){this.constructor=i}i.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var pq=function(i){GO(e,i);function e(n,t,r,o){n===void 0&&(n=1500),r===void 0&&(r=16384),o===void 0&&(o=!1);var s=i.call(this)||this,a=16384;return r>a&&(r=a),s._properties=[!1,!0,!1,!1,!1],s._maxSize=n,s._batchSize=r,s._buffers=null,s._bufferUpdateIDs=[],s._updateID=0,s.interactiveChildren=!1,s.blendMode=Oe.NORMAL,s.autoResize=o,s.roundPixels=!0,s.baseTexture=null,s.setProperties(t),s._tint=0,s.tintRgb=new Float32Array(4),s.tint=16777215,s}return e.prototype.setProperties=function(n){n&&(this._properties[0]="vertices"in n||"scale"in n?!!n.vertices||!!n.scale:this._properties[0],this._properties[1]="position"in n?!!n.position:this._properties[1],this._properties[2]="rotation"in n?!!n.rotation:this._properties[2],this._properties[3]="uvs"in n?!!n.uvs:this._properties[3],this._properties[4]="tint"in n||"alpha"in n?!!n.tint||!!n.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(n){this._tint=n,Yi(n,this.tintRgb)},enumerable:!1,configurable:!0}),e.prototype.render=function(n){var t=this;!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return t.onChildrenChange(0)})),n.batch.setObjectRenderer(n.plugins.particle),n.plugins.particle.render(this))},e.prototype.onChildrenChange=function(n){for(var t=Math.floor(n/this._batchSize);this._bufferUpdateIDs.length<t;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[t]=++this._updateID},e.prototype.dispose=function(){if(this._buffers){for(var n=0;n<this._buffers.length;++n)this._buffers[n].destroy();this._buffers=null}},e.prototype.destroy=function(n){i.prototype.destroy.call(this,n),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},e}(At),WO=function(){function i(e,n,t){this.geometry=new Ds,this.indexBuffer=null,this.size=t,this.dynamicProperties=[],this.staticProperties=[];for(var r=0;r<e.length;++r){var o=e[r];o={attributeName:o.attributeName,size:o.size,uploadFunction:o.uploadFunction,type:o.type||Jt.FLOAT,offset:o.offset},n[r]?this.dynamicProperties.push(o):this.staticProperties.push(o)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return i.prototype.initBuffers=function(){var e=this.geometry,n=0;this.indexBuffer=new ln(jM(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(var t=0;t<this.dynamicProperties.length;++t){var r=this.dynamicProperties[t];r.offset=n,n+=r.size,this.dynamicStride+=r.size}var o=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(o),this.dynamicDataUint32=new Uint32Array(o),this.dynamicBuffer=new ln(this.dynamicData,!1,!1);var s=0;this.staticStride=0;for(var t=0;t<this.staticProperties.length;++t){var r=this.staticProperties[t];r.offset=s,s+=r.size,this.staticStride+=r.size}var a=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(a),this.staticDataUint32=new Uint32Array(a),this.staticBuffer=new ln(this.staticData,!0,!1);for(var t=0;t<this.dynamicProperties.length;++t){var r=this.dynamicProperties[t];e.addAttribute(r.attributeName,this.dynamicBuffer,0,r.type===Jt.UNSIGNED_BYTE,r.type,this.dynamicStride*4,r.offset*4)}for(var t=0;t<this.staticProperties.length;++t){var r=this.staticProperties[t];e.addAttribute(r.attributeName,this.staticBuffer,0,r.type===Jt.UNSIGNED_BYTE,r.type,this.staticStride*4,r.offset*4)}},i.prototype.uploadDynamic=function(e,n,t){for(var r=0;r<this.dynamicProperties.length;r++){var o=this.dynamicProperties[r];o.uploadFunction(e,n,t,o.type===Jt.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,o.offset)}this.dynamicBuffer._updateID++},i.prototype.uploadStatic=function(e,n,t){for(var r=0;r<this.staticProperties.length;r++){var o=this.staticProperties[r];o.uploadFunction(e,n,t,o.type===Jt.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,o.offset)}this.staticBuffer._updateID++},i.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},i}(),Pj=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,wj=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`,XO=function(i){GO(e,i);function e(n){var t=i.call(this,n)||this;return t.shader=null,t.properties=null,t.tempMatrix=new Rt,t.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:t.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:t.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:t.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:t.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:Jt.UNSIGNED_BYTE,uploadFunction:t.uploadTint,offset:0}],t.shader=$i.from(wj,Pj,{}),t.state=Ki.for2d(),t}return e.prototype.render=function(n){var t=n.children,r=n._maxSize,o=n._batchSize,s=this.renderer,a=t.length;if(a!==0){a>r&&!n.autoResize&&(a=r);var l=n._buffers;l||(l=n._buffers=this.generateBuffers(n));var c=t[0]._texture.baseTexture;this.state.blendMode=Ph(n.blendMode,c.alphaMode),s.state.set(this.state);var u=s.gl,d=n.worldTransform.copyTo(this.tempMatrix);d.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=d.toArray(!0),this.shader.uniforms.uColor=LM(n.tintRgb,n.worldAlpha,this.shader.uniforms.uColor,c.alphaMode),this.shader.uniforms.uSampler=c,this.renderer.shader.bind(this.shader);for(var h=!1,p=0,f=0;p<a;p+=o,f+=1){var m=a-p;m>o&&(m=o),f>=l.length&&l.push(this._generateOneMoreBuffer(n));var _=l[f];_.uploadDynamic(t,p,m);var P=n._bufferUpdateIDs[f]||0;h=h||_._updateID<P,h&&(_._updateID=n._updateID,_.uploadStatic(t,p,m)),s.geometry.bind(_.geometry),u.drawElements(u.TRIANGLES,m*6,u.UNSIGNED_SHORT,0)}}},e.prototype.generateBuffers=function(n){for(var t=[],r=n._maxSize,o=n._batchSize,s=n._properties,a=0;a<r;a+=o)t.push(new WO(this.properties,s,o));return t},e.prototype._generateOneMoreBuffer=function(n){var t=n._batchSize,r=n._properties;return new WO(this.properties,r,t)},e.prototype.uploadVertices=function(n,t,r,o,s,a){for(var l=0,c=0,u=0,d=0,h=0;h<r;++h){var p=n[t+h],f=p._texture,m=p.scale.x,_=p.scale.y,P=f.trim,I=f.orig;P?(c=P.x-p.anchor.x*I.width,l=c+P.width,d=P.y-p.anchor.y*I.height,u=d+P.height):(l=I.width*(1-p.anchor.x),c=I.width*-p.anchor.x,u=I.height*(1-p.anchor.y),d=I.height*-p.anchor.y),o[a]=c*m,o[a+1]=d*_,o[a+s]=l*m,o[a+s+1]=d*_,o[a+s*2]=l*m,o[a+s*2+1]=u*_,o[a+s*3]=c*m,o[a+s*3+1]=u*_,a+=s*4}},e.prototype.uploadPosition=function(n,t,r,o,s,a){for(var l=0;l<r;l++){var c=n[t+l].position;o[a]=c.x,o[a+1]=c.y,o[a+s]=c.x,o[a+s+1]=c.y,o[a+s*2]=c.x,o[a+s*2+1]=c.y,o[a+s*3]=c.x,o[a+s*3+1]=c.y,a+=s*4}},e.prototype.uploadRotation=function(n,t,r,o,s,a){for(var l=0;l<r;l++){var c=n[t+l].rotation;o[a]=c,o[a+s]=c,o[a+s*2]=c,o[a+s*3]=c,a+=s*4}},e.prototype.uploadUvs=function(n,t,r,o,s,a){for(var l=0;l<r;++l){var c=n[t+l]._texture._uvs;c?(o[a]=c.x0,o[a+1]=c.y0,o[a+s]=c.x1,o[a+s+1]=c.y1,o[a+s*2]=c.x2,o[a+s*2+1]=c.y2,o[a+s*3]=c.x3,o[a+s*3+1]=c.y3,a+=s*4):(o[a]=0,o[a+1]=0,o[a+s]=0,o[a+s+1]=0,o[a+s*2]=0,o[a+s*2+1]=0,o[a+s*3]=0,o[a+s*3+1]=0,a+=s*4)}},e.prototype.uploadTint=function(n,t,r,o,s,a){for(var l=0;l<r;++l){var c=n[t+l],u=c._texture.baseTexture.alphaMode>0,d=c.alpha,h=d<1&&u?ja(c._tintRGB,d):c._tintRGB+(d*255<<24);o[a]=h,o[a+s]=h,o[a+s*2]=h,o[a+s*3]=h,a+=s*4}},e.prototype.destroy=function(){i.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},e}(Va);var Rs=function(i){return i.MITER="miter",i.BEVEL="bevel",i.ROUND="round",i}(Rs||{}),Fs=function(i){return i.BUTT="butt",i.ROUND="round",i.SQUARE="square",i}(Fs||{}),Oc={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(i,e){if(e===void 0&&(e=20),!this.adaptive||!i||isNaN(i))return e;var n=Math.ceil(i/this.maxLength);return n<this.minSegments?n=this.minSegments:n>this.maxSegments&&(n=this.maxSegments),n}},JO=function(){function i(){this.color=16777215,this.alpha=1,this.texture=Ee.WHITE,this.matrix=null,this.visible=!1,this.reset()}return i.prototype.clone=function(){var e=new i;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e},i.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=Ee.WHITE,this.matrix=null,this.visible=!1},i.prototype.destroy=function(){this.texture=null,this.matrix=null},i}();var Nv=function(i,e){return Nv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r])},Nv(i,e)};function zh(i,e){Nv(i,e);function n(){this.constructor=i}i.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var eE={build:function(i){i.points=i.shape.points.slice()},triangulate:function(i,e){var n=i.points,t=i.holes,r=e.points,o=e.indices;if(n.length>=6){for(var s=[],a=0;a<t.length;a++){var l=t[a];s.push(n.length/2),n=n.concat(l.points)}var c=(0,xh.default)(n,s,2);if(!c)return;for(var u=r.length/2,a=0;a<c.length;a+=3)o.push(c[a]+u),o.push(c[a+1]+u),o.push(c[a+2]+u);for(var a=0;a<n.length;a++)r.push(n[a])}}},qO={build:function(i){var e=i.shape,n=i.points,t=e.x,r=e.y,o,s;if(n.length=0,i.type===en.CIRC)o=e.radius,s=e.radius;else{var a=i.shape;o=a.width,s=a.height}if(!(o===0||s===0)){var l=Math.floor(30*Math.sqrt(e.radius))||Math.floor(15*Math.sqrt(o+s));l/=2.3;for(var c=Math.PI*2/l,u=0;u<l-.5;u++)n.push(t+Math.sin(-c*u)*o,r+Math.cos(-c*u)*s);n.push(n[0],n[1])}},triangulate:function(i,e){var n=i.points,t=e.points,r=e.indices,o=t.length/2,s=o,a=i.shape,l=i.matrix,c=a.x,u=a.y;t.push(i.matrix?l.a*c+l.c*u+l.tx:c,i.matrix?l.b*c+l.d*u+l.ty:u);for(var d=0;d<n.length;d+=2)t.push(n[d],n[d+1]),r.push(o++,s,o)}},xj={build:function(i){var e=i.shape,n=e.x,t=e.y,r=e.width,o=e.height,s=i.points;s.length=0,s.push(n,t,n+r,t,n+r,t+o,n,t+o)},triangulate:function(i,e){var n=i.points,t=e.points,r=t.length/2;t.push(n[0],n[1],n[2],n[3],n[6],n[7],n[4],n[5]),e.indices.push(r,r+1,r+2,r+1,r+2,r+3)}};function za(i,e,n){var t=e-i;return i+t*n}function Vh(i,e,n,t,r,o,s){s===void 0&&(s=[]);for(var a=20,l=s,c=0,u=0,d=0,h=0,p=0,f=0,m=0,_=0;m<=a;++m)_=m/a,c=za(i,n,_),u=za(e,t,_),d=za(n,r,_),h=za(t,o,_),p=za(c,d,_),f=za(u,h,_),l.push(p,f);return l}var Mj={build:function(i){var e=i.shape,n=i.points,t=e.x,r=e.y,o=e.width,s=e.height,a=Math.max(0,Math.min(e.radius,Math.min(o,s)/2));n.length=0,a?(Vh(t,r+a,t,r,t+a,r,n),Vh(t+o-a,r,t+o,r,t+o,r+a,n),Vh(t+o,r+s-a,t+o,r+s,t+o-a,r+s,n),Vh(t+a,r+s,t,r+s,t,r+s-a,n)):n.push(t,r,t+o,r,t+o,r+s,t,r+s)},triangulate:function(i,e){for(var n=i.points,t=e.points,r=e.indices,o=t.length/2,s=(0,xh.default)(n,null,2),a=0,l=s.length;a<l;a+=3)r.push(s[a]+o),r.push(s[a+1]+o),r.push(s[a+2]+o);for(var a=0,l=n.length;a<l;a++)t.push(n[a],n[++a])}};function YO(i,e,n,t,r,o,s,a){var l=i-n*r,c=e-t*r,u=i+n*o,d=e+t*o,h,p;s?(h=t,p=-n):(h=-t,p=n);var f=l+h,m=c+p,_=u+h,P=d+p;return a.push(f,m),a.push(_,P),2}function Ha(i,e,n,t,r,o,s,a){var l=n-i,c=t-e,u=Math.atan2(l,c),d=Math.atan2(r-i,o-e);a&&u<d?u+=Math.PI*2:!a&&u>d&&(d+=Math.PI*2);var h=u,p=d-u,f=Math.abs(p),m=Math.sqrt(l*l+c*c),_=(15*f*Math.sqrt(m)/Math.PI>>0)+1,P=p/_;if(h+=P,a){s.push(i,e),s.push(n,t);for(var I=1,b=h;I<_;I++,b+=P)s.push(i,e),s.push(i+Math.sin(b)*m,e+Math.cos(b)*m);s.push(i,e),s.push(r,o)}else{s.push(n,t),s.push(i,e);for(var I=1,b=h;I<_;I++,b+=P)s.push(i+Math.sin(b)*m,e+Math.cos(b)*m),s.push(i,e);s.push(r,o),s.push(i,e)}return _*2}function Oj(i,e){var n=i.shape,t=i.points||n.points.slice(),r=e.closePointEps;if(t.length!==0){var o=i.lineStyle,s=new R(t[0],t[1]),a=new R(t[t.length-2],t[t.length-1]),l=n.type!==en.POLY||n.closeStroke,c=Math.abs(s.x-a.x)<r&&Math.abs(s.y-a.y)<r;if(l){t=t.slice(),c&&(t.pop(),t.pop(),a.set(t[t.length-2],t[t.length-1]));var u=(s.x+a.x)*.5,d=(a.y+s.y)*.5;t.unshift(u,d),t.push(u,d)}var h=e.points,p=t.length/2,f=t.length,m=h.length/2,_=o.width/2,P=_*_,I=o.miterLimit*o.miterLimit,b=t[0],S=t[1],k=t[2],N=t[3],X=0,F=0,j=-(S-N),z=b-k,ue=0,se=0,ge=Math.sqrt(j*j+z*z);j/=ge,z/=ge,j*=_,z*=_;var Ye=o.alignment,oe=(1-Ye)*2,B=Ye*2;l||(o.cap===Fs.ROUND?f+=Ha(b-j*(oe-B)*.5,S-z*(oe-B)*.5,b-j*oe,S-z*oe,b+j*B,S+z*B,h,!0)+2:o.cap===Fs.SQUARE&&(f+=YO(b,S,j,z,oe,B,!0,h))),h.push(b-j*oe,S-z*oe),h.push(b+j*B,S+z*B);for(var L=1;L<p-1;++L){b=t[(L-1)*2],S=t[(L-1)*2+1],k=t[L*2],N=t[L*2+1],X=t[(L+1)*2],F=t[(L+1)*2+1],j=-(S-N),z=b-k,ge=Math.sqrt(j*j+z*z),j/=ge,z/=ge,j*=_,z*=_,ue=-(N-F),se=k-X,ge=Math.sqrt(ue*ue+se*se),ue/=ge,se/=ge,ue*=_,se*=_;var V=k-b,te=S-N,he=k-X,Se=F-N,ve=te*he-Se*V,rt=ve<0;if(Math.abs(ve)<.1){h.push(k-j*oe,N-z*oe),h.push(k+j*B,N+z*B);continue}var Te=(-j+b)*(-z+N)-(-j+k)*(-z+S),Lt=(-ue+X)*(-se+N)-(-ue+k)*(-se+F),Ze=(V*Lt-he*Te)/ve,Ae=(Se*Te-te*Lt)/ve,Le=(Ze-k)*(Ze-k)+(Ae-N)*(Ae-N),ae=k+(Ze-k)*oe,Qe=N+(Ae-N)*oe,Ge=k-(Ze-k)*B,De=N-(Ae-N)*B,jt=Math.min(V*V+te*te,he*he+Se*Se),$t=rt?oe:B,Qn=jt+$t*$t*P,Jn=Le<=Qn;Jn?o.join===Rs.BEVEL||Le/P>I?(rt?(h.push(ae,Qe),h.push(k+j*B,N+z*B),h.push(ae,Qe),h.push(k+ue*B,N+se*B)):(h.push(k-j*oe,N-z*oe),h.push(Ge,De),h.push(k-ue*oe,N-se*oe),h.push(Ge,De)),f+=2):o.join===Rs.ROUND?rt?(h.push(ae,Qe),h.push(k+j*B,N+z*B),f+=Ha(k,N,k+j*B,N+z*B,k+ue*B,N+se*B,h,!0)+4,h.push(ae,Qe),h.push(k+ue*B,N+se*B)):(h.push(k-j*oe,N-z*oe),h.push(Ge,De),f+=Ha(k,N,k-j*oe,N-z*oe,k-ue*oe,N-se*oe,h,!1)+4,h.push(k-ue*oe,N-se*oe),h.push(Ge,De)):(h.push(ae,Qe),h.push(Ge,De)):(h.push(k-j*oe,N-z*oe),h.push(k+j*B,N+z*B),o.join===Rs.BEVEL||Le/P>I||(o.join===Rs.ROUND?rt?f+=Ha(k,N,k+j*B,N+z*B,k+ue*B,N+se*B,h,!0)+2:f+=Ha(k,N,k-j*oe,N-z*oe,k-ue*oe,N-se*oe,h,!1)+2:(rt?(h.push(Ge,De),h.push(Ge,De)):(h.push(ae,Qe),h.push(ae,Qe)),f+=2)),h.push(k-ue*oe,N-se*oe),h.push(k+ue*B,N+se*B),f+=2)}b=t[(p-2)*2],S=t[(p-2)*2+1],k=t[(p-1)*2],N=t[(p-1)*2+1],j=-(S-N),z=b-k,ge=Math.sqrt(j*j+z*z),j/=ge,z/=ge,j*=_,z*=_,h.push(k-j*oe,N-z*oe),h.push(k+j*B,N+z*B),l||(o.cap===Fs.ROUND?f+=Ha(k-j*(oe-B)*.5,N-z*(oe-B)*.5,k-j*oe,N-z*oe,k+j*B,N+z*B,h,!1)+2:o.cap===Fs.SQUARE&&(f+=YO(k,N,j,z,oe,B,!1,h)));for(var Ko=e.indices,Ks=Oc.epsilon*Oc.epsilon,L=m;L<f+m-2;++L)b=h[L*2],S=h[L*2+1],k=h[(L+1)*2],N=h[(L+1)*2+1],X=h[(L+2)*2],F=h[(L+2)*2+1],!(Math.abs(b*(N-F)+k*(F-S)+X*(S-N))<Ks)&&Ko.push(L,L+1,L+2)}}function Ej(i,e){var n=0,t=i.shape,r=i.points||t.points,o=t.type!==en.POLY||t.closeStroke;if(r.length!==0){var s=e.points,a=e.indices,l=r.length/2,c=s.length/2,u=c;for(s.push(r[0],r[1]),n=1;n<l;n++)s.push(r[n*2],r[n*2+1]),a.push(u,u+1),u++;o&&a.push(u,c)}}function ZO(i,e){i.lineStyle.native?Ej(i,e):Oj(i,e)}var Ij=function(i){zh(e,i);function e(n,t,r,o,s,a){a===void 0&&(a=0);var l=this;s=s||o/2;for(var c=-1*Math.PI/2+a,u=r*2,d=Ba/u,h=[],p=0;p<u;p++){var f=p%2?s:o,m=p*d+c;h.push(n+f*Math.cos(m),t+f*Math.sin(m))}return l=i.call(this,h)||this,l}return e}(Ft),$O=function(){function i(){}return i.curveTo=function(e,n,t,r,o,s){var a=s[s.length-2],l=s[s.length-1],c=l-n,u=a-e,d=r-n,h=t-e,p=Math.abs(c*h-u*d);if(p<1e-8||o===0)return(s[s.length-2]!==e||s[s.length-1]!==n)&&s.push(e,n),null;var f=c*c+u*u,m=d*d+h*h,_=c*d+u*h,P=o*Math.sqrt(f)/p,I=o*Math.sqrt(m)/p,b=P*_/f,S=I*_/m,k=P*h+I*u,N=P*d+I*c,X=u*(I+b),F=c*(I+b),j=h*(P+S),z=d*(P+S),ue=Math.atan2(F-N,X-k),se=Math.atan2(z-N,j-k);return{cx:k+e,cy:N+n,radius:o,startAngle:ue,endAngle:se,anticlockwise:u*d>h*c}},i.arc=function(e,n,t,r,o,s,a,l,c){for(var u=a-s,d=Oc._segmentsCount(Math.abs(u)*o,Math.ceil(Math.abs(u)/Ba)*40),h=u/(d*2),p=h*2,f=Math.cos(h),m=Math.sin(h),_=d-1,P=_%1/_,I=0;I<=_;++I){var b=I+P*I,S=h+s+p*b,k=Math.cos(S),N=-Math.sin(S);c.push((f*k+m*N)*o+t,(f*-N+m*k)*o+r)}},i}(),Sj=function(){function i(){}return i.curveLength=function(e,n,t,r,o,s,a,l){for(var c=10,u=0,d=0,h=0,p=0,f=0,m=0,_=0,P=0,I=0,b=0,S=0,k=e,N=n,X=1;X<=c;++X)d=X/c,h=d*d,p=h*d,f=1-d,m=f*f,_=m*f,P=_*e+3*m*d*t+3*f*h*o+p*a,I=_*n+3*m*d*r+3*f*h*s+p*l,b=k-P,S=N-I,k=P,N=I,u+=Math.sqrt(b*b+S*S);return u},i.curveTo=function(e,n,t,r,o,s,a){var l=a[a.length-2],c=a[a.length-1];a.length-=2;var u=Oc._segmentsCount(i.curveLength(l,c,e,n,t,r,o,s)),d=0,h=0,p=0,f=0,m=0;a.push(l,c);for(var _=1,P=0;_<=u;++_)P=_/u,d=1-P,h=d*d,p=h*d,f=P*P,m=f*P,a.push(p*l+3*h*P*e+3*d*f*t+m*o,p*c+3*h*P*n+3*d*f*r+m*s)},i}(),Tj=function(){function i(){}return i.curveLength=function(e,n,t,r,o,s){var a=e-2*t+o,l=n-2*r+s,c=2*t-2*e,u=2*r-2*n,d=4*(a*a+l*l),h=4*(a*c+l*u),p=c*c+u*u,f=2*Math.sqrt(d+h+p),m=Math.sqrt(d),_=2*d*m,P=2*Math.sqrt(p),I=h/m;return(_*f+m*h*(f-P)+(4*p*d-h*h)*Math.log((2*m+I+f)/(I+P)))/(4*_)},i.curveTo=function(e,n,t,r,o){for(var s=o[o.length-2],a=o[o.length-1],l=Oc._segmentsCount(i.curveLength(s,a,e,n,t,r)),c=0,u=0,d=1;d<=l;++d){var h=d/l;c=s+(e-s)*h,u=a+(n-a)*h,o.push(c+(e+(t-e)*h-c)*h,u+(n+(r-n)*h-u)*h)}},i}(),Aj=function(){function i(){this.reset()}return i.prototype.begin=function(e,n,t){this.reset(),this.style=e,this.start=n,this.attribStart=t},i.prototype.end=function(e,n){this.attribSize=n-this.attribStart,this.size=e-this.start},i.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},i}(),Ns,Dv=(Ns={},Ns[en.POLY]=eE,Ns[en.CIRC]=qO,Ns[en.ELIP]=qO,Ns[en.RECT]=xj,Ns[en.RREC]=Mj,Ns),KO=[],Uh=[];var QO=function(){function i(e,n,t,r){n===void 0&&(n=null),t===void 0&&(t=null),r===void 0&&(r=null),this.shape=e,this.lineStyle=t,this.fillStyle=n,this.matrix=r,this.type=e.type,this.points=[],this.holes=[]}return i.prototype.clone=function(){return new i(this.shape,this.fillStyle,this.lineStyle,this.matrix)},i.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},i}(),Wa=new R,Dj=new Ts,kj=function(i){zh(e,i);function e(){var n=i.call(this)||this;return n.uvsFloat32=null,n.indicesUint16=null,n.points=[],n.colors=[],n.uvs=[],n.indices=[],n.textureIds=[],n.graphicsData=[],n.dirty=0,n.batchDirty=-1,n.cacheDirty=-1,n.clearDirty=0,n.drawCalls=[],n.batches=[],n.shapeIndex=0,n._bounds=new Ts,n.boundsDirty=-1,n.boundsPadding=0,n.batchable=!1,n.indicesUint16=null,n.uvsFloat32=null,n.closePointEps=1e-4,n}return Object.defineProperty(e.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),e.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var n=0;n<this.drawCalls.length;n++)this.drawCalls[n].texArray.clear(),Uh.push(this.drawCalls[n]);this.drawCalls.length=0;for(var n=0;n<this.batches.length;n++){var t=this.batches[n];t.reset(),KO.push(t)}this.batches.length=0},e.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},e.prototype.drawShape=function(n,t,r,o){t===void 0&&(t=null),r===void 0&&(r=null),o===void 0&&(o=null);var s=new QO(n,t,r,o);return this.graphicsData.push(s),this.dirty++,this},e.prototype.drawHole=function(n,t){if(t===void 0&&(t=null),!this.graphicsData.length)return null;var r=new QO(n,null,null,t),o=this.graphicsData[this.graphicsData.length-1];return r.lineStyle=o.lineStyle,o.holes.push(r),this.dirty++,this},e.prototype.destroy=function(){i.prototype.destroy.call(this);for(var n=0;n<this.graphicsData.length;++n)this.graphicsData[n].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},e.prototype.containsPoint=function(n){for(var t=this.graphicsData,r=0;r<t.length;++r){var o=t[r];if(o.fillStyle.visible&&o.shape&&(o.matrix?o.matrix.applyInverse(n,Wa):Wa.copyFrom(n),o.shape.contains(Wa.x,Wa.y))){var s=!1;if(o.holes)for(var a=0;a<o.holes.length;a++){var l=o.holes[a];if(l.shape.contains(Wa.x,Wa.y)){s=!0;break}}if(!s)return!0}}return!1},e.prototype.updateBatches=function(n){if(!this.graphicsData.length){this.batchable=!0;return}if(this.validateBatching()){this.cacheDirty=this.dirty;var t=this.uvs,r=this.graphicsData,o=null,s=null;this.batches.length>0&&(o=this.batches[this.batches.length-1],s=o.style);for(var a=this.shapeIndex;a<r.length;a++){this.shapeIndex++;var l=r[a],c=l.fillStyle,u=l.lineStyle,d=Dv[l.type];d.build(l),l.matrix&&this.transformPoints(l.points,l.matrix);for(var h=0;h<2;h++){var p=h===0?c:u;if(p.visible){var f=p.texture.baseTexture,m=this.indices.length,_=this.points.length/2;f.wrapMode=qi.REPEAT,h===0?this.processFill(l):this.processLine(l);var P=this.points.length/2-_;P!==0&&(o&&!this._compareStyles(s,p)&&(o.end(m,_),o=null),o||(o=KO.pop()||new Aj,o.begin(p,m,_),this.batches.push(o),s=p),this.addUvs(this.points,t,p.texture,_,P,p.matrix))}}}var I=this.indices.length,b=this.points.length/2;if(o&&o.end(I,b),this.batches.length===0){this.batchable=!0;return}if(this.indicesUint16&&this.indices.length===this.indicesUint16.length)this.indicesUint16.set(this.indices);else{var S=b>65535&&n;this.indicesUint16=S?new Uint32Array(this.indices):new Uint16Array(this.indices)}this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}},e.prototype._compareStyles=function(n,t){return!(!n||!t||n.texture.baseTexture!==t.texture.baseTexture||n.color+n.alpha!==t.color+t.alpha||!!n.native!=!!t.native)},e.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var n=0,t=this.graphicsData.length;n<t;n++){var r=this.graphicsData[n],o=r.fillStyle,s=r.lineStyle;if(o&&!o.texture.baseTexture.valid||s&&!s.texture.baseTexture.valid)return!1}return!0},e.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var n=this.batches,t=0,r=n.length;t<r;t++)for(var o=n[t],s=0;s<o.size;s++){var a=o.start+s;this.indicesUint16[a]=this.indicesUint16[a]-o.attribStart}},e.prototype.isBatchable=function(){if(this.points.length>65535*2)return!1;for(var n=this.batches,t=0;t<n.length;t++)if(n[t].style.native)return!1;return this.points.length<e.BATCHABLE_SIZE*2},e.prototype.buildDrawCalls=function(){for(var n=++wt._globalBatch,t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),Uh.push(this.drawCalls[t]);this.drawCalls.length=0;var r=this.colors,o=this.textureIds,s=Uh.pop();s||(s=new Fh,s.texArray=new Lh),s.texArray.count=0,s.start=0,s.size=0,s.type=si.TRIANGLES;var a=0,l=null,c=0,u=!1,d=si.TRIANGLES,h=0;this.drawCalls.push(s);for(var t=0;t<this.batches.length;t++){var p=this.batches[t],f=8,m=p.style,_=m.texture.baseTexture;u!==!!m.native&&(u=!!m.native,d=u?si.LINES:si.TRIANGLES,l=null,a=f,n++),l!==_&&(l=_,_._batchEnabled!==n&&(a===f&&(n++,a=0,s.size>0&&(s=Uh.pop(),s||(s=new Fh,s.texArray=new Lh),this.drawCalls.push(s)),s.start=h,s.size=0,s.texArray.count=0,s.type=d),_.touched=1,_._batchEnabled=n,_._batchLocation=a,_.wrapMode=10497,s.texArray.elements[s.texArray.count++]=_,a++)),s.size+=p.size,h+=p.size,c=_._batchLocation,this.addColors(r,m.color,m.alpha,p.attribSize,p.attribStart),this.addTextureIds(o,c,p.attribSize,p.attribStart)}wt._globalBatch=n,this.packAttributes()},e.prototype.packAttributes=function(){for(var n=this.points,t=this.uvs,r=this.colors,o=this.textureIds,s=new ArrayBuffer(n.length*3*4),a=new Float32Array(s),l=new Uint32Array(s),c=0,u=0;u<n.length/2;u++)a[c++]=n[u*2],a[c++]=n[u*2+1],a[c++]=t[u*2],a[c++]=t[u*2+1],l[c++]=r[u],a[c++]=o[u];this._buffer.update(s),this._indexBuffer.update(this.indicesUint16)},e.prototype.processFill=function(n){if(n.holes.length)this.processHoles(n.holes),eE.triangulate(n,this);else{var t=Dv[n.type];t.triangulate(n,this)}},e.prototype.processLine=function(n){ZO(n,this);for(var t=0;t<n.holes.length;t++)ZO(n.holes[t],this)},e.prototype.processHoles=function(n){for(var t=0;t<n.length;t++){var r=n[t],o=Dv[r.type];o.build(r),r.matrix&&this.transformPoints(r.points,r.matrix)}},e.prototype.calculateBounds=function(){var n=this._bounds,t=Dj,r=Rt.IDENTITY;this._bounds.clear(),t.clear();for(var o=0;o<this.graphicsData.length;o++){var s=this.graphicsData[o],a=s.shape,l=s.type,c=s.lineStyle,u=s.matrix||Rt.IDENTITY,d=0;if(c&&c.visible){var h=c.alignment;d=c.width,l===en.POLY?d=d*(.5+Math.abs(.5-h)):d=d*Math.max(0,h)}if(r!==u&&(t.isEmpty()||(n.addBoundsMatrix(t,r),t.clear()),r=u),l===en.RECT||l===en.RREC){var p=a;t.addFramePad(p.x,p.y,p.x+p.width,p.y+p.height,d,d)}else if(l===en.CIRC){var f=a;t.addFramePad(f.x,f.y,f.x,f.y,f.radius+d,f.radius+d)}else if(l===en.ELIP){var m=a;t.addFramePad(m.x,m.y,m.x,m.y,m.width+d,m.height+d)}else{var _=a;n.addVerticesMatrix(r,_.points,0,_.points.length,d,d)}}t.isEmpty()||n.addBoundsMatrix(t,r),n.pad(this.boundsPadding,this.boundsPadding)},e.prototype.transformPoints=function(n,t){for(var r=0;r<n.length/2;r++){var o=n[r*2],s=n[r*2+1];n[r*2]=t.a*o+t.c*s+t.tx,n[r*2+1]=t.b*o+t.d*s+t.ty}},e.prototype.addColors=function(n,t,r,o,s){s===void 0&&(s=0);var a=(t>>16)+(t&65280)+((t&255)<<16),l=ja(a,r);n.length=Math.max(n.length,s+o);for(var c=0;c<o;c++)n[s+c]=l},e.prototype.addTextureIds=function(n,t,r,o){o===void 0&&(o=0),n.length=Math.max(n.length,o+r);for(var s=0;s<r;s++)n[o+s]=t},e.prototype.addUvs=function(n,t,r,o,s,a){a===void 0&&(a=null);for(var l=0,c=t.length,u=r.frame;l<s;){var d=n[(o+l)*2],h=n[(o+l)*2+1];if(a){var p=a.a*d+a.c*h+a.tx;h=a.b*d+a.d*h+a.ty,d=p}l++,t.push(d/u.width,h/u.height)}var f=r.baseTexture;(u.width<f.width||u.height<f.height)&&this.adjustUvs(t,r,c,s)},e.prototype.adjustUvs=function(n,t,r,o){for(var s=t.baseTexture,a=1e-6,l=r+o*2,c=t.frame,u=c.width/s.width,d=c.height/s.height,h=c.x/c.width,p=c.y/c.height,f=Math.floor(n[r]+a),m=Math.floor(n[r+1]+a),_=r+2;_<l;_+=2)f=Math.min(f,Math.floor(n[_]+a)),m=Math.min(m,Math.floor(n[_+1]+a));h-=f,p-=m;for(var _=r;_<l;_+=2)n[_]=(n[_]+h)*u,n[_+1]=(n[_+1]+p)*d},e.BATCHABLE_SIZE=100,e}(Mv),Nj=function(i){zh(e,i);function e(){var n=i!==null&&i.apply(this,arguments)||this;return n.width=0,n.alignment=.5,n.native=!1,n.cap=Fs.BUTT,n.join=Rs.MITER,n.miterLimit=10,n}return e.prototype.clone=function(){var n=new e;return n.color=this.color,n.alpha=this.alpha,n.texture=this.texture,n.matrix=this.matrix,n.visible=this.visible,n.width=this.width,n.alignment=this.alignment,n.native=this.native,n.cap=this.cap,n.join=this.join,n.miterLimit=this.miterLimit,n},e.prototype.reset=function(){i.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},e}(JO),Rj=new Float32Array(3),kv={},bt=function(i){zh(e,i);function e(n){n===void 0&&(n=null);var t=i.call(this)||this;return t._geometry=n||new kj,t._geometry.refCount++,t.shader=null,t.state=Ki.for2d(),t._fillStyle=new JO,t._lineStyle=new Nj,t._matrix=null,t._holeMode=!1,t.currentPath=null,t.batches=[],t.batchTint=-1,t.batchDirty=-1,t.vertexData=null,t.pluginName="batch",t._transformID=-1,t.tint=16777215,t.blendMode=Oe.NORMAL,t}return Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return this.finishPoly(),new e(this._geometry)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(n){this.state.blendMode=n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(n){this._tint=n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),e.prototype.lineStyle=function(n){if(n===void 0&&(n=null),typeof n=="number"){var t=arguments;n={width:t[0]||0,color:t[1]||0,alpha:t[2]!==void 0?t[2]:1,alignment:t[3]!==void 0?t[3]:.5,native:!!t[4]}}return this.lineTextureStyle(n)},e.prototype.lineTextureStyle=function(n){if(typeof n=="number"){li("v5.2.0","Please use object-based options for Graphics#lineTextureStyle");var t=arguments,r=t[0],o=t[1],s=t[2],a=t[3],l=t[4],c=t[5],u=t[6];n={width:r,texture:o,color:s,alpha:a,matrix:l,alignment:c,native:u},Object.keys(n).forEach(function(h){return n[h]===void 0&&delete n[h]})}n=Object.assign({width:0,texture:Ee.WHITE,color:n&&n.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:Fs.BUTT,join:Rs.MITER,miterLimit:10},n),this.currentPath&&this.startPoly();var d=n.width>0&&n.alpha>0;return d?(n.matrix&&(n.matrix=n.matrix.clone(),n.matrix.invert()),Object.assign(this._lineStyle,{visible:d},n)):this._lineStyle.reset(),this},e.prototype.startPoly=function(){if(this.currentPath){var n=this.currentPath.points,t=this.currentPath.points.length;t>2&&(this.drawShape(this.currentPath),this.currentPath=new Ft,this.currentPath.closeStroke=!1,this.currentPath.points.push(n[t-2],n[t-1]))}else this.currentPath=new Ft,this.currentPath.closeStroke=!1},e.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},e.prototype.moveTo=function(n,t){return this.startPoly(),this.currentPath.points[0]=n,this.currentPath.points[1]=t,this},e.prototype.lineTo=function(n,t){this.currentPath||this.moveTo(0,0);var r=this.currentPath.points,o=r[r.length-2],s=r[r.length-1];return(o!==n||s!==t)&&r.push(n,t),this},e.prototype._initCurve=function(n,t){n===void 0&&(n=0),t===void 0&&(t=0),this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[n,t]):this.moveTo(n,t)},e.prototype.quadraticCurveTo=function(n,t,r,o){this._initCurve();var s=this.currentPath.points;return s.length===0&&this.moveTo(0,0),Tj.curveTo(n,t,r,o,s),this},e.prototype.bezierCurveTo=function(n,t,r,o,s,a){return this._initCurve(),Sj.curveTo(n,t,r,o,s,a,this.currentPath.points),this},e.prototype.arcTo=function(n,t,r,o,s){this._initCurve(n,t);var a=this.currentPath.points,l=$O.curveTo(n,t,r,o,s,a);if(l){var c=l.cx,u=l.cy,d=l.radius,h=l.startAngle,p=l.endAngle,f=l.anticlockwise;this.arc(c,u,d,h,p,f)}return this},e.prototype.arc=function(n,t,r,o,s,a){if(a===void 0&&(a=!1),o===s)return this;!a&&s<=o?s+=Ba:a&&o<=s&&(o+=Ba);var l=s-o;if(l===0)return this;var c=n+Math.cos(o)*r,u=t+Math.sin(o)*r,d=this._geometry.closePointEps,h=this.currentPath?this.currentPath.points:null;if(h){var p=Math.abs(h[h.length-2]-c),f=Math.abs(h[h.length-1]-u);p<d&&f<d||h.push(c,u)}else this.moveTo(c,u),h=this.currentPath.points;return $O.arc(c,u,n,t,r,o,s,a,h),this},e.prototype.beginFill=function(n,t){return n===void 0&&(n=0),t===void 0&&(t=1),this.beginTextureFill({texture:Ee.WHITE,color:n,alpha:t})},e.prototype.beginTextureFill=function(n){if(n instanceof Ee){li("v5.2.0","Please use object-based options for Graphics#beginTextureFill");var t=arguments,r=t[0],o=t[1],s=t[2],a=t[3];n={texture:r,color:o,alpha:s,matrix:a},Object.keys(n).forEach(function(c){return n[c]===void 0&&delete n[c]})}n=Object.assign({texture:Ee.WHITE,color:16777215,alpha:1,matrix:null},n),this.currentPath&&this.startPoly();var l=n.alpha>0;return l?(n.matrix&&(n.matrix=n.matrix.clone(),n.matrix.invert()),Object.assign(this._fillStyle,{visible:l},n)):this._fillStyle.reset(),this},e.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},e.prototype.drawRect=function(n,t,r,o){return this.drawShape(new ze(n,t,r,o))},e.prototype.drawRoundedRect=function(n,t,r,o,s){return this.drawShape(new GM(n,t,r,o,s))},e.prototype.drawCircle=function(n,t,r){return this.drawShape(new HM(n,t,r))},e.prototype.drawEllipse=function(n,t,r,o){return this.drawShape(new WM(n,t,r,o))},e.prototype.drawPolygon=function(){for(var n=arguments,t=[],r=0;r<arguments.length;r++)t[r]=n[r];var o,s=!0,a=t[0];a.points?(s=a.closeStroke,o=a.points):Array.isArray(t[0])?o=t[0]:o=t;var l=new Ft(o);return l.closeStroke=s,this.drawShape(l),this},e.prototype.drawShape=function(n){return this._holeMode?this._geometry.drawHole(n,this._matrix):this._geometry.drawShape(n,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},e.prototype.drawStar=function(n,t,r,o,s,a){return a===void 0&&(a=0),this.drawPolygon(new Ij(n,t,r,o,s,a))},e.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},e.prototype.isFastRect=function(){var n=this._geometry.graphicsData;return n.length===1&&n[0].shape.type===en.RECT&&!(n[0].lineStyle.visible&&n[0].lineStyle.width)},e.prototype._render=function(n){this.finishPoly();var t=this._geometry,r=n.context.supports.uint32Indices;t.updateBatches(r),t.batchable?(this.batchDirty!==t.batchDirty&&this._populateBatches(),this._renderBatched(n)):(n.batch.flush(),this._renderDirect(n))},e.prototype._populateBatches=function(){var n=this._geometry,t=this.blendMode,r=n.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=n.batchDirty,this.batches.length=r,this.vertexData=new Float32Array(n.points);for(var o=0;o<r;o++){var s=n.batches[o],a=s.style.color,l=new Float32Array(this.vertexData.buffer,s.attribStart*4*2,s.attribSize*2),c=new Float32Array(n.uvsFloat32.buffer,s.attribStart*4*2,s.attribSize*2),u=new Uint16Array(n.indicesUint16.buffer,s.start*2,s.size),d={vertexData:l,blendMode:t,indices:u,uvs:c,_batchRGB:Yi(a),_tintRGB:a,_texture:s.style.texture,alpha:s.style.alpha,worldAlpha:1};this.batches[o]=d}},e.prototype._renderBatched=function(n){if(this.batches.length){n.batch.setObjectRenderer(n.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var t=0,r=this.batches.length;t<r;t++){var o=this.batches[t];o.worldAlpha=this.worldAlpha*o.alpha,n.plugins[this.pluginName].render(o)}}},e.prototype._renderDirect=function(n){var t=this._resolveDirectShader(n),r=this._geometry,o=this.tint,s=this.worldAlpha,a=t.uniforms,l=r.drawCalls;a.translationMatrix=this.transform.worldTransform,a.tint[0]=(o>>16&255)/255*s,a.tint[1]=(o>>8&255)/255*s,a.tint[2]=(o&255)/255*s,a.tint[3]=s,n.shader.bind(t),n.geometry.bind(r,t),n.state.set(this.state);for(var c=0,u=l.length;c<u;c++)this._renderDrawCallDirect(n,r.drawCalls[c])},e.prototype._renderDrawCallDirect=function(n,t){for(var r=t.texArray,o=t.type,s=t.size,a=t.start,l=r.count,c=0;c<l;c++)n.texture.bind(r.elements[c],c);n.geometry.draw(o,s,a)},e.prototype._resolveDirectShader=function(n){var t=this.shader,r=this.pluginName;if(!t){if(!kv[r]){for(var o=n.plugins.batch.MAX_TEXTURES,s=new Int32Array(o),a=0;a<o;a++)s[a]=a;var l={tint:new Float32Array([1,1,1,1]),translationMatrix:new Rt,default:Fo.from({uSamplers:s},!0)},c=n.plugins[r]._shader.program;kv[r]=new $i(c,l)}t=kv[r]}return t},e.prototype._calculateBounds=function(){this.finishPoly();var n=this._geometry;if(n.graphicsData.length){var t=n.bounds,r=t.minX,o=t.minY,s=t.maxX,a=t.maxY;this._bounds.addFrame(this.transform,r,o,s,a)}},e.prototype.containsPoint=function(n){return this.worldTransform.applyInverse(n,e._TEMP_POINT),this._geometry.containsPoint(e._TEMP_POINT)},e.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var n=Yi(this.tint,Rj),t=0;t<this.batches.length;t++){var r=this.batches[t],o=r._batchRGB,s=n[0]*o[0]*255,a=n[1]*o[1]*255,l=n[2]*o[2]*255,c=(s<<16)+(a<<8)+(l|0);r._tintRGB=(c>>16)+(c&65280)+((c&255)<<16)}}},e.prototype.calculateVertices=function(){var n=this.transform._worldID;if(this._transformID!==n){this._transformID=n;for(var t=this.transform.worldTransform,r=t.a,o=t.b,s=t.c,a=t.d,l=t.tx,c=t.ty,u=this._geometry.points,d=this.vertexData,h=0,p=0;p<u.length;p+=2){var f=u[p],m=u[p+1];d[h++]=r*f+s*m+l,d[h++]=a*m+o*f+c}}},e.prototype.closePath=function(){var n=this.currentPath;return n&&(n.closeStroke=!0),this},e.prototype.setMatrix=function(n){return this._matrix=n,this},e.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},e.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},e.prototype.destroy=function(n){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,i.prototype.destroy.call(this,n)},e._TEMP_POINT=new R,e}(At);var Rv=function(i,e){return Rv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r])},Rv(i,e)};function Fj(i,e){Rv(i,e);function n(){this.constructor=i}i.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Ec=new R,Lj=new Uint16Array([0,1,2,0,2,3]),ro=function(i){Fj(e,i);function e(n){var t=i.call(this)||this;return t._anchor=new Ro(t._onAnchorUpdate,t,n?n.defaultAnchor.x:0,n?n.defaultAnchor.y:0),t._texture=null,t._width=0,t._height=0,t._tint=null,t._tintRGB=null,t.tint=16777215,t.blendMode=Oe.NORMAL,t._cachedTint=16777215,t.uvs=null,t.texture=n||Ee.EMPTY,t.vertexData=new Float32Array(8),t.vertexTrimmedData=null,t._transformID=-1,t._textureID=-1,t._transformTrimmedID=-1,t._textureTrimmedID=-1,t.indices=Lj,t.pluginName="batch",t.isSprite=!0,t._roundPixels=me.ROUND_PIXELS,t}return e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Do(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Do(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){var n=this._texture;if(!(this._transformID===this.transform._worldID&&this._textureID===n._updateID)){this._textureID!==n._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=n._updateID;var t=this.transform.worldTransform,r=t.a,o=t.b,s=t.c,a=t.d,l=t.tx,c=t.ty,u=this.vertexData,d=n.trim,h=n.orig,p=this._anchor,f=0,m=0,_=0,P=0;if(d?(m=d.x-p._x*h.width,f=m+d.width,P=d.y-p._y*h.height,_=P+d.height):(m=-p._x*h.width,f=m+h.width,P=-p._y*h.height,_=P+h.height),u[0]=r*m+s*P+l,u[1]=a*P+o*m+c,u[2]=r*f+s*P+l,u[3]=a*P+o*f+c,u[4]=r*f+s*_+l,u[5]=a*_+o*f+c,u[6]=r*m+s*_+l,u[7]=a*_+o*m+c,this._roundPixels)for(var I=me.RESOLUTION,b=0;b<u.length;++b)u[b]=Math.round((u[b]*I|0)/I)}},e.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var n=this._texture,t=this.vertexTrimmedData,r=n.orig,o=this._anchor,s=this.transform.worldTransform,a=s.a,l=s.b,c=s.c,u=s.d,d=s.tx,h=s.ty,p=-o._x*r.width,f=p+r.width,m=-o._y*r.height,_=m+r.height;t[0]=a*p+c*m+d,t[1]=u*m+l*p+h,t[2]=a*f+c*m+d,t[3]=u*m+l*f+h,t[4]=a*f+c*_+d,t[5]=u*_+l*f+h,t[6]=a*p+c*_+d,t[7]=u*_+l*p+h},e.prototype._render=function(n){this.calculateVertices(),n.batch.setObjectRenderer(n.plugins[this.pluginName]),n.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var n=this._texture.trim,t=this._texture.orig;!n||n.width===t.width&&n.height===t.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(n){return this.children.length===0?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),n||(this._localBoundsRect||(this._localBoundsRect=new ze),n=this._localBoundsRect),this._bounds.getRectangle(n)):i.prototype.getLocalBounds.call(this,n)},e.prototype.containsPoint=function(n){this.worldTransform.applyInverse(n,Ec);var t=this._texture.orig.width,r=this._texture.orig.height,o=-t*this.anchor.x,s=0;return Ec.x>=o&&Ec.x<o+t&&(s=-r*this.anchor.y,Ec.y>=s&&Ec.y<s+r)},e.prototype.destroy=function(n){i.prototype.destroy.call(this,n),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;var t=typeof n=="boolean"?n:n&&n.texture;if(t){var r=typeof n=="boolean"?n:n&&n.baseTexture;this._texture.destroy(!!r)}this._texture=null},e.from=function(n,t){var r=n instanceof Ee?n:Ee.from(n,t);return new e(r)},Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(n){this._roundPixels!==n&&(this._transformID=-1),this._roundPixels=n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(n){var t=Do(this.scale.x)||1;this.scale.x=t*n/this._texture.orig.width,this._width=n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(n){var t=Do(this.scale.y)||1;this.scale.y=t*n/this._texture.orig.height,this._height=n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(n){this._anchor.copyFrom(n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(n){this._tint=n,this._tintRGB=(n>>16)+(n&65280)+((n&255)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(n){this._texture!==n&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=n||Ee.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,n&&(n.baseTexture.valid?this._onTextureUpdate():n.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),e}(At);var Bv=function(i,e){return Bv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r])},Bv(i,e)};function jj(i,e){Bv(i,e);function n(){this.constructor=i}i.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Ic=function(i){return i[i.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",i[i.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",i}(Ic||{}),Fv={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Ic.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},Bj=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Bo=function(){function i(e){this.styleID=0,this.reset(),jv(this,e,e)}return i.prototype.clone=function(){var e={};return jv(e,this,Fv),new i(e)},i.prototype.reset=function(){jv(this,Fv,Fv)},Object.defineProperty(i.prototype,"align",{get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"breakWords",{get:function(){return this._breakWords},set:function(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(e){var n=Lv(e);this._dropShadowColor!==n&&(this._dropShadowColor=n,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fill",{get:function(){return this._fill},set:function(e){var n=Lv(e);this._fill!==n&&(this._fill=n,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(e){Vj(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"leading",{get:function(){return this._leading},set:function(e){this._leading!==e&&(this._leading=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"padding",{get:function(){return this._padding},set:function(e){this._padding!==e&&(this._padding=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"stroke",{get:function(){return this._stroke},set:function(e){var n=Lv(e);this._stroke!==n&&(this._stroke=n,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"trim",{get:function(){return this._trim},set:function(e){this._trim!==e&&(this._trim=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)},enumerable:!1,configurable:!0}),i.prototype.toFontString=function(){var e=typeof this.fontSize=="number"?this.fontSize+"px":this.fontSize,n=this.fontFamily;Array.isArray(this.fontFamily)||(n=this.fontFamily.split(","));for(var t=n.length-1;t>=0;t--){var r=n[t].trim();!/([\"\'])[^\'\"]+\1/.test(r)&&Bj.indexOf(r)<0&&(r='"'+r+'"'),n[t]=r}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+e+" "+n.join(",")},i}();function tE(i){return typeof i=="number"?Ch(i):(typeof i=="string"&&i.indexOf("0x")===0&&(i=i.replace("0x","#")),i)}function Lv(i){if(Array.isArray(i)){for(var e=0;e<i.length;++e)i[e]=tE(i[e]);return i}else return tE(i)}function Vj(i,e){if(!Array.isArray(i)||!Array.isArray(e)||i.length!==e.length)return!1;for(var n=0;n<i.length;++n)if(i[n]!==e[n])return!1;return!0}function jv(i,e,n){for(var t in n)Array.isArray(e[t])?i[t]=e[t].slice():i[t]=e[t]}var ui=function(){function i(e,n,t,r,o,s,a,l,c){this.text=e,this.style=n,this.width=t,this.height=r,this.lines=o,this.lineWidths=s,this.lineHeight=a,this.maxLineWidth=l,this.fontProperties=c}return i.measureText=function(e,n,t,r){r===void 0&&(r=i._canvas),t=t??n.wordWrap;var o=n.toFontString(),s=i.measureFont(o);s.fontSize===0&&(s.fontSize=n.fontSize,s.ascent=n.fontSize);var a=r.getContext("2d");a.font=o;for(var l=t?i.wordWrap(e,n,r):e,c=l.split(/(?:\r\n|\r|\n)/),u=new Array(c.length),d=0,h=0;h<c.length;h++){var p=a.measureText(c[h]).width+(c[h].length-1)*n.letterSpacing;u[h]=p,d=Math.max(d,p)}var f=d+n.strokeThickness;n.dropShadow&&(f+=n.dropShadowDistance);var m=n.lineHeight||s.fontSize+n.strokeThickness,_=Math.max(m,s.fontSize+n.strokeThickness)+(c.length-1)*(m+n.leading);return n.dropShadow&&(_+=n.dropShadowDistance),new i(e,n,f,_,c,u,m+n.leading,d,s)},i.wordWrap=function(e,n,t){t===void 0&&(t=i._canvas);for(var r=t.getContext("2d"),o=0,s="",a="",l=Object.create(null),c=n.letterSpacing,u=n.whiteSpace,d=i.collapseSpaces(u),h=i.collapseNewlines(u),p=!d,f=n.wordWrapWidth+c,m=i.tokenize(e),_=0;_<m.length;_++){var P=m[_];if(i.isNewline(P)){if(!h){a+=i.addLine(s),p=!d,s="",o=0;continue}P=" "}if(d){var I=i.isBreakingSpace(P),b=i.isBreakingSpace(s[s.length-1]);if(I&&b)continue}var S=i.getFromCache(P,c,l,r);if(S>f)if(s!==""&&(a+=i.addLine(s),s="",o=0),i.canBreakWords(P,n.breakWords))for(var k=i.wordWrapSplit(P),N=0;N<k.length;N++){for(var X=k[N],F=1;k[N+F];){var j=k[N+F],z=X[X.length-1];if(!i.canBreakChars(z,j,P,N,n.breakWords))X+=j;else break;F++}N+=X.length-1;var ue=i.getFromCache(X,c,l,r);ue+o>f&&(a+=i.addLine(s),p=!1,s="",o=0),s+=X,o+=ue}else{s.length>0&&(a+=i.addLine(s),s="",o=0);var se=_===m.length-1;a+=i.addLine(P,!se),p=!1,s="",o=0}else S+o>f&&(p=!1,a+=i.addLine(s),s="",o=0),(s.length>0||!i.isBreakingSpace(P)||p)&&(s+=P,o+=S)}return a+=i.addLine(s,!1),a},i.addLine=function(e,n){return n===void 0&&(n=!0),e=i.trimRight(e),e=n?e+`
`:e,e},i.getFromCache=function(e,n,t,r){var o=t[e];if(typeof o!="number"){var s=e.length*n;o=r.measureText(e).width+s,t[e]=o}return o},i.collapseSpaces=function(e){return e==="normal"||e==="pre-line"},i.collapseNewlines=function(e){return e==="normal"},i.trimRight=function(e){if(typeof e!="string")return"";for(var n=e.length-1;n>=0;n--){var t=e[n];if(!i.isBreakingSpace(t))break;e=e.slice(0,-1)}return e},i.isNewline=function(e){return typeof e!="string"?!1:i._newlines.indexOf(e.charCodeAt(0))>=0},i.isBreakingSpace=function(e){return typeof e!="string"?!1:i._breakingSpaces.indexOf(e.charCodeAt(0))>=0},i.tokenize=function(e){var n=[],t="";if(typeof e!="string")return n;for(var r=0;r<e.length;r++){var o=e[r];if(i.isBreakingSpace(o)||i.isNewline(o)){t!==""&&(n.push(t),t=""),n.push(o);continue}t+=o}return t!==""&&n.push(t),n},i.canBreakWords=function(e,n){return n},i.canBreakChars=function(e,n,t,r,o){return!0},i.wordWrapSplit=function(e){return e.split("")},i.measureFont=function(e){if(i._fonts[e])return i._fonts[e];var n={ascent:0,descent:0,fontSize:0},t=i._canvas,r=i._context;r.font=e;var o=i.METRICS_STRING+i.BASELINE_SYMBOL,s=Math.ceil(r.measureText(o).width),a=Math.ceil(r.measureText(i.BASELINE_SYMBOL).width),l=2*a;a=a*i.BASELINE_MULTIPLIER|0,t.width=s,t.height=l,r.fillStyle="#f00",r.fillRect(0,0,s,l),r.font=e,r.textBaseline="alphabetic",r.fillStyle="#000",r.fillText(o,0,a);var c=r.getImageData(0,0,s,l).data,u=c.length,d=s*4,h=0,p=0,f=!1;for(h=0;h<a;++h){for(var m=0;m<d;m+=4)if(c[p+m]!==255){f=!0;break}if(!f)p+=d;else break}for(n.ascent=a-h,p=u-d,f=!1,h=l;h>a;--h){for(var m=0;m<d;m+=4)if(c[p+m]!==255){f=!0;break}if(!f)p-=d;else break}return n.descent=h-a,n.fontSize=n.ascent+n.descent,i._fonts[e]=n,n},i.clearMetrics=function(e){e===void 0&&(e=""),e?delete i._fonts[e]:i._fonts={}},i}(),Hh=function(){try{var i=new OffscreenCanvas(0,0),e=i.getContext("2d");return e&&e.measureText?i:document.createElement("canvas")}catch{return document.createElement("canvas")}}();Hh.width=Hh.height=10;ui._canvas=Hh;ui._context=Hh.getContext("2d");ui._fonts={};ui.METRICS_STRING="|\xC9q\xC5";ui.BASELINE_SYMBOL="M";ui.BASELINE_MULTIPLIER=1.4;ui._newlines=[10,13];ui._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var Uj={texture:!0,children:!1,baseTexture:!0},Vv=function(i){jj(e,i);function e(n,t,r){var o=this,s=!1;r||(r=document.createElement("canvas"),s=!0),r.width=3,r.height=3;var a=Ee.from(r);return a.orig=new ze,a.trim=new ze,o=i.call(this,a)||this,o._ownCanvas=s,o.canvas=r,o.context=o.canvas.getContext("2d"),o._resolution=me.RESOLUTION,o._autoResolution=!0,o._text=null,o._style=null,o._styleListener=null,o._font="",o.text=n,o.style=t,o.localStyleID=-1,o}return e.prototype.updateText=function(n){var t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!(!this.dirty&&n)){this._font=this._style.toFontString();var r=this.context,o=ui.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=o.width,a=o.height,l=o.lines,c=o.lineHeight,u=o.lineWidths,d=o.maxLineWidth,h=o.fontProperties;this.canvas.width=Math.ceil((Math.max(1,s)+t.padding*2)*this._resolution),this.canvas.height=Math.ceil((Math.max(1,a)+t.padding*2)*this._resolution),r.scale(this._resolution,this._resolution),r.clearRect(0,0,this.canvas.width,this.canvas.height),r.font=this._font,r.lineWidth=t.strokeThickness,r.textBaseline=t.textBaseline,r.lineJoin=t.lineJoin,r.miterLimit=t.miterLimit;for(var p,f,m=t.dropShadow?2:1,_=0;_<m;++_){var P=t.dropShadow&&_===0,I=P?Math.ceil(Math.max(1,a)+t.padding*2):0,b=I*this._resolution;if(P){r.fillStyle="black",r.strokeStyle="black";var S=t.dropShadowColor,k=Yi(typeof S=="number"?S:bh(S)),N=t.dropShadowBlur*this._resolution,X=t.dropShadowDistance*this._resolution;r.shadowColor="rgba("+k[0]*255+","+k[1]*255+","+k[2]*255+","+t.dropShadowAlpha+")",r.shadowBlur=N,r.shadowOffsetX=Math.cos(t.dropShadowAngle)*X,r.shadowOffsetY=Math.sin(t.dropShadowAngle)*X+b}else r.fillStyle=this._generateFillStyle(t,l,o),r.strokeStyle=t.stroke,r.shadowColor="black",r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0;for(var F=0;F<l.length;F++)p=t.strokeThickness/2,f=t.strokeThickness/2+F*c+h.ascent,t.align==="right"?p+=d-u[F]:t.align==="center"&&(p+=(d-u[F])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(l[F],p+t.padding,f+t.padding-I,!0),t.fill&&this.drawLetterSpacing(l[F],p+t.padding,f+t.padding-I)}this.updateTexture()}},e.prototype.drawLetterSpacing=function(n,t,r,o){o===void 0&&(o=!1);var s=this._style,a=s.letterSpacing;if(a===0){o?this.context.strokeText(n,t,r):this.context.fillText(n,t,r);return}for(var l=t,c=Array.from?Array.from(n):n.split(""),u=this.context.measureText(n).width,d=0,h=0;h<c.length;++h){var p=c[h];o?this.context.strokeText(p,l,r):this.context.fillText(p,l,r),d=this.context.measureText(n.substring(h+1)).width,l+=u-d+a,u=d}},e.prototype.updateTexture=function(){var n=this.canvas;if(this._style.trim){var t=BM(n);t.data&&(n.width=t.width,n.height=t.height,this.context.putImageData(t.data,0,0))}var r=this._texture,o=this._style,s=o.trim?0:o.padding,a=r.baseTexture;r.trim.width=r._frame.width=Math.ceil(n.width/this._resolution),r.trim.height=r._frame.height=Math.ceil(n.height/this._resolution),r.trim.x=-s,r.trim.y=-s,r.orig.width=r._frame.width-s*2,r.orig.height=r._frame.height-s*2,this._onTextureUpdate(),a.setRealSize(n.width,n.height,this._resolution),this._recursivePostUpdateTransform(),this.dirty=!1},e.prototype._render=function(n){this._autoResolution&&this._resolution!==n.resolution&&(this._resolution=n.resolution,this.dirty=!0),this.updateText(!0),i.prototype._render.call(this,n)},e.prototype.getLocalBounds=function(n){return this.updateText(!0),i.prototype.getLocalBounds.call(this,n)},e.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._generateFillStyle=function(n,t,r){var o=n.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;var s,a=n.dropShadow?n.dropShadowDistance:0,l=n.padding||0,c=Math.ceil(this.canvas.width/this._resolution)-a-l*2,u=Math.ceil(this.canvas.height/this._resolution)-a-l*2,d=o.slice(),h=n.fillGradientStops.slice();if(!h.length)for(var p=d.length+1,f=1;f<p;++f)h.push(f/p);if(d.unshift(o[0]),h.unshift(0),d.push(o[o.length-1]),h.push(1),n.fillGradientType===Ic.LINEAR_VERTICAL){s=this.context.createLinearGradient(c/2,l,c/2,u+l);for(var m=0,_=r.fontProperties.fontSize+n.strokeThickness,P=_/u,f=0;f<t.length;f++)for(var I=r.lineHeight*f,b=0;b<d.length;b++){var S=0;typeof h[b]=="number"?S=h[b]:S=b/d.length;var k=I/u+S*P,N=Math.max(m,k);N=Math.min(N,1),s.addColorStop(N,d[b]),m=N}}else{s=this.context.createLinearGradient(l,u/2,c+l,u/2);for(var X=d.length+1,F=1,f=0;f<d.length;f++){var j=void 0;typeof h[f]=="number"?j=h[f]:j=F/X,s.addColorStop(j,d[f]),F++}}return s},e.prototype.destroy=function(n){typeof n=="boolean"&&(n={children:n}),n=Object.assign({},Uj,n),i.prototype.destroy.call(this,n),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(n){this.updateText(!0);var t=Do(this.scale.x)||1;this.scale.x=t*n/this._texture.orig.width,this._width=n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(n){this.updateText(!0);var t=Do(this.scale.y)||1;this.scale.y=t*n/this._texture.orig.height,this._height=n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(n){n=n||{},n instanceof Bo?this._style=n:this._style=new Bo(n),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(n){n=String(n??""),this._text!==n&&(this._text=n,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(n){this._autoResolution=!1,this._resolution!==n&&(this._resolution=n,this.dirty=!0)},enumerable:!1,configurable:!0}),e}(ro);me.UPLOADS_PER_FRAME=4;var Uv=function(i,e){return Uv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r])},Uv(i,e)};function zj(i,e){Uv(i,e);function n(){this.constructor=i}i.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Hj=function(){function i(e){this.maxItemsPerFrame=e,this.itemsLeft=0}return i.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},i.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},i}();function Wj(i,e){var n=!1;if(i&&i._textures&&i._textures.length){for(var t=0;t<i._textures.length;t++)if(i._textures[t]instanceof Ee){var r=i._textures[t].baseTexture;e.indexOf(r)===-1&&(e.push(r),n=!0)}}return n}function Gj(i,e){if(i.baseTexture instanceof wt){var n=i.baseTexture;return e.indexOf(n)===-1&&e.push(n),!0}return!1}function Xj(i,e){if(i._texture&&i._texture instanceof Ee){var n=i._texture.baseTexture;return e.indexOf(n)===-1&&e.push(n),!0}return!1}function qj(i,e){return e instanceof Vv?(e.updateText(!0),!0):!1}function Yj(i,e){if(e instanceof Bo){var n=e.toFontString();return ui.measureFont(n),!0}return!1}function Zj(i,e){if(i instanceof Vv){e.indexOf(i.style)===-1&&e.push(i.style),e.indexOf(i)===-1&&e.push(i);var n=i._texture.baseTexture;return e.indexOf(n)===-1&&e.push(n),!0}return!1}function $j(i,e){return i instanceof Bo?(e.indexOf(i)===-1&&e.push(i),!0):!1}var Kj=function(){function i(e){var n=this;this.limiter=new Hj(me.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){n.queue&&n.prepareItems()},this.registerFindHook(Zj),this.registerFindHook($j),this.registerFindHook(Wj),this.registerFindHook(Gj),this.registerFindHook(Xj),this.registerUploadHook(qj),this.registerUploadHook(Yj)}return i.prototype.upload=function(e,n){typeof e=="function"&&(n=e,e=null),e&&this.add(e),this.queue.length?(n&&this.completes.push(n),this.ticking||(this.ticking=!0,Ot.system.addOnce(this.tick,this,Zi.UTILITY))):n&&n()},i.prototype.tick=function(){setTimeout(this.delayedTick,0)},i.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var e=this.queue[0],n=!1;if(e&&!e._destroyed){for(var t=0,r=this.uploadHooks.length;t<r;t++)if(this.uploadHooks[t](this.uploadHookHelper,e)){this.queue.shift(),n=!0;break}}n||this.queue.shift()}if(this.queue.length)Ot.system.addOnce(this.tick,this,Zi.UTILITY);else{this.ticking=!1;var o=this.completes.slice(0);this.completes.length=0;for(var t=0,r=o.length;t<r;t++)o[t]()}},i.prototype.registerFindHook=function(e){return e&&this.addHooks.push(e),this},i.prototype.registerUploadHook=function(e){return e&&this.uploadHooks.push(e),this},i.prototype.add=function(e){for(var n=0,t=this.addHooks.length;n<t&&!this.addHooks[n](e,this.queue);n++);if(e instanceof At)for(var n=e.children.length-1;n>=0;n--)this.add(e.children[n]);return this},i.prototype.destroy=function(){this.ticking&&Ot.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},i}();function nE(i,e){return e instanceof wt?(e._glTextures[i.CONTEXT_UID]||i.texture.bind(e),!0):!1}function Qj(i,e){if(!(e instanceof bt))return!1;var n=e.geometry;e.finishPoly(),n.updateBatches();for(var t=n.batches,r=0;r<t.length;r++){var o=t[r].style.texture;o&&nE(i,o.baseTexture)}return n.batchable||i.geometry.bind(n,e._resolveDirectShader(i)),!0}function Jj(i,e){return i instanceof bt?(e.push(i),!0):!1}var iE=function(i){zj(e,i);function e(n){var t=i.call(this,n)||this;return t.uploadHookHelper=t.renderer,t.registerFindHook(Jj),t.registerUploadHook(nE),t.registerUploadHook(Qj),t}return e}(Kj),Vq=function(){function i(e){this.maxMilliseconds=e,this.frameStart=0}return i.prototype.beginFrame=function(){this.frameStart=Date.now()},i.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},i}();var e3=function(){function i(e,n,t){t===void 0&&(t=null),this._texture=e instanceof Ee?e:null,this.baseTexture=e instanceof wt?e:this._texture.baseTexture,this.textures={},this.animations={},this.data=n;var r=this.baseTexture.resource;this.resolution=this._updateResolution(t||(r?r.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return i.prototype._updateResolution=function(e){e===void 0&&(e=null);var n=this.data.meta.scale,t=Ms(e,null);return t===null&&(t=n!==void 0?parseFloat(n):1),t!==1&&this.baseTexture.setResolution(t),t},i.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=i.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},i.prototype._processFrames=function(e){for(var n=e,t=i.BATCH_SIZE;n-e<t&&n<this._frameKeys.length;){var r=this._frameKeys[n],o=this._frames[r],s=o.frame;if(s){var a=null,l=null,c=o.trimmed!==!1&&o.sourceSize?o.sourceSize:o.frame,u=new ze(0,0,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution);o.rotated?a=new ze(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.h)/this.resolution,Math.floor(s.w)/this.resolution):a=new ze(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution),o.trimmed!==!1&&o.spriteSourceSize&&(l=new ze(Math.floor(o.spriteSourceSize.x)/this.resolution,Math.floor(o.spriteSourceSize.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution)),this.textures[r]=new Ee(this.baseTexture,a,u,l,o.rotated?2:0,o.anchor),Ee.addToCache(this.textures[r],r)}n++}},i.prototype._processAnimations=function(){var e=this.data.animations||{};for(var n in e){this.animations[n]=[];for(var t=0;t<e[n].length;t++){var r=e[n][t];this.animations[n].push(this.textures[r])}}},i.prototype._parseComplete=function(){var e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)},i.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*i.BATCH_SIZE),this._batchIndex++,setTimeout(function(){e._batchIndex*i.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())},0)},i.prototype.destroy=function(e){var n;e===void 0&&(e=!1);for(var t in this.textures)this.textures[t].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((n=this._texture)===null||n===void 0||n.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},i.BATCH_SIZE=1e3,i}(),rE=function(){function i(){}return i.use=function(e,n){var t=this,r=e.name+"_image";if(!e.data||e.type!==Ua.TYPE.JSON||!e.data.frames||t.resources[r]){n();return}var o={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},s=i.getResourcePath(e,t.baseUrl);t.add(r,s,o,function(l){if(l.error){n(l.error);return}var c=new e3(l.texture,e.data,e.url);c.parse(function(){e.spritesheet=c,e.textures=c.textures,n()})})},i.getResourcePath=function(e,n){return e.isDataUrl?e.data.meta.image:nv.default.resolve(e.url.replace(n,""),e.data.meta.image)},i}();var zv=function(i,e){return zv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r])},zv(i,e)};function sE(i,e){zv(i,e);function n(){this.constructor=i}i.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Sc=new R,Qq=function(i){sE(e,i);function e(n,t,r){t===void 0&&(t=100),r===void 0&&(r=100);var o=i.call(this,n)||this;return o.tileTransform=new Oh,o._width=t,o._height=r,o.uvMatrix=o.texture.uvMatrix||new wc(n),o.pluginName="tilingSprite",o.uvRespectAnchor=!1,o}return Object.defineProperty(e.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(n){this.uvMatrix.clampMargin=n,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(n){this.tileTransform.scale.copyFrom(n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(n){this.tileTransform.position.copyFrom(n)},enumerable:!1,configurable:!0}),e.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},e.prototype._render=function(n){var t=this._texture;!t||!t.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),n.batch.setObjectRenderer(n.plugins[this.pluginName]),n.plugins[this.pluginName].render(this))},e.prototype._calculateBounds=function(){var n=this._width*-this._anchor._x,t=this._height*-this._anchor._y,r=this._width*(1-this._anchor._x),o=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,n,t,r,o)},e.prototype.getLocalBounds=function(n){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),n||(this._localBoundsRect||(this._localBoundsRect=new ze),n=this._localBoundsRect),this._bounds.getRectangle(n)):i.prototype.getLocalBounds.call(this,n)},e.prototype.containsPoint=function(n){this.worldTransform.applyInverse(n,Sc);var t=this._width,r=this._height,o=-t*this.anchor._x;if(Sc.x>=o&&Sc.x<o+t){var s=-r*this.anchor._y;if(Sc.y>=s&&Sc.y<s+r)return!0}return!1},e.prototype.destroy=function(n){i.prototype.destroy.call(this,n),this.tileTransform=null,this.uvMatrix=null},e.from=function(n,t){return typeof t=="number"&&(li("5.3.0","TilingSprite.from use options instead of width and height args"),t={width:t,height:arguments[2]}),new e(Ee.from(n,t),t.width,t.height)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(n){this._width=n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(n){this._height=n},enumerable:!1,configurable:!0}),e}(ro),oE=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,t3=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture2D(uSampler, coord);
    gl_FragColor = texSample * uColor;
}
`,n3=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`,Wh=new Rt,aE=function(i){sE(e,i);function e(n){var t=i.call(this,n)||this,r={globals:t.renderer.globalUniforms};return t.shader=$i.from(oE,t3,r),t.simpleShader=$i.from(oE,n3,r),t.quad=new xv,t.state=Ki.for2d(),t}return e.prototype.render=function(n){var t=this.renderer,r=this.quad,o=r.vertices;o[0]=o[6]=n._width*-n.anchor.x,o[1]=o[3]=n._height*-n.anchor.y,o[2]=o[4]=n._width*(1-n.anchor.x),o[5]=o[7]=n._height*(1-n.anchor.y),n.uvRespectAnchor&&(o=r.uvs,o[0]=o[6]=-n.anchor.x,o[1]=o[3]=-n.anchor.y,o[2]=o[4]=1-n.anchor.x,o[5]=o[7]=1-n.anchor.y),r.invalidate();var s=n._texture,a=s.baseTexture,l=n.tileTransform.localTransform,c=n.uvMatrix,u=a.isPowerOfTwo&&s.frame.width===a.width&&s.frame.height===a.height;u&&(a._glTextures[t.CONTEXT_UID]?u=a.wrapMode!==qi.CLAMP:a.wrapMode===qi.CLAMP&&(a.wrapMode=qi.REPEAT));var d=u?this.simpleShader:this.shader,h=s.width,p=s.height,f=n._width,m=n._height;Wh.set(l.a*h/f,l.b*h/m,l.c*p/f,l.d*p/m,l.tx/f,l.ty/m),Wh.invert(),u?Wh.prepend(c.mapCoord):(d.uniforms.uMapCoord=c.mapCoord.toArray(!0),d.uniforms.uClampFrame=c.uClampFrame,d.uniforms.uClampOffset=c.uClampOffset),d.uniforms.uTransform=Wh.toArray(!0),d.uniforms.uColor=wh(n.tint,n.worldAlpha,d.uniforms.uColor,a.alphaMode),d.uniforms.translationMatrix=n.transform.worldTransform.toArray(!0),d.uniforms.uSampler=s,t.shader.bind(d),t.geometry.bind(r),this.state.blendMode=Ph(n.blendMode,a.alphaMode),t.state.set(this.state),t.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},e}(Va);var Wv=function(i,e){return Wv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r])},Wv(i,e)};function Gv(i,e){Wv(i,e);function n(){this.constructor=i}i.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var i3=function(){function i(e,n){this.uvBuffer=e,this.uvMatrix=n,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return i.prototype.update=function(e){if(!(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var n=this.uvBuffer.data;(!this.data||this.data.length!==n.length)&&(this.data=new Float32Array(n.length)),this.uvMatrix.multiplyUvs(n,this.data),this._updateID++}},i}(),Hv=new R,lE=new Ft,Ls=function(i){Gv(e,i);function e(n,t,r,o){o===void 0&&(o=si.TRIANGLES);var s=i.call(this)||this;return s.geometry=n,n.refCount++,s.shader=t,s.state=r||Ki.for2d(),s.drawMode=o,s.start=0,s.size=0,s.uvs=null,s.indices=null,s.vertexData=new Float32Array(1),s.vertexDirty=0,s._transformID=-1,s._roundPixels=me.ROUND_PIXELS,s.batchUvs=null,s}return Object.defineProperty(e.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this.shader},set:function(n){this.shader=n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(n){this.state.blendMode=n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(n){this._roundPixels!==n&&(this._transformID=-1),this._roundPixels=n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this.shader.tint},set:function(n){this.shader.tint=n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this.shader.texture},set:function(n){this.shader.texture=n},enumerable:!1,configurable:!0}),e.prototype._render=function(n){var t=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===si.TRIANGLES&&t.length<e.BATCHABLE_SIZE*2?this._renderToBatch(n):this._renderDefault(n)},e.prototype._renderDefault=function(n){var t=this.shader;t.alpha=this.worldAlpha,t.update&&t.update(),n.batch.flush(),t.program.uniformData.translationMatrix&&(t.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0)),n.shader.bind(t),n.state.set(this.state),n.geometry.bind(this.geometry,t),n.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},e.prototype._renderToBatch=function(n){var t=this.geometry;this.shader.uvMatrix&&(this.shader.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=t.indexBuffer.data,this._tintRGB=this.shader._tintRGB,this._texture=this.shader.texture;var r=this.material.pluginName;n.batch.setObjectRenderer(n.plugins[r]),n.plugins[r].render(this)},e.prototype.calculateVertices=function(){var n=this.geometry,t=n.buffers[0].data;if(!(n.vertexDirtyId===this.vertexDirty&&this._transformID===this.transform._worldID)){this._transformID=this.transform._worldID,this.vertexData.length!==t.length&&(this.vertexData=new Float32Array(t.length));for(var r=this.transform.worldTransform,o=r.a,s=r.b,a=r.c,l=r.d,c=r.tx,u=r.ty,d=this.vertexData,h=0;h<d.length/2;h++){var p=t[h*2],f=t[h*2+1];d[h*2]=o*p+a*f+c,d[h*2+1]=s*p+l*f+u}if(this._roundPixels)for(var m=me.RESOLUTION,h=0;h<d.length;++h)d[h]=Math.round((d[h]*m|0)/m);this.vertexDirty=n.vertexDirtyId}},e.prototype.calculateUvs=function(){var n=this.geometry.buffers[1];this.shader.uvMatrix.isSimple?this.uvs=n.data:(this.batchUvs||(this.batchUvs=new i3(n,this.shader.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},e.prototype.containsPoint=function(n){if(!this.getBounds().contains(n.x,n.y))return!1;this.worldTransform.applyInverse(n,Hv);for(var t=this.geometry.getBuffer("aVertexPosition").data,r=lE.points,o=this.geometry.getIndex().data,s=o.length,a=this.drawMode===4?3:1,l=0;l+2<s;l+=a){var c=o[l]*2,u=o[l+1]*2,d=o[l+2]*2;if(r[0]=t[c],r[1]=t[c+1],r[2]=t[u],r[3]=t[u+1],r[4]=t[d],r[5]=t[d+1],lE.contains(Hv.x,Hv.y))return!0}return!1},e.prototype.destroy=function(n){i.prototype.destroy.call(this,n),this.geometry.refCount--,this.geometry.refCount===0&&this.geometry.dispose(),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},e.BATCHABLE_SIZE=100,e}(At),r3=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,o3=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`,Ga=function(i){Gv(e,i);function e(n,t){var r=this,o={uSampler:n,alpha:1,uTextureMatrix:Rt.IDENTITY,uColor:new Float32Array([1,1,1,1])};return t=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},t),t.uniforms&&Object.assign(o,t.uniforms),r=i.call(this,t.program||Pc.from(o3,r3),o)||this,r._colorDirty=!1,r.uvMatrix=new wc(n),r.batchable=t.program===void 0,r.pluginName=t.pluginName,r.tint=t.tint,r.alpha=t.alpha,r}return Object.defineProperty(e.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(n){this.uniforms.uSampler!==n&&(this.uniforms.uSampler=n,this.uvMatrix.texture=n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(n){n!==this._alpha&&(this._alpha=n,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(n){n!==this._tint&&(this._tint=n,this._tintRGB=(n>>16)+(n&65280)+((n&255)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),e.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var n=this.texture.baseTexture;wh(this._tint,this._alpha,this.uniforms.uColor,n.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},e}($i),Xa=function(i){Gv(e,i);function e(n,t,r){var o=i.call(this)||this,s=new ln(n),a=new ln(t,!0),l=new ln(r,!0,!0);return o.addAttribute("aVertexPosition",s,2,!1,Jt.FLOAT).addAttribute("aTextureCoord",a,2,!1,Jt.FLOAT).addIndex(l),o._updateId=-1,o}return Object.defineProperty(e.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),e}(Ds);var qv=function(i,e){return qv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r])},qv(i,e)};function s3(i,e){qv(i,e);function n(){this.constructor=i}i.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Gh=function(){function i(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[]}return i}(),a3=function(){function i(){}return i.test=function(e){return typeof e=="string"&&e.indexOf("info face=")===0},i.parse=function(e){var n=e.match(/^[a-z]+\s+.+$/gm),t={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[]};for(var r in n){var o=n[r].match(/^[a-z]+/gm)[0],s=n[r].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),a={};for(var l in s){var c=s[l].split("="),u=c[0],d=c[1].replace(/"/gm,""),h=parseFloat(d),p=isNaN(h)?d:h;a[u]=p}t[o].push(a)}var f=new Gh;return t.info.forEach(function(m){return f.info.push({face:m.face,size:parseInt(m.size,10)})}),t.common.forEach(function(m){return f.common.push({lineHeight:parseInt(m.lineHeight,10)})}),t.page.forEach(function(m){return f.page.push({id:parseInt(m.id,10),file:m.file})}),t.char.forEach(function(m){return f.char.push({id:parseInt(m.id,10),page:parseInt(m.page,10),x:parseInt(m.x,10),y:parseInt(m.y,10),width:parseInt(m.width,10),height:parseInt(m.height,10),xoffset:parseInt(m.xoffset,10),yoffset:parseInt(m.yoffset,10),xadvance:parseInt(m.xadvance,10)})}),t.kerning.forEach(function(m){return f.kerning.push({first:parseInt(m.first,10),second:parseInt(m.second,10),amount:parseInt(m.amount,10)})}),f},i}(),Yv=function(){function i(){}return i.test=function(e){return e instanceof XMLDocument&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null},i.parse=function(e){for(var n=new Gh,t=e.getElementsByTagName("info"),r=e.getElementsByTagName("common"),o=e.getElementsByTagName("page"),s=e.getElementsByTagName("char"),a=e.getElementsByTagName("kerning"),l=0;l<t.length;l++)n.info.push({face:t[l].getAttribute("face"),size:parseInt(t[l].getAttribute("size"),10)});for(var l=0;l<r.length;l++)n.common.push({lineHeight:parseInt(r[l].getAttribute("lineHeight"),10)});for(var l=0;l<o.length;l++)n.page.push({id:parseInt(o[l].getAttribute("id"),10)||0,file:o[l].getAttribute("file")});for(var l=0;l<s.length;l++){var c=s[l];n.char.push({id:parseInt(c.getAttribute("id"),10),page:parseInt(c.getAttribute("page"),10)||0,x:parseInt(c.getAttribute("x"),10),y:parseInt(c.getAttribute("y"),10),width:parseInt(c.getAttribute("width"),10),height:parseInt(c.getAttribute("height"),10),xoffset:parseInt(c.getAttribute("xoffset"),10),yoffset:parseInt(c.getAttribute("yoffset"),10),xadvance:parseInt(c.getAttribute("xadvance"),10)})}for(var l=0;l<a.length;l++)n.kerning.push({first:parseInt(a[l].getAttribute("first"),10),second:parseInt(a[l].getAttribute("second"),10),amount:parseInt(a[l].getAttribute("amount"),10)});return n},i}(),l3=function(){function i(){}return i.test=function(e){if(typeof e=="string"&&e.indexOf("<font>")>-1){var n=new self.DOMParser().parseFromString(e,"text/xml");return Yv.test(n)}return!1},i.parse=function(e){var n=new window.DOMParser().parseFromString(e,"text/xml");return Yv.parse(n)},i}(),Xv=[a3,Yv,l3];function dE(i){for(var e=0;e<Xv.length;e++)if(Xv[e].test(i))return Xv[e];return null}function c3(i,e,n,t,r,o){var s=n.fill;if(Array.isArray(s)){if(s.length===1)return s[0]}else return s;var a,l=n.dropShadow?n.dropShadowDistance:0,c=n.padding||0,u=Math.ceil(i.width/t)-l-c*2,d=Math.ceil(i.height/t)-l-c*2,h=s.slice(),p=n.fillGradientStops.slice();if(!p.length)for(var f=h.length+1,m=1;m<f;++m)p.push(m/f);if(h.unshift(s[0]),p.unshift(0),h.push(s[s.length-1]),p.push(1),n.fillGradientType===Ic.LINEAR_VERTICAL){a=e.createLinearGradient(u/2,c,u/2,d+c);for(var _=0,P=o.fontProperties.fontSize+n.strokeThickness,I=P/d,m=0;m<r.length;m++)for(var b=o.lineHeight*m,S=0;S<h.length;S++){var k=0;typeof p[S]=="number"?k=p[S]:k=S/h.length;var N=b/d+k*I,X=Math.max(_,N);X=Math.min(X,1),a.addColorStop(X,h[S]),_=X}}else{a=e.createLinearGradient(c,d/2,u+c,d/2);for(var F=h.length+1,j=1,m=0;m<h.length;m++){var z=void 0;typeof p[m]=="number"?z=p[m]:z=j/F,a.addColorStop(z,h[m]),j++}}return a}function u3(i,e,n,t,r,o,s){var a=n.text,l=n.fontProperties;e.translate(t,r),e.scale(o,o);var c=s.strokeThickness/2,u=-(s.strokeThickness/2);if(e.font=s.toFontString(),e.lineWidth=s.strokeThickness,e.textBaseline=s.textBaseline,e.lineJoin=s.lineJoin,e.miterLimit=s.miterLimit,e.fillStyle=c3(i,e,s,o,[a],n),e.strokeStyle=s.stroke,s.dropShadow){var d=s.dropShadowColor,h=Yi(typeof d=="number"?d:bh(d)),p=s.dropShadowBlur*o,f=s.dropShadowDistance*o;e.shadowColor="rgba("+h[0]*255+","+h[1]*255+","+h[2]*255+","+s.dropShadowAlpha+")",e.shadowBlur=p,e.shadowOffsetX=Math.cos(s.dropShadowAngle)*f,e.shadowOffsetY=Math.sin(s.dropShadowAngle)*f}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;s.stroke&&s.strokeThickness&&e.strokeText(a,c,u+n.lineHeight-l.descent),s.fill&&e.fillText(a,c,u+n.lineHeight-l.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function d3(i){typeof i=="string"&&(i=[i]);for(var e=[],n=0,t=i.length;n<t;n++){var r=i[n];if(Array.isArray(r)){if(r.length!==2)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+r.length+".");var o=r[0].charCodeAt(0),s=r[1].charCodeAt(0);if(s<o)throw new Error("[BitmapFont]: Invalid character range.");for(var a=o,l=s;a<=l;a++)e.push(String.fromCharCode(a))}else e.push.apply(e,r.split(""))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}var js=function(){function i(e,n,t){var r=e.info[0],o=e.common[0],s=e.page[0],a=Ms(s.file),l={};this._ownsTextures=t,this.font=r.face,this.size=r.size,this.lineHeight=o.lineHeight/a,this.chars={},this.pageTextures=l;for(var c=0;c<e.page.length;c++){var u=e.page[c],d=u.id,h=u.file;l[d]=n instanceof Array?n[c]:n[h]}for(var c=0;c<e.char.length;c++){var p=e.char[c],d=p.id,f=p.page,m=e.char[c],_=m.x,P=m.y,I=m.width,b=m.height,S=m.xoffset,k=m.yoffset,N=m.xadvance;_/=a,P/=a,I/=a,b/=a,S/=a,k/=a,N/=a;var X=new ze(_+l[f].frame.x/a,P+l[f].frame.y/a,I,b);this.chars[d]={xOffset:S,yOffset:k,xAdvance:N,kerning:{},texture:new Ee(l[f].baseTexture,X),page:f}}for(var c=0;c<e.kerning.length;c++){var F=e.kerning[c],j=F.first,z=F.second,ue=F.amount;j/=a,z/=a,ue/=a,this.chars[z]&&(this.chars[z].kerning[j]=ue)}}return i.prototype.destroy=function(){for(var e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(var e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null},i.install=function(e,n,t){var r;if(e instanceof Gh)r=e;else{var o=dE(e);if(!o)throw new Error("Unrecognized data format for font.");r=o.parse(e)}n instanceof Ee&&(n=[n]);var s=new i(r,n,t);return i.available[s.font]=s,s},i.uninstall=function(e){var n=i.available[e];if(!n)throw new Error("No font found named '"+e+"'");n.destroy(),delete i.available[e]},i.from=function(e,n,t){if(!e)throw new Error("[BitmapFont] Property `name` is required.");var r=Object.assign({},i.defaultOptions,t),o=r.chars,s=r.padding,a=r.resolution,l=r.textureWidth,c=r.textureHeight,u=d3(o),d=n instanceof Bo?n:new Bo(n),h=l,p=new Gh;p.info[0]={face:d.fontFamily,size:d.fontSize},p.common[0]={lineHeight:d.fontSize};for(var f=0,m=0,_,P,I,b=0,S=[],k=0;k<u.length;k++){_||(_=document.createElement("canvas"),_.width=l,_.height=c,P=_.getContext("2d"),I=new wt(_,{resolution:a}),S.push(new Ee(I)),p.page.push({id:S.length-1,file:""}));var N=ui.measureText(u[k],d,!1,_),X=N.width,F=Math.ceil(N.height),j=Math.ceil((d.fontStyle==="italic"?2:1)*X);if(m>=c-F*a){if(m===0)throw new Error("[BitmapFont] textureHeight "+c+"px is "+("too small for "+d.fontSize+"px fonts"));--k,_=null,P=null,I=null,m=0,f=0,b=0;continue}if(b=Math.max(F+N.fontProperties.descent,b),j*a+f>=h){--k,m+=b*a,m=Math.ceil(m),f=0,b=0;continue}u3(_,P,N,f,m,a,d);var z=N.text.charCodeAt(0);p.char.push({id:z,page:S.length-1,x:f/a,y:m/a,width:j,height:F,xoffset:0,yoffset:0,xadvance:Math.ceil(X-(d.dropShadow?d.dropShadowDistance:0)-(d.stroke?d.strokeThickness:0))}),f+=(j+2*s)*a,f=Math.ceil(f)}var ue=new i(p,S,!0);return i.available[e]!==void 0&&i.uninstall(e),i.available[e]=ue,ue},i.ALPHA=[["a","z"],["A","Z"]," "],i.NUMERIC=[["0","9"]],i.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],i.ASCII=[[" ","~"]],i.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:i.ALPHANUMERIC},i.available={},i}(),cE=[],uE=[],Yn=function(i){s3(e,i);function e(n,t){t===void 0&&(t={});var r=i.call(this)||this;r._tint=16777215,t.font&&(li("5.3.0","PIXI.BitmapText constructor style.font property is deprecated."),r._upgradeStyle(t));var o=Object.assign({},e.styleDefaults,t),s=o.align,a=o.tint,l=o.maxWidth,c=o.letterSpacing,u=o.fontName,d=o.fontSize;if(!js.available[u])throw new Error('Missing BitmapFont "'+u+'"');return r._activePagesMeshData=[],r._textWidth=0,r._textHeight=0,r._align=s,r._tint=a,r._fontName=u,r._fontSize=d||js.available[u].size,r._text=n,r._maxWidth=l,r._maxLineHeight=0,r._letterSpacing=c,r._anchor=new Ro(function(){r.dirty=!0},r,0,0),r._roundPixels=me.ROUND_PIXELS,r.dirty=!0,r._textureCache={},r}return e.prototype.updateText=function(){for(var n,t=js.available[this._fontName],r=this._fontSize/t.size,o=new R,s=[],a=[],l=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",c=l.length,u=this._maxWidth*t.size/this._fontSize,d=null,h=0,p=0,f=0,m=-1,_=0,P=0,I=0,b=0;b<c;b++){var S=l.charCodeAt(b),k=l.charAt(b);if(/(?:\s)/.test(k)&&(m=b,_=h),k==="\r"||k===`
`){a.push(h),p=Math.max(p,h),++f,++P,o.x=0,o.y+=t.lineHeight,d=null;continue}var N=t.chars[S];if(N){d&&N.kerning[d]&&(o.x+=N.kerning[d]);var X=uE.pop()||{texture:Ee.EMPTY,line:0,charCode:0,position:new R};X.texture=N.texture,X.line=f,X.charCode=S,X.position.x=o.x+N.xOffset+this._letterSpacing/2,X.position.y=o.y+N.yOffset,s.push(X),o.x+=N.xAdvance+this._letterSpacing,h=o.x,I=Math.max(I,N.yOffset+N.texture.height),d=S,m!==-1&&u>0&&o.x>u&&(++P,yr(s,1+m-P,1+b-m),b=m,m=-1,a.push(_),p=Math.max(p,_),f++,o.x=0,o.y+=t.lineHeight,d=null)}}var F=l.charAt(l.length-1);F!=="\r"&&F!==`
`&&(/(?:\s)/.test(F)&&(h=_),a.push(h),p=Math.max(p,h));for(var j=[],b=0;b<=f;b++){var z=0;this._align==="right"?z=p-a[b]:this._align==="center"&&(z=(p-a[b])/2),j.push(z)}for(var ue=s.length,se={},ge=[],Ye=this._activePagesMeshData,b=0;b<Ye.length;b++)cE.push(Ye[b]);for(var b=0;b<ue;b++){var oe=s[b].texture,B=oe.baseTexture.uid;if(!se[B]){var L=cE.pop();if(!L){var V=new Xa,te=new Ga(Ee.EMPTY),he=new Ls(V,te);L={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:he,vertices:null,uvs:null,indices:null}}L.index=0,L.indexCount=0,L.vertexCount=0,L.uvsCount=0,L.total=0;var Se=this._textureCache;Se[B]=Se[B]||new Ee(oe.baseTexture),L.mesh.texture=Se[B],L.mesh.tint=this._tint,ge.push(L),se[B]=L}se[B].total++}for(var b=0;b<Ye.length;b++)ge.indexOf(Ye[b])===-1&&this.removeChild(Ye[b].mesh);for(var b=0;b<ge.length;b++)ge[b].mesh.parent!==this&&this.addChild(ge[b].mesh);this._activePagesMeshData=ge;for(var b in se){var L=se[b],ve=L.total;if(!(((n=L.indices)===null||n===void 0?void 0:n.length)>6*ve)||L.vertices.length<Ls.BATCHABLE_SIZE*2)L.vertices=new Float32Array(4*2*ve),L.uvs=new Float32Array(4*2*ve),L.indices=new Uint16Array(6*ve);else for(var rt=L.total,Te=L.vertices,Lt=rt*4*2;Lt<Te.length;Lt++)Te[Lt]=0;L.mesh.size=6*ve}for(var b=0;b<ue;b++){var k=s[b],Ze=k.position.x+j[k.line];this._roundPixels&&(Ze=Math.round(Ze));var Ae=Ze*r,Le=k.position.y*r,oe=k.texture,ae=se[oe.baseTexture.uid],Qe=oe.frame,Ge=oe._uvs,De=ae.index++;ae.indices[De*6+0]=0+De*4,ae.indices[De*6+1]=1+De*4,ae.indices[De*6+2]=2+De*4,ae.indices[De*6+3]=0+De*4,ae.indices[De*6+4]=2+De*4,ae.indices[De*6+5]=3+De*4,ae.vertices[De*8+0]=Ae,ae.vertices[De*8+1]=Le,ae.vertices[De*8+2]=Ae+Qe.width*r,ae.vertices[De*8+3]=Le,ae.vertices[De*8+4]=Ae+Qe.width*r,ae.vertices[De*8+5]=Le+Qe.height*r,ae.vertices[De*8+6]=Ae,ae.vertices[De*8+7]=Le+Qe.height*r,ae.uvs[De*8+0]=Ge.x0,ae.uvs[De*8+1]=Ge.y0,ae.uvs[De*8+2]=Ge.x1,ae.uvs[De*8+3]=Ge.y1,ae.uvs[De*8+4]=Ge.x2,ae.uvs[De*8+5]=Ge.y2,ae.uvs[De*8+6]=Ge.x3,ae.uvs[De*8+7]=Ge.y3}this._textWidth=p*r,this._textHeight=(o.y+t.lineHeight)*r;for(var b in se){var L=se[b];if(this.anchor.x!==0||this.anchor.y!==0)for(var jt=0,$t=this._textWidth*this.anchor.x,Qn=this._textHeight*this.anchor.y,Jn=0;Jn<L.total;Jn++)L.vertices[jt++]-=$t,L.vertices[jt++]-=Qn,L.vertices[jt++]-=$t,L.vertices[jt++]-=Qn,L.vertices[jt++]-=$t,L.vertices[jt++]-=Qn,L.vertices[jt++]-=$t,L.vertices[jt++]-=Qn;this._maxLineHeight=I*r;var Ko=L.mesh.geometry.getBuffer("aVertexPosition"),Ks=L.mesh.geometry.getBuffer("aTextureCoord"),ho=L.mesh.geometry.getIndex();Ko.data=L.vertices,Ks.data=L.uvs,ho.data=L.indices,Ko.update(),Ks.update(),ho.update()}for(var b=0;b<s.length;b++)uE.push(s[b])},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype.getLocalBounds=function(){return this.validate(),i.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(n){if(this._tint!==n){this._tint=n;for(var t=0;t<this._activePagesMeshData.length;t++)this._activePagesMeshData[t].mesh.tint=n}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(n){this._align!==n&&(this._align=n,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontName",{get:function(){return this._fontName},set:function(n){if(!js.available[n])throw new Error('Missing BitmapFont "'+n+'"');this._fontName!==n&&(this._fontName=n,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(n){this._fontSize!==n&&(this._fontSize=n,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(n){typeof n=="number"?this._anchor.set(n):this._anchor.copyFrom(n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(n){n=String(n??""),this._text!==n&&(this._text=n,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(n){this._maxWidth!==n&&(this._maxWidth=n,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(n){this._letterSpacing!==n&&(this._letterSpacing=n,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(n){n!==this._roundPixels&&(this._roundPixels=n,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),e.prototype._upgradeStyle=function(n){if(typeof n.font=="string"){var t=n.font.split(" ");n.fontName=t.length===1?t[0]:t.slice(1).join(" "),t.length>=2&&(n.fontSize=parseInt(t[0],10))}else n.fontName=n.font.name,n.fontSize=typeof n.font.size=="number"?n.font.size:parseInt(n.font.size,10)},e.prototype.destroy=function(n){var t=this._textureCache;for(var r in t){var o=t[r];o.destroy(),delete t[r]}this._textureCache=null,i.prototype.destroy.call(this,n)},e.registerFont=function(n,t){return li("5.3.0","PIXI.BitmapText.registerFont is deprecated, use PIXI.BitmapFont.install"),js.install(n,t)},Object.defineProperty(e,"fonts",{get:function(){return li("5.3.0","PIXI.BitmapText.fonts is deprecated, use PIXI.BitmapFont.available"),js.available},enumerable:!1,configurable:!0}),e.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},e}(At),hE=function(){function i(){}return i.add=function(){Ua.setExtensionXhrType("fnt",Ua.XHR_RESPONSE_TYPE.TEXT)},i.use=function(e,n){var t=dE(e.data);if(!t){n();return}for(var r=i.getBaseUrl(this,e),o=t.parse(e.data),s={},a=function(m){s[m.metadata.pageFile]=m.texture,Object.keys(s).length===o.page.length&&(e.bitmapFont=js.install(o,s,!0),n())},l=0;l<o.page.length;++l){var c=o.page[l].file,u=r+c,d=!1;for(var h in this.resources){var p=this.resources[h];if(p.url===u){p.metadata.pageFile=c,p.texture?a(p):p.onAfterMiddleware.add(a),d=!0;break}}if(!d){var f={crossOrigin:e.crossOrigin,loadType:Ua.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:c},e.metadata.imageMetadata),parentResource:e};this.add(u,f,a)}}},i.getBaseUrl=function(e,n){var t=n.isDataUrl?"":i.dirname(n.url);return n.isDataUrl&&(t==="."&&(t=""),e.baseUrl&&t&&e.baseUrl.charAt(e.baseUrl.length-1)==="/"&&(t+="/")),t=t.replace(e.baseUrl,""),t&&t.charAt(t.length-1)!=="/"&&(t+="/"),t},i.dirname=function(e){var n=e.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return n===e?".":n===""?"/":n},i}();var Zv=function(i,e){return Zv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r])},Zv(i,e)};function h3(i,e){Zv(i,e);function n(){this.constructor=i}i.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var p3=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`,f3=function(i){h3(e,i);function e(n){n===void 0&&(n=1);var t=i.call(this,wO,p3,{uAlpha:1})||this;return t.alpha=n,t}return Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(n){this.uniforms.uAlpha=n},enumerable:!1,configurable:!0}),e}(qn);var $v=function(i,e){return $v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r])},$v(i,e)};function pE(i,e){$v(i,e);function n(){this.constructor=i}i.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var m3=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function g3(i,e){var n=Math.ceil(i/2),t=m3,r="",o;e?o="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":o="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var s=0;s<i;s++){var a=o.replace("%index%",s.toString());a=a.replace("%sampleIndex%",s-(n-1)+".0"),r+=a,r+=`
`}return t=t.replace("%blur%",r),t=t.replace("%size%",i.toString()),t}var _3={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},v3=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function y3(i){for(var e=_3[i],n=e.length,t=v3,r="",o="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",s,a=0;a<i;a++){var l=o.replace("%index%",a.toString());s=a,a>=n&&(s=i-a-1),l=l.replace("%value%",e[s].toString()),r+=l,r+=`
`}return t=t.replace("%blur%",r),t=t.replace("%size%",i.toString()),t}var Xh=function(i){return i[i.NO=0]="NO",i[i.YES=1]="YES",i[i.AUTO=2]="AUTO",i[i.BLEND=0]="BLEND",i[i.CLEAR=1]="CLEAR",i[i.BLIT=2]="BLIT",i}(Xh||{});var Kv=function(i){pE(e,i);function e(n,t,r,o,s){t===void 0&&(t=8),r===void 0&&(r=4),o===void 0&&(o=me.FILTER_RESOLUTION),s===void 0&&(s=5);var a=this,l=g3(s,n),c=y3(s);return a=i.call(this,l,c)||this,a.horizontal=n,a.resolution=o,a._quality=0,a.quality=r,a.blur=t,a}return e.prototype.apply=function(n,t,r,o){if(r?this.horizontal?this.uniforms.strength=1/r.width*(r.width/t.width):this.uniforms.strength=1/r.height*(r.height/t.height):this.horizontal?this.uniforms.strength=1/n.renderer.width*(n.renderer.width/t.width):this.uniforms.strength=1/n.renderer.height*(n.renderer.height/t.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)n.applyFilter(this,t,r,o);else{var s=n.getFilterTexture(),a=n.renderer,l=t,c=s;this.state.blend=!1,n.applyFilter(this,l,c,Xh.CLEAR);for(var u=1;u<this.passes-1;u++){n.bindAndClear(l,Xh.BLIT),this.uniforms.uSampler=c;var d=c;c=l,l=d,a.shader.bind(this),a.geometry.draw(5)}this.state.blend=!0,n.applyFilter(this,c,r,o),n.returnFilterTexture(s)}},Object.defineProperty(e.prototype,"blur",{get:function(){return this.strength},set:function(n){this.padding=1+Math.abs(n)*2,this.strength=n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(n){this._quality=n,this.passes=n},enumerable:!1,configurable:!0}),e}(qn),C3=function(i){pE(e,i);function e(n,t,r,o){n===void 0&&(n=8),t===void 0&&(t=4),r===void 0&&(r=me.FILTER_RESOLUTION),o===void 0&&(o=5);var s=i.call(this)||this;return s.blurXFilter=new Kv(!0,n,t,r,o),s.blurYFilter=new Kv(!1,n,t,r,o),s.resolution=r,s.quality=t,s.blur=n,s.repeatEdgePixels=!1,s}return e.prototype.apply=function(n,t,r,o){var s=Math.abs(this.blurXFilter.strength),a=Math.abs(this.blurYFilter.strength);if(s&&a){var l=n.getFilterTexture();this.blurXFilter.apply(n,t,l,Xh.CLEAR),this.blurYFilter.apply(n,l,r,o),n.returnFilterTexture(l)}else a?this.blurYFilter.apply(n,t,r,o):this.blurXFilter.apply(n,t,r,o)},e.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2},Object.defineProperty(e.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(n){this.blurXFilter.blur=this.blurYFilter.blur=n,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(n){this.blurXFilter.quality=this.blurYFilter.quality=n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(n){this.blurXFilter.blur=n,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(n){this.blurYFilter.blur=n,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(n){this.blurYFilter.blendMode=n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(n){this._repeatEdgePixels=n,this.updatePadding()},enumerable:!1,configurable:!0}),e}(qn);var Qv=function(i,e){return Qv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r])},Qv(i,e)};function b3(i,e){Qv(i,e);function n(){this.constructor=i}i.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var P3=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`,Jv=function(i){b3(e,i);function e(){var n=this,t={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return n=i.call(this,Rh,P3,t)||this,n.alpha=1,n}return e.prototype._loadMatrix=function(n,t){t===void 0&&(t=!1);var r=n;t&&(this._multiply(r,this.uniforms.m,n),r=this._colorMatrix(r)),this.uniforms.m=r},e.prototype._multiply=function(n,t,r){return n[0]=t[0]*r[0]+t[1]*r[5]+t[2]*r[10]+t[3]*r[15],n[1]=t[0]*r[1]+t[1]*r[6]+t[2]*r[11]+t[3]*r[16],n[2]=t[0]*r[2]+t[1]*r[7]+t[2]*r[12]+t[3]*r[17],n[3]=t[0]*r[3]+t[1]*r[8]+t[2]*r[13]+t[3]*r[18],n[4]=t[0]*r[4]+t[1]*r[9]+t[2]*r[14]+t[3]*r[19]+t[4],n[5]=t[5]*r[0]+t[6]*r[5]+t[7]*r[10]+t[8]*r[15],n[6]=t[5]*r[1]+t[6]*r[6]+t[7]*r[11]+t[8]*r[16],n[7]=t[5]*r[2]+t[6]*r[7]+t[7]*r[12]+t[8]*r[17],n[8]=t[5]*r[3]+t[6]*r[8]+t[7]*r[13]+t[8]*r[18],n[9]=t[5]*r[4]+t[6]*r[9]+t[7]*r[14]+t[8]*r[19]+t[9],n[10]=t[10]*r[0]+t[11]*r[5]+t[12]*r[10]+t[13]*r[15],n[11]=t[10]*r[1]+t[11]*r[6]+t[12]*r[11]+t[13]*r[16],n[12]=t[10]*r[2]+t[11]*r[7]+t[12]*r[12]+t[13]*r[17],n[13]=t[10]*r[3]+t[11]*r[8]+t[12]*r[13]+t[13]*r[18],n[14]=t[10]*r[4]+t[11]*r[9]+t[12]*r[14]+t[13]*r[19]+t[14],n[15]=t[15]*r[0]+t[16]*r[5]+t[17]*r[10]+t[18]*r[15],n[16]=t[15]*r[1]+t[16]*r[6]+t[17]*r[11]+t[18]*r[16],n[17]=t[15]*r[2]+t[16]*r[7]+t[17]*r[12]+t[18]*r[17],n[18]=t[15]*r[3]+t[16]*r[8]+t[17]*r[13]+t[18]*r[18],n[19]=t[15]*r[4]+t[16]*r[9]+t[17]*r[14]+t[18]*r[19]+t[19],n},e.prototype._colorMatrix=function(n){var t=new Float32Array(n);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t},e.prototype.brightness=function(n,t){var r=[n,0,0,0,0,0,n,0,0,0,0,0,n,0,0,0,0,0,1,0];this._loadMatrix(r,t)},e.prototype.greyscale=function(n,t){var r=[n,n,n,0,0,n,n,n,0,0,n,n,n,0,0,0,0,0,1,0];this._loadMatrix(r,t)},e.prototype.blackAndWhite=function(n){var t=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(t,n)},e.prototype.hue=function(n,t){n=(n||0)/180*Math.PI;var r=Math.cos(n),o=Math.sin(n),s=Math.sqrt,a=1/3,l=s(a),c=r+(1-r)*a,u=a*(1-r)-l*o,d=a*(1-r)+l*o,h=a*(1-r)+l*o,p=r+a*(1-r),f=a*(1-r)-l*o,m=a*(1-r)-l*o,_=a*(1-r)+l*o,P=r+a*(1-r),I=[c,u,d,0,0,h,p,f,0,0,m,_,P,0,0,0,0,0,1,0];this._loadMatrix(I,t)},e.prototype.contrast=function(n,t){var r=(n||0)+1,o=-.5*(r-1),s=[r,0,0,0,o,0,r,0,0,o,0,0,r,0,o,0,0,0,1,0];this._loadMatrix(s,t)},e.prototype.saturate=function(n,t){n===void 0&&(n=0);var r=n*2/3+1,o=(r-1)*-.5,s=[r,o,o,0,0,o,r,o,0,0,o,o,r,0,0,0,0,0,1,0];this._loadMatrix(s,t)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(n){var t=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(t,n)},e.prototype.sepia=function(n){var t=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(t,n)},e.prototype.technicolor=function(n){var t=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(t,n)},e.prototype.polaroid=function(n){var t=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(t,n)},e.prototype.toBGR=function(n){var t=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(t,n)},e.prototype.kodachrome=function(n){var t=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(t,n)},e.prototype.browni=function(n){var t=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(t,n)},e.prototype.vintage=function(n){var t=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(t,n)},e.prototype.colorTone=function(n,t,r,o,s){n=n||.2,t=t||.15,r=r||16770432,o=o||3375104;var a=(r>>16&255)/255,l=(r>>8&255)/255,c=(r&255)/255,u=(o>>16&255)/255,d=(o>>8&255)/255,h=(o&255)/255,p=[.3,.59,.11,0,0,a,l,c,n,0,u,d,h,t,0,a-u,l-d,c-h,0,0];this._loadMatrix(p,s)},e.prototype.night=function(n,t){n=n||.1;var r=[n*-2,-n,0,0,0,-n,0,n,0,0,0,n,n*2,0,0,0,0,0,1,0];this._loadMatrix(r,t)},e.prototype.predator=function(n,t){var r=[11.224130630493164*n,-4.794486999511719*n,-2.8746118545532227*n,0*n,.40342438220977783*n,-3.6330697536468506*n,9.193157196044922*n,-2.951810836791992*n,0*n,-1.316135048866272*n,-3.2184197902679443*n,-4.2375030517578125*n,7.476448059082031*n,0*n,.8044459223747253*n,0,0,0,1,0];this._loadMatrix(r,t)},e.prototype.lsd=function(n){var t=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(t,n)},e.prototype.reset=function(){var n=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(n,!1)},Object.defineProperty(e.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(n){this.uniforms.m=n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(n){this.uniforms.uAlpha=n},enumerable:!1,configurable:!0}),e}(qn);Jv.prototype.grayscale=Jv.prototype.greyscale;var e0=function(i,e){return e0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r])},e0(i,e)};function w3(i,e){e0(i,e);function n(){this.constructor=i}i.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var x3=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,M3=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`,O3=function(i){w3(e,i);function e(n,t){var r=this,o=new Rt;return n.renderable=!1,r=i.call(this,M3,x3,{mapSampler:n._texture,filterMatrix:o,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this,r.maskSprite=n,r.maskMatrix=o,t==null&&(t=20),r.scale=new R(t,t),r}return e.prototype.apply=function(n,t,r,o){this.uniforms.filterMatrix=n.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var s=this.maskSprite.worldTransform,a=Math.sqrt(s.a*s.a+s.b*s.b),l=Math.sqrt(s.c*s.c+s.d*s.d);a!==0&&l!==0&&(this.uniforms.rotation[0]=s.a/a,this.uniforms.rotation[1]=s.b/a,this.uniforms.rotation[2]=s.c/l,this.uniforms.rotation[3]=s.d/l),n.applyFilter(this,t,r,o)},Object.defineProperty(e.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(n){this.uniforms.mapSampler=n},enumerable:!1,configurable:!0}),e}(qn);var t0=function(i,e){return t0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r])},t0(i,e)};function E3(i,e){t0(i,e);function n(){this.constructor=i}i.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var I3=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputPixel;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`,S3=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputPixel;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,T3=function(i){E3(e,i);function e(){return i.call(this,I3,S3)||this}return e}(qn);var n0=function(i,e){return n0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r])},n0(i,e)};function A3(i,e){n0(i,e);function n(){this.constructor=i}i.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var D3=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`,k3=function(i){A3(e,i);function e(n,t){n===void 0&&(n=.5),t===void 0&&(t=Math.random());var r=i.call(this,Rh,D3,{uNoise:0,uSeed:0})||this;return r.noise=n,r.seed=t,r}return Object.defineProperty(e.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(n){this.uniforms.uNoise=n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(n){this.uniforms.uSeed=n},enumerable:!1,configurable:!0}),e}(qn);var fE=new Rt;Ut.prototype._cacheAsBitmap=!1;Ut.prototype._cacheData=null;var N3=function(){function i(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}return i}();Object.defineProperties(Ut.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(i){if(this._cacheAsBitmap!==i){this._cacheAsBitmap=i;var e;i?(this._cacheData||(this._cacheData=new N3),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}}});Ut.prototype._renderCached=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(e))};Ut.prototype._initCachedDisplayObject=function(e){if(!(this._cacheData&&this._cacheData.sprite)){var n=this.alpha;this.alpha=1,e.batch.flush();var t=this.getLocalBounds(null,!0).clone();if(this.filters){var r=this.filters[0].padding;t.pad(r)}t.ceil(me.RESOLUTION);var o=e.renderTexture.current,s=e.renderTexture.sourceFrame.clone(),a=e.renderTexture.destinationFrame.clone(),l=e.projection.transform,c=jo.create({width:t.width,height:t.height}),u="cacheAsBitmap_"+ko();this._cacheData.textureCacheId=u,wt.addToCache(c.baseTexture,u),Ee.addToCache(c,u);var d=this.transform.localTransform.copyTo(fE).invert().translate(-t.x,-t.y);this.render=this._cacheData.originalRender,e.render(this,c,!0,d,!1),e.projection.transform=l,e.renderTexture.bind(o,s,a),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var h=new ro(c);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-(t.x/t.width),h.anchor.y=-(t.y/t.height),h.alpha=n,h._bounds=this._bounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=h.containsPoint.bind(h)}};Ut.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(e))};Ut.prototype._initCachedDisplayObjectCanvas=function(e){if(!(this._cacheData&&this._cacheData.sprite)){var n=this.getLocalBounds(null,!0),t=this.alpha;this.alpha=1;var r=e.context,o=e._projTransform;n.ceil(me.RESOLUTION);var s=jo.create({width:n.width,height:n.height}),a="cacheAsBitmap_"+ko();this._cacheData.textureCacheId=a,wt.addToCache(s.baseTexture,a),Ee.addToCache(s,a);var l=fE;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=n.x,l.ty-=n.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,s,!0,l,!1),e.context=r,e._projTransform=o,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var c=new ro(s);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-(n.x/n.width),c.anchor.y=-(n.y/n.height),c.alpha=t,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=c.containsPoint.bind(c)}};Ut.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};Ut.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};Ut.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,wt.removeFromCache(this._cacheData.textureCacheId),Ee.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};Ut.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)};Ut.prototype.name=null;At.prototype.getChildByName=function(e,n){for(var t=0,r=this.children.length;t<r;t++)if(this.children[t].name===e)return this.children[t];if(n)for(var t=0,r=this.children.length;t<r;t++){var o=this.children[t];if(o.getChildByName){var s=this.children[t].getChildByName(e,!0);if(s)return s}}return null};Ut.prototype.getGlobalPosition=function(e,n){return e===void 0&&(e=new R),n===void 0&&(n=!1),this.parent?this.parent.toGlobal(this.position,e,n):(e.x=this.position.x,e.y=this.position.y),e};var i0=function(i,e){return i0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r])},i0(i,e)};function qa(i,e){i0(i,e);function n(){this.constructor=i}i.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var R3=function(i){qa(e,i);function e(n,t,r,o){n===void 0&&(n=100),t===void 0&&(t=100),r===void 0&&(r=10),o===void 0&&(o=10);var s=i.call(this)||this;return s.segWidth=r,s.segHeight=o,s.width=n,s.height=t,s.build(),s}return e.prototype.build=function(){for(var n=this.segWidth*this.segHeight,t=[],r=[],o=[],s=this.segWidth-1,a=this.segHeight-1,l=this.width/s,c=this.height/a,u=0;u<n;u++){var d=u%this.segWidth,h=u/this.segWidth|0;t.push(d*l,h*c),r.push(d/s,h/a)}for(var p=s*a,u=0;u<p;u++){var f=u%s,m=u/s|0,_=m*this.segWidth+f,P=m*this.segWidth+f+1,I=(m+1)*this.segWidth+f,b=(m+1)*this.segWidth+f+1;o.push(_,P,I,P,b,I)}this.buffers[0].data=new Float32Array(t),this.buffers[1].data=new Float32Array(r),this.indexBuffer.data=new Uint16Array(o),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},e}(Xa),F3=function(i){qa(e,i);function e(n,t,r){n===void 0&&(n=200),r===void 0&&(r=0);var o=i.call(this,new Float32Array(t.length*4),new Float32Array(t.length*4),new Uint16Array((t.length-1)*6))||this;return o.points=t,o._width=n,o.textureScale=r,o.build(),o}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),e.prototype.build=function(){var n=this.points;if(n){var t=this.getBuffer("aVertexPosition"),r=this.getBuffer("aTextureCoord"),o=this.getIndex();if(!(n.length<1)){t.data.length/4!==n.length&&(t.data=new Float32Array(n.length*4),r.data=new Float32Array(n.length*4),o.data=new Uint16Array((n.length-1)*6));var s=r.data,a=o.data;s[0]=0,s[1]=0,s[2]=0,s[3]=1;for(var l=0,c=n[0],u=this._width*this.textureScale,d=n.length,h=0;h<d;h++){var p=h*4;if(this.textureScale>0){var f=c.x-n[h].x,m=c.y-n[h].y,_=Math.sqrt(f*f+m*m);c=n[h],l+=_/u}else l=h/(d-1);s[p]=l,s[p+1]=0,s[p+2]=l,s[p+3]=1}for(var P=0,h=0;h<d-1;h++){var p=h*2;a[P++]=p,a[P++]=p+1,a[P++]=p+2,a[P++]=p+2,a[P++]=p+1,a[P++]=p+3}r.update(),o.update(),this.updateVertices()}}},e.prototype.updateVertices=function(){var n=this.points;if(!(n.length<1)){for(var t=n[0],r,o=0,s=0,a=this.buffers[0].data,l=n.length,c=0;c<l;c++){var u=n[c],d=c*4;c<n.length-1?r=n[c+1]:r=u,s=-(r.x-t.x),o=r.y-t.y;var h=Math.sqrt(o*o+s*s),p=this.textureScale>0?this.textureScale*this._width/2:this._width/2;o/=h,s/=h,o*=p,s*=p,a[d]=u.x+o,a[d+1]=u.y+s,a[d+2]=u.x-o,a[d+3]=u.y-s,t=u}this.buffers[0].update()}},e.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},e}(Xa),HY=function(i){qa(e,i);function e(n,t,r){r===void 0&&(r=0);var o=this,s=new F3(n.height,t,r),a=new Ga(n);return r>0&&(n.baseTexture.wrapMode=qi.REPEAT),o=i.call(this,s,a)||this,o.autoUpdate=!0,o}return e.prototype._render=function(n){var t=this.geometry;(this.autoUpdate||t._width!==this.shader.texture.height)&&(t._width=this.shader.texture.height,t.update()),i.prototype._render.call(this,n)},e}(Ls),L3=function(i){qa(e,i);function e(n,t,r){var o=this,s=new R3(n.width,n.height,t,r),a=new Ga(Ee.WHITE);return o=i.call(this,s,a)||this,o.texture=n,o}return e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var n=this.geometry;n.width=this.shader.texture.width,n.height=this.shader.texture.height,n.build()},Object.defineProperty(e.prototype,"texture",{get:function(){return this.shader.texture},set:function(n){this.shader.texture!==n&&(this.shader.texture=n,this._textureID=-1,n.baseTexture.valid?this.textureUpdated():n.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),e.prototype._render=function(n){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),i.prototype._render.call(this,n)},e.prototype.destroy=function(n){this.shader.texture.off("update",this.textureUpdated,this),i.prototype.destroy.call(this,n)},e}(Ls),WY=function(i){qa(e,i);function e(n,t,r,o,s){n===void 0&&(n=Ee.EMPTY);var a=this,l=new Xa(t,r,o);l.getBuffer("aVertexPosition").static=!1;var c=new Ga(n);return a=i.call(this,l,c,null,s)||this,a.autoUpdate=!0,a}return Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(n){this.geometry.getBuffer("aVertexPosition").data=n},enumerable:!1,configurable:!0}),e.prototype._render=function(n){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),i.prototype._render.call(this,n)},e}(Ls),qh=10,GY=function(i){qa(e,i);function e(n,t,r,o,s){t===void 0&&(t=qh),r===void 0&&(r=qh),o===void 0&&(o=qh),s===void 0&&(s=qh);var a=i.call(this,Ee.WHITE,4,4)||this;return a._origWidth=n.orig.width,a._origHeight=n.orig.height,a._width=a._origWidth,a._height=a._origHeight,a._leftWidth=t,a._rightWidth=o,a._topHeight=r,a._bottomHeight=s,a.texture=n,a}return e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(n){this.geometry.getBuffer("aVertexPosition").data=n},enumerable:!1,configurable:!0}),e.prototype.updateHorizontalVertices=function(){var n=this.vertices,t=this._getMinScale();n[9]=n[11]=n[13]=n[15]=this._topHeight*t,n[17]=n[19]=n[21]=n[23]=this._height-this._bottomHeight*t,n[25]=n[27]=n[29]=n[31]=this._height},e.prototype.updateVerticalVertices=function(){var n=this.vertices,t=this._getMinScale();n[2]=n[10]=n[18]=n[26]=this._leftWidth*t,n[4]=n[12]=n[20]=n[28]=this._width-this._rightWidth*t,n[6]=n[14]=n[22]=n[30]=this._width},e.prototype._getMinScale=function(){var n=this._leftWidth+this._rightWidth,t=this._width>n?1:this._width/n,r=this._topHeight+this._bottomHeight,o=this._height>r?1:this._height/r,s=Math.min(t,o);return s},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(n){this._width=n,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(n){this._height=n,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(n){this._leftWidth=n,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(n){this._rightWidth=n,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topHeight",{get:function(){return this._topHeight},set:function(n){this._topHeight=n,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(n){this._bottomHeight=n,this._refresh()},enumerable:!1,configurable:!0}),e.prototype._refresh=function(){var n=this.texture,t=this.geometry.buffers[1].data;this._origWidth=n.orig.width,this._origHeight=n.orig.height;var r=1/this._origWidth,o=1/this._origHeight;t[0]=t[8]=t[16]=t[24]=0,t[1]=t[3]=t[5]=t[7]=0,t[6]=t[14]=t[22]=t[30]=1,t[25]=t[27]=t[29]=t[31]=1,t[2]=t[10]=t[18]=t[26]=r*this._leftWidth,t[4]=t[12]=t[20]=t[28]=1-r*this._rightWidth,t[9]=t[11]=t[13]=t[15]=o*this._topHeight,t[17]=t[19]=t[21]=t[23]=1-o*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},e}(L3);var r0=function(i,e){return r0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r])},r0(i,e)};function j3(i,e){r0(i,e);function n(){this.constructor=i}i.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var $Y=function(i){j3(e,i);function e(n,t){t===void 0&&(t=!0);var r=i.call(this,n[0]instanceof Ee?n[0]:n[0].texture)||this;return r._textures=null,r._durations=null,r._autoUpdate=t,r._isConnectedToTicker=!1,r.animationSpeed=1,r.loop=!0,r.updateAnchor=!1,r.onComplete=null,r.onFrameChange=null,r.onLoop=null,r._currentTime=0,r._playing=!1,r._previousFrame=null,r.textures=n,r}return e.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Ot.shared.remove(this.update,this),this._isConnectedToTicker=!1))},e.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Ot.shared.add(this.update,this,Zi.HIGH),this._isConnectedToTicker=!0))},e.prototype.gotoAndStop=function(n){this.stop();var t=this.currentFrame;this._currentTime=n,t!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(n){var t=this.currentFrame;this._currentTime=n,t!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(n){if(this._playing){var t=this.animationSpeed*n,r=this.currentFrame;if(this._durations!==null){var o=this._currentTime%1*this._durations[this.currentFrame];for(o+=t/60*1e3;o<0;)this._currentTime--,o+=this._durations[this.currentFrame];var s=Math.sign(this.animationSpeed*n);for(this._currentTime=Math.floor(this._currentTime);o>=this._durations[this.currentFrame];)o-=this._durations[this.currentFrame]*s,this._currentTime+=s;this._currentTime+=o/this._durations[this.currentFrame]}else this._currentTime+=t;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):r!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<r?this.onLoop():this.animationSpeed<0&&this.currentFrame>r&&this.onLoop()),this.updateTexture())}},e.prototype.updateTexture=function(){var n=this.currentFrame;this._previousFrame!==n&&(this._previousFrame=n,this._texture=this._textures[n],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},e.prototype.destroy=function(n){this.stop(),i.prototype.destroy.call(this,n),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},e.fromFrames=function(n){for(var t=[],r=0;r<n.length;++r)t.push(Ee.from(n[r]));return new e(t)},e.fromImages=function(n){for(var t=[],r=0;r<n.length;++r)t.push(Ee.from(n[r]));return new e(t)},Object.defineProperty(e.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textures",{get:function(){return this._textures},set:function(n){if(n[0]instanceof Ee)this._textures=n,this._durations=null;else{this._textures=[],this._durations=[];for(var t=0;t<n.length;t++)this._textures.push(n[t].texture),this._durations.push(n[t].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentFrame",{get:function(){var n=Math.floor(this._currentTime)%this._textures.length;return n<0&&(n+=this._textures.length),n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(n){n!==this._autoUpdate&&(this._autoUpdate=n,!this._autoUpdate&&this._isConnectedToTicker?(Ot.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Ot.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),e}(ro);Qi.registerPlugin("accessibility",ZM);Qi.registerPlugin("extract",EO);Qi.registerPlugin("interaction",QM);Qi.registerPlugin("particle",XO);Qi.registerPlugin("prepare",iE);Qi.registerPlugin("batch",xO);Qi.registerPlugin("tilingSprite",aE);io.registerPlugin(hE);io.registerPlugin(rE);xc.registerPlugin($M);xc.registerPlugin(HO);var mE;function gE(i){mE=i}function ee(i){return mE.get(i)}var o0={id:0,name:"wire",category:"basic",symbol:"",showSettings:!1,showSettingsForType:!1,showInConstructionBox:!1,description:"",rotation:0,numOutputs:0,numInputs:0,minInputs:0,maxInputs:0,width:()=>{},height:()=>{}};var s0={id:1,name:"ELEMENT_TYPE.BASIC.NOT.NAME",category:"basic",symbol:"!",showSettings:!0,showSettingsForType:!0,showInConstructionBox:!0,description:"ELEMENT_TYPE.BASIC.NOT.DESCRIPTION",isRotatable:!0,rotation:0,numOutputs:1,numInputs:1,minInputs:1,maxInputs:1,width:()=>2,height:()=>1};var a0={id:2,name:"ELEMENT_TYPE.BASIC.AND.NAME",category:"basic",symbol:"&",showSettings:!0,showSettingsForType:!0,showInConstructionBox:!0,description:"ELEMENT_TYPE.BASIC.AND.DESCRIPTION",isRotatable:!0,rotation:0,numOutputs:1,numInputs:2,minInputs:2,maxInputs:64,width:()=>2,height(i){return i.numInputs||this.numInputs}};var l0={id:3,name:"ELEMENT_TYPE.BASIC.OR.NAME",category:"basic",symbol:"\u22651",showSettings:!0,showSettingsForType:!0,showInConstructionBox:!0,description:"ELEMENT_TYPE.BASIC.OR.DESCRIPTION",isRotatable:!0,rotation:0,numOutputs:1,numInputs:2,minInputs:2,maxInputs:64,width:()=>2,height(i){return i.numInputs||this.numInputs}};var c0={id:4,name:"ELEMENT_TYPE.BASIC.XOR.NAME",category:"basic",symbol:"=1",showSettings:!0,showSettingsForType:!0,showInConstructionBox:!0,description:"ELEMENT_TYPE.BASIC.XOR.DESCRIPTION",isRotatable:!0,rotation:0,numOutputs:1,numInputs:2,minInputs:2,maxInputs:64,width:()=>2,height(i){return i.numInputs||this.numInputs}};var u0={id:100,name:"ELEMENT_TYPE.PLUG.INPUT.NAME",category:"plug",symbol:"IN",showSettings:!0,showSettingsForType:!0,showInConstructionBox:!0,description:"ELEMENT_TYPE.PLUG.INPUT.DESCRIPTION",isRotatable:!0,rotation:0,numOutputs:1,numInputs:0,minInputs:0,maxInputs:0,hasPlugIndex:!0,hasLabel:!0,width:()=>1,height:()=>1};var d0={id:101,name:"ELEMENT_TYPE.PLUG.OUTPUT.NAME",category:"plug",symbol:"OUT",showSettings:!0,showSettingsForType:!0,showInConstructionBox:!0,description:"ELEMENT_TYPE.PLUG.OUTPUT.DESCRIPTION",isRotatable:!0,rotation:0,numOutputs:0,numInputs:1,minInputs:1,maxInputs:1,hasPlugIndex:!0,hasLabel:!0,width:()=>1,height:()=>1};var h0={id:200,name:"ELEMENT_TYPE.IO.BUTTON.NAME",category:"io",symbol:"but",symbolImage:"assets/elements/button.svg",showSettings:!0,showSettingsForType:!0,showInConstructionBox:!0,description:"ELEMENT_TYPE.IO.BUTTON.DESCRIPTION",isRotatable:!0,rotation:0,numOutputs:1,numInputs:0,minInputs:0,maxInputs:0,width:()=>1,height:()=>1};var p0={id:201,name:"ELEMENT_TYPE.IO.LEVER.NAME",category:"io",symbol:"sw",symbolImage:"assets/elements/switch.svg",showSettings:!0,showSettingsForType:!0,showInConstructionBox:!0,description:"ELEMENT_TYPE.IO.LEVER.DESCRIPTION",isRotatable:!0,rotation:0,numOutputs:1,numInputs:0,minInputs:0,maxInputs:0,width:()=>1,height:()=>1};var f0={id:102,name:"Butt PLug",category:"plug",symbol:"3 -",showSettings:!0,showSettingsForType:!1,showInConstructionBox:!1,description:"Place this in your butt",isRotatable:!0,rotation:0,numOutputs:1,numInputs:0,minInputs:0,maxInputs:0,width:()=>1,height:()=>1};var m0={id:5,name:"ELEMENT_TYPE.BASIC.DELAY.NAME",category:"basic",symbol:"1",showSettings:!0,showSettingsForType:!0,showInConstructionBox:!0,description:"ELEMENT_TYPE.BASIC.DELAY.DESCRIPTION",isRotatable:!0,rotation:0,numOutputs:1,numInputs:1,minInputs:1,maxInputs:1,width:()=>2,height:()=>1};var g0={id:6,name:"ELEMENT_TYPE.BASIC.CLOCK.NAME",category:"basic",symbol:"clk",showSettings:!0,showSettingsForType:!0,showInConstructionBox:!0,description:"ELEMENT_TYPE.BASIC.CLOCK.DESCRIPTION",isRotatable:!0,rotation:0,numOutputs:1,numInputs:1,minInputs:1,maxInputs:1,width:()=>3,height:()=>2,options:[1],optionsConfig:[{name:"ELEMENT_TYPE.BASIC.CLOCK.SPEED",min:1,max:Number.MAX_VALUE}],calcLabels:()=>["STP","CLK"]};var _0={id:10,name:"ELEMENT_TYPE.ADVANCED.HALF_ADDER.NAME",category:"advanced",symbol:"HA",showSettings:!0,showSettingsForType:!0,showInConstructionBox:!0,description:"ELEMENT_TYPE.ADVANCED.HALF_ADDER.DESCRIPTION",isRotatable:!0,rotation:0,numOutputs:2,numInputs:2,minInputs:2,maxInputs:2,width:()=>3,height:()=>2,calcLabels:()=>["A","B","S","C"]};var v0={id:11,name:"ELEMENT_TYPE.ADVANCED.FULL_ADDER.NAME",category:"advanced",symbol:"FA",showSettings:!0,showSettingsForType:!0,showInConstructionBox:!0,description:"ELEMENT_TYPE.ADVANCED.FULL_ADDER.DESCRIPTION",isRotatable:!0,rotation:0,numOutputs:2,numInputs:3,minInputs:3,maxInputs:3,width:()=>3,height:()=>3,calcLabels:()=>["A","B","Cin","S","C"]};var ME=(()=>{let e=class e{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}};e.\u0275fac=function(r){return new(r||e)(x(Mn),x(zt))},e.\u0275dir=He({type:e});let i=e;return i})(),rp=(()=>{let e=class e extends ME{};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=un(e)))(o||e)}})(),e.\u0275dir=He({type:e,features:[ke]});let i=e;return i})(),di=new fe("NgValueAccessor");var B3={provide:di,useExisting:Xt(()=>In),multi:!0};function V3(){let i=ys()?ys().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}var U3=new fe("CompositionEventMode"),In=(()=>{let e=class e extends ME{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!V3())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}};e.\u0275fac=function(r){return new(r||e)(x(Mn),x(zt),x(U3,8))},e.\u0275dir=He({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,o){r&1&&T("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[rn([B3]),ke]});let i=e;return i})();function Vo(i){return i==null||(typeof i=="string"||Array.isArray(i))&&i.length===0}function OE(i){return i!=null&&typeof i.length=="number"}var oo=new fe("NgValidators"),Ka=new fe("NgAsyncValidators"),z3=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,mt=class{static min(e){return EE(e)}static max(e){return IE(e)}static required(e){return H3(e)}static requiredTrue(e){return W3(e)}static email(e){return G3(e)}static minLength(e){return X3(e)}static maxLength(e){return SE(e)}static pattern(e){return q3(e)}static nullValidator(e){return Zh(e)}static compose(e){return RE(e)}static composeAsync(e){return LE(e)}};function EE(i){return e=>{if(Vo(e.value)||Vo(i))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<i?{min:{min:i,actual:e.value}}:null}}function IE(i){return e=>{if(Vo(e.value)||Vo(i))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>i?{max:{max:i,actual:e.value}}:null}}function H3(i){return Vo(i.value)?{required:!0}:null}function W3(i){return i.value===!0?null:{required:!0}}function G3(i){return Vo(i.value)||z3.test(i.value)?null:{email:!0}}function X3(i){return e=>Vo(e.value)||!OE(e.value)?null:e.value.length<i?{minlength:{requiredLength:i,actualLength:e.value.length}}:null}function SE(i){return e=>OE(e.value)&&e.value.length>i?{maxlength:{requiredLength:i,actualLength:e.value.length}}:null}function q3(i){if(!i)return Zh;let e,n;return typeof i=="string"?(n="",i.charAt(0)!=="^"&&(n+="^"),n+=i,i.charAt(i.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=i.toString(),e=i),t=>{if(Vo(t.value))return null;let r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}function Zh(i){return null}function TE(i){return i!=null}function AE(i){return ya(i)?Vn(i):i}function DE(i){let e={};return i.forEach(n=>{e=n!=null?Q(Q({},e),n):e}),Object.keys(e).length===0?null:e}function kE(i,e){return e.map(n=>n(i))}function Y3(i){return!i.validate}function NE(i){return i.map(e=>Y3(e)?e:n=>e.validate(n))}function RE(i){if(!i)return null;let e=i.filter(TE);return e.length==0?null:function(n){return DE(kE(n,e))}}function FE(i){return i!=null?RE(NE(i)):null}function LE(i){if(!i)return null;let e=i.filter(TE);return e.length==0?null:function(n){let t=kE(n,e).map(AE);return Cl(t).pipe(xt(DE))}}function jE(i){return i!=null?LE(NE(i)):null}function _E(i,e){return i===null?[e]:Array.isArray(i)?[...i,e]:[i,e]}function BE(i){return i._rawValidators}function VE(i){return i._rawAsyncValidators}function y0(i){return i?Array.isArray(i)?i:[i]:[]}function $h(i,e){return Array.isArray(i)?i.includes(e):i===e}function vE(i,e){let n=y0(e);return y0(i).forEach(r=>{$h(n,r)||n.push(r)}),n}function yE(i,e){return y0(e).filter(n=>!$h(i,n))}var Kh=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=FE(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=jE(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Ln=class extends Kh{get formDirective(){return null}get path(){return null}},Ji=class extends Kh{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Qh=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},Z3={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},C$=Xe(Q({},Z3),{"[class.ng-submitted]":"isSubmitted"}),Et=(()=>{let e=class e extends Qh{constructor(t){super(t)}};e.\u0275fac=function(r){return new(r||e)(x(Ji,2))},e.\u0275dir=He({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,o){r&2&&Ve("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[ke]});let i=e;return i})(),wr=(()=>{let e=class e extends Qh{constructor(t){super(t)}};e.\u0275fac=function(r){return new(r||e)(x(Ln,10))},e.\u0275dir=He({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,o){r&2&&Ve("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[ke]});let i=e;return i})();var Tc="VALID",Yh="INVALID",Ya="PENDING",Ac="DISABLED";function P0(i){return(op(i)?i.validators:i)||null}function $3(i){return Array.isArray(i)?FE(i):i||null}function w0(i,e){return(op(e)?e.asyncValidators:i)||null}function K3(i){return Array.isArray(i)?jE(i):i||null}function op(i){return i!=null&&!Array.isArray(i)&&typeof i=="object"}function UE(i,e,n){let t=i.controls;if(!(e?Object.keys(t):t).length)throw new ne(1e3,"");if(!t[n])throw new ne(1001,"")}function zE(i,e,n){i._forEachChild((t,r)=>{if(n[r]===void 0)throw new ne(1002,"")})}var $a=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Tc}get invalid(){return this.status===Yh}get pending(){return this.status==Ya}get disabled(){return this.status===Ac}get enabled(){return this.status!==Ac}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(vE(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(vE(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(yE(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(yE(e,this._rawAsyncValidators))}hasValidator(e){return $h(this._rawValidators,e)}hasAsyncValidator(e){return $h(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ya,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Ac,this.errors=null,this._forEachChild(t=>{t.disable(Xe(Q({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Xe(Q({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(t=>t(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Tc,this._forEachChild(t=>{t.enable(Xe(Q({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Xe(Q({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Tc||this.status===Ya)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ac:Tc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ya,this._hasOwnPendingAsyncValidator=!0;let n=AE(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(t=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(t,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((t,r)=>t&&t._find(r),this)}getError(e,n){let t=n?this.get(n):this;return t&&t.errors?t.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Me,this.statusChanges=new Me}_calculateStatus(){return this._allControlsDisabled()?Ac:this.errors?Yh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ya)?Ya:this._anyControlsHaveStatus(Yh)?Yh:Tc}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){op(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=$3(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=K3(this._rawAsyncValidators)}},Jh=class extends $a{constructor(e,n,t){super(P0(n),w0(t,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,t={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){zE(this,!0,e),Object.keys(e).forEach(t=>{UE(this,!0,t),this.controls[t].setValue(e[t],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(t=>{let r=this.controls[t];r&&r.patchValue(e[t],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((t,r)=>{t.reset(e?e[r]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,t)=>(e[t]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,t)=>t._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let t=this.controls[n];t&&e(t,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,t]of Object.entries(this.controls))if(this.contains(n)&&e(t))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,t,r)=>((t.enabled||this.disabled)&&(n[r]=t.value),n))}_reduceChildren(e,n){let t=e;return this._forEachChild((r,o)=>{t=n(t,r,o)}),t}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var C0=class extends Jh{};var Dc=new fe("CallSetDisabledState",{providedIn:"root",factory:()=>sp}),sp="always";function ap(i,e){return[...e.path,i]}function ep(i,e,n=sp){x0(i,e),e.valueAccessor.writeValue(i.value),(i.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(i.disabled),J3(i,e),tB(i,e),eB(i,e),Q3(i,e)}function tp(i,e,n=!0){let t=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(t),e.valueAccessor.registerOnTouched(t)),ip(i,e),i&&(e._invokeOnDestroyCallbacks(),i._registerOnCollectionChange(()=>{}))}function np(i,e){i.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function Q3(i,e){if(e.valueAccessor.setDisabledState){let n=t=>{e.valueAccessor.setDisabledState(t)};i.registerOnDisabledChange(n),e._registerOnDestroy(()=>{i._unregisterOnDisabledChange(n)})}}function x0(i,e){let n=BE(i);e.validator!==null?i.setValidators(_E(n,e.validator)):typeof n=="function"&&i.setValidators([n]);let t=VE(i);e.asyncValidator!==null?i.setAsyncValidators(_E(t,e.asyncValidator)):typeof t=="function"&&i.setAsyncValidators([t]);let r=()=>i.updateValueAndValidity();np(e._rawValidators,r),np(e._rawAsyncValidators,r)}function ip(i,e){let n=!1;if(i!==null){if(e.validator!==null){let r=BE(i);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.validator);o.length!==r.length&&(n=!0,i.setValidators(o))}}if(e.asyncValidator!==null){let r=VE(i);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.asyncValidator);o.length!==r.length&&(n=!0,i.setAsyncValidators(o))}}}let t=()=>{};return np(e._rawValidators,t),np(e._rawAsyncValidators,t),n}function J3(i,e){e.valueAccessor.registerOnChange(n=>{i._pendingValue=n,i._pendingChange=!0,i._pendingDirty=!0,i.updateOn==="change"&&HE(i,e)})}function eB(i,e){e.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,i.updateOn==="blur"&&i._pendingChange&&HE(i,e),i.updateOn!=="submit"&&i.markAsTouched()})}function HE(i,e){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function tB(i,e){let n=(t,r)=>{e.valueAccessor.writeValue(t),r&&e.viewToModelUpdate(t)};i.registerOnChange(n),e._registerOnDestroy(()=>{i._unregisterOnChange(n)})}function nB(i,e){i==null,x0(i,e)}function iB(i,e){return ip(i,e)}function M0(i,e){if(!i.hasOwnProperty("model"))return!1;let n=i.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function rB(i){return Object.getPrototypeOf(i.constructor)===rp}function oB(i,e){i._syncPendingControls(),e.forEach(n=>{let t=n.control;t.updateOn==="submit"&&t._pendingChange&&(n.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)})}function O0(i,e){if(!e)return null;Array.isArray(e);let n,t,r;return e.forEach(o=>{o.constructor===In?n=o:rB(o)?t=o:r=o}),r||t||n||null}function sB(i,e){let n=i.indexOf(e);n>-1&&i.splice(n,1)}function CE(i,e){let n=i.indexOf(e);n>-1&&i.splice(n,1)}function bE(i){return typeof i=="object"&&i!==null&&Object.keys(i).length===2&&"value"in i&&"disabled"in i}var Za=class extends $a{constructor(e=null,n,t){super(P0(n),w0(t,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),op(n)&&(n.nonNullable||n.initialValueIsDefault)&&(bE(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(t=>t(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){CE(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){CE(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){bE(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},Qa=Za,aB=i=>i instanceof Za,lB=(()=>{let e=class e extends Ln{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return ap(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=un(e)))(o||e)}})(),e.\u0275dir=He({type:e,features:[ke]});let i=e;return i})();var cB={provide:Ji,useExisting:Xt(()=>jn)},PE=(()=>Promise.resolve())(),jn=(()=>{let e=class e extends Ji{constructor(t,r,o,s,a,l){super(),this._changeDetectorRef=a,this.callSetDisabledState=l,this.control=new Za,this._registered=!1,this.name="",this.update=new Me,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=O0(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),M0(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){ep(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){PE.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,o=r!==0&&Xg(r);PE.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?ap(t,this._parent):[t]}};e.\u0275fac=function(r){return new(r||e)(x(Ln,9),x(oo,10),x(Ka,10),x(di,10),x(Zt,8),x(Dc,8))},e.\u0275dir=He({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[rn([cB]),ke,cn]});let i=e;return i})(),Uo=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=He({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let i=e;return i})(),uB={provide:di,useExisting:Xt(()=>kc),multi:!0},kc=(()=>{let e=class e extends rp{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=un(e)))(o||e)}})(),e.\u0275dir=He({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,o){r&1&&T("input",function(a){return o.onChange(a.target.value)})("blur",function(){return o.onTouched()})},features:[rn([uB]),ke]});let i=e;return i})();var dB=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Yt({type:e}),e.\u0275inj=qt({});let i=e;return i})();var E0=new fe("NgModelWithFormControlWarning"),hB={provide:Ji,useExisting:Xt(()=>so)},so=(()=>{let e=class e extends Ji{set isDisabled(t){}constructor(t,r,o,s,a){super(),this._ngModelWarningConfig=s,this.callSetDisabledState=a,this.update=new Me,this._ngModelWarningSent=!1,this._setValidators(t),this._setAsyncValidators(r),this.valueAccessor=O0(this,o)}ngOnChanges(t){if(this._isControlChanged(t)){let r=t.form.previousValue;r&&tp(r,this,!1),ep(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}M0(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&tp(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(r){return new(r||e)(x(oo,10),x(Ka,10),x(di,10),x(E0,8),x(Dc,8))},e.\u0275dir=He({type:e,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[rn([hB]),ke,cn]});let i=e;return i})(),pB={provide:Ln,useExisting:Xt(()=>Mi)},Mi=(()=>{let e=class e extends Ln{constructor(t,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Me,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ip(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return ep(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){tp(t.control||null,t,!1),sB(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,oB(this.form,this.directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,o=this.form.get(t.path);r!==o&&(tp(r||null,t),aB(o)&&(ep(o,t,this.callSetDisabledState),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);nB(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&iB(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){x0(this.form,this),this._oldForm&&ip(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(r){return new(r||e)(x(oo,10),x(Ka,10),x(Dc,8))},e.\u0275dir=He({type:e,selectors:[["","formGroup",""]],hostBindings:function(r,o){r&1&&T("submit",function(a){return o.onSubmit(a)})("reset",function(){return o.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[rn([pB]),ke,cn]});let i=e;return i})(),fB={provide:Ln,useExisting:Xt(()=>WE)},WE=(()=>{let e=class e extends lB{constructor(t,r,o){super(),this.name=null,this._parent=t,this._setValidators(r),this._setAsyncValidators(o)}_checkParentType(){GE(this._parent)}};e.\u0275fac=function(r){return new(r||e)(x(Ln,13),x(oo,10),x(Ka,10))},e.\u0275dir=He({type:e,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[rn([fB]),ke]});let i=e;return i})(),mB={provide:Ln,useExisting:Xt(()=>lp)},lp=(()=>{let e=class e extends Ln{constructor(t,r,o){super(),this.name=null,this._parent=t,this._setValidators(r),this._setAsyncValidators(o)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return ap(this.name==null?this.name:this.name.toString(),this._parent)}_checkParentType(){GE(this._parent)}};e.\u0275fac=function(r){return new(r||e)(x(Ln,13),x(oo,10),x(Ka,10))},e.\u0275dir=He({type:e,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[rn([mB]),ke]});let i=e;return i})();function GE(i){return!(i instanceof WE)&&!(i instanceof Mi)&&!(i instanceof lp)}var gB={provide:Ji,useExisting:Xt(()=>ao)},ao=(()=>{let e=class e extends Ji{set isDisabled(t){}constructor(t,r,o,s,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new Me,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=O0(this,s)}ngOnChanges(t){this._added||this._setUpControl(),M0(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return ap(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(r){return new(r||e)(x(Ln,13),x(oo,10),x(Ka,10),x(di,10),x(E0,8))},e.\u0275dir=He({type:e,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[rn([gB]),ke,cn]});let i=e;return i})(),_B={provide:di,useExisting:Xt(()=>zo),multi:!0};function XE(i,e){return i==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${i}: ${e}`.slice(0,50))}function vB(i){return i.split(":")[0]}var zo=(()=>{let e=class e extends rp{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r=this._getOptionId(t),o=XE(r,t);this.setProperty("value",o)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=vB(t);return this._optionMap.has(r)?this._optionMap.get(r):t}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=un(e)))(o||e)}})(),e.\u0275dir=He({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,o){r&1&&T("change",function(a){return o.onChange(a.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[rn([_B]),ke]});let i=e;return i})(),Ja=(()=>{let e=class e{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(XE(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(x(zt),x(Mn),x(zo,9))},e.\u0275dir=He({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let i=e;return i})(),yB={provide:di,useExisting:Xt(()=>qE),multi:!0};function wE(i,e){return i==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${i}: ${e}`.slice(0,50))}function CB(i){return i.split(":")[0]}var qE=(()=>{let e=class e extends rp{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r;if(Array.isArray(t)){let o=t.map(s=>this._getOptionId(s));r=(s,a)=>{s._setSelected(o.indexOf(a.toString())>-1)}}else r=(o,s)=>{o._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let o=[],s=r.selectedOptions;if(s!==void 0){let a=s;for(let l=0;l<a.length;l++){let c=a[l],u=this._getOptionValue(c.value);o.push(u)}}else{let a=r.options;for(let l=0;l<a.length;l++){let c=a[l];if(c.selected){let u=this._getOptionValue(c.value);o.push(u)}}}this.value=o,t(o)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=CB(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=un(e)))(o||e)}})(),e.\u0275dir=He({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,o){r&1&&T("change",function(a){return o.onChange(a.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[rn([yB]),ke]});let i=e;return i})(),el=(()=>{let e=class e{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(wE(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(wE(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(x(zt),x(Mn),x(qE,9))},e.\u0275dir=He({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let i=e;return i})();function bB(i){return typeof i=="number"?i:parseInt(i,10)}function YE(i){return typeof i=="number"?i:parseFloat(i)}var I0=(()=>{let e=class e{constructor(){this._validator=Zh}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Zh,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=He({type:e,features:[cn]});let i=e;return i})(),PB={provide:oo,useExisting:Xt(()=>S0),multi:!0},S0=(()=>{let e=class e extends I0{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=t=>YE(t),this.createValidator=t=>IE(t)}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=un(e)))(o||e)}})(),e.\u0275dir=He({type:e,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(r,o){r&2&&pr("max",o._enabled?o.max:null)},inputs:{max:"max"},features:[rn([PB]),ke]});let i=e;return i})(),wB={provide:oo,useExisting:Xt(()=>Nc),multi:!0},Nc=(()=>{let e=class e extends I0{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>YE(t),this.createValidator=t=>EE(t)}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=un(e)))(o||e)}})(),e.\u0275dir=He({type:e,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,o){r&2&&pr("min",o._enabled?o.min:null)},inputs:{min:"min"},features:[rn([wB]),ke]});let i=e;return i})();var xB={provide:oo,useExisting:Xt(()=>Rc),multi:!0},Rc=(()=>{let e=class e extends I0{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=t=>bB(t),this.createValidator=t=>SE(t)}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=un(e)))(o||e)}})(),e.\u0275dir=He({type:e,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(r,o){r&2&&pr("maxlength",o._enabled?o.maxlength:null)},inputs:{maxlength:"maxlength"},features:[rn([xB]),ke]});let i=e;return i})();var ZE=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Yt({type:e}),e.\u0275inj=qt({imports:[dB]});let i=e;return i})(),b0=class extends $a{constructor(e,n,t){super(P0(n),w0(t,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,t={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:t.emitEvent})}removeAt(e,n={}){let t=this._adjustIndex(e);t<0&&(t=0),this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),n&&(this.controls.splice(r,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){zE(this,!1,e),e.forEach((t,r)=>{UE(this,!1,r),this.at(r).setValue(t,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(e.forEach((t,r)=>{this.at(r)&&this.at(r).patchValue(t,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((t,r)=>{t.reset(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,t)=>t._syncPendingControls()?!0:n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,t)=>{e(n,t)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function xE(i){return!!i&&(i.asyncValidators!==void 0||i.validators!==void 0||i.updateOn!==void 0)}var MB=(()=>{let e=class e{constructor(){this.useNonNullable=!1}get nonNullable(){let t=new e;return t.useNonNullable=!0,t}group(t,r=null){let o=this._reduceControls(t),s={};return xE(r)?s=r:r!==null&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new Jh(o,s)}record(t,r=null){let o=this._reduceControls(t);return new C0(o,r)}control(t,r,o){let s={};return this.useNonNullable?(xE(r)?s=r:(s.validators=r,s.asyncValidators=o),new Za(t,Xe(Q({},s),{nonNullable:!0}))):new Za(t,r,o)}array(t,r,o){let s=t.map(a=>this._createControl(a));return new b0(s,r,o)}_reduceControls(t){let r={};return Object.keys(t).forEach(o=>{r[o]=this._createControl(t[o])}),r}_createControl(t){if(t instanceof Za)return t;if(t instanceof $a)return t;if(Array.isArray(t)){let r=t[0],o=t.length>1?t[1]:null,s=t.length>2?t[2]:null;return this.control(r,o,s)}else return this.control(t)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var xr=(()=>{let e=class e extends MB{group(t,r=null){return super.group(t,r)}control(t,r,o){return super.control(t,r,o)}array(t,r,o){return super.array(t,r,o)}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=un(e)))(o||e)}})(),e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var $E=(()=>{let e=class e{static withConfig(t){return{ngModule:e,providers:[{provide:Dc,useValue:t.callSetDisabledState??sp}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Yt({type:e}),e.\u0275inj=qt({imports:[ZE]});let i=e;return i})(),KE=(()=>{let e=class e{static withConfig(t){return{ngModule:e,providers:[{provide:E0,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Dc,useValue:t.callSetDisabledState??sp}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Yt({type:e}),e.\u0275inj=qt({imports:[ZE]});let i=e;return i})();var cp=(()=>{let e=class e extends Nt{constructor(){super()}ngOnInit(){this.text=new Qa(this.inputFromOpener,[mt.required])}setText(){this.requestClose.emit(this.text.value)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ie({type:e,selectors:[["app-text"]],features:[ke],decls:8,vars:8,consts:[["for","text-setting"],["rows","4","cols","50","type","text","id","text-setting",3,"formControl"],[1,"btn-raised","primary",3,"disabled","click"]],template:function(r,o){r&1&&(v(0,"div")(1,"label",0),O(2),M(3,"translate"),y(),q(4,"textarea",1),v(5,"button",2),T("click",function(){return o.setText()}),O(6),M(7,"translate"),y()()),r&2&&(g(2),K(E(3,4,"POPUP.TEXT.LABEL")),g(2),w("formControl",o.text),g(1),w("disabled",o.text.invalid),g(1),U(" ",E(7,6,"POPUP.TEXT.SET")," "))},dependencies:[In,Et,so,Pe],styles:["div[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:2rem 1.5rem}div[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-width:400px;margin-bottom:2rem;outline:none}.theme-light[_nghost-%COMP%]   div[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   div[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{background-color:#f5f5f5;border:1px solid #000000;color:#000}.theme-dark[_nghost-%COMP%]   div[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   div[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{background-color:#262a2b;border:1px solid #cccccc;color:#ccc}"],changeDetection:0});let i=e;return i})();var Mr="*";function QE(i,e){return{type:7,name:i,definitions:e,options:{}}}function T0(i,e=null){return{type:4,styles:e,timings:i}}function JE(i,e=null){return{type:2,steps:i,options:e}}function Bs(i){return{type:6,styles:i,offset:null}}function up(i,e,n){return{type:0,name:i,styles:e,options:n}}function A0(i,e,n=null){return{type:1,expr:i,animation:e,options:n}}var Ho=class{constructor(e=0,n=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+n}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let n=e=="start"?this._onStartFns:this._onDoneFns;n.forEach(t=>t()),n.length=0}},Fc=class{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let n=0,t=0,r=0,o=this.players.length;o==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++n==o&&this._onFinish()}),s.onDestroy(()=>{++t==o&&this._onDestroy()}),s.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let n=e*this.totalTime;this.players.forEach(t=>{let r=t.totalTime?Math.min(1,n/t.totalTime):1;t.setPosition(r)})}getPosition(){let e=this.players.reduce((n,t)=>n===null||t.totalTime>n.totalTime?t:n,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let n=e=="start"?this._onStartFns:this._onDoneFns;n.forEach(t=>t()),n.length=0}},dp="!";var eI=["toast-component",""];function OB(i,e){if(i&1){let n=le();v(0,"button",5),T("click",function(){H(n);let r=A();return W(r.remove())}),v(1,"span",6),O(2,"\xD7"),y()()}}function EB(i,e){if(i&1&&(st(0),O(1),at()),i&2){let n=A(2);g(1),U("[",n.duplicatesCount+1,"]")}}function IB(i,e){if(i&1&&(v(0,"div"),O(1),J(2,EB,2,1,"ng-container",4),y()),i&2){let n=A();qr(n.options.titleClass),pr("aria-label",n.title),g(1),U(" ",n.title," "),g(1),w("ngIf",n.duplicatesCount)}}function SB(i,e){if(i&1&&q(0,"div",7),i&2){let n=A();qr(n.options.messageClass),w("innerHTML",n.message,Gr)}}function TB(i,e){if(i&1&&(v(0,"div",8),O(1),y()),i&2){let n=A();qr(n.options.messageClass),pr("aria-label",n.message),g(1),U(" ",n.message," ")}}function AB(i,e){if(i&1&&(v(0,"div"),q(1,"div",9),y()),i&2){let n=A();g(1),Xr("width",n.width+"%")}}function DB(i,e){if(i&1){let n=le();v(0,"button",5),T("click",function(){H(n);let r=A();return W(r.remove())}),v(1,"span",6),O(2,"\xD7"),y()()}}function kB(i,e){if(i&1&&(st(0),O(1),at()),i&2){let n=A(2);g(1),U("[",n.duplicatesCount+1,"]")}}function NB(i,e){if(i&1&&(v(0,"div"),O(1),J(2,kB,2,1,"ng-container",4),y()),i&2){let n=A();qr(n.options.titleClass),pr("aria-label",n.title),g(1),U(" ",n.title," "),g(1),w("ngIf",n.duplicatesCount)}}function RB(i,e){if(i&1&&q(0,"div",7),i&2){let n=A();qr(n.options.messageClass),w("innerHTML",n.message,Gr)}}function FB(i,e){if(i&1&&(v(0,"div",8),O(1),y()),i&2){let n=A();qr(n.options.messageClass),pr("aria-label",n.message),g(1),U(" ",n.message," ")}}function LB(i,e){if(i&1&&(v(0,"div"),q(1,"div",9),y()),i&2){let n=A();g(1),Xr("width",n.width+"%")}}var hp=(()=>{class i{el;constructor(n){this.el=n}getContainerElement(){return this.el.nativeElement}static \u0275fac=function(t){return new(t||i)(x(zt))};static \u0275dir=He({type:i,selectors:[["","toastContainer",""]],exportAs:["toastContainer"],standalone:!0})}return i})(),D0=class{_attachedHost;component;viewContainerRef;injector;constructor(e,n){this.component=e,this.injector=n}attach(e,n){return this._attachedHost=e,e.attach(this,n)}detach(){let e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},k0=class{_attachedPortal;_disposeFn;attach(e,n){return this._attachedPortal=e,this.attachComponentPortal(e,n)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}},N0=class{_overlayRef;componentInstance;duplicatesCount=0;_afterClosed=new _e;_activate=new _e;_manualClose=new _e;_resetTimeout=new _e;_countDuplicate=new _e;constructor(e){this._overlayRef=e}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,n){e&&this._resetTimeout.next(),n&&this._countDuplicate.next(++this.duplicatesCount)}},tl=class{toastId;config;message;title;toastType;toastRef;_onTap=new _e;_onAction=new _e;constructor(e,n,t,r,o,s){this.toastId=e,this.config=n,this.message=t,this.title=r,this.toastType=o,this.toastRef=s,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}},tI={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing"},nI=new fe("ToastConfig"),R0=class extends k0{_hostDomElement;_componentFactoryResolver;_appRef;constructor(e,n,t){super(),this._hostDomElement=e,this._componentFactoryResolver=n,this._appRef=t}attachComponentPortal(e,n){let t=this._componentFactoryResolver.resolveComponentFactory(e.component),r;return r=t.create(e.injector),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.detachView(r.hostView),r.destroy()}),n?this._hostDomElement.insertBefore(this._getComponentRootNode(r),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(r)),r}_getComponentRootNode(e){return e.hostView.rootNodes[0]}},jB=(()=>{class i{_document=vt(Bt);_containerElement;ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let n=this._document.createElement("div");n.classList.add("overlay-container"),n.setAttribute("aria-live","polite"),this._document.body.appendChild(n),this._containerElement=n}static \u0275fac=function(t){return new(t||i)};static \u0275prov=Y({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),F0=class{_portalHost;constructor(e){this._portalHost=e}attach(e,n=!0){return this._portalHost.attach(e,n)}detach(){return this._portalHost.detach()}},BB=(()=>{class i{_overlayContainer=vt(jB);_componentFactoryResolver=vt(xn);_appRef=vt(vn);_document=vt(Bt);_paneElements=new Map;create(n,t){return this._createOverlayRef(this.getPaneElement(n,t))}getPaneElement(n="",t){return this._paneElements.get(t)||this._paneElements.set(t,{}),this._paneElements.get(t)[n]||(this._paneElements.get(t)[n]=this._createPaneElement(n,t)),this._paneElements.get(t)[n]}_createPaneElement(n,t){let r=this._document.createElement("div");return r.id="toast-container",r.classList.add(n),r.classList.add("toast-container"),t?t.getContainerElement().appendChild(r):this._overlayContainer.getContainerElement().appendChild(r),r}_createPortalHost(n){return new R0(n,this._componentFactoryResolver,this._appRef)}_createOverlayRef(n){return new F0(this._createPortalHost(n))}static \u0275fac=function(t){return new(t||i)};static \u0275prov=Y({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),pp=(()=>{class i{overlay;_injector;sanitizer;ngZone;toastrConfig;currentlyActive=0;toasts=[];overlayContainer;previousToastMessage;index=0;constructor(n,t,r,o,s){this.overlay=t,this._injector=r,this.sanitizer=o,this.ngZone=s,this.toastrConfig=Q(Q({},n.default),n.config),n.config.iconClasses&&(this.toastrConfig.iconClasses=Q(Q({},n.default.iconClasses),n.config.iconClasses))}show(n,t,r={},o=""){return this._preBuildNotification(o,n,t,this.applyConfig(r))}success(n,t,r={}){let o=this.toastrConfig.iconClasses.success||"";return this._preBuildNotification(o,n,t,this.applyConfig(r))}error(n,t,r={}){let o=this.toastrConfig.iconClasses.error||"";return this._preBuildNotification(o,n,t,this.applyConfig(r))}info(n,t,r={}){let o=this.toastrConfig.iconClasses.info||"";return this._preBuildNotification(o,n,t,this.applyConfig(r))}warning(n,t,r={}){let o=this.toastrConfig.iconClasses.warning||"";return this._preBuildNotification(o,n,t,this.applyConfig(r))}clear(n){for(let t of this.toasts)if(n!==void 0){if(t.toastId===n){t.toastRef.manualClose();return}}else t.toastRef.manualClose()}remove(n){let t=this._findToast(n);if(!t||(t.activeToast.toastRef.close(),this.toasts.splice(t.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){let r=this.toasts[this.currentlyActive].toastRef;r.isInactive()||(this.currentlyActive=this.currentlyActive+1,r.activate())}return!0}findDuplicate(n="",t="",r,o){let{includeTitleDuplicates:s}=this.toastrConfig;for(let a of this.toasts){let l=s&&a.title===n;if((!s||l)&&a.message===t)return a.toastRef.onDuplicate(r,o),a}return null}applyConfig(n={}){return Q(Q({},this.toastrConfig),n)}_findToast(n){for(let t=0;t<this.toasts.length;t++)if(this.toasts[t].toastId===n)return{index:t,activeToast:this.toasts[t]};return null}_preBuildNotification(n,t,r,o){return o.onActivateTick?this.ngZone.run(()=>this._buildNotification(n,t,r,o)):this._buildNotification(n,t,r,o)}_buildNotification(n,t,r,o){if(!o.toastComponent)throw new Error("toastComponent required");let s=this.findDuplicate(r,t,this.toastrConfig.resetTimeoutOnDuplicate&&o.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&r||t)&&this.toastrConfig.preventDuplicates&&s!==null)return s;this.previousToastMessage=t;let a=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(a=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));let l=this.overlay.create(o.positionClass,this.overlayContainer);this.index=this.index+1;let c=t;t&&o.enableHtml&&(c=this.sanitizer.sanitize(Gn.HTML,t));let u=new N0(l),d=new tl(this.index,o,c,r,n,u),h=[{provide:tl,useValue:d}],p=nn.create({providers:h,parent:this._injector}),f=new D0(o.toastComponent,p),m=l.attach(f,o.newestOnTop);u.componentInstance=m.instance;let _={toastId:this.index,title:r||"",message:t||"",toastRef:u,onShown:u.afterActivate(),onHidden:u.afterClosed(),onTap:d.onTap(),onAction:d.onAction(),portal:m};return a||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{_.toastRef.activate()})),this.toasts.push(_),_}static \u0275fac=function(t){return new(t||i)(D(nI),D(BB),D(nn),D(Jl),D(ye))};static \u0275prov=Y({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),VB=(()=>{class i{toastrService;toastPackage;ngZone;message;title;options;duplicatesCount;originalTimeout;width=-1;toastClasses="";state;get displayStyle(){if(this.state.value==="inactive")return"none"}timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(n,t,r){this.toastrService=n,this.toastPackage=t,this.ngZone=r,this.message=t.message,this.title=t.title,this.options=t.config,this.originalTimeout=t.config.timeOut,this.toastClasses=`${t.toastType} ${t.config.toastClass}`,this.sub=t.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=t.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=t.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=t.toastRef.countDuplicate().subscribe(o=>{this.duplicatesCount=o}),this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}}}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=Xe(Q({},this.state),{value:"active"}),!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(this.width===0||this.width===100||!this.options.timeOut)return;let n=new Date().getTime(),t=this.hideTime-n;this.width=t/this.options.timeOut*100,this.options.progressAnimation==="increasing"&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=Xe(Q({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){this.state.value!=="removed"&&(clearTimeout(this.timeout),this.state=Xe(Q({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){this.state.value!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state.value!=="removed"&&this.options.disableTimeOut!=="extendedTimeOut"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state.value==="removed"||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(n,t){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(n),t)):this.timeout=setTimeout(()=>n(),t)}outsideInterval(n,t){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(n),t)):this.intervalId=setInterval(()=>n(),t)}runInsideAngular(n){this.ngZone?this.ngZone.run(()=>n()):n()}static \u0275fac=function(t){return new(t||i)(x(pp),x(tl),x(ye))};static \u0275cmp=ie({type:i,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(t,r){t&1&&T("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),t&2&&(Vg("@flyInOut",r.state),qr(r.toastClasses),Xr("display",r.displayStyle))},standalone:!0,features:[Pa],attrs:eI,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(t,r){t&1&&J(0,OB,3,0,"button",0)(1,IB,3,5,"div",1)(2,SB,1,3,"div",2)(3,TB,2,4,"div",3)(4,AB,2,2,"div",4),t&2&&(w("ngIf",r.options.closeButton),g(1),w("ngIf",r.title),g(1),w("ngIf",r.message&&r.options.enableHtml),g(1),w("ngIf",r.message&&!r.options.enableHtml),g(1),w("ngIf",r.options.progressBar))},dependencies:[Be],encapsulation:2,data:{animation:[QE("flyInOut",[up("inactive",Bs({opacity:0})),up("active",Bs({opacity:1})),up("removed",Bs({opacity:0})),A0("inactive => active",T0("{{ easeTime }}ms {{ easing }}")),A0("active => removed",T0("{{ easeTime }}ms {{ easing }}"))])]}})}return i})(),UB=Xe(Q({},tI),{toastComponent:VB}),zB=(i={})=>Vl([{provide:nI,useValue:{default:UB,config:i}}]),iI=(()=>{class i{static forRoot(n={}){return{ngModule:i,providers:[zB(n)]}}static \u0275fac=function(t){return new(t||i)};static \u0275mod=Yt({type:i});static \u0275inj=qt({})}return i})();var HB=(()=>{class i{toastrService;toastPackage;appRef;message;title;options;duplicatesCount;originalTimeout;width=-1;toastClasses="";get displayStyle(){return this.state==="inactive"?"none":null}state="inactive";timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(n,t,r){this.toastrService=n,this.toastPackage=t,this.appRef=r,this.message=t.message,this.title=t.title,this.options=t.config,this.originalTimeout=t.config.timeOut,this.toastClasses=`${t.toastType} ${t.config.toastClass}`,this.sub=t.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=t.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=t.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=t.toastRef.countDuplicate().subscribe(o=>{this.duplicatesCount=o})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(this.width===0||this.width===100||!this.options.timeOut)return;let n=new Date().getTime(),t=this.hideTime-n;this.width=t/this.options.timeOut*100,this.options.progressAnimation==="increasing"&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=new Date().getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){this.state!=="removed"&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){this.state!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state!=="removed"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state==="removed"||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}static \u0275fac=function(t){return new(t||i)(x(pp),x(tl),x(vn))};static \u0275cmp=ie({type:i,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(t,r){t&1&&T("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),t&2&&(qr(r.toastClasses),Xr("display",r.displayStyle))},standalone:!0,features:[Pa],attrs:eI,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(t,r){t&1&&J(0,DB,3,0,"button",0)(1,NB,3,5,"div",1)(2,RB,1,3,"div",2)(3,FB,2,4,"div",3)(4,LB,2,2,"div",4),t&2&&(w("ngIf",r.options.closeButton),g(1),w("ngIf",r.title),g(1),w("ngIf",r.message&&r.options.enableHtml),g(1),w("ngIf",r.message&&!r.options.enableHtml),g(1),w("ngIf",r.options.progressBar))},dependencies:[Be],encapsulation:2})}return i})(),j$=Xe(Q({},tI),{toastComponent:HB});var Sn=(()=>{let e=class e{constructor(t,r){this.toastr=t,this.translate=r}showErrorMessage(t,r){this.translate.get(t,r).subscribe(o=>{this.toastr.error(o),console.error(o)})}showInfo(t,r){this.translate.get(t,r).subscribe(o=>{this.toastr.info(o),console.log(o)})}setToastrContainer(t){this.toastr.overlayContainer=t}};e.\u0275fac=function(r){return new(r||e)(D(pp),D(yn))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var nl=(()=>{let e=class e{constructor(t,r){this.errorHandling=t,this.storage=r;let o=this.storage.get("sneaks");this._done=o?new Set(o):new Set}achieve(t){!this._done||this._done.has(t)||(this._done.add(t),this.errorHandling.showInfo("INFO.EASTEREGGS."+t),this.storage.set("sneaks",[...this._done]))}};e.\u0275fac=function(r){return new(r||e)(D(Sn),D(Xn))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var Re=(()=>{let e=class e{constructor(t,r,o){this.document=t,this.eastereggs=r,this.storage=o,this._showGrid=!0,this._showGridChangeSubject=new _e,this._editorColor={light:{background:16119285,grid:0,wire:0,selectRect:0,selectTint:13684944,wireSelectColor:11579568,fontTint:0,ledOn:2600544,ledOff:0},dark:{background:2237734,grid:1867845,wire:2600544,selectRect:0,selectTint:9079434,wireSelectColor:1007158,fontTint:16777215,ledOn:2600544,ledOff:1595693}},this.loadTheme()}loadTheme(){this._currentTheme=this.storage.get("preferences")?.theme??"dark",this._pendingTheme=this.currentTheme,this._currentTheme==="light"&&setTimeout(()=>this.eastereggs.achieve("BLD"),1e3),this.document.body.classList.add(this.themeClass)}setTheme(t){this._pendingTheme=t,this.storage.set("preferences",Xe(Q({},this.storage.get("preferences")),{theme:t}))}get themeClass(){return"theme-"+this._currentTheme}getEditorColor(t,r){return this._editorColor[r??this._currentTheme][t]}get currentTheme(){return this._currentTheme}get pendingTheme(){return this._pendingTheme}get showGrid(){return this._showGrid}set showGrid(t){this._showGrid=t,this._showGridChangeSubject.next(t)}get showGridChanges$(){return this._showGridChangeSubject.asObservable()}};e.\u0275fac=function(r){return new(r||e)(D(Bt),D(nl),D(Xn))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var WB=["contentComponentInsert"],GB=["outsidePopup"];function XB(i,e){if(i&1){let n=le();v(0,"img",8),T("click",function(){H(n);let r=A();return W(r.closeClick())}),y()}}function qB(i,e){if(i&1){let n=le();v(0,"img",9),T("click",function(){H(n);let r=A();return W(r.closeClick())}),y()}}var oI=(()=>{let e=class e{onKeyDown(){this.closeClick()}constructor(t){this.theming=t,this.requestClose=new Me}ngOnInit(){let t=this._viewContRef.createComponent(this.contentComp);t.instance.inputFromOpener=this.contentCompInput;let r=t.instance.requestClose.subscribe(o=>{r.unsubscribe(),this.requestClose.emit(o)})}closeOutside(t){t.target===this.outsidePopup.nativeElement&&this.closeOnClickOutside&&this.requestClose.emit()}closeClick(){this.requestClose.emit()}get currentTheme(){return this.theming.currentTheme}};e.\u0275fac=function(r){return new(r||e)(x(Re))},e.\u0275cmp=ie({type:e,selectors:[["app-popup"]],viewQuery:function(r,o){if(r&1&&(et(WB,7,dn),et(GB,7)),r&2){let s;Je(s=tt())&&(o._viewContRef=s.first),Je(s=tt())&&(o.outsidePopup=s.first)}},hostBindings:function(r,o){r&1&&T("keydown.escape",function(){return o.onKeyDown()},!1,hP)},inputs:{title:"title",titleTranslationParams:"titleTranslationParams",contentComp:"contentComp",contentCompInput:"contentCompInput",closeOnClickOutside:"closeOnClickOutside"},outputs:{requestClose:"requestClose"},decls:12,vars:6,consts:[["tabindex","0",1,"popup",3,"click"],["outsidePopup",""],[1,"content"],[1,"header"],["src","assets/icons/dark/close.svg","class","dark","alt","close","tabindex","0",3,"click",4,"ngIf"],["src","assets/icons/light/close.svg","class","light","alt","close","tabindex","0",3,"click",4,"ngIf"],[1,"body"],["contentComponentInsert",""],["src","assets/icons/dark/close.svg","alt","close","tabindex","0",1,"dark",3,"click"],["src","assets/icons/light/close.svg","alt","close","tabindex","0",1,"light",3,"click"]],template:function(r,o){r&1&&(v(0,"div",0,1),T("click",function(a){return o.closeOutside(a)}),v(2,"div",2)(3,"div",3)(4,"div"),O(5),M(6,"translate"),y(),J(7,XB,1,0,"img",4)(8,qB,1,0,"img",5),y(),v(9,"div",6),Hi(10,null,7),y()()()),r&2&&(g(5),K(xo(6,3,o.title,o.titleTranslationParams)),g(2),w("ngIf",o.currentTheme==="dark"),g(1),w("ngIf",o.currentTheme==="light"))},dependencies:[Be,Pe],styles:[".popup[_ngcontent-%COMP%]{position:fixed;display:flex;align-items:center;justify-content:center;top:0;left:0;width:100%;height:100%;z-index:1000;background-color:#00000040}.popup[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:flex-start;min-width:30rem;min-height:10rem;max-width:100%;max-height:100%;border-radius:.1rem;z-index:600;box-shadow:10px 10px 10px -5px #00000080}.theme-light[_nghost-%COMP%]   .popup[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .popup[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{background-color:#f5f5f5;border:1px solid #d1d1d1;color:#000}.theme-dark[_nghost-%COMP%]   .popup[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .popup[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{background-color:#262a2b;border:1px solid #3a4042;color:#ccc}@media (max-width: 767px){.popup[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{min-width:100%;min-height:100%;width:100%;height:100%}}.popup[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]{margin:auto;padding:.5rem;overflow:auto;width:100%;scrollbar-width:thin}.theme-light[_nghost-%COMP%]   .popup[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]::-webkit-scrollbar-track, .theme-light   [_nghost-%COMP%]   .popup[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#f5f5f5}.theme-dark[_nghost-%COMP%]   .popup[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]::-webkit-scrollbar-track, .theme-dark   [_nghost-%COMP%]   .popup[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#262a2b}.popup[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]::-webkit-scrollbar{width:5px}.popup[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:2.5px}.theme-light[_nghost-%COMP%]   .popup[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, .theme-light   [_nghost-%COMP%]   .popup[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#d1d1d1}.theme-dark[_nghost-%COMP%]   .popup[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, .theme-dark   [_nghost-%COMP%]   .popup[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#3a4042}.theme-light[_nghost-%COMP%]   .popup[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .popup[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]{scrollbar-color:#d1d1d1 #f5f5f5}.theme-dark[_nghost-%COMP%]   .popup[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .popup[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]{scrollbar-color:#3a4042 #262a2b}.popup[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;width:100%;text-align:center;font-size:1.2rem;font-weight:400;justify-content:space-between;align-items:center;padding:.5rem}@media (max-width: 350px){.popup[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{padding-top:1rem}}.theme-light[_nghost-%COMP%]   .popup[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .popup[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{background-color:#d1d1d1}.theme-dark[_nghost-%COMP%]   .popup[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .popup[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{background-color:#3a4042}.popup[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:1px;border-radius:.25rem;height:27px;padding:.25rem}.theme-light[_nghost-%COMP%]   .popup[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover, .theme-light   [_nghost-%COMP%]   .popup[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{background-color:#fff}.theme-dark[_nghost-%COMP%]   .popup[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover, .theme-dark   [_nghost-%COMP%]   .popup[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{background-color:#3e4446}"]});let i=e;return i})();var hn=(()=>{let e=class e{constructor(t,r,o,s){this.componentFactoryResolver=t,this.appRef=r,this.injector=o,this.document=s,this._popupOpened=!1}showPopup(t,r,o,s,a){return new Promise(l=>{let u=this.componentFactoryResolver.resolveComponentFactory(oI).create(this.injector);u.instance.title=r,u.instance.titleTranslationParams=a,u.instance.closeOnClickOutside=o,u.instance.contentCompInput=s,u.instance.contentComp=this.componentFactoryResolver.resolveComponentFactory(t),this.appRef.attachView(u.hostView);let d=u.hostView.rootNodes[0];this.document.body.appendChild(d),this._popupOpened=!0;let h=u.instance.requestClose.subscribe(p=>{this.appRef.detachView(u.hostView),u.destroy(),h.unsubscribe(),this._popupOpened=!1,l(p)})})}get isPopupOpened(){return this._popupOpened}};e.\u0275fac=function(r){return new(r||e)(D(xn),D(vn),D(nn),D(Bt))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var Er=(()=>{let e=class e{constructor(t,r){this.platformId=t,this.document=r,wi(this.platformId)&&(this.canvas=r.createElement("canvas"))}getTextWidth(t,r){if(!wi(this.platformId))return 1;let o=this.canvas.getContext("2d");return o.font=r||window.getComputedStyle(this.document.body).font,o.measureText(t).width}};e.\u0275fac=function(r){return new(r||e)(D(Wn),D(Bt))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var j0={id:7,name:"ELEMENT_TYPE.BASIC.TEXT.NAME",category:"basic",symbol:"",showSettings:!0,showSettingsForType:!0,showInConstructionBox:!1,description:"ELEMENT_TYPE.BASIC.TEXT.DESCRIPTION",isRotatable:!1,rotation:0,numOutputs:0,numInputs:0,minInputs:0,maxInputs:0,width(i){if(!i)return 0;let e=0;for(let n of i.data.split(`
`)){let t=Math.ceil(ee(Er).getTextWidth(n,`${C.gridPixelWidth*i.options[0]/8}px Roboto`)/1.2/C.gridPixelWidth);e=Math.max(e,t)}return e},height(i){return i?Math.ceil(i.data.split(`
`).length*i.options[0]/8-i.options[0]/16):0},options:[8],optionsConfig:[{name:"ELEMENT_TYPE.BASIC.TEXT.TEXT_SIZE",min:1,max:64}],onOptionsChanged(){},edit:(i,e,n)=>$(void 0,null,function*(){let t=n.currProject.currState.getElementById(e).data,r=yield ee(hn).showPopup(cp,"POPUP.TEXT.TITLE",!1,t);r===t||r===void 0||n.currProject.setData(e,r)}),canEditType:!1};var sI={showSettings:!0,showSettingsForType:!0,showInConstructionBox:!0,isRotatable:!0,rotation:0,width:()=>3,height(i){return i?Math.max(i.numInputs,i.numOutputs):Math.max(this.numInputs,this.numOutputs)},edit:(i,e,n)=>{n.openComponent(i)},canEditType:!0,labels:[],calcLabels(){return this.labels}};var ZB=["hexInput"],aI=(()=>{let e=class e extends Nt{constructor(){super(),this.leftAddress="00000000",this.leftAddressCache=new Map,this.oldValue="",this.rows=1}ngOnInit(){if(this.hexInput.nativeElement.value="",!this.inputFromOpener.data)return;let t=atob(this.inputFromOpener.data),r="";for(let o=0;o<t.length;o++){let s=t.charCodeAt(o).toString(16).toUpperCase();r+=(s.length===2?s:"0"+s)+" "}this.rows=Math.ceil(r.length/48)||1,this.calcLeftAddresses(this.rows),this.hexInput.nativeElement.value=r,this.oldValue=r}onInput(t){let r=t;this.selectionChange();let o=this.hexInput.nativeElement.value.toUpperCase();if(r.inputType.includes("insert")&&!/^[0-9A-F ]+$/.test(o)){this.hexInput.nativeElement.value=this.oldValue;return}o=o.replace(/ /g,"");let s=o.length,a="";for(let c=0;c<o.length;c++)a+=o.charAt(c)+(c!==0&&(c+1)%2===0?" ":"");a=a.trimEnd();let l;if(s<=Math.ceil(this.inputFromOpener.options[0]*2**this.inputFromOpener.options[1]/4))l=this.hexInput.nativeElement.value,this.hexInput.nativeElement.value=a,this.oldValue=a;else{this.hexInput.nativeElement.value=this.oldValue;return}this.rows=Math.ceil(this.hexInput.nativeElement.value.length/48)||1,this.calcLeftAddresses(this.rows),a.length!==l.length&&!r.inputType.includes("delete")?(this.hexInput.nativeElement.selectionStart=this.selectionStart+1,this.hexInput.nativeElement.selectionEnd=this.selectionEnd+1):(this.hexInput.nativeElement.selectionStart=this.selectionStart,this.hexInput.nativeElement.selectionEnd=this.selectionEnd)}calcLeftAddresses(t){this.leftAddressCache.has(t)&&(this.leftAddress=this.leftAddressCache.get(t));let r="";for(let o=0;o<t;o++){let s=(o*16).toString(16).toUpperCase();for(;s.length<8;)s="0"+s;r+=s+`
`}this.leftAddressCache.set(t,r),this.leftAddress=r}selectionChange(){this.selectionStart=this.hexInput.nativeElement.selectionStart,this.selectionEnd=this.hexInput.nativeElement.selectionEnd}cancel(){this.requestClose.emit(!1)}save(){let t=this.hexInput.nativeElement.value.replace(/ /g,"");if(t.length===0){this.requestClose.emit("");return}let r=t.match(/\w{2}/g).map(o=>String.fromCharCode(parseInt(o,16))).join("");this.requestClose.emit(btoa(r))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ie({type:e,selectors:[["app-rom-edit"]],viewQuery:function(r,o){if(r&1&&et(ZB,7),r&2){let s;Je(s=tt())&&(o.hexInput=s.first)}},features:[ke],decls:22,vars:8,consts:[[1,"hex-editor"],[1,"top-right"],[1,"top-address"],["valign","top",1,"left-address"],[1,"text-area-td"],["spellcheck","false","cols","45",3,"rows","input","keydown","click","focus"],["hexInput",""],[1,"buttons"],[1,"btn-raised","danger",3,"click"],[1,"btn-raised","primary",3,"click"]],template:function(r,o){r&1&&(v(0,"div")(1,"table",0)(2,"thead")(3,"tr"),q(4,"td",1),v(5,"td",2),O(6," 00 01 02 03 04 05 06 07 08 09 0A 0B 0C 0D 0E 0F "),y()()(),v(7,"tbody")(8,"tr")(9,"td",3),O(10),y(),v(11,"td",4)(12,"textarea",5,6),T("input",function(a){return o.onInput(a)})("keydown",function(){return o.selectionChange()})("click",function(){return o.selectionChange()})("focus",function(){return o.selectionChange()}),O(14,"					"),y()()()()(),v(15,"div",7)(16,"button",8),T("click",function(){return o.cancel()}),O(17),M(18,"translate"),y(),v(19,"button",9),T("click",function(){return o.save()}),O(20),M(21,"translate"),y()()()),r&2&&(g(10),K(o.leftAddress),g(2),w("rows",o.rows),g(5),U(" ",E(18,4,"POPUP.ROM_EDIT.CANCEL")," "),g(3),U(" ",E(21,6,"POPUP.ROM_EDIT.SAVE")," "))},dependencies:[Pe],styles:["div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]{border-collapse:collapse;table-layout:fixed;margin-bottom:1rem}div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{padding:.2rem;margin:0;font-family:Roboto Mono,monospace;font-size:18px;border-collapse:collapse}.theme-light[_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   *[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{color:#000}.theme-dark[_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   *[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{color:#ccc}div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:block;padding:0}div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   .top-right[_ngcontent-%COMP%]{width:95px}.theme-light[_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   .top-right[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   .top-right[_ngcontent-%COMP%]{border-bottom:1px solid #d1d1d1;border-right:1px solid #d1d1d1}.theme-dark[_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   .top-right[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   .top-right[_ngcontent-%COMP%]{border-bottom:1px solid #3a4042;border-right:1px solid #3a4042}.theme-light[_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   .top-address[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   .top-address[_ngcontent-%COMP%]{border-bottom:1px solid #d1d1d1;border-left:1px solid #d1d1d1}.theme-dark[_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   .top-address[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   .top-address[_ngcontent-%COMP%]{border-bottom:1px solid #3a4042;border-left:1px solid #3a4042}div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{max-height:500px;padding:0;display:block;overflow-y:scroll;overflow-x:hidden;scrollbar-width:thin;width:100%}.theme-light[_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]::-webkit-scrollbar-track, .theme-light   [_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#f5f5f5}.theme-dark[_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]::-webkit-scrollbar-track, .theme-dark   [_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#262a2b}div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]::-webkit-scrollbar{width:5px}div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:2.5px}.theme-light[_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, .theme-light   [_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#d1d1d1}.theme-dark[_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, .theme-dark   [_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#3a4042}.theme-light[_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{scrollbar-color:#d1d1d1 #f5f5f5}.theme-dark[_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{scrollbar-color:#3a4042 #262a2b}div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .left-address[_ngcontent-%COMP%]{width:95px;padding:.2rem .25rem .25rem}.theme-light[_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .left-address[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .left-address[_ngcontent-%COMP%]{border-right:1px solid #d1d1d1}.theme-dark[_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .left-address[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .left-address[_ngcontent-%COMP%]{border-right:1px solid #3a4042}div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .text-area-td[_ngcontent-%COMP%]{width:100%;padding-right:0}.theme-light[_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .text-area-td[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .text-area-td[_ngcontent-%COMP%]{border-left:1px solid #d1d1d1}.theme-dark[_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .text-area-td[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .text-area-td[_ngcontent-%COMP%]{border-left:1px solid #3a4042}div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .text-area-td[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;margin-right:.5rem;padding:0;resize:none;outline:none;border:none;overflow:hidden;background-color:transparent}div[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end}div[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:1rem}"],changeDetection:0});let i=e;return i})();var lI=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=He({type:e,inputs:{sprite:"sprite"}});let i=e;return i})();var $B=["hexInput"],cI=(()=>{let e=class e extends lI{constructor(){super(),this.leftAddress="00000000",this.leftAddressCache=new Map,this.selected=[],this.rows=1}ngOnInit(){if(this.hexInput.nativeElement.innerHTML="",!this.sprite.element.data)return;let t=atob(this.sprite.element.data),r="";for(let o=0;o<t.length;o++){let s=t.charCodeAt(o).toString(16).toUpperCase();r+=`${s.length===2?s:"0"+s} `}this.rows=Math.ceil(r.length/48)||1,this.calcLeftAddresses(this.rows),this.hexInput.nativeElement.innerHTML=r,this.selectAddress(this.sprite.getCurrentSimState()),this.sprite.onChange=o=>this.selectAddress(o)}ngOnDestroy(){this.sprite.onChange=void 0}selectAddress(t){let r=0;for(let a=0;a<this.sprite.element.numInputs;a++)r|=(t[a]?1:0)<<a;for(let a of this.selected.reverse())this.hexInput.nativeElement.innerHTML=this.hexInput.nativeElement.innerHTML.substring(0,a.index)+a.value+this.hexInput.nativeElement.innerHTML.substring(a.index+a.length);this.selected=[];let o=Math.floor(r*this.sprite.element.numOutputs/4),s=Math.floor(((r+1)*this.sprite.element.numOutputs-1)/4);s%2===0&&(this.addSelection(s+1,s+1),s--),o%2===1?(this.addSelection(o+1,s),this.addSelection(o-1,o-1)):this.addSelection(o,s),this.hexInput.nativeElement.firstElementChild?.scrollIntoView()}addSelection(t,r){if(t+=Math.floor(t/2),r+=Math.floor(r/2),t>=this.hexInput.nativeElement.innerHTML.length||r<t)return;r>=this.hexInput.nativeElement.innerHTML.length&&(r=this.hexInput.nativeElement.innerHTML.length-1);let o=this.hexInput.nativeElement.innerHTML.substring(t,r+1),s=`<span ${this.hexInput.nativeElement.attributes[0].name}="">${o}</span>`;this.hexInput.nativeElement.innerHTML=this.hexInput.nativeElement.innerHTML.substring(0,t)+s+this.hexInput.nativeElement.innerHTML.substring(r+1),this.selected.push({index:t,length:s.length,value:o})}calcLeftAddresses(t){this.leftAddressCache.has(t)&&(this.leftAddress=this.leftAddressCache.get(t));let r="";for(let o=0;o<t;o++){let s=(o*16).toString(16).toUpperCase();for(;s.length<8;)s="0"+s;r+=s+`
`}this.leftAddressCache.set(t,r),this.leftAddress=r}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ie({type:e,selectors:[["app-rom-view"]],viewQuery:function(r,o){if(r&1&&et($B,7),r&2){let s;Je(s=tt())&&(o.hexInput=s.first)}},features:[ke],decls:14,vars:1,consts:[[1,"hex-editor"],[1,"top-right"],[1,"top-address"],["valign","top",1,"left-address"],[1,"text-area-td"],["hexInput",""]],template:function(r,o){r&1&&(v(0,"div")(1,"table",0)(2,"thead")(3,"tr"),q(4,"td",1),v(5,"td",2),O(6," 00 01 02 03 04 05 06 07 08 09 0A 0B 0C 0D 0E 0F "),y()()(),v(7,"tbody")(8,"tr")(9,"td",3),O(10),y(),v(11,"td",4),q(12,"div",null,5),y()()()()()),r&2&&(g(10),K(o.leftAddress))},styles:["div[_ngcontent-%COMP%]{height:100%}div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]{border-collapse:collapse;table-layout:fixed;padding-bottom:.5rem;height:100%}div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{padding:.2rem;margin:0;font-family:Roboto Mono,monospace;font-size:18px;border-collapse:collapse}.theme-light[_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   *[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{color:#000}.theme-dark[_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   *[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{color:#ccc}div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:block;padding:0}div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   .top-right[_ngcontent-%COMP%]{width:95px}.theme-light[_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   .top-right[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   .top-right[_ngcontent-%COMP%]{border-bottom:1px solid #d1d1d1;border-right:1px solid #d1d1d1}.theme-dark[_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   .top-right[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   .top-right[_ngcontent-%COMP%]{border-bottom:1px solid #3a4042;border-right:1px solid #3a4042}.theme-light[_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   .top-address[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   .top-address[_ngcontent-%COMP%]{border-bottom:1px solid #d1d1d1;border-left:1px solid #d1d1d1}.theme-dark[_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   .top-address[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   .top-address[_ngcontent-%COMP%]{border-bottom:1px solid #3a4042;border-left:1px solid #3a4042}div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{height:calc(100% - 2em);padding:0;display:block;overflow-y:scroll;overflow-x:hidden;scrollbar-width:thin;width:100%}.theme-light[_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]::-webkit-scrollbar-track, .theme-light   [_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#f5f5f5}.theme-dark[_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]::-webkit-scrollbar-track, .theme-dark   [_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#262a2b}div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]::-webkit-scrollbar{width:5px}div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:2.5px}.theme-light[_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, .theme-light   [_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#d1d1d1}.theme-dark[_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, .theme-dark   [_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#3a4042}.theme-light[_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{scrollbar-color:#d1d1d1 #f5f5f5}.theme-dark[_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{scrollbar-color:#3a4042 #262a2b}div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .left-address[_ngcontent-%COMP%]{width:95px;padding:.2rem .25rem .25rem}.theme-light[_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .left-address[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .left-address[_ngcontent-%COMP%]{border-right:1px solid #d1d1d1}.theme-dark[_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .left-address[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .left-address[_ngcontent-%COMP%]{border-right:1px solid #3a4042}div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .text-area-td[_ngcontent-%COMP%]{width:100%;padding-right:0}.theme-light[_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .text-area-td[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .text-area-td[_ngcontent-%COMP%]{border-left:1px solid #d1d1d1}.theme-dark[_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .text-area-td[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .text-area-td[_ngcontent-%COMP%]{border-left:1px solid #3a4042}div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .text-area-td[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:100%;margin-right:.5rem;padding:0;resize:none;outline:none;border:none;overflow:hidden;background-color:transparent}div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .text-area-td[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0}.theme-light[_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .text-area-td[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .text-area-td[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background-color:#d1d1d1}.theme-dark[_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .text-area-td[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   div[_ngcontent-%COMP%]   .hex-editor[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .text-area-td[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background-color:#3a4042}div[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end}div[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:1rem}"],changeDetection:0});let i=e;return i})();var B0={id:12,name:"ELEMENT_TYPE.ADVANCED.ROM.NAME",category:"advanced",symbol:"ROM",showSettings:!0,showSettingsForType:!0,showInConstructionBox:!0,elementInspectionComp:cI,description:"ELEMENT_TYPE.ADVANCED.ROM.DESCRIPTION",isRotatable:!0,rotation:0,numOutputs:4,numInputs:4,minInputs:0,maxInputs:0,width:()=>3,height(i){return i?Math.max(i.numInputs,i.numOutputs):Math.max(this.numInputs,this.numOutputs)},options:[4,4],optionsConfig:[{name:"ELEMENT_TYPE.ADVANCED.ROM.WORD_SIZE",min:1,max:64},{name:"ELEMENT_TYPE.ADVANCED.ROM.ADDRESS_SIZE",min:1,max:16}],onOptionsChanged(i){if(i){i.numInputs=i.options[1],i.numOutputs=i.options[0];return}this.numInputs=this.options[1],this.numOutputs=this.options[0]},edit:(i,e,n)=>$(void 0,null,function*(){let t=n.currProject.currState.getElementById(e),r=yield ee(hn).showPopup(aI,"POPUP.ROM_EDIT.TITLE",!1,t);r===void 0||r===!1||r===t.data||n.currProject.setData(e,r)}),canEditType:!1,calcLabels(i){i||(i=this);let e=[];for(let n=0;n<i.options[1];n++)e.push("A"+n);for(let n=0;n<i.options[0];n++)e.push(n.toString());return e}};var V0={id:13,name:"ELEMENT_TYPE.ADVANCED.D_FF.NAME",category:"advanced",symbol:"D",showSettings:!0,showSettingsForType:!0,showInConstructionBox:!0,description:"ELEMENT_TYPE.ADVANCED.D_FF.DESCRIPTION",isRotatable:!0,rotation:0,numOutputs:2,numInputs:2,minInputs:2,maxInputs:2,width:()=>3,height:()=>2,calcLabels(){return["D","CLK","Q","!Q"]}};var U0={id:14,name:"ELEMENT_TYPE.ADVANCED.JK_FF.NAME",category:"advanced",symbol:"JK",showSettings:!0,showSettingsForType:!0,showInConstructionBox:!0,description:"ELEMENT_TYPE.ADVANCED.JK_FF.DESCRIPTION",isRotatable:!0,rotation:0,numOutputs:2,numInputs:3,minInputs:3,maxInputs:3,width:()=>3,height:()=>3,calcLabels:()=>["J","CLK","K","Q","!Q"]};var z0={id:15,name:"ELEMENT_TYPE.ADVANCED.SR_FF.NAME",category:"advanced",symbol:"SR",showSettings:!0,showSettingsForType:!0,showInConstructionBox:!0,description:"ELEMENT_TYPE.ADVANCED.SR_FF.DESCRIPTION",isRotatable:!0,rotation:0,numOutputs:2,numInputs:3,minInputs:3,maxInputs:3,width:()=>3,height:()=>3,calcLabels(){return["S","CLK","R","Q","!Q"]}};var H0={id:202,name:"ELEMENT_TYPE.IO.LED.NAME",category:"io",symbol:"LED",symbolImage:"assets/elements/led.svg",showSettings:!0,showSettingsForType:!0,showInConstructionBox:!0,description:"ELEMENT_TYPE.IO.LED.DESCRIPTION",isRotatable:!0,rotation:0,numOutputs:0,numInputs:1,minInputs:1,maxInputs:1,width:()=>1,height:()=>1};var W0={id:203,name:"ELEMENT_TYPE.IO.SEGMENT_DISPLAY.NAME",category:"io",symbol:"SEG",showSettings:!0,showSettingsForType:!0,showInConstructionBox:!0,description:"ELEMENT_TYPE.IO.SEGMENT_DISPLAY.DESCRIPTION",isRotatable:!0,rotation:0,numOutputs:0,numInputs:2,minInputs:1,maxInputs:16,options:[0],optionsConfig:[{name:"ELEMENT_TYPE.IO.SEGMENT_DISPLAY.BASE_LABEL",allowedValues:[{label:"ELEMENT_TYPE.IO.SEGMENT_DISPLAY.BASE.DEC",value:0},{label:"ELEMENT_TYPE.IO.SEGMENT_DISPLAY.BASE.HEX",value:1},{label:"ELEMENT_TYPE.IO.SEGMENT_DISPLAY.BASE.OCT",value:2}]}],width(i){let e=i?i.numInputs:this.numInputs,n=i?i.rotation:this.rotation,t=i?i.options:this.options;if(n%2===0)switch(t[0]){case 1:return 2+Math.ceil(e/4);case 2:return 2+Math.ceil(e/3);default:return 2+Math.ceil(Math.log10(2**e+1))}else return 4},height(i){let e=i?i.numInputs:this.numInputs;return e>=3?e:3},calcLabels(i){return new Array(i?i.numInputs:this.numInputs).fill(void 0).map((e,n)=>n.toString())}};var G0={id:204,name:"ELEMENT_TYPE.IO.LED_MATRIX.NAME",category:"io",symbol:"LED_M",symbolImage:"assets/elements/led-matrix.svg",showSettings:!0,showSettingsForType:!0,showInConstructionBox:!0,description:"ELEMENT_TYPE.IO.LED_MATRIX.DESCRIPTION",isRotatable:!0,rotation:0,ignoreOutputs:!0,numOutputs:16,numInputs:7,minInputs:0,maxInputs:0,width(i){return uI(i?.options?i.options[0]:this.options[0])},height(i){return uI(i?.options?i.options[0]:this.options[0])},options:[4],optionsConfig:[{name:"ELEMENT_TYPE.IO.LED_MATRIX.SIZE",allowedValues:[4,8,16]}],onOptionsChanged(i){let e=i?i.options[0]:this.options[0],n,t;switch(e){case 4:n=7,t=16;break;case 8:n=12,t=64;break;case 16:n=14,t=256;break}if(i){i.numInputs=n,i.numOutputs=t;return}this.numInputs=n,this.numOutputs=t},calcLabels(i){let e=i?i.numInputs:this.numInputs,n=i?i.options[0]:this.options[0],t=new Array(e),r;switch(n){case 4:r=2;break;case 8:r=3;break;case 16:r=5;break}for(let s=0;s<r;s++)t[s]="A"+s;let o=n<8?4:8;for(let s=0;s<o;s++)t[s+r]="D"+s;return t[e-1]="CLK",t}};function uI(i){switch(i){case 4:return 7;case 8:return 12;case 16:return 16;default:throw new Error("Invalid size")}}var X0={id:8,name:"ELEMENT_TYPE.BASIC.TUNNEL.NAME",category:"basic",symbol:"~",showSettings:!0,showSettingsForType:!1,showInConstructionBox:!0,description:"ELEMENT_TYPE.BASIC.TUNNEL.DESCRIPTION",isRotatable:!0,rotation:0,numOutputs:0,numInputs:1,minInputs:1,maxInputs:1,width:()=>2,height:()=>1,options:[0],optionsConfig:[{name:"ELEMENT_TYPE.BASIC.TUNNEL.ID",min:0,max:Number.MAX_VALUE}],calcLabels(i){return[(i?i.options[0]:this.options[0])+""]}};var q0={id:16,name:"ELEMENT_TYPE.ADVANCED.RANDOM.NAME",category:"advanced",symbol:"RNG",showSettings:!0,showSettingsForType:!0,showInConstructionBox:!0,description:"ELEMENT_TYPE.ADVANCED.RANDOM.DESCRIPTION",isRotatable:!0,rotation:0,numOutputs:1,numInputs:1,minInputs:1,maxInputs:1,options:[1],optionsConfig:[{name:"SETTINGS_INFO.OUTPUTS",min:1,max:64}],onOptionsChanged(i){i||(i=this),i.numOutputs=i.options[0]},width:()=>3,height(i){i||(i=this);let e=Math.max(i.numInputs,i.numOutputs);return e<2?2:e},calcLabels(i){i||(i=this);let e=["CLK"];for(let n=0;n<i.numOutputs;n++)e.push(n+"");return e}};var Y0={id:17,name:"ELEMENT_TYPE.ADVANCED.RAM.NAME",category:"advanced",symbol:"RAM",showSettings:!0,showSettingsForType:!0,showInConstructionBox:!0,description:"ELEMENT_TYPE.ADVANCED.RAM.DESCRIPTION",isRotatable:!0,rotation:0,numOutputs:4,numInputs:10,minInputs:0,maxInputs:0,width:()=>3,height(i){return i?Math.max(i.numInputs,i.numOutputs):Math.max(this.numInputs,this.numOutputs)},options:[4,4],optionsConfig:[{name:"ELEMENT_TYPE.ADVANCED.RAM.WORD_SIZE",min:1,max:64},{name:"ELEMENT_TYPE.ADVANCED.RAM.ADDRESS_SIZE",min:1,max:16}],onOptionsChanged(i){i||(i=this),i.numInputs=i.options[0]+i.options[1]+2,i.numOutputs=i.options[0]},calcLabels(i){i||(i=this);let e=[];for(let n=0;n<i.options[1];n++)e.push("A"+n);for(let n=0;n<i.options[0];n++)e.push("D"+n);e.push("WE","CLK");for(let n=0;n<i.options[0];n++)e.push("D"+n);return e}};var Z0={id:18,name:"ELEMENT_TYPE.ADVANCED.DECODER.NAME",category:"advanced",symbol:"DEC",showSettings:!0,showSettingsForType:!0,showInConstructionBox:!0,description:"ELEMENT_TYPE.ADVANCED.DECODER.DESCRIPTION",isRotatable:!0,rotation:0,numOutputs:4,numInputs:2,minInputs:0,maxInputs:0,options:[2],optionsConfig:[{name:"SETTINGS_INFO.INPUTS",min:1,max:6}],onOptionsChanged(i){i||(i=this),i.numInputs=i.options[0],i.numOutputs=Math.pow(2,i.options[0])},width:()=>3,height(i){i||(i=this);let e=Math.max(i.numInputs,i.numOutputs);return e<2?2:e},calcLabels(i){i||(i=this);let e=[];for(let n=0;n<i.numInputs;n++)e.push(Math.pow(2,n)+"");for(let n=0;n<i.numOutputs;n++)e.push(n+"");return e}};var $0={id:19,name:"ELEMENT_TYPE.ADVANCED.ENCODER.NAME",category:"advanced",symbol:"ENC",showSettings:!0,showSettingsForType:!0,showInConstructionBox:!0,description:"ELEMENT_TYPE.ADVANCED.ENCODER.DESCRIPTION",isRotatable:!0,rotation:0,numOutputs:1,numInputs:2,minInputs:0,maxInputs:0,options:[1],optionsConfig:[{name:"SETTINGS_INFO.OUTPUTS",min:1,max:6}],onOptionsChanged(i){i||(i=this),i.numOutputs=i.options[0],i.numInputs=Math.pow(2,i.options[0])},width:()=>3,height(i){i||(i=this);let e=Math.max(i.numInputs,i.numOutputs);return e<2?2:e},calcLabels(i){i||(i=this);let e=[];for(let n=0;n<i.numInputs;n++)e.push(n+"");for(let n=0;n<i.numOutputs;n++)e.push(Math.pow(2,n)+"");return e}};var K0={id:20,name:"ELEMENT_TYPE.ADVANCED.MUX.NAME",category:"advanced",symbol:"MUX",showSettings:!0,showSettingsForType:!0,showInConstructionBox:!0,description:"ELEMENT_TYPE.ADVANCED.MUX.DESCRIPTION",isRotatable:!0,rotation:0,numOutputs:1,numInputs:3,minInputs:0,maxInputs:0,options:[1],optionsConfig:[{name:"SETTINGS_INFO.INPUTS",min:1,max:6}],onOptionsChanged(i){i||(i=this),i.numInputs=i.options[0]+Math.pow(2,i.options[0])},width:()=>3,height(i){return i||(i=this),i.numInputs},calcLabels(i){i||(i=this);let e=[];for(let n=0;n<i.options[0];n++)e.push("S"+n);for(let n=0;n<i.numInputs-i.options[0];n++)e.push(n+"");return e}};var Q0={id:21,name:"ELEMENT_TYPE.ADVANCED.DEMUX.NAME",category:"advanced",symbol:"DEMUX",showSettings:!0,showSettingsForType:!0,showInConstructionBox:!0,description:"ELEMENT_TYPE.ADVANCED.DEMUX.DESCRIPTION",isRotatable:!0,rotation:0,numOutputs:2,numInputs:2,minInputs:0,maxInputs:0,options:[1],optionsConfig:[{name:"SETTINGS_INFO.INPUTS",min:1,max:6}],onOptionsChanged(i){i||(i=this),i.numInputs=i.options[0]+1,i.numOutputs=Math.pow(2,i.options[0])},width:()=>3,height(i){i||(i=this);let e=Math.max(i.numInputs,i.numOutputs);return e<2?2:e},calcLabels(i){i||(i=this);let e=[];e.push("I");for(let n=0;n<i.options[0];n++)e.push("S"+n);for(let n=0;n<i.numOutputs;n++)e.push(n+"");return e}};var be=(()=>{let e=class e{constructor(t){this.errorHandler=t,this._elements=new Map([[o0.id,o0],[s0.id,s0],[a0.id,a0],[l0.id,l0],[c0.id,c0],[m0.id,m0],[g0.id,g0],[j0.id,j0],[X0.id,X0],[_0.id,_0],[v0.id,v0],[B0.id,B0],[V0.id,V0],[U0.id,U0],[z0.id,z0],[q0.id,q0],[Y0.id,Y0],[Z0.id,Z0],[$0.id,$0],[K0.id,K0],[Q0.id,Q0],[u0.id,u0],[d0.id,d0],[f0.id,f0],[h0.id,h0],[p0.id,p0],[H0.id,H0],[W0.id,W0],[G0.id,G0]])}static isCompileElement(t){return!(t===0||t===102||t===7||t===8)}addElements(t,r){for(let o of t)this._elements.set(o.id,Xe(Q(Q({},sI),o),{category:r}))}removeElement(t){this._elements.delete(t)}getElementById(t){return this._elements.has(t)?this._elements.get(t):(this.errorHandler.showErrorMessage("ERROR.PROJECTS.COMP_NOT_FOUND"),null)}hasElement(t){return this._elements.has(t)}isIoElement(t){return this._elements.has(t)&&this._elements.get(t).category==="io"}isPlugElement(t){return this._elements.has(t)&&this._elements.get(t).category==="plug"}isUserElement(t){return this._elements.has(t)&&this._elements.get(t).category==="user"}isShareElement(t){return this._elements.has(t)&&this._elements.get(t).category==="share"}isLocalElement(t){return this._elements.has(t)&&this._elements.get(t).category==="local"}isCustomElement(t){if(!this._elements.has(t))return!1;let r=this._elements.get(t).category;return r==="user"||r==="share"||r==="local"}canInspectWithPopup(t){return this._elements.has(t)&&!!this._elements.get(t).elementInspectionComp}getElements(t){return[...this._elements.values()].filter(r=>r.category===t)}get basicElements(){return this.getElements("basic")}get advancedElements(){return this.getElements("advanced")}get plugElements(){return this.getElements("plug")}get ioElements(){return this.getElements("io")}get userDefinedElements(){return this.getElements("user")}get shareElements(){return this.getElements("share")}get localElements(){return this.getElements("local")}};e.\u0275fac=function(r){return new(r||e)(D(Sn))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var Z=class i{static correctPosOrder(e,n){if(e.x>n.x){let t=e.x;e.x=n.x,n.x=t}if(e.y>n.y){let t=e.y;e.y=n.y,n.y=t}}static clone(e){let n=Q({},e);return n.pos=e.pos.clone(),e.endPos&&(n.endPos=e.endPos.clone()),delete n.wireEnds,delete n.plugIndex,n.options=n.options?[...n.options]:void 0,n}static cloneSetOptions(e,n){let t=i.clone(e);t.options=n;let r=ee(be).getElementById(e.typeId);return r.onOptionsChanged&&(r.onOptionsChanged(t),t.endPos=i.calcEndPos(t)),t}static equals(e,n){for(let t in e)if(!(t==="id"||t==="plugIndex"))if(e[t]&&e[t].x!==void 0&&e[t].y!==void 0){if(!(e[t].x===n[t].x&&e[t].y===n[t].y))return!1}else{let r=e[t]===void 0||e[t]===null?void 0:e[t],o=n[t]===void 0||n[t]===null?void 0:n[t];if(r!==o)return!1}return!0}static move(e,n){e.pos.x+=n.x,e.pos.y+=n.y,e.endPos.x+=n.x,e.endPos.y+=n.y,delete e.wireEnds}static genNewElement(e,n,t){let r=this.elementProviderService.getElementById(e),o=n?n.clone():void 0,s=t?t.clone():void 0;return o&&s&&i.correctPosOrder(o,s),{id:-1,typeId:e,numInputs:r.numInputs,numOutputs:r.numOutputs,pos:o,endPos:s,rotation:r.rotation,options:r.options?[...r.options]:void 0,plugIndex:void 0}}static gen2Wires(e,n,t){let r=i.genNewElement(0,e,n),o=i.genNewElement(0,n,t);return i.correctPosOrder(r.pos,r.endPos),i.correctPosOrder(o.pos,o.endPos),{wire0:r,wire1:o}}static calcEndPos(e,n,t,r){let o=this.calcElemSize(e,n,t,r);return delete e.wireEnds,new R(e.pos.x+o.x,e.pos.y+o.y)}static calcElemSize(e,n,t,r){if(e.typeId===7){let a=this.elementProviderService.getElementById(e.typeId);return new R(a.width(e),a.height(e))}let o=i.elementType(e.typeId);r=r===void 0||r==null?e.rotation:r;let s=Xe(Q({},e),{rotation:r});return n!=null&&(s.numInputs=n),t!=null&&(s.numOutputs=t),r%2===0?new R(o.width(s),o.height(s)):new R(o.height(s),o.width(s))}static calcPixelElementSize(e){let n=i.calcElemSize(e);return new R(n.x*C.gridPixelWidth,n.y*C.gridPixelWidth)}static otherWirePos(e,n){return e.pos.equals(n)?e.endPos:e.pos}static addActionName(e){return e.typeId===0?"addWire":"addComp"}static remActionName(e){return e.typeId===0?"remWire":"remComp"}static mergeCheckedWiresVertical(e,n,t){let r=Math.min(e.pos.y,e.endPos.y,n.pos.y,n.endPos.y),o=Math.max(e.pos.y,e.endPos.y,n.pos.y,n.endPos.y);t.pos=new R(e.pos.x,r),t.endPos=new R(e.pos.x,o)}static mergeCheckedWiresHorizontal(e,n,t){let r=Math.min(e.pos.x,e.endPos.x,n.pos.x,n.endPos.x),o=Math.max(e.pos.x,e.endPos.x,n.pos.x,n.endPos.x);t.pos=new R(r,e.pos.y),t.endPos=new R(o,e.pos.y)}static wireEnds(e){if(e.typeId===0)return[e.pos.clone(),e.endPos.clone()];if(e.wireEnds)return e.wireEnds.map(t=>t.clone());let n=this.wireEndsWithChanges(e,e.rotation,e.numInputs,new R);return e.wireEnds=n.map(t=>t.clone()),n}static wireEndsWithChanges(e,n,t,r){let o=new R(e.pos.x+r.x,e.pos.y+r.y),s=new R(e.endPos.x+r.x,e.endPos.y+r.y);if(e.typeId===0)return[o,s];let a=i.elementType(e.typeId).ignoreOutputs,l=new Array(t+(a?0:e.numOutputs));switch(n){case 0:for(let c=0;c<t;c++)l[c]=new R(o.x-1,o.y+c);if(a)break;for(let c=0;c<e.numOutputs;c++)l[t+c]=new R(s.x,o.y+c);break;case 1:for(let c=0;c<t;c++)l[c]=new R(s.x-1-c,o.y-1);if(a)break;for(let c=0;c<e.numOutputs;c++)l[t+c]=new R(s.x-1-c,s.y);break;case 2:for(let c=0;c<t;c++)l[c]=new R(s.x,s.y-1-c);if(a)break;for(let c=0;c<e.numOutputs;c++)l[t+c]=new R(o.x-1,s.y-1-c);break;case 3:for(let c=0;c<t;c++)l[c]=new R(o.x+c,s.y);if(a)break;for(let c=0;c<e.numOutputs;c++)l[t+c]=new R(o.x+c,o.y-1);break}return l}static wireEndsIfInOtherChunk(e,n,t,r){return(e.pos.x+r.x)%16>0&&(e.pos.y+r.y)%16>0&&(e.endPos.x+r.x)%16<15&&(e.endPos.y+r.y)%16<15?[]:i.wireEndsWithChanges(e,n,t,r)}static allWireEnds(e,n){let t=n||new Map;for(let r of e)for(let o of i.wireEnds(r))t.has(o.x)?t.get(o.x).add(o.y):t.set(o.x,new Set([o.y]));return t}static isInput(e,n){switch(e.rotation){case 0:return n.x<e.pos.x;case 1:return n.y<e.pos.y;case 2:return n.x>=e.endPos.x;case 3:return n.y>=e.endPos.y;default:return!1}}static wireEndIndex(e,n){let t=this.wireEnds(e);for(let r=0;r<t.length;r++)if(t[r].equals(n))return r;return-1}static isHorizontal(e){return e.pos.y===e.endPos.y}static isVertical(e){return e.pos.x===e.endPos.x}static isHorizontalElem(e){return e.typeId===0?i.isHorizontal(e):e.rotation%2===0}static isSameDirection(e,n){return i.isHorizontalElem(e)===i.isHorizontalElem(n)}static elementType(e){return this.elementProviderService.getElementById(e)}static get elementProviderService(){return this._elementProviderService||(this._elementProviderService=ee(be)),this._elementProviderService}};var Ce=class i{static doWiresOverlap(e,n){return i.isPointOnWire(e,n.pos)||i.isPointOnWire(e,n.endPos)||i.isPointOnWire(n,e.pos)||i.isPointOnWire(n,e.endPos)}static isPointOnWire(e,n){return n.y===e.pos.y&&n.y===e.endPos.y&&(n.x>=e.pos.x&&n.x<=e.endPos.x||n.x<=e.pos.x&&n.x>=e.endPos.x)||n.x===e.pos.x&&n.x===e.endPos.x&&(n.y>=e.pos.y&&n.y<=e.endPos.y||n.y<=e.pos.y&&n.y>=e.endPos.y)}static isPointOnWireNoEdge(e,n){return n.y===e.pos.y&&n.y===e.endPos.y&&(n.x>e.pos.x&&n.x<e.endPos.x||n.x<e.pos.x&&n.x>e.endPos.x)||n.x===e.pos.x&&n.x===e.endPos.x&&(n.y>e.pos.y&&n.y<e.endPos.y||n.y<e.pos.y&&n.y>e.endPos.y)}static elemHasWirePoint(e,n){for(let t of Z.wireEnds(e))if(n.equals(t))return!0;return!1}static wirePointIndex(e,n){let t=0;for(let r of Z.wireEnds(e)){if(n.equals(r))return t;t++}return-1}static inRectChunks(e,n,t){let r=e.clone(),o=n.clone();Z.correctPosOrder(r,o);let s=[],a=i.gridPosToChunk(r),l=i.gridPosToChunk(o);for(let c=a.x;c<=l.x;c++)for(let u=a.y;u<=l.y;u++)s.push({x:c,y:u});return t&&t.forEach(c=>{let u=i.gridPosToChunk(c);s.find(d=>d.x===u.x&&d.y===u.y)||s.push({x:u.x,y:u.y})}),s}static isRectOnRect(e,n,t,r){return e.x<=r.x&&e.y<=r.y&&n.x>=t.x&&n.y>=t.y}static isRectFullyInRect(e,n,t,r){return e.x>=t.x&&e.y>=t.y&&n.x<=r.x&&n.y<=r.y}static isRectInRectLightBorder(e,n,t,r){return e.x<=r.x&&e.y<=r.y&&n.x>t.x&&n.y>t.y}static isConPointInRect(e,n,t){return e.x+.5<t.x&&e.y+.5<t.y&&e.x+.5>n.x&&e.y+.5>n.y}static isElementInFloatRect(e,n,t){return e.typeId===0?e.pos.x+.5<=t.x&&e.pos.y+.5<=t.y&&e.endPos.x+.5>n.x&&e.endPos.y+.5>n.y:e.typeId===7?e.pos.x+.5<=t.x&&e.pos.y+.5<=t.y&&e.pos.x+.5>n.x&&e.pos.y+.5>n.y:i.isRectInRectLightBorder(e.pos,e.endPos,n,t)}static rectCuttingPoints(e,n,t){return Z.isHorizontal(e)?e.pos.y>n.y-.5&&e.pos.y<t.y-.5?[new R(Math.floor(n.x-.5),e.pos.y),new R(Math.ceil(t.x-.5),e.pos.y)]:void 0:e.pos.x>n.x-.5&&e.pos.x<t.x-.5?[new R(e.pos.x,Math.floor(n.y-.5)),new R(e.pos.x,Math.ceil(t.y-.5))]:void 0}static hasWiresMidOnPoint(e,n){for(let t of e)if(t.typeId===0&&i.isPointOnWireNoEdge(t,n))return!0;return!1}static numWireEndInRect(e,n,t){return(i.isWireEndInRect(e.pos,n,t)?0:1)+(i.isWireEndInRect(e.endPos,n,t)?0:1)}static isRectInRectNoBorder(e,n,t,r){return e.x<r.x&&e.y<r.y&&n.x>t.x&&n.y>t.y}static isPointInRect(e,n,t){return e.x>=n.x&&e.x<t.x&&e.y>=n.y&&e.y<t.y}static isWireEndInRect(e,n,t){return e.x+.5>=n.x&&e.x+.5<t.x&&e.y+.5>=n.y&&e.y+.5<t.y}static gridPosToChunk(e){return new R(Math.floor(e.x/C.chunkSize),Math.floor(e.y/C.chunkSize))}static chunkToPoints(e){return{start:new R(e.x*C.chunkSize,e.y*C.chunkSize),end:new R((e.x+1)*C.chunkSize,(e.y+1)*C.chunkSize)}}static distance(e,n){return Math.sqrt((e.x-n.x)**2+(e.y-n.y)**2)}static lineOverElem(e,n,t){return e.typeId===0?i.lineCollide(e.pos.x+.5,e.pos.y+.5,e.endPos.x+.5,e.endPos.y+.5,n.x,n.y,t.x,t.y):i.lineOverRect(e.pos,e.endPos,n,t)}static lineOverRect(e,n,t,r){return i.lineCollide(e.x,e.y,n.x,e.y,t.x,t.y,r.x,r.y)||i.lineCollide(n.x,e.y,n.x,n.y,t.x,t.y,r.x,r.y)||i.lineCollide(n.x,n.y,e.x,n.y,t.x,t.y,r.x,r.y)||i.lineCollide(e.x,n.y,e.x,e.y,t.x,t.y,r.x,r.y)}static lineCollidePoint(e,n,t,r){let o=((r.x-t.x)*(e.y-t.y)-(r.y-t.y)*(e.x-t.x))/((r.y-t.y)*(n.x-e.x)-(r.x-t.x)*(n.y-e.y)),s=((n.x-e.x)*(e.y-t.y)-(n.y-e.y)*(e.x-t.x))/((r.y-t.y)*(n.x-e.x)-(r.x-t.x)*(n.y-e.y));return o>=0&&o<=1&&s>=0&&s<=1}static lineCollide(e,n,t,r,o,s,a,l){let c=((a-o)*(n-s)-(l-s)*(e-o))/((l-s)*(t-e)-(a-o)*(r-n)),u=((t-e)*(n-s)-(r-n)*(e-o))/((l-s)*(t-e)-(a-o)*(r-n));return c>=0&&c<=1&&u>=0&&u<=1}};var Vs=class Vs{static reverseActions(e){if(!e)return e;let n=[];for(let t=e.length-1;t>-1;t--)n.push(...Vs.reverseAction(e[t]));return n}static reverseAction(e){let n=[Q({},e)];n[0].name=Vs.REVERSE_ACTION.get(e.name)[0];for(let t of n)t.pos=e.pos?e.pos.clone():void 0,t.endPos=e.endPos?e.endPos.clone():void 0,t.name==="movMult"?(t.pos.x*=-1,t.pos.y*=-1):t.name==="rotComp"||t.name==="numInpt"||t.name==="plugInd"?t.numbers=[...e.numbers].reverse():t.name==="compOpt"?t.options=[...e.options].reverse():t.name==="ediData"&&(t.data=[...e.data].reverse());return n}static connectWiresToActions(e,n){let t=new Array(e.length+n.length),r=0;for(let o of e)t[r++]={name:"remWire",element:o};for(let o of n)t[r++]={name:"addWire",element:o};return t}static applyActionsToArray(e,n){for(let t of e)t.name[0]==="a"&&n.push(t.element),t.name[0]==="r"&&(n=n.filter(r=>r.id!==t.element.id));return n}static applyChangeToArray(e,n){return n=n.filter(t=>!e.oldElems.find(r=>r.id===t.id)),n}static pushChange(e,n){return n.newElems.forEach(t=>e.newElems.push(t)),n.oldElems.forEach(t=>e.oldElems.push(t)),e}static applyChangeOnArrayAndActions(e,n,t){return e.forEach(r=>{r.oldElems.forEach(o=>{n.push({name:Z.remActionName(o),element:o}),t.delete(o)}),r.newElems.forEach(o=>{n.push({name:Z.addActionName(o),element:o}),t.add(o)})}),t}static applyChangeOnArrayAndActionsOnly(e,n){for(let t of e)t&&(t.oldElems.forEach(r=>{n.push({name:Z.remActionName(r),element:r})}),t.newElems.forEach(r=>{n.push({name:Z.addActionName(r),element:r})}))}static pushIfNotNull(e,n){n&&e.push(n)}static isRemAction(e){return e.name.startsWith("rem")}static isAddAction(e){return e.name.startsWith("add")}static reduceActions(e){let n=[],t=new Map,r=new Map,o=new Map,s=new Map;for(let a of e)Vs.isRemAction(a)?r.has(a.element)?r.delete(a.element):t.set(a.element,a):Vs.isAddAction(a)?t.has(a.element)?t.delete(a.element):r.set(a.element,a):a.name==="dcoWire"?s.has(a.pos)?s.delete(a.pos):o.set(a.pos,a):a.name==="conWire"?o.has(a.pos)?o.delete(a.pos):s.set(a.pos,a):n.push(a);return t.forEach(a=>n.push(a)),r.forEach(a=>n.push(a)),o.forEach(a=>n.push(a)),s.forEach(a=>n.push(a)),n}static printActions(e){e&&e.forEach(n=>{n.element?console.log(n.name,n.element.id,n.element.pos,n.element.endPos,n.numbers):console.log(n.name,n.pos,n.endPos)})}};Vs.REVERSE_ACTION=new Map([["addComp",["remComp"]],["addWire",["remWire"]],["remComp",["addComp"]],["remWire",["addWire"]],["movMult",["movMult"]],["conWire",["dcoWire"]],["dcoWire",["conWire"]],["rotComp",["rotComp"]],["numInpt",["numInpt"]],["plugInd",["plugInd"]],["compOpt",["compOpt"]],["ediData",["ediData"]]]);var Zn=Vs;var pi=class{constructor(e){this._highestTakenId=0,this.specialActions=[],this.plugIndexActions=[],this.numInputs=0,this.numOutputs=0,e?(this._model=new Map(e.map((n,t)=>(n.id=t,[t,n]))),this._highestTakenId=e.length-1):(this._model=new Map,this._highestTakenId=0),this._chunks=[],this._outputPlugs=[],this._inputPlugs=[],this.calcAllEndPos(),this.loadAllIntoChunks(),this.inputOutputCount(),this.initTunnels()}findHighestTakenId(){let e=0;for(let n of this._model.values())n.id>e&&(e=n.id);return e}getNextId(){return++this._highestTakenId}calcAllEndPos(){for(let e of this.allElements)e.typeId!==0&&(e.endPos=Z.calcEndPos(e))}loadAllIntoChunks(){for(let e of this._model.values())this.loadIntoChunks(e);this.loadConnectionPoints(this.allElements),this.specialActions=[]}createChunk(e,n){if(!(this._chunks[e]&&this._chunks[e][n]||e<0||n<0)){for(let t=0;t<=e;t++)this._chunks[t]||(this._chunks[t]=[]);for(let t=0;t<=n;t++)!this._chunks[e][n]&&this._chunks[e][n]!==void 0&&this._chunks[e].push(void 0);this._chunks[e][n]||(this._chunks[e][n]={elements:new Set,connectionPoints:[],links:new Map})}}loadIntoChunks(e){let n=Ce.inRectChunks(e.pos,e.endPos,Z.wireEnds(e)),t={x:n[0].x,y:n[0].y};for(let r of n)this.createChunk(r.x,r.y),this._chunks[r.x][r.y].elements.add(e),r.x===t.x&&r.y===t.y||this._chunks[r.x][r.y].links.set(e.id,t)}removeFromChunks(e){let n=Ce.inRectChunks(e.pos,e.endPos,Z.wireEnds(e));for(let t of this.chunksFromCoords(n))t.elements.delete(e),t.links.delete(e.id)}addConPointIfNotExists(e){let n=Ce.inRectChunks(e,e);for(let t of n)if(this.createChunk(t.x,t.y),!this.chunkHasCon(this._chunks[t.x][t.y],e))return this._chunks[t.x][t.y].connectionPoints.push(e.clone()),{name:"conWire",pos:e.clone()};return null}remConPointIfExists(e){let n=this.chunk(Ce.gridPosToChunk(e));if(!n)return null;let t=-1;for(let r=0;r<n.connectionPoints.length;r++)if(n.connectionPoints[r].equals(e)){t=r;break}return t<0?null:(n.connectionPoints.splice(t,1),{name:"dcoWire",pos:e.clone()})}removeAllConnectionPoints(e){let n=[];for(let[t,r]of e)for(let o of r){let s=this.remConPointIfExists(new R(t,o));s&&n.push(s)}return n}loadConnectionPoints(e,n){n||this.specialActions.push(...this.removeAllConnectionPoints(Z.allWireEnds(e)));let t=new Map;e.forEach(r=>{for(let o of Z.wireEnds(r))if(!(t.has(o.x)&&t.get(o.x).has(o.y))){if(this.elemsOnPoint(o).length>2){let s=this.addConPointIfNotExists(o);s&&this.specialActions.push(s)}t.has(o.x)||t.set(o.x,new Set),t.get(o.x).add(o.y)}})}elementsInChunks(e,n,t){let r=this.chunksFromCoords(Ce.inRectChunks(e,n,t));if(r.length===1)return r[0].elements;let o=new Set;for(let s of r)for(let a of s.elements)o.add(a);return o}chunkHasCon(e,n){return!!e.connectionPoints.find(t=>t.equals(n))}isFreeSpace(e,n,t,r,o){let s=this.elementsInChunks(e,n);for(let a of s)if(!(a.typeId===7||o&&o.has(a)||t&&a.typeId===0)){if(t&&Ce.isRectInRectLightBorder(a.pos,a.endPos,e,n)||!t&&a.typeId===0&&Ce.isRectInRectLightBorder(e,n,a.pos,a.endPos)||!t&&Ce.isRectInRectNoBorder(e,n,a.pos,a.endPos))return!1;if(r){for(let l of r)if(Ce.isPointInRect(l,a.pos,a.endPos))return!1}if(!t&&a.typeId!==0){for(let l of Z.wireEnds(a))if(Ce.isPointInRect(l,e,n))return!1}}for(let a of r)if(a.x<0||a.y<0)return!1;return!(e.x<0||e.y<0)}allSpacesFree(e,n,t){for(let r of e){let o=new R(r.pos.x+n.x,r.pos.y+n.y),s=new R(r.endPos.x+n.x,r.endPos.y+n.y);if(!this.isFreeSpace(o,s,r.typeId===0,Z.wireEndsIfInOtherChunk(r,r.rotation,r.numInputs,n),t))return!1}return!0}addElement(e,n){if(e.id=n||this.getNextId(),this._model.set(e.id,e),e.typeId===100){if(e.plugIndex===void 0){for(let t of this._outputPlugs)t.plugIndex++;e.plugIndex=this.numInputs}this._inputPlugs.push(e),this.numInputs++}else e.typeId===101?(e.plugIndex=e.plugIndex===void 0?this.numInputs+this.numOutputs++:e.plugIndex,this._outputPlugs.push(e)):e.typeId===8&&this._tunnels.push(e);return this.loadIntoChunks(e),e}removeElement(e){let n=this._model.get(e);if(!n)return null;if(this._model.delete(e),n.typeId===100){this.numInputs--,this._inputPlugs=this._inputPlugs.filter(t=>t.id!==e);for(let t of this._inputPlugs)t.plugIndex>n.plugIndex&&(this.plugIndexActions.push({name:"plugInd",element:t,numbers:[t.plugIndex-1,t.plugIndex]}),t.plugIndex--);for(let t of this._outputPlugs)this.plugIndexActions.push({name:"plugInd",element:t,numbers:[t.plugIndex-1,t.plugIndex]}),t.plugIndex--}else if(n.typeId===101){this.numOutputs--,this._outputPlugs=this._outputPlugs.filter(t=>t.id!==e);for(let t of this._outputPlugs)t.plugIndex>n.plugIndex&&(this.plugIndexActions.push({name:"plugInd",element:t,numbers:[t.plugIndex-1,t.plugIndex]}),t.plugIndex--)}else n.typeId===8&&(this._tunnels=this._tunnels.filter(t=>t.id!==e));return this.removeFromChunks(n),n}moveElement(e,n){return this.removeFromChunks(e),Z.move(e,n),this.loadIntoChunks(e),!0}rotateComp(e,n,t){this.removeFromChunks(e),e.rotation=n,e.endPos=t||Z.calcEndPos(e,void 0,void 0,n),delete e.wireEnds,this.loadIntoChunks(e)}setNumInputs(e,n,t){this.removeFromChunks(e),e.numInputs=n,e.endPos=t||Z.calcEndPos(e,n),delete e.wireEnds,this.loadIntoChunks(e)}updateNumInputsOutputs(e){e.numInputs=Z.elementType(e.typeId).numInputs,e.numOutputs=Z.elementType(e.typeId).numOutputs,e.endPos=Z.calcEndPos(e)}connectWires(e,n,t){return(e.typeId===0?this.splitWire(e,t):[]).concat(n.typeId===0?this.splitWire(n,t):[])}disconnectWires(e){let n=[],t=[];for(let r of e)for(let o of e){if(r===o||t.find(a=>a.id===r.id||a.id===o.id))continue;let s=this.mergeWires(r,o);!s||!s.newElems[0]||(n.push(s.newElems[0]),t.push(r,o))}if(t.length!==e.length)for(let r of e)t.includes(r)||n.push(r);return n}splitWire(e,n){if(!Ce.isPointOnWireNoEdge(e,n))return[];let t=Z.genNewElement(0,e.pos,n),r=Z.genNewElement(0,n,e.endPos);return this.removeElement(e.id),this.addElement(t,e.id),this.addElement(r),[t,r]}actionToBoard(e){let n=[];for(let[t,r]of e)e:for(let o of r){let s=new R(t,o),{wireEnds:a,mid:l}=this.elemsAndWiresMidOnPoint(s),c=a.length,u=!1;do{u=!1;for(let d=0;d<a.length;d++)for(let h=0;h<l.length;h++){let p=this.connectWithEdge(a[d],l[h],s);if(p){u=!0,n.push(...Zn.connectWiresToActions(p.oldElems,p.newElems));let f=this.elemsAndWiresMidOnPoint(s);a=f.wireEnds,l=f.mid,Zn.pushIfNotNull(n,this.addConPointIfNotExists(s)),c+=2}}}while(u);if(!u){t:for(let d=!0;d;){d=!1;let h=a.concat(l);for(let p=0;p<h.length;p++)for(let f=p+1;f<h.length;f++){if(this.isConnectedPoint(h,p,f,a.length))continue;let m=this.mergeWires(h[p],h[f]);if(m){if(c--,n.push(...Zn.connectWiresToActions(m.oldElems,m.newElems)),h[p].pos.equals(h[f].endPos)||h[p].endPos.equals(h[f].pos)){Zn.pushIfNotNull(n,this.remConPointIfExists(s));continue e}if(h.length>2){let _=this.elemsAndWiresMidOnPoint(s);a=_.wireEnds,l=_.mid,d=!0;continue t}}}}Zn.pushIfNotNull(n,c<3?this.remConPointIfExists(s):this.addConPointIfNotExists(s))}}return n}isConnectedPoint(e,n,t,r){return!!(n<r&&t<r&&e[n].typeId===0&&e[t].typeId===0&&(e[n].pos.equals(e[t].endPos)&&r>2||e[t].pos.equals(e[n].endPos)&&r>2))}mergeWires(e,n){if(e.typeId!==0||n.typeId!==0||e.id===n.id||!Ce.doWiresOverlap(e,n))return null;let t=Z.genNewElement(0,void 0,void 0);if(t.id=e.id,Z.isVertical(e)&&Z.isVertical(n)&&e.pos.x===n.pos.x)Z.mergeCheckedWiresVertical(e,n,t);else if(Z.isHorizontal(e)&&Z.isHorizontal(n)&&e.pos.y===n.pos.y)Z.mergeCheckedWiresHorizontal(e,n,t);else return null;return this.removeElement(e.id),this.removeElement(n.id),this.addElement(t,t.id),{newElems:[t],oldElems:[e,n]}}connectWithEdge(e,n,t){if(!Z.isSameDirection(e,n)){let r=this.splitWire(n,t);return{oldElems:[n],newElems:r}}return null}wiresOnPoint(e){let n=Ce.gridPosToChunk(e),t=[];for(let r of this.elementsInChunk(n))r.typeId===0&&Ce.isPointOnWire(r,e)&&t.push(r);return t}wiresMidOnPoint(e){let n=Ce.gridPosToChunk(e),t=[];for(let r of this.elementsInChunk(n))r.typeId===0&&Ce.isPointOnWireNoEdge(r,e)&&t.push(r);return t}elemsOnPoint(e){let n=Ce.gridPosToChunk(e),t=[];for(let r of this.elementsInChunk(n))Ce.elemHasWirePoint(r,e)&&t.push(r);return t}allOnPoint(e){let n=Ce.gridPosToChunk(e),t=[];for(let r of this.elementsInChunk(n))r.typeId===0?Ce.isPointOnWire(r,e)&&t.push(r):Ce.elemHasWirePoint(r,e)&&t.push(r);return t}elemsAndWiresMidOnPoint(e){let n=Ce.gridPosToChunk(e),t=[],r=[];for(let o of this.elementsInChunk(n))o.typeId===0?Ce.isPointOnWireNoEdge(o,e)?r.push(o):(o.pos.equals(e)||o.endPos.equals(e))&&t.push(o):Ce.elemHasWirePoint(o,e)&&t.push(o);return{wireEnds:t,mid:r}}wireEndsOnPoint(e){let n=Ce.gridPosToChunk(e),t=new Map;for(let r of this.elementsInChunk(n)){let o=Ce.wirePointIndex(r,e);o>=0&&t.set(r,o)}return t}pointsThatSplit(e,n){let t=new Set;for(let r of e){if(r.typeId!==0)continue;let o=Ce.inRectChunks(r.pos,r.endPos);for(let s of this.chunksFromCoords(o))if(!t.has(s)){t.add(s);for(let a of s.elements)if(a.id!==r.id)for(let l of Z.wireEnds(a))Ce.hasWiresMidOnPoint(s.elements,l)&&(n.has(l.x)?n.get(l.x).add(l.y):n.set(l.x,new Set([l.y])))}}return n}getElementById(e){return this._model.get(e)}getElementsById(e){let n=[];for(let t of e)this._model.has(t)&&n.push(this._model.get(t));return n}equals(e){if(e._model.size!==this._model.size)return!1;for(let n of this._model.values())if(!e._model.has(n.id)||!Z.equals(n,e._model.get(n.id)))return!1;for(let n=0;n<this._chunks.length;n++)for(let t=0;t<this._chunks[n].length;t++){let r=this._chunks[n][t],o=e._chunks[n][t];if(o.elements.size!==r.elements.size||o.connectionPoints.length!==r.connectionPoints.length)return!1;for(let s of r.elements){let a=!1;for(let l of o.elements)Z.equals(s,l)&&(a=!0);if(!a)return!1}for(let s=0;s<r.connectionPoints.length;s++){let a=r.connectionPoints[s];if(!o.connectionPoints.find(l=>l.x===a.x&&l.y===a.y))return!1}}return!0}elementsInChunk(e){return this._chunks[e.x]&&this._chunks[e.x][e.y]?this._chunks[e.x][e.y].elements:new Set}chunksFromCoords(e){let n=[];for(let t of e)!this._chunks[t.x]||!this._chunks[t.x][t.y]||n.push(this._chunks[t.x][t.y]);return n}elementsOverLine(e,n){let t=[],r=this.chunksOverLine(e,n);for(let o of r)if(o)for(let s of o.elements)t.find(a=>a.id===s.id)||(Ce.lineOverElem(s,e,n)||Ce.isPointInRect(e,s.pos,s.endPos))&&t.push(s);return t}chunksOverLine(e,n){let t=Ce.gridPosToChunk(e),r=Ce.gridPosToChunk(n),o;if(t.equals(r))o=[this.chunk(t)];else{if(Math.abs(t.x-r.x)>1||Math.abs(t.y-r.y)>1)return[];o=[this.chunk(t),this.chunk(r)];let s=[new R(t.x,r.y),new R(t.y,r.x)];for(let a of s){let{start:l,end:c}=Ce.chunkToPoints(new R(t.x,r.y));Ce.lineOverRect(l,c,e,n)&&o.push(this.chunk(a))}}return o}inputOutputCount(){let e=0,n=0;this._outputPlugs=[],this._inputPlugs=[];for(let t of this._model.values())t.typeId===100?(t.plugIndex===void 0&&(t.plugIndex=e),e++,this._inputPlugs.push(t)):t.typeId===101&&(t.plugIndex===void 0&&(t.plugIndex=e+n),n++,this._outputPlugs.push(t));return this.numInputs=e,this.numOutputs=n,{numInputs:e,numOutputs:n}}initTunnels(){this._tunnels=[];for(let e of this._model.values())e.typeId===8&&this._tunnels.push(e)}setPlugId(e,n){for(let t of e.typeId===100?this._inputPlugs:this._outputPlugs)if(t.plugIndex===n){this.specialActions.push({name:"plugInd",element:t,numbers:[e.plugIndex,t.plugIndex]}),t.plugIndex=e.plugIndex;break}e.plugIndex=n}setPlugIdWithoutChangingOthers(e,n){e.plugIndex=n}possiblePlugIds(e){let n=[];if(e.typeId===100)for(let t=0;t<this.numInputs;t++)n.push(t);else if(e.typeId===101)for(let t=0;t<this.numOutputs;t++)n.push(this.numInputs+t);return n}setOptions(e,n){e.options=n;let t=ee(be).getElementById(e.typeId);t.onOptionsChanged&&(this.removeFromChunks(e),t.onOptionsChanged(e),e.endPos=Z.calcEndPos(e),this.loadIntoChunks(e))}setData(e,n){e.data=n,this.removeFromChunks(e),e.endPos=Z.calcEndPos(e),this.loadIntoChunks(e)}chunk(e){return this._chunks[e.x]?this._chunks[e.x][e.y]:null}allPlugs(){return[...this._inputPlugs.sort((e,n)=>e.plugIndex-n.plugIndex),...this._outputPlugs.sort((e,n)=>e.plugIndex-n.plugIndex)]}get allElements(){return[...this._model.values()]}get chunks(){return this._chunks}get model(){return this._model}get tunnels(){return this._tunnels}get highestTakenId(){return this._highestTakenId}};var fp=class i{constructor(e,n,t){if(this._project=e,this._isReading=n,this._names=[],this._args=[],t){let r=JSON.parse(t);this._names=r[0],this._args=r[1],this._expectedState=r[2]}}static isArray(e){return e&&e[0]}static isElement(e){return e&&e.id!==void 0&&e.pos&&e.pos.x!==void 0}correctType(e){if(e){if(e.x!==void 0)return new R(e.x,e.y);if(i.isElement(e)&&(e.pos=new R(e.pos.x,e.pos.y),e.endPos=new R(e.endPos.x,e.endPos.y)),i.isArray(e)){if(i.isElement(e[0]))for(let n of e)n.pos=new R(n.pos.x,n.pos.y),n.endPos=new R(n.endPos.x,n.endPos.y),n=Z.clone(n);if(e[0].x!==void 0&&e[1].x!==void 0){for(let n of this._project.allElements)if(Ce.isElementInFloatRect(n,e[0],e[1]))return n.id}if(i.isArray(e[0])&&e[0][0].x!==void 0&&e[0][1].x!==void 0){let n=[];for(let t of e)for(let r of this._project.allElements)r.pos.x===t[0].x&&r.pos.y===t[0].y&&r.endPos.x===t[1].x&&r.endPos.y===t[1].y&&n.push(r.id);return n.length!==e.length&&console.log("something happened"),n}}}return e}call(e,n,t,r,o){try{if(this._isReading){let s=Q({},n);if(this._names.push(e),this._args.push(s),t!==void 0&&t>-1){let a=this._project.currState.getElementById(s[t]),l=[a.pos.clone(),a.endPos.clone()];Z.correctPosOrder(l[0],l[1]),s[t]=l}if(r!==void 0&&r>-1)for(let a=0;a<s[r].length;a++){let l=this._project.currState.getElementById(s[r][a]),c=[l.pos.clone(),l.endPos.clone()];Z.correctPosOrder(c[0],c[1]),s[r]=[...s[r]],s[r][a]=c}if(o!==void 0&&o>-1){s[o]=[...s[o]];for(let a=0;a<s[o].length;a++)s[o][a]=Z.clone(s[o][a])}}}catch{console.log("boardrecorder error")}}doAllCalls(e){for(let n=0;n<this._args.length;n++)this.doCall(n,e)}doCall(e,n){if(this._names.length<=e)return;let t=this._names[e],r=this._args[e],o=[];for(let s in r)o.push(this.correctType(r[s]));n&&console.log("calling",t,"with",...o),this._project[t](...o)}stringify(){let e=[this._names,this._args,this._project.currState];return JSON.stringify(e,(n,t)=>t===void 0?null:t)}get expectedState(){return this._expectedState}};var Oi=class i{constructor(e,n){this._maxActionCount=1e3,this.saveDirty=!1,this.compileDirty=!0,this._stateActionFlag=!1,this._actionToApply=[],this._currState=e,this._actions=new Array(this._maxActionCount),this._id=n.id,this._name=n.name,this._type=n.type??"comp",this._hash=n.hash,this._source=n.source,this._isPublic=n.public??!1,this._link=n.link,this._currActionPointer=-1,this._currMaxActionPointer=-1,this._changeSubject=new _e,C.production||(this.boardRecorder=new fp(this,!0))}static empty(e,n){return new i(new pi,{type:"project",source:"local",name:e??"New Project",id:n??0})}applyActions(e){this.saveDirty=!0,this.compileDirty=!0,e.forEach(n=>this.applyAction(n))}applyAction(e){switch(e.name){case"addComp":case"addWire":this._currState.addElement(e.element,e.element.id);break;case"remComp":case"remWire":this._currState.removeElement(e.element.id);break;case"movMult":for(let n of e.others)this._currState.moveElement(n,e.pos);break;case"conWire":this._currState.addConPointIfNotExists(e.pos);break;case"dcoWire":this._currState.remConPointIfExists(e.pos);break;case"rotComp":this._currState.rotateComp(e.element,e.numbers[0]);break;case"numInpt":this._currState.setNumInputs(e.element,e.numbers[0]);break;case"plugInd":this._currState.setPlugId(e.element,e.numbers[0]);break;case"compOpt":this._currState.setOptions(e.element,e.options[0]);break;case"ediData":this._currState.setData(e.element,e.data[0]);break}}getOpenActions(){let e=[];for(let n of this.allElements)e.push({name:Z.addActionName(n),pos:n.pos,endPos:n.endPos,element:n});for(let n of this._currState.chunks)for(let t of n)if(!(!t||!t.connectionPoints))for(let r of t.connectionPoints)e.push({name:"conWire",pos:r.clone()});return e}chunksToRender(e,n){let t=Ce.inRectChunks(e,n);for(let r of this._currState.chunksFromCoords(t))r.links.forEach((o,s)=>{t.find(a=>a.x===o.x&&a.y===o.y)||t.push({x:o.x,y:o.y})});return t}addElements(e,n){if(n||(n=new R(0,0)),!this._currState.allSpacesFree(e,n))return!1;C.production||this.boardRecorder.call("addElements",arguments,-1,-1,0);let t=new Array(e.length),r=0;e.forEach(s=>{Z.move(s,n),this._currState.addElement(s),t[r]={name:Z.addActionName(s),element:s},r++});let o=Z.allWireEnds(e);return o=this._currState.pointsThatSplit(e,o),t.push(...this.autoAssembleWireEnds(o)),this.newState(t),!0}addElement(e,n,t){if(e===0&&!t||e===0&&n.equals(t))return null;let r=Z.genNewElement(e,n,t);if(r.endPos=r.endPos||Z.calcEndPos(r),!this._currState.isFreeSpace(r.pos,r.endPos,e===0,Z.wireEnds(r)))return null;C.production||this.boardRecorder.call("addElement",arguments),this._currState.addElement(r);let o=[{name:Z.addActionName(r),element:r}],s=Z.allWireEnds([r]);return s=this._currState.pointsThatSplit([r],s),o.push(...this.autoAssembleWireEnds(s)),this.newState(o),r}addWire(e,n,t){if(n.equals(e)&&(n=t,t=void 0),!t||n.equals(t)){let a=this.addElement(0,e,n);return a?[a]:null}let{wire0:r,wire1:o}=Z.gen2Wires(e,n,t);if(!this._currState.allSpacesFree([r,o],new R(0,0)))return null;C.production||this.boardRecorder.call("addWire",arguments),this._currState.addElement(r),this._currState.addElement(o);let s=this.actionsFromAddWires([r,o]);return this.newState(s),[r,o]}actionsFromAddWires(e){let n=[];e.forEach(r=>n.push({name:"addWire",element:r}));let t=Z.allWireEnds(e);return t=this._currState.pointsThatSplit(e,t),n.push(...this.autoAssembleWireEnds(t)),n}removeElementsById(e){C.production||this.boardRecorder.call("removeElementsById",arguments,-1,0);let n=[],t=new Array(e.length),r=0;e.forEach(s=>{let a=this._currState.removeElement(s);t[r++]=a;let l={name:Z.remActionName(a),element:a};n.push(l),n.push(...this._currState.plugIndexActions),this._currState.plugIndexActions=[]});let o=Z.allWireEnds(t);o=this._currState.pointsThatSplit(t,o),n.push(...this.autoAssembleWireEnds(o)),this.newState(n)}eraseElements(e,n){C.production||this.boardRecorder.call("eraseElements",arguments);let t=this._currState.elementsOverLine(e,n);if(t.length===0)return;let r=[];for(let s of t)r.push({name:Z.remActionName(s),element:s}),this._currState.removeElement(s.id),r.push(...this._currState.plugIndexActions),this._currState.plugIndexActions=[];let o=Z.allWireEnds(t);o=this._currState.pointsThatSplit(t,o),r.push(...this.autoAssembleWireEnds(o),...this._currState.specialActions),this._currState.specialActions=[],this._actionToApply.push(...r),this._changeSubject.next(r)}stopErase(){C.production||this.boardRecorder.call("stopErase",arguments),this._actionToApply.length!==0&&(this.newState(this._actionToApply,!1,!0),this._actionToApply=[])}moveElementsById(e,n){let t=this._currState.getElementsById(e);if(n.x===0&&n.y===0)return this._changeSubject.next([{name:"movMult",others:t,pos:n}]),this.cancelLastStep(),!0;if(!this._currState.allSpacesFree(t,n,new Set(t)))return!1;let r=Z.allWireEnds(t);C.production||this.boardRecorder.call("moveElementsById",arguments,-1,0);for(let s of t)this._currState.moveElement(s,n);let o=[{name:"movMult",others:t,pos:n}];return r=Z.allWireEnds(t,r),r=this._currState.pointsThatSplit(t,r),o.push(...this.autoAssembleWireEnds(r)),this.newState(o),!0}rotateComponent(e,n){let t=this._currState.getElementById(e);if(t.typeId===0||t.typeId===7)return!1;let r=[{name:"rotComp",element:t,numbers:[n,t.rotation]}],o=Z.allWireEnds([t]),s=Z.calcEndPos(t,void 0,void 0,n);return this._currState.isFreeSpace(t.pos,s,!1,Z.wireEndsWithChanges(t,n,t.numInputs,new R),new Set([t]))?(C.production||this.boardRecorder.call("rotateComponent",arguments,0),this._currState.rotateComp(t,n,s),o=Z.allWireEnds([t],o),o=this._currState.pointsThatSplit([t],o),r.push(...this.autoAssembleWireEnds(o)),this.newState(r),!0):!1}setNumInputs(e,n){let t=this._currState.getElementById(e);if(t.typeId===0||t.typeId===7)return!1;let r=[{name:"numInpt",element:t,numbers:[n,t.numInputs]}],o=Z.allWireEnds([t]),s=Z.calcEndPos(t,n);return this._currState.isFreeSpace(t.pos,s,!1,Z.wireEndsWithChanges(t,t.rotation,n,new R),new Set([t]))?(C.production||this.boardRecorder.call("setNumInputs",arguments,0),this._currState.setNumInputs(t,n,s),o=Z.allWireEnds([t],o),o=this._currState.pointsThatSplit([t],o),r.push(...this.autoAssembleWireEnds(o)),this.newState(r),!0):!1}setPlugIndex(e,n){let t=this._currState.getElementById(e);if(!this._currState.possiblePlugIds(t).includes(n))return!1;let r=t.plugIndex;this._currState.setPlugId(t,n);let o={name:"plugInd",element:t,numbers:[t.plugIndex,r]};return this.newState([o]),!0}setPlugConfiguration(e,n){let t=this.numInputs+this.numOutputs;if(t!==e.length||t!==n.length)return!1;for(let o=0;o<this.numInputs;o++)if(this._currState.getElementById(e[o]).typeId!==100)return!1;for(let o=this.numInputs;o<this.numOutputs;o++)if(this._currState.getElementById(e[o]).typeId!==101)return!1;let r=[];for(let o=0;o<e.length;o++){let s=this._currState.getElementById(e[o]),a=s.plugIndex;this._currState.setPlugIdWithoutChangingOthers(s,o),r.push({name:"plugInd",element:s,numbers:[s.plugIndex,a]});let l=s.data;this._currState.setData(s,n[o]),r.push({name:"ediData",element:s,data:[s.data,l]})}return this.newState(r),!0}possiblePlugIndexes(e){return this._currState.possiblePlugIds(this._currState.getElementById(e))}setOptions(e,n){let t=this._currState.getElementById(e),r=!!ee(be).getElementById(t.typeId).onOptionsChanged,o=[...t.options],s=r?Z.allWireEnds([t]):void 0,a=Z.cloneSetOptions(t,n);if(r&&!this._currState.isFreeSpace(a.pos,a.endPos,!1,Z.wireEnds(a),new Set([t])))return!1;this._currState.setOptions(t,n);let l=[{element:t,name:"compOpt",options:[n,o]}];return r&&(s=Z.allWireEnds([t],s),s=this._currState.pointsThatSplit([t],s),l.push(...this.autoAssembleWireEnds(s))),this.newState(l),!0}addText(e,n){let t=Z.genNewElement(7,n);t.data=e,t.endPos=t.endPos||Z.calcEndPos(t),this._currState.addElement(t);let r=[{name:Z.addActionName(t),element:t}];return this.newState(r),t}setData(e,n){let t=this._currState.getElementById(e),r=t.data;this._currState.setData(t,n);let o={name:"ediData",element:t,data:[t.data,r]};this.newState([o])}updateInputsOutputs(e){let n=[];for(let t of this.allElements)(t.typeId===e||!e&&ee(be).isCustomElement(t.typeId))&&(this._currState.updateNumInputsOutputs(t),n.push({name:"rotComp",element:t}));this._changeSubject.next(n)}updateLabels(e){let n=[];for(let t of this.allElements)(t.typeId===e||!e&&ee(be).isCustomElement(t.typeId))&&n.push({name:"rotComp",element:t});this._changeSubject.next(n)}calcLabels(){let e=this._currState.allPlugs(),n=[];for(let t of e)n.push(t.data||"");return n}toggleWireConnection(e){C.production||this.boardRecorder.call("toggleWireConnection",arguments);let n=this._currState.wiresOnPoint(e),t;if(n.length===2)t=this.connectWires(e,n);else if(n.length===4)t=this.disconnectWires(n);else if(n.length===3)this._currState.elemsOnPoint(e).length===4&&(t=this.disconnectWires(n));else return;this.newState(t)}connectWires(e,n){let t=this._currState.connectWires(n[0],n[1],e);return this._currState.loadConnectionPoints(t),Zn.connectWiresToActions(n,t)}disconnectWires(e){let n=this._currState.disconnectWires(e);return this._currState.loadConnectionPoints(e),Zn.connectWiresToActions(e,n)}splitWire(e,n){let t=this._currState.splitWire(e,n);return t.length===0?{actions:[],elements:[e]}:(this._currState.loadConnectionPoints(t),{actions:Zn.connectWiresToActions([e],t),elements:t})}autoAssembleWireEnds(e){return this._currState.actionToBoard(e)}newState(e,n,t){e&&(e.push(...this._currState.specialActions),this._currState.specialActions=[],this._stateActionFlag?(this._actions[this._currActionPointer].push(...e),this._stateActionFlag=!1):(this._currActionPointer>=this._maxActionCount?this._actions.shift():this._currActionPointer++,this._currMaxActionPointer=this._currActionPointer,this._actions[this._currActionPointer]=e),this.saveDirty=!0,this.compileDirty=!0,!n&&!t?(e=Zn.reduceActions(e),this._changeSubject.next(e)):n&&(this._stateActionFlag=!0))}stepBack(){if(this._currActionPointer<0)return null;C.production||this.boardRecorder.call("stepBack",arguments);let e=Zn.reverseActions(this._actions[this._currActionPointer]);return this._currActionPointer--,this.applyActions(e),this._changeSubject.next(e),this._currState.specialActions=[],e}stepForward(){if(this._currActionPointer>=this._maxActionCount||this._currActionPointer===this._currMaxActionPointer)return null;C.production||this.boardRecorder.call("stepForward",arguments);let e=this._actions[++this._currActionPointer];return this.applyActions(e),this._changeSubject.next(e),this._currState.specialActions=[],e}cancelLastStep(){this._currActionPointer<0||!this._stateActionFlag||(this.stepBack(),this._currMaxActionPointer--,this._stateActionFlag=!1)}get allElements(){return this._currState.allElements}get changes(){return this._changeSubject.asObservable()}get currState(){return this._currState}get id(){return this._id}get name(){return this._name}set name(e){this._name=e}get type(){return this._type}get numInputs(){return this._currState.numInputs}get numOutputs(){return this._currState.numOutputs}get hash(){return this._hash}set hash(e){this._hash=e}get source(){return this._source}get isPublic(){return this._isPublic}set isPublic(e){this._isPublic=e}get link(){return this._link}set link(e){this._link=e}};var Lc=class{constructor(e){this.map=new Map,this.reverse=new Map,e&&(e instanceof Map?e.forEach((n,t)=>{this.set(t,n)}):Array.isArray(e)?e.forEach(n=>{this.set(n[0],n[1])}):Object.keys(e).forEach(n=>{this.set(n,e[n])}))}get size(){return this.map.size}set(e,n){if(this.map.has(e)){let t=this.map.get(e);this.reverse.delete(t)}if(this.reverse.has(n)){let t=this.reverse.get(n);this.map.delete(t)}return this.map.set(e,n),this.reverse.set(n,e),this}clear(){this.map.clear(),this.reverse.clear()}getValue(e){return this.map.get(e)}getKey(e){return this.reverse.get(e)}deleteKey(e){let n=this.map.get(e);return this.reverse.delete(n),this.map.delete(e)}deleteValue(e){let n=this.reverse.get(e);return this.map.delete(n),this.reverse.delete(e)}hasKey(e){return this.map.has(e)}hasValue(e){return this.reverse.has(e)}keys(){return this.map.keys()}values(){return this.reverse.keys()}entries(){return this.map.entries()}forEach(e){return this.map.forEach(e)}};var mp,KB=new Uint8Array(16);function J0(){if(!mp&&(mp=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!mp))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return mp(KB)}var bn=[];for(let i=0;i<256;++i)bn.push((i+256).toString(16).slice(1));function dI(i,e=0){return bn[i[e+0]]+bn[i[e+1]]+bn[i[e+2]]+bn[i[e+3]]+"-"+bn[i[e+4]]+bn[i[e+5]]+"-"+bn[i[e+6]]+bn[i[e+7]]+"-"+bn[i[e+8]]+bn[i[e+9]]+"-"+bn[i[e+10]]+bn[i[e+11]]+bn[i[e+12]]+bn[i[e+13]]+bn[i[e+14]]+bn[i[e+15]]}var QB=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ey={randomUUID:QB};function JB(i,e,n){if(ey.randomUUID&&!e&&!i)return ey.randomUUID();i=i||{};let t=i.random||(i.rng||J0)();if(t[6]=t[6]&15|64,t[8]=t[8]&63|128,e){n=n||0;for(let r=0;r<16;++r)e[n+r]=t[r];return e}return dI(t)}var gp=JB;var Go=(()=>{let e=class e{constructor(t,r){this.http=t,this.errorHandling=r}get(t,r,o){return this.http.get(C.api+t,{params:o}).pipe(go(s=>this.handleError(s,r)))}post(t,r,o,s){return this.http.post(C.api+t,r,{params:s}).pipe(go(a=>this.handleError(a,o)))}put(t,r,o,s){return this.http.put(C.api+t,r,{params:s}).pipe(go(a=>this.handleError(a,o)))}patch(t,r,o,s){return this.http.patch(C.api+t,r,{params:s}).pipe(go(a=>this.handleError(a,o)))}delete(t,r,o){return this.http.delete(C.api+t,{params:o}).pipe(go(s=>this.handleError(s,r)))}handleError(t,r){if(!r)throw t;let o=r?.dynamicMsg?r.dynamicMsg(t):r.errorMessage;throw o&&this.errorHandling.showErrorMessage(o,r?.translationParams),t}};e.\u0275fac=function(r){return new(r||e)(D(bs),D(Sn))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var rl=(()=>{let e=class e{get isProject(){return this.pathname.startsWith("/project/")}get isComponent(){return this.pathname.startsWith("/component/")}get isShare(){return this.pathname.startsWith("/share/")}get isValidPath(){return this.pathname==="/"||this.isProject||this.isComponent||this.isShare}get projectUuid(){return this.pathname.substring(9)}get componentUuid(){return this.pathname.substring(11)}get shareUuid(){return this.pathname.substring(7)}set(t,r){window.history.pushState(null,null,`/editor/${t}/${r}`)}reset(){window.history.pushState(null,null,"/editor/")}get pathname(){return location.pathname.substring(7)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var $n=(()=>{let e=class e{constructor(t,r,o){this.api=t,this.ngZone=r,this.storage=o,this._userInfo$=new An(1),this._isLoggedIn=this.checkLoginState(),this.ngZone.runOutsideAngular(()=>{is(0,1500).pipe(xt(()=>this.checkLoginState()),wl()).subscribe(s=>$(this,null,function*(){if(this._isLoggedIn=s,!s){this.ngZone.run(()=>this._userInfo$.next(void 0));return}try{let a=yield this.api.get("/user",{errorMessage:"ERROR.USER.GET_INFO"}).toPromise();a.data.image||(a.data.image={publicUrl:"assets/default-user.svg"}),this.ngZone.run(()=>this._userInfo$.next(a.data))}catch{this._isLoggedIn=!1,this.ngZone.run(()=>this._userInfo$.next(void 0))}}))})}get isLoggedIn(){return this._isLoggedIn}get userInfo$(){return this._userInfo$.asObservable()}checkLoginState(){return this.storage.get("isAuthenticated")+""=="true"}};e.\u0275fac=function(r){return new(r||e)(D(Go),D(ye),D(Xn))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var vp=(()=>{let e=class e{constructor(){}saveLocalFile(t,r,o){return $(this,null,function*(){return this.saveLocalFileBlob(new Blob([t],{type:"text/plain"}),r,o)})}saveLocalFileBlob(t,r,o){return $(this,null,function*(){let s=document.createElement("a");return s.download=`${o}.${r}`,s.href=(window.webkitURL||window.URL).createObjectURL(t),s.click(),!0})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var pn=class{constructor(e,n,t,r){this.elementProvider=ee(be),this.SVG_NS="http://www.w3.org/2000/svg",this._element=e,this._gridSize=n,this._quality=t,this._project=r,this._elementType=this.elementProvider.getElementById(e.typeId),this._group=document.createElementNS(this.SVG_NS,"g"),this._size=Z.calcElemSize(e),this._size.x*=n,this._size.y*=n,this._elementType.calcLabels&&(this._labels=this._elementType.calcLabels(e))}scaled(e){return e*this._gridSize/C.gridPixelWidth}getLabelText(e,n,t){let r=document.createElementNS(this.SVG_NS,"text");return r.textContent=e,r.setAttribute("x",n+""),r.setAttribute("y",t+""),r}get elementType(){return this._elementType}get size(){return this._size}get labels(){return this._labels}get group(){return this._group}get element(){return this._element}get gridSize(){return this._gridSize}get quality(){return this._quality}get project(){return this._project}};var yp=class extends pn{render(){let e;switch(this.element.rotation){case 0:e=`M 0,0 H ${this._size.x-this.scaled(3)} L ${this._size.x},${this.scaled(3)} V ${this._size.y-this.scaled(3)} L ${this._size.x-this.scaled(3)},${this._size.y} H 0 V 0`;break;case 1:e=`M 0,0 h ${this._size.x} v ${this._size.y-this.scaled(3)} l ${-this.scaled(3)},${this.scaled(3)} H ${this.scaled(3)} L 0,${this._size.y-this.scaled(3)} V 0`;break;case 2:e=`M ${this.scaled(3)},0 H ${this._size.x} v ${this._size.y} H ${this.scaled(3)} L 0,${this._size.y-this.scaled(3)} V ${this.scaled(3)} L ${this.scaled(3)},0`;break;case 3:e=`M ${this.scaled(3)},0 H ${this._size.x-this.scaled(3)} L ${this._size.x},${this.scaled(3)} V ${this._size.y} H 0 V ${this.scaled(3)} L ${this.scaled(3)},0`;break}if(this._quality>=1)switch(this.element.rotation){case 0:for(let t=0;t<this._element.numInputs;t++)e+=` M ${-(this._gridSize/2)},${this._gridSize/2+this._gridSize*t} h ${this._gridSize/2}`;for(let t=0;t<this._element.numOutputs;t++)e+=` M ${this._size.x},${this._gridSize/2+this._gridSize*t} h ${this._gridSize/2}`;break;case 1:for(let t=0;t<this._element.numInputs;t++)e+=` M ${this._size.x-this._gridSize/2-this._gridSize*t},0 v ${-this._gridSize/2}`;for(let t=0;t<this._element.numOutputs;t++)e+=` M ${this._size.x-this._gridSize/2-this._gridSize*t},${this._size.y} v ${this._gridSize/2}`;break;case 2:for(let t=0;t<this._element.numInputs;t++)e+=` M ${this._size.x},${this._size.y-this._gridSize/2-this._gridSize*t} h ${this._gridSize/2}`;for(let t=0;t<this._element.numOutputs;t++)e+=` M 0,${this._size.y-this._gridSize/2-this._gridSize*t} h ${-this._gridSize/2}`;break;case 3:for(let t=0;t<this._element.numInputs;t++)e+=` M ${this._gridSize/2+this._gridSize*t},${this._size.y} v ${this._gridSize/2}`;for(let t=0;t<this._element.numOutputs;t++)e+=` M ${this._gridSize/2+this._gridSize*t},0 v ${-this._gridSize/2}`;break}let n=document.createElementNS(this.SVG_NS,"path");if(n.setAttribute("d",e),n.setAttribute("class","c"),this._group.appendChild(n),this._quality>=2&&this._labels)switch(this._element.rotation){case 0:for(let t=0;t<this._element.numInputs;t++){if(!this._labels[t])continue;let r=this.getLabelText(this._labels[t],2,this._gridSize/2+this._gridSize*t+this.scaled(2));r.setAttribute("class","l-l"),this._group.appendChild(r)}for(let t=0;t<this._element.numOutputs;t++){if(!this._labels[this._element.numInputs+t])continue;let r=this.getLabelText(this._labels[this._element.numInputs+t],this._size.x-2,this._gridSize/2+this._gridSize*t+this.scaled(2));r.setAttribute("class","l-r"),this._group.appendChild(r)}break;case 1:for(let t=0;t<this._element.numInputs;t++){if(!this._labels[t])continue;let r=this.getLabelText(this._labels[t],this._size.x-this._gridSize/2-this._gridSize*t,this.scaled(6));r.setAttribute("class","l-t"),this._group.appendChild(r)}for(let t=0;t<this._element.numOutputs;t++){if(!this._labels[this._element.numInputs+t])continue;let r=this.getLabelText(this._labels[this._element.numInputs+t],this._size.x-this._gridSize/2-this._gridSize*t,this._size.y-this.scaled(3));r.setAttribute("class","l-b"),this._group.appendChild(r)}break;case 2:for(let t=0;t<this._element.numInputs;t++){if(!this._labels[t])continue;let r=this.getLabelText(this._labels[t],this._size.x,this._size.y-this._gridSize/2-this._gridSize*t+this.scaled(2));r.setAttribute("class","l-r"),this._group.appendChild(r)}for(let t=0;t<this._element.numOutputs;t++){if(!this._labels[this._element.numInputs+t])continue;let r=this.getLabelText(this._labels[this._element.numInputs+t],2,this._size.y-this._gridSize/2-this._gridSize*t+this.scaled(2));r.setAttribute("class","l-l"),this._group.appendChild(r)}break;case 3:for(let t=0;t<this._element.numInputs;t++){if(!this._labels[t])continue;let r=this.getLabelText(this._labels[t],this._gridSize/2+this._gridSize*t,this._size.y-this.scaled(3));r.setAttribute("class","l-b"),this._group.appendChild(r)}for(let t=0;t<this._element.numOutputs;t++){if(!this._labels[this._element.numInputs+t])continue;let r=this.getLabelText(this._labels[this._element.numInputs+t],this._gridSize/2+this._gridSize*t,this.scaled(6));r.setAttribute("class","l-t"),this._group.appendChild(r)}break}if(this._quality>=1){let t=document.createElementNS(this.SVG_NS,"text");t.textContent=this._elementType.symbol,t.setAttribute("class","s"),t.setAttribute("x",this._size.x/2+""),t.setAttribute("y",this._size.y/2+this.scaled(3)+""),this._group.appendChild(t)}return this._group}};var Cp=class extends pn{render(){if(this.quality>=1){let n=document.createElementNS(this.SVG_NS,"path");switch(n.setAttribute("class","w"),this._element.rotation){case 0:n.setAttribute("d",`M 0,${this.gridSize/2} h ${-this.gridSize/2}`);break;case 1:n.setAttribute("d",`M ${this.gridSize/2},0 v ${-this.gridSize/2}`);break;case 2:n.setAttribute("d",`M ${this.gridSize},${this.gridSize/2} h ${this.gridSize/2}`);break;case 3:n.setAttribute("d",`M ${this.gridSize/2},${this.gridSize} v ${this.gridSize/2}`);break}this.group.appendChild(n)}let e=document.createElementNS(this.SVG_NS,"circle");return e.setAttribute("cx",this.gridSize/2+""),e.setAttribute("cy",this.gridSize/2+""),e.setAttribute("r",this.gridSize/2+""),e.setAttribute("class","led"),this.group.appendChild(e),this._group}};var bp=class extends pn{render(){if(this.quality>=1){let n=document.createElementNS(this.SVG_NS,"rect");n.setAttribute("x",this.gridSize/2-(this.gridSize<8?2.5:3.5)+""),n.setAttribute("y",this.gridSize/2-(this.gridSize<8?2.5:3.5)+""),n.setAttribute("width",this.gridSize<8?"5":"7"),n.setAttribute("height",this.gridSize<8?"5":"7"),n.setAttribute("class","cp"),this._group.appendChild(n)}let e=this.element.data.split(`
`);for(let n=0;n<e.length;n++){let t=document.createElementNS(this.SVG_NS,"text");t.textContent=e[n],t.setAttribute("class","text"),t.setAttribute("style",`font-size:${this.element.options[0]/9.5*this.gridSize}px;`),t.setAttribute("x",this.gridSize+""),t.setAttribute("y",this.gridSize/2+this.scaled(this.element.options[0]/2)+n*this.scaled(this.element.options[0]*2)+""),this._group.appendChild(t)}return this._group}};var Pp=class extends pn{render(){let e=`M 0,0 h ${this.gridSize} v ${this.gridSize} H 0 V 0 M ${this.scaled(3)},${this.scaled(3)} H ${this.gridSize-this.scaled(3)} V ${this.gridSize-this.scaled(3)} H ${this.scaled(3)} V ${this.scaled(3)}`;if(this.quality>=1)switch(this.element.rotation){case 0:e+=` M ${this.gridSize},${this.gridSize/2} h ${this.gridSize/2}`;break;case 1:e+=` M ${this.gridSize/2},${this.gridSize} v ${this.gridSize/2}`;break;case 2:e+=` M 0,${this.gridSize/2} h ${-this.gridSize/2}`;break;case 3:e+=` M ${this.gridSize/2},0 v ${-this.gridSize/2}`;break}let n=document.createElementNS(this.SVG_NS,"path");return n.setAttribute("d",e),n.setAttribute("class","c"),this._group.appendChild(n),this._group}};var wp=class extends pn{render(){let e=`M 0,0 h ${this.gridSize} v ${this.gridSize} H 0 V 0 M 0,${this.gridSize-this.scaled(4)} H ${this.gridSize}`;if(this.quality>=1)switch(this.element.rotation){case 0:e+=` M ${this.gridSize},${this.gridSize/2} h ${this.gridSize/2}`;break;case 1:e+=` M ${this.gridSize/2},${this.gridSize} v ${this.gridSize/2}`;break;case 2:e+=` M 0,${this.gridSize/2} h ${-this.gridSize/2}`;break;case 3:e+=` M ${this.gridSize/2},0 v ${-this.gridSize/2}`;break}let n=document.createElementNS(this.SVG_NS,"path");return n.setAttribute("d",e),n.setAttribute("class","c"),this._group.appendChild(n),this._group}};var xp=class extends pn{render(){let e=` M 0,0 h ${this.gridSize} v ${this.gridSize} H 0 V 0`;if(this.quality>=1){let t=this.element.rotation;switch(this.element.typeId===101&&(t=(t+2)%4),t){case 0:e+=` M ${this.gridSize},${this.gridSize/2} h ${this.gridSize/2}`;break;case 1:e+=` M ${this.gridSize/2},${this.gridSize} v ${this.gridSize/2}`;break;case 2:e+=` M 0,${this.gridSize/2} h ${-this.gridSize/2}`;break;case 3:e+=` M ${this.gridSize/2},0 v ${-this.gridSize/2}`;break}}let n=document.createElementNS(this.SVG_NS,"path");if(n.setAttribute("d",e),n.setAttribute("class","c"),this._group.appendChild(n),this.quality>=1){let t=document.createElementNS(this.SVG_NS,"text"),r=this.element.data??this._elementType.symbol;t.textContent=r,t.setAttribute("style",`font-size: ${this.calcSymbolFontSize(r)}px`),t.setAttribute("class","s"),t.setAttribute("x",this._size.x/2+""),t.setAttribute("y",this._size.y/2+""),this._group.appendChild(t);let o=document.createElementNS(this.SVG_NS,"text");o.textContent=this.getPlugIndex(),o.setAttribute("class","pi"),o.setAttribute("x",this._size.x/2+""),o.setAttribute("y",this._size.y-this.scaled(1)+""),this._group.appendChild(o)}return this._group}calcSymbolFontSize(e){let n=ee(Er).getTextWidth(e,"10px Roboto"),t=10*(this.size.x*.8/n);return t<this.size.x*.6?t:this.size.x*.6}getPlugIndex(){return this.element.typeId===100?this.element.plugIndex+1+"":this.element.plugIndex-this.project.numInputs+1+""}};var Mp=class extends pn{render(){let e=`M 0,0 h ${this.size.x} v ${this.size.y} H 0 V 0`;if(this._quality>=1)switch(this.element.rotation){case 0:for(let s=0;s<this._element.numInputs;s++)e+=` M ${-(this._gridSize/2)},${this._gridSize/2+this._gridSize*s} h ${this._gridSize/2}`;break;case 1:for(let s=0;s<this._element.numInputs;s++)e+=` M ${this._size.x-this._gridSize/2-this._gridSize*s},0 v ${-this._gridSize/2}`;break;case 2:for(let s=0;s<this._element.numInputs;s++)e+=` M ${this._size.x},${this._size.y-this._gridSize/2-this._gridSize*s} h ${this._gridSize/2}`;break;case 3:for(let s=0;s<this._element.numInputs;s++)e+=` M ${this._gridSize/2+this._gridSize*s},${this._size.y} v ${this._gridSize/2}`;break}let n=document.createElementNS(this.SVG_NS,"path");if(n.setAttribute("class","c"),n.setAttribute("d",e),this._group.appendChild(n),this._quality>=2)switch(this._element.rotation){case 0:for(let s=0;s<this._element.numInputs;s++){let a=this.getLabelText(this._labels[s],2,this._gridSize/2+this._gridSize*s+this.scaled(2));a.setAttribute("class","l-l"),this._group.appendChild(a)}break;case 1:for(let s=0;s<this._element.numInputs;s++){let a=this.getLabelText(this._labels[s],this._size.x-this._gridSize/2-this._gridSize*s,this.scaled(6));a.setAttribute("class","l-t"),this._group.appendChild(a)}break;case 2:for(let s=0;s<this._element.numInputs;s++){let a=this.getLabelText(this._labels[s],this._size.x,this._size.y-this._gridSize/2-this._gridSize*s+this.scaled(2));a.setAttribute("class","l-r"),this._group.appendChild(a)}break;case 3:for(let s=0;s<this._element.numInputs;s++){let a=this.getLabelText(this._labels[s],this._gridSize/2+this._gridSize*s,this._size.y-this.scaled(3));a.setAttribute("class","l-b"),this._group.appendChild(a)}break}let t=(this._size.x-this.gridSize*2)/this.element.options[0]-1,r="";for(let s=0;s<this.element.options[0];s++)for(let a=0;a<this.element.options[0];a++)r+=`M ${t*a+a},${t*s+s} h ${t} v ${t} h ${-t} v ${-t}`;let o=document.createElementNS(this.SVG_NS,"path");switch(o.setAttribute("class","led"),o.setAttribute("d",r),this.element.rotation){case 0:o.setAttribute("transform",`translate(${1.5*this.gridSize}, ${this.gridSize})`);break;case 1:o.setAttribute("transform",`translate(${this.gridSize}, ${1.5*this.gridSize})`);break;case 2:o.setAttribute("transform",`translate(${.5*this.gridSize}, ${this.gridSize})`);break;case 3:o.setAttribute("transform",`translate(${this.gridSize}, ${.5*this.gridSize})`);break}return this._group.appendChild(o),this._group}};var Op=class extends pn{render(){let e=`M 0,0 h ${this.size.x} v ${this.size.y} H 0 V 0`;if(this._quality>=1)switch(this.element.rotation){case 0:for(let s=0;s<this._element.numInputs;s++)e+=` M ${-(this._gridSize/2)},${this._gridSize/2+this._gridSize*s} h ${this._gridSize/2}`;break;case 1:for(let s=0;s<this._element.numInputs;s++)e+=` M ${this._size.x-this._gridSize/2-this._gridSize*s},0 v ${-this._gridSize/2}`;break;case 2:for(let s=0;s<this._element.numInputs;s++)e+=` M ${this._size.x},${this._size.y-this._gridSize/2-this._gridSize*s} h ${this._gridSize/2}`;break;case 3:for(let s=0;s<this._element.numInputs;s++)e+=` M ${this._gridSize/2+this._gridSize*s},${this._size.y} v ${this._gridSize/2}`;break}let n=document.createElementNS(this.SVG_NS,"path");if(n.setAttribute("class","c"),n.setAttribute("d",e),this._group.appendChild(n),this._quality>=2)switch(this._element.rotation){case 0:for(let s=0;s<this._element.numInputs;s++){let a=this.getLabelText(this._labels[s],2,this._gridSize/2+this._gridSize*s+this.scaled(2));a.setAttribute("class","l-l"),this._group.appendChild(a)}break;case 1:for(let s=0;s<this._element.numInputs;s++){let a=this.getLabelText(this._labels[s],this._size.x-this._gridSize/2-this._gridSize*s,this.scaled(6));a.setAttribute("class","l-t"),this._group.appendChild(a)}break;case 2:for(let s=0;s<this._element.numInputs;s++){let a=this.getLabelText(this._labels[s],this._size.x,this._size.y-this._gridSize/2-this._gridSize*s+this.scaled(2));a.setAttribute("class","l-r"),this._group.appendChild(a)}break;case 3:for(let s=0;s<this._element.numInputs;s++){let a=this.getLabelText(this._labels[s],this._gridSize/2+this._gridSize*s,this._size.y-this.scaled(3));a.setAttribute("class","l-b"),this._group.appendChild(a)}break}let t="0",r;switch(this.element.options[0]){case 1:r=Math.ceil(this.element.numInputs/4);break;case 2:r=Math.ceil(this.element.numInputs/3);break;default:r=Math.ceil(Math.log10(2**this.element.numInputs+1))}for(;t.length<r;)t="0"+t;let o=this.getLabelText(t,this.size.x/2,this.size.y/2+this.gridSize*.675);if(o.setAttribute("class",this.element.options[0]===1?"seg14":"seg7"),this._group.appendChild(o),this.quality>=1){let s=this.getLabelText(this.element.options[0]===0?"10":this.element.options[0]===1?"16":"8",this.size.x/2+this.gridSize*.43+this.gridSize*.56*(r-1)-(this.element.options[0]!==2?this.gridSize*.2:0),this.size.y/2+this.gridSize*.675+this.gridSize*.2);s.setAttribute("class","sb"),this._group.appendChild(s)}return this._group}};var ol=class i{constructor(e,n,t){this.project=e,this.SVG_NS="http://www.w3.org/2000/svg",this.themingService=ee(Re),this.size=new R(0,0),this.offset=new R(0,0),this.quality=2,this._svg=document.createElementNS(this.SVG_NS,"svg"),this.theme=t??(this.themingService.currentTheme==="dark"?0:1);let r=Number.MAX_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER,s=0,a=0;for(let u of this.project.getOpenActions())u.name!=="addComp"&&u.name!=="addWire"||(u.pos.x<r&&(r=u.pos.x),u.pos.y<o&&(o=u.pos.y),u.endPos.x>s&&(s=u.endPos.x),u.endPos.y>a&&(a=u.endPos.y));r--,o--,s++,a++,this.scaleFactor=1,n?(this.size=n,this.gridSize=n.x/(s-r)<n.y/(a-o)?n.x/(s-r):n.y/(a-o),this.gridSize<2&&(this.gridSize=2,this.scaleFactor=n.x/(s-r)<n.y/(a-o)?n.x/(s-r)/2:n.y/(a-o)/2,this.size.x/=this.scaleFactor,this.size.y/=this.scaleFactor),this.gridSize<=2?this.quality=0:this.gridSize<=4&&(this.quality=1)):(this.gridSize=C.gridPixelWidth,this.size.x=(s-r)*this.gridSize,this.size.y=(a-o)*this.gridSize),this.offset.x=Math.trunc(-r*this.gridSize+1+(this.size.x-(s-r)*this.gridSize)/2)+.5,this.offset.y=Math.trunc(-o*this.gridSize+1+(this.size.y-(a-o)*this.gridSize)/2)+.5,this._svg.setAttribute("height",this.size.y+""),this._svg.setAttribute("width",this.size.x+""),this.generateDefinitions();let l="",c=document.createElementNS(this.SVG_NS,"path");c.setAttribute("class","w"),this._svg.appendChild(c);for(let u of this.project.getOpenActions())switch(u.name){case"addComp":this.placeComp(u.element);break;case"addWire":u.element.pos.y===u.element.endPos.y?l+=` M ${(u.element.pos.x+.5)*this.gridSize+this.offset.x},${(u.element.pos.y+.5)*this.gridSize+this.offset.y} H ${(u.element.endPos.x+.5)*this.gridSize+this.offset.x}`:l+=` M ${(u.element.pos.x+.5)*this.gridSize+this.offset.x},${(u.element.pos.y+.5)*this.gridSize+this.offset.y} V ${(u.element.endPos.y+.5)*this.gridSize+this.offset.y}`;break;case"conWire":this.quality>=1&&this.placeConnPoint(u.pos);break}c.setAttribute("d",l)}static toStringTheme(e){return e%2===0?"dark":"light"}placeComp(e){let n;switch(e.typeId){case 7:n=new bp(e,this.gridSize,this.quality,this.project).render();break;case 202:n=new Cp(e,this.gridSize,this.quality,this.project).render();break;case 204:n=new Mp(e,this.gridSize,this.quality,this.project).render();break;case 200:n=new Pp(e,this.gridSize,this.quality,this.project).render();break;case 100:case 101:n=new xp(e,this.gridSize,this.quality,this.project).render();break;case 201:n=new wp(e,this.gridSize,this.quality,this.project).render();break;case 203:n=new Op(e,this.gridSize,this.quality,this.project).render();break;default:n=new yp(e,this.gridSize,this.quality,this.project).render()}n&&(n.setAttribute("transform",`translate(${e.pos.x*this.gridSize+this.offset.x}, ${e.pos.y*this.gridSize+this.offset.y})`),this._svg.appendChild(n))}placeConnPoint(e){let n=document.createElementNS(this.SVG_NS,"rect");n.setAttribute("x",(e.x+.5)*this.gridSize+this.offset.x-(this.gridSize<8?1.5:2.5)+""),n.setAttribute("y",(e.y+.5)*this.gridSize+this.offset.y-(this.gridSize<8?1.5:2.5)+""),n.setAttribute("width",this.gridSize<8?"3":"5"),n.setAttribute("height",this.gridSize<8?"3":"5"),n.setAttribute("class","cp"),this._svg.appendChild(n)}generateDefinitions(){let e=document.createElementNS(this.SVG_NS,"defs"),n=document.createElementNS(this.SVG_NS,"style");n.setAttribute("type","text/css"),n.innerHTML=`
			@font-face {
                font-family: 'Roboto';
                font-style: normal;
                font-weight: 500;
                src: url(data:application/font-woff;charset=utf-8;base64,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) format('woff');
			}
			@font-face {
				font-family: 'DSEG7';
				src: url(data:application/font-woff;charset=utf-8;base64,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) format('woff');
			}
			@font-face {
				font-family: 'DSEG14';
				src: url(data:application/font-woff;charset=utf-8;base64,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) format('woff');
			}
			text {
				fill: #${this.themingService.getEditorColor("fontTint",i.toStringTheme(this.theme)).toString(16).padStart(6,"0")};
				font-family: Roboto, Arial, sans-serif;
			}
			.body {
				background-color: ${this.theme>1?"transparent":"#"+this.themingService.getEditorColor("background",i.toStringTheme(this.theme)).toString(16).padStart(6,"0")};
			}
			.w {
				stroke: #${this.themingService.getEditorColor("wire",i.toStringTheme(this.theme)).toString(16).padStart(6,"0")};
				stroke-width: 1px;
				fill: none;
				vector-effect: non-scaling-stroke;
			}
			.c {
				stroke: #${this.themingService.getEditorColor("wire",i.toStringTheme(this.theme)).toString(16).padStart(6,"0")};
				stroke-width: 1px;
				fill: ${this.theme>1?"none":"#"+this.themingService.getEditorColor("background",i.toStringTheme(this.theme)).toString(16).padStart(6,"0")};
				vector-effect: non-scaling-stroke;
			}
			.cp {
				fill: #${this.themingService.getEditorColor("wire",i.toStringTheme(this.theme)).toString(16).padStart(6,"0")};
			}
			.s {
				text-anchor: middle;
				font-size: ${this.gridSize*.6}px;
			}
			.pi {
				text-anchor: middle;
				font-size: ${6*this.gridSize/C.gridPixelWidth}px;
			}
			.text {
				text-anchor: start;
				text-align: center;
			}
			.led {
				fill: #${this.themingService.getEditorColor("ledOff",i.toStringTheme(this.theme)).toString(16).padStart(6,"0")};
			}
			.seg7 {
				text-anchor: middle;
				font-size: ${this.gridSize*1.35}px;
				font-family: DSEG7, DSEG14, Roboto, Arial, sans-serif;
			}
			.seg14 {
				text-anchor: middle;
				font-size: ${this.gridSize*1.35}px;
				font-family: DSEG14, Roboto, Arial, sans-serif;
			}
			.sb {
				text-anchor: start;
				font-size: ${this.gridSize*.4}px;
				font-family: DSEG7, DSEG14, Roboto, Arial, sans-serif;
			}
			.l-l {
				text-anchor: start;
				font-size: ${this.gridSize*.4}px;
			}
			.l-r {
				text-anchor: end;
				font-size: ${this.gridSize*.4}px;
			}
			.l-t {
				text-anchor: middle;
				font-size: ${this.gridSize*.4}px;
			}
			.l-b {
				text-anchor: middle;
				font-size: ${this.gridSize*.4}px;
			}
		`;let t=document.createElementNS(this.SVG_NS,"pattern");t.setAttribute("id","bg"),t.setAttribute("x","1"),t.setAttribute("y","1"),t.setAttribute("width",this.gridSize+""),t.setAttribute("height",this.gridSize+""),t.setAttribute("patternUnits","userSpaceOnUse");let r=document.createElementNS(this.SVG_NS,"rect");r.setAttribute("x","0"),r.setAttribute("y","0"),r.setAttribute("width","1"),r.setAttribute("height","1"),r.setAttribute("class","w"),t.appendChild(r),e.appendChild(n),e.appendChild(t),this._svg.appendChild(e),this._svg.setAttribute("class","body")}serializeSVG(){let n=new XMLSerializer().serializeToString(this._svg);return n.match(/^<svg[^>]+xmlns="http:\/\/www\.w3\.org\/2000\/svg"/)||(n=n.replace(/^<svg/,'<svg xmlns="http://www.w3.org/2000/svg"')),n.match(/^<svg[^>]+"http:\/\/www\.w3\.org\/1999\/xlink"/)||(n=n.replace(/^<svg/,'<svg xmlns:xlink="http://www.w3.org/1999/xlink"')),`<?xml version="1.0" standalone="no"?>\r
`+n}changeTheme(e){this.theme=e,this._svg.removeChild(this._svg.getElementsByTagNameNS(this.SVG_NS,"defs")[0]),this.generateDefinitions()}getBase64String(){return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(this.serializeSVG())))}};var Ep=(()=>{let e=class e{constructor(){}generatePreviews(t){return $(this,null,function*(){let r=new ol(t,new R(1024,1024),2),o=yield this.getBlobImage(r,"png");return r.changeTheme(3),{dark:o,light:yield this.getBlobImage(r,"png")}})}generateImage(t,r,o){return this.getBlobImage(new ol(t,o?.size,o?.theme),r)}generateSVG(t,r){return new ol(t,r?.size,r?.theme).serializeSVG()}getBlobImage(t,r){let o=new Image,s=document.createElement("canvas");return s.width=Math.round(t.size.x*t.scaleFactor),s.height=Math.round(t.size.y*t.scaleFactor),new Promise(a=>{o.onload=()=>{s.getContext("2d").drawImage(o,0,0,t.size.x,t.size.y,0,0,s.width,s.height),s.toBlob(l=>a(l),`image/${r}`)},o.src=t.getBase64String()})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var Ei=(()=>{let e=class e{constructor(t,r,o,s,a,l,c){this.api=t,this.elementProvider=r,this.location=o,this.userService=s,this.fileSaverService=a,this.errorHandling=l,this.imageService=c,this._mappings=new Lc,this._projectsCache=new Map,this._loadedInitialProjects$=new An(1),this.userService.userInfo$.pipe(Af(this._loadedInitialProjects$)).subscribe(()=>this.getAllComponentsInfo())}getInitialProjects(){return $(this,null,function*(){let t;if(this.location.isProject)try{t=[yield this.getProjectOrComponentUuid(this.location.projectUuid,"project")],this.errorHandling.showInfo("INFO.PROJECTS.OPEN",{name:t[0].name})}catch{t=[this.getEmptyProject()],this.location.reset()}else if(this.location.isComponent)try{let r=yield this.getProjectOrComponentUuid(this.location.componentUuid,"comp");t=[this.getEmptyProject(),r],this.errorHandling.showInfo("INFO.PROJECTS.OPEN",{name:r.name})}catch{t=[this.getEmptyProject()],this.location.reset()}else if(this.location.isShare)try{let r=yield this.getProjectShare(this.location.shareUuid);r.type==="comp"?t=[this.getEmptyProject(),r]:t=[r],this.errorHandling.showInfo("INFO.PROJECTS.OPEN_SHARE",{name:r.name})}catch{t=[this.getEmptyProject()],this.location.reset()}else t=[this.getEmptyProject()];return yield this.getAllComponentsInfo(),this._loadedInitialProjects$.next(),t})}getProjectOrComponentUuid(t,r){return $(this,null,function*(){if(this._projectsCache.has(this._mappings.getValue(t)))return this._projectsCache.get(this._mappings.getValue(t));let o=r==="project"?"project":"component",s=yield this.api.get(`/${o}/${t}`,{errorMessage:"ERROR.PROJECTS.OPEN"}).toPromise(),a=this.saveMappings(s.data.dependencies);this.setCustomElements(s.data.dependencies.map(u=>u.dependency),"user");let l=this.convertSavedElementsToElements(s.data.elements,a),c=new Oi(new pi(l),{id:this.generateNextId(s.data.id),source:"server",name:s.data.name,hash:s.data.elementsFile.hash,public:s.data.public,link:s.data.link,type:r});return this._projectsCache.set(c.id,c),c})}getComponent(t){return $(this,null,function*(){if(this._projectsCache.has(t))return this._projectsCache.get(t);if(this.elementProvider.getElementById(t).category==="share"){let c=this._mappings.getKey(t),u=yield this.api.get(`/share/${c}`,{errorMessage:"ERROR.PROJECTS.OPEN_COMP"}).toPromise(),d=this.saveMappings(u.data.dependencies,!0),h=this.convertSavedElementsToElements(u.data.elements,d),p=new Oi(new pi(h),{type:"comp",name:u.data.name,source:"share",id:t});return this._projectsCache.set(p.id,p),p}let r=this._mappings.getKey(t),o=yield this.api.get(`/component/${r}`,{errorMessage:"ERROR.PROJECTS.OPEN_COMP"}).toPromise(),s=this.saveMappings(o.data.dependencies),a=this.convertSavedElementsToElements(o.data.elements,s),l=new Oi(new pi(a),{type:"comp",name:o.data.name,source:"server",hash:o.data.elementsFile.hash,id:t});return this._projectsCache.set(l.id,l),l})}createProjectServer(t,r="",o=!1,s){return $(this,null,function*(){let a=yield this.api.post("/project",{name:t,description:r,public:o+""},{errorMessage:"ERROR.PROJECTS.CREATE"}).toPromise(),l=yield this.buildDependencyTree(s),c=[],u=new Lc;for(let[_,P]of l)if(P.source==="local"){let I=this.elementProvider.getElementById(_),b=yield this.api.post("/component",{name:I.name,symbol:I.symbol,description:I.description},{errorMessage:"ERROR.PROJECTS.CREATE"}).toPromise();u.set(b.data.id,_),c.push(b.data)}for(let _ of c){let P=this.elementProvider.getElementById(u.getValue(_.id)),I=this.convertElementsToSaveElements(l.get(u.getValue(_.id)).allElements),b={oldHash:_.elementsFile.hash,dependencies:I.usedCustomElements.map(S=>({id:u.getKey(S)??this._mappings.getKey(S),model:S})),elements:I.elements,numInputs:P.numInputs,numOutputs:P.numOutputs,labels:P.labels};yield this.api.put(`/component/${_.id}`,b,{errorMessage:"ERROR.PROJECTS.SAVE"}).toPromise()}let d=this.convertElementsToSaveElements(s.allElements),h={oldHash:a.data.elementsFile.hash,dependencies:d.usedCustomElements.map(_=>({id:u.getKey(_)??this._mappings.getKey(_),model:_})),elements:d.elements},p=this.api.put(`/project/${a.data.id}`,h,{errorMessage:"ERROR.PROJECTS.SAVE"}).toPromise(),f=yield this.imageService.generatePreviews(s),m=new FormData;m.append("previews",f.dark),m.append("previews",f.light),yield this.api.post(`/project/${a.data.id}/preview`,m,{errorMessage:"ERROR.PROJECTS.SAVE"}).toPromise(),yield p;for(let _ of u.values())this.removeElement(_);return yield this.getAllComponentsInfo(),a.data.id})}createComponent(t,r,o="",s=!1){return $(this,null,function*(){if(this.userService.isLoggedIn){let a={name:t,symbol:r,description:o,public:s+""},l=yield this.api.post("/component",a,{errorMessage:"ERROR.PROJECTS.CREATE"}).toPromise(),c=this.generateNextId(l.data.id);this.setCustomElements([l.data],"user");let u=new Oi(new pi,{type:"comp",source:"server",hash:l.data.elementsFile.hash,link:l.data.link,public:l.data.public,name:t,id:c});return this._projectsCache.set(u.id,u),u}else{let a=this.generateNextId();this.setCustomElements([{id:this._mappings.getKey(a),symbol:r,name:t,description:o,numInputs:0,numOutputs:0,labels:[]}],"local");let l=new Oi(new pi,{type:"comp",source:"local",name:t,id:a});return this._projectsCache.set(l.id,l),l}})}saveComponent(t){return $(this,null,function*(){if(!t.saveDirty)return;if(t.source!=="server"){this._projectsCache.set(t.id,t),t.saveDirty=!1;return}let r=this.elementProvider.getElementById(t.id),o=this.convertElementsToSaveElements(t.allElements),s={oldHash:t.hash,dependencies:o.usedCustomElements.map(d=>({id:this._mappings.getKey(d),model:d})),elements:o.elements,numInputs:r.numInputs,numOutputs:r.numOutputs,labels:r.labels},a=this.api.put(`/component/${this._mappings.getKey(t.id)}`,s,{dynamicMsg:d=>d.error.error.description==="VersionMismatch"?"ERROR.PROJECTS.SAVE_VERSION":"ERROR.PROJECTS.SAVE"}).toPromise(),l=yield this.imageService.generatePreviews(t),c=new FormData;c.append("previews",l.dark),c.append("previews",l.light);let u=this.api.post(`/component/${this._mappings.getKey(t.id)}/preview`,c,{errorMessage:"ERROR.PROJECTS.SAVE"}).toPromise();t.hash=(yield a).data.elementsFile.hash,t.saveDirty=!1,yield u,this._projectsCache.set(t.id,t),this.errorHandling.showInfo("INFO.PROJECTS.SAVE",{name:t.name})})}saveProject(t){return $(this,null,function*(){if(!t.saveDirty)return;if(t.source!=="server"){this._projectsCache.set(t.id,t),t.saveDirty=!1;return}let r=this.convertElementsToSaveElements(t.allElements),o={oldHash:t.hash,dependencies:r.usedCustomElements.map(u=>({id:this._mappings.getKey(u),model:u})),elements:r.elements},s=this.api.put(`/project/${this._mappings.getKey(t.id)}`,o,{errorMessage:"ERROR.PROJECTS.SAVE"}).toPromise(),a=yield this.imageService.generatePreviews(t),l=new FormData;l.append("previews",a.dark),l.append("previews",a.light);let c=this.api.post(`/project/${this._mappings.getKey(t.id)}/preview`,l,{dynamicMsg:u=>u.error.error.description==="VersionMismatch"?"ERROR.PROJECTS.SAVE_VERSION":"ERROR.PROJECTS.SAVE"}).toPromise();t.hash=(yield s).data.elementsFile.hash,t.saveDirty=!1,yield c,this._projectsCache.set(t.id,t),this.errorHandling.showInfo("INFO.PROJECTS.SAVE",{name:t.name})})}generateFileToExport(t,r){return $(this,null,function*(){let o=yield this.buildDependencyTree(t),s=[];for(let[a,l]of o){let c=this.elementProvider.getElementById(a);s.push({info:{id:a,numInputs:c.numInputs,numOutputs:c.numOutputs,labels:c.labels,description:c.description,name:c.name,symbol:c.symbol},elements:this.convertElementsToSaveElements(l.allElements).elements})}return{project:{name:r??t.name,elements:this.convertElementsToSaveElements(t.allElements).elements},components:s}})}exportToFile(t,r){return $(this,null,function*(){let o=yield this.generateFileToExport(t,r);yield this.fileSaverService.saveLocalFile(JSON.stringify(o),"json",r??t.name)})}openFile(t){let r=JSON.parse(t),o=new Map;for(let l of r.components)if(this._mappings.hasValue(l.info.id)){let c=this.generateNextId();o.set(l.info.id,c),l.info.id=c}else this._mappings.set(gp(),l.info.id);this.setCustomElements(r.components.map(l=>Xe(Q({},l.info),{id:this._mappings.getKey(l.info.id)})),"local");for(let l of r.components){let c=this.convertSavedElementsToElements(l.elements,o),u=new Oi(new pi(c),{type:"comp",name:l.info.name,source:"local",id:l.info.id});this._projectsCache.set(u.id,u)}let s=this.convertSavedElementsToElements(r.project.elements,o),a=new Oi(new pi(s),{type:"project",name:r.project.name,source:"local",id:this.generateNextId()});return this._projectsCache.set(a.id,a),a}buildDependencyTree(t,r){return $(this,null,function*(){r||(r=new Map);for(let o of t.allElements)if(this.elementProvider.isCustomElement(o.typeId)&&!r.has(o.typeId)){let s=yield this.getComponent(o.typeId);r.set(o.typeId,s),r=new Map([...r,...yield this.buildDependencyTree(s,r)])}return r})}getProjectsInfo(t,r){let o={size:"5"};return t&&(o.page=String(t)),r&&(o.search=r),this.api.get("/project",{errorMessage:"ERROR.PROJECTS.GET_PROJECTS"},o)}getProjectShare(t){return $(this,null,function*(){let r=yield this.api.get(`/share/${t}`,{errorMessage:"ERROR.PROJECTS.OPEN_SHARE"}).toPromise(),o=this.saveMappings(r.data.dependencies,!0);this.setCustomElements(r.data.dependencies.map(c=>c.dependency),"share",!0);let s=this.convertSavedElementsToElements(r.data.elements,o),a=new Oi(new pi(s),{id:this.generateNextId(t),source:"share",name:r.data.name,type:r.data.type});this._projectsCache.set(a.id,a),r.data.type==="comp"&&this.setCustomElements([Xe(Q({},r.data),{link:t})],"share",!0);let l=yield this.api.get(`/share/dependencies/${t}`,{errorMessage:"ERROR.PROJECTS.OPEN_SHARE"}).toPromise();return l.data.dependencies.forEach(c=>this.generateNextId(c.link)),this.setCustomElements(l.data.dependencies,"share",!0),a})}cloneProjectShare(t){return $(this,null,function*(){let r=this._mappings.getKey(t.id),o=yield this.api.get(`/project/clone/${r}`,{errorMessage:"ERROR.PROJECTS.CLONE_SHARE"}).toPromise();return yield this.getProjectOrComponentUuid(o.data.id,t.type)})}saveMappings(t,r=!1){let o=new Map;return t.forEach(s=>{let a=r?s.dependency.link:s.dependency.id;this._mappings.hasKey(a)?o.set(s.model,this._mappings.getValue(a)):this._mappings.set(a,s.model)}),o}setCustomElements(t,r,o=!1){let s=t.map(a=>({id:this._mappings.getValue(o?a.link:a.id),description:a.description,name:a.name,minInputs:a.numInputs,maxInputs:a.numInputs,symbol:a.symbol,numInputs:a.numInputs,numOutputs:a.numOutputs,labels:a.labels}));this.elementProvider.addElements(s,r)}convertSavedElementsToElements(t,r){let o=[];for(let s of t){let a=r.has(s.t)?r.get(s.t):s.t,l=this.elementProvider.getElementById(a);if(!l)continue;let c=this.elementProvider.isCustomElement(a),u={id:0,typeId:a,numInputs:c?l.numInputs:s.i??0,numOutputs:c?l.numOutputs:s.o??0,rotation:s.r??0,data:s.s,pos:new R(s.p[0],s.p[1])};l.hasPlugIndex&&s.n&&(u.plugIndex=s.n[0]),l.hasPlugIndex||(u.options=s.n??l.options),s.q&&(u.endPos=new R(s.q[0],s.q[1])),o.push(u)}return o}convertElementsToSaveElements(t){let r=[];return{elements:t.map(s=>{this.elementProvider.isCustomElement(s.typeId)&&!r.includes(s.typeId)&&r.push(s.typeId);let a=this.elementProvider.getElementById(s.typeId),l={t:s.typeId,p:[s.pos.x,s.pos.y]};return s.rotation!==0&&(l.r=s.rotation),s.numInputs&&s.numInputs!==0&&(l.i=s.numInputs),s.numOutputs&&s.numOutputs!==0&&(l.o=s.numOutputs),a.hasPlugIndex&&s.plugIndex&&(l.n=[s.plugIndex]),!a.hasPlugIndex&&s.options&&(l.n=s.options),s.data&&(l.s=s.data),s.endPos&&s.typeId===0&&(l.q=[s.endPos.x,s.endPos.y]),l}),usedCustomElements:r}}getAllComponentsInfo(){return $(this,null,function*(){if(this.userService.isLoggedIn)try{let t=yield this.api.get("/component",{errorMessage:"ERROR.PROJECTS.GET_COMPS"}).toPromise();t.data.forEach(r=>this.generateNextId(r.id)),this.setCustomElements(t.data,"user")}catch{this.clearElements("user")}else this.clearElements("user")})}generateNextId(t){if(this._mappings.hasKey(t))return this._mappings.getValue(t);t=t??gp();let r=1e3;for(let o of this._mappings.values())o>r&&(r=o);return r+=1,this._mappings.set(t,r),r}getEmptyProject(){return Oi.empty(void 0,this.generateNextId())}clearElements(t){let r=this.elementProvider.getElements(t);for(let o of r)this.removeElement(o.id)}removeElement(t){this._mappings.deleteValue(t),this._projectsCache.delete(t),this.elementProvider.removeElement(t)}getUuidForProject(t){return this._mappings.getKey(t)}};e.\u0275fac=function(r){return new(r||e)(D(Go),D(be),D(rl),D($n),D(vp),D(Sn),D(Ep))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var Ip=(()=>{let e=class e{constructor(){this._loaded=!1,this._loaded$=new An(1)}loadPixiFont(){if(this._loaded===!0)return;this._loaded=!0,io.shared.add("Roboto","assets/bitmap-fonts/roboto.xml").add("DSEG14","assets/bitmap-fonts/dseg14.xml").add("DSEG7","assets/bitmap-fonts/dseg7.xml").load(()=>{this._loaded$.next()})}get loaded$(){return this._loaded$.asObservable()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();function tV(i,e){i&1&&q(0,"img",4)}function nV(i,e){i&1&&q(0,"img",5)}function iV(i,e){if(i&1&&(v(0,"span"),O(1),M(2,"translate"),y()),i&2){let n=A();g(1),K(E(2,1,n.text))}}var fI=(()=>{let e=class e{constructor(t){this.theme=t}ngOnInit(){this.currTheme=this.theme.currentTheme}};e.\u0275fac=function(r){return new(r||e)(x(Re))},e.\u0275cmp=ie({type:e,selectors:[["app-loading-symbol"]],inputs:{text:"text"},decls:4,vars:3,consts:[[1,"loading"],["src","assets/icons/light/loading.svg","alt","loading",4,"ngIf"],["src","assets/icons/dark/loading.svg","alt","loading",4,"ngIf"],[4,"ngIf"],["src","assets/icons/light/loading.svg","alt","loading"],["src","assets/icons/dark/loading.svg","alt","loading"]],template:function(r,o){r&1&&(v(0,"div",0),J(1,tV,1,0,"img",1)(2,nV,1,0,"img",2)(3,iV,3,3,"span",3),y()),r&2&&(g(1),w("ngIf",o.currTheme==="light"),g(1),w("ngIf",o.currTheme==="dark"),g(1),w("ngIf",o.text))},dependencies:[Be,Pe],styles:[".loading[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-content:center}.loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:.25rem}"]});let i=e;return i})();var Ii=(()=>{let e=class e{constructor(t){this.componentFactoryResolver=t,this._tasks=new Set,this._tasks$=new An(1),this._factory=this.componentFactoryResolver.resolveComponentFactory(fI)}get tasks$(){return this._tasks$.asObservable()}add(t,r,o=!1){let s={text:t,container:r,showTextInContainer:o},a=r?.createComponent(this._factory);return a&&o&&(a.instance.text=t),this._tasks.add(s),this._tasks$.next([...this._tasks.values()].map(l=>l.text)),()=>{s.container?.clear(),this._tasks.delete(s),this._tasks$.next([...this._tasks.values()].map(l=>l.text))}}removeAll(){for(let t of this._tasks)t.container?.clear();this._tasks.clear(),this._tasks$.next([])}};e.\u0275fac=function(r){return new(r||e)(D(xn))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var We=(()=>{let e=class e{constructor(t,r,o,s,a,l,c){this.projectSaveManagementService=t,this.popup=r,this.elementProvider=o,this.errorHandling=s,this.pixiLoader=a,this.location=l,this.loadingService=c,this._projects=[],this._projectOpenedSubject=new An,this._projectClosedSubject=new _e,this._projectSwitchSubject=new _e,this._userDefinedElementsReloadSubject=new _e,this._currentlyClosing=new Set,this._currentlyOpening=new Set;let u=this.loadingService.add("LOADING.OPENING_INITIAL_PROJECTS");this.projectSaveManagementService.getInitialProjects().then(d=>{this._projects=d,this._mainProject=d[0],this._currProject=d[0];for(let h of this.allProjects)this._projectOpenedSubject.next(h.id);u()})}get allProjects(){return this._projects}get mainProject(){return this._mainProject}get currProject(){return this._currProject}getProjectById(t){return this._projects.find(r=>r.id===t)}get onProjectOpened$(){return this._projectOpenedSubject.asObservable().pipe(Su(()=>this.pixiLoader.loaded$))}get onProjectClosed$(){return this._projectClosedSubject.asObservable()}get onProjectSwitch$(){return this._projectSwitchSubject.asObservable()}get onUserDefinedElementsReload$(){return this._userDefinedElementsReloadSubject.asObservable()}switchToProject(t){this._currProject=this.getProjectById(t),this._projectSwitchSubject.next(t)}closeProject(t){return $(this,null,function*(){if(!this._currentlyClosing.has(t)){this._currentlyClosing.add(t);try{yield this.saveProject(t),this._projects=this._projects.filter(r=>r.id!==t),this._projectClosedSubject.next(t)}catch(r){console.error(r)}finally{this._currentlyClosing.delete(t)}}})}saveProject(t){return $(this,null,function*(){let r=this.getProjectById(t),o=this.loadingService.add("LOADING.SAVE_PROJECT");switch(r.type){case"comp":yield this.projectSaveManagementService.saveComponent(r);break;case"project":yield this.projectSaveManagementService.saveProject(r);break}o()})}openNewProject(t){return $(this,null,function*(){this._mainProject=t;for(let r of this._projects)yield this.closeProject(r.id);this._projects.push(t),this._projectOpenedSubject.next(t.id)})}saveAllProjects(){return $(this,null,function*(){for(let t of this.allProjects)yield this.saveProject(t.id)})}saveAllComponents(){return $(this,null,function*(){for(let t of this.allProjects.filter(r=>r.type==="comp"))yield this.saveProject(t.id)})}createComponent(t,r,o="",s=!1){return $(this,null,function*(){try{let a=yield this.projectSaveManagementService.createComponent(t,r,o,s);this._projects.push(a),this._projectOpenedSubject.next(a.id),this.errorHandling.showInfo("INFO.PROJECTS.CREATE_COMP",{name:t})}catch(a){console.error(a)}})}openProjectUuid(t){return $(this,null,function*(){let r=this.loadingService.add("LOADING.OPEN_PROJECT");this.projectSaveManagementService.clearElements("share");try{let o=yield this.projectSaveManagementService.getProjectOrComponentUuid(t,"project");yield this.openNewProject(o),this.location.set("project",t),this.errorHandling.showInfo("INFO.PROJECTS.OPEN",{name:o.name})}finally{r()}})}openComponent(t){return $(this,null,function*(){if(this.getProjectById(t)){this.switchToProject(t);return}if(this._currentlyOpening.has(t))return;let r=this.loadingService.add("LOADING.OPEN_COMPONENT");this._currentlyOpening.add(t);try{let o=yield this.projectSaveManagementService.getComponent(t);this._projects.push(o),this._projectOpenedSubject.next(o.id)}finally{this._currentlyOpening.delete(t),r()}})}saveProjectServer(t,r="",o=!1){return $(this,null,function*(){try{let s=yield this.projectSaveManagementService.createProjectServer(t,r,o,this._mainProject),a=yield this.projectSaveManagementService.getProjectOrComponentUuid(s,"project");this._projects.unshift(a),this._projectOpenedSubject.next(a.id),this._mainProject=a;for(let l=1;l<this._projects.length;l++)this._projectClosedSubject.next(this._projects[l].id);this._projects=[this._projects[0]],this.location.set("project",s),this.errorHandling.showInfo("INFO.PROJECTS.SAVE",{name:t})}catch(s){console.error(s)}})}exportToFile(t){return $(this,null,function*(){yield this.projectSaveManagementService.exportToFile(this._mainProject,t),this.errorHandling.showInfo("INFO.PROJECTS.EXPORT_FILE",{name:t??this._mainProject.name})})}openFile(t){return $(this,null,function*(){this.projectSaveManagementService.clearElements("local"),this.projectSaveManagementService.clearElements("share");try{let r=this.projectSaveManagementService.openFile(t);yield this.openNewProject(r),this.location.reset(),this.errorHandling.showInfo("INFO.PROJECTS.OPEN_FILE",{name:r.name})}catch{this.errorHandling.showErrorMessage("ERROR.PROJECTS.INVALID_FILE")}})}openShare(t){return $(this,null,function*(){let r=this.loadingService.add("LOADING.OPEN_SHARE");this.projectSaveManagementService.clearElements("share");try{let o=yield this.projectSaveManagementService.getProjectShare(t);o.type==="comp"?(yield this.openNewProject(this.projectSaveManagementService.getEmptyProject()),this._projects.push(o),this._projectOpenedSubject.next(o.id)):yield this.openNewProject(o),this.location.set("share",t),this.errorHandling.showInfo("INFO.PROJECTS.OPEN_SHARE",{name:o.name})}catch{this.mainProject.source==="share"&&this.newProject()}finally{r()}})}newProject(){return $(this,null,function*(){this.projectSaveManagementService.clearElements("share");let t=this.projectSaveManagementService.getEmptyProject();yield this.openNewProject(t),this.location.reset()})}inputsOutputsCustomComponentChanged(t){if(t.type!=="comp")return;let r=this.elementProvider.getElementById(t.id);t.currState.inputOutputCount(),r.minInputs=t.numInputs,r.maxInputs=t.numInputs,r.numInputs=t.numInputs,r.numOutputs=t.numOutputs,this._projects.forEach(o=>o.updateInputsOutputs(t.id)),this.labelsCustomComponentChanged(t)}labelsCustomComponentChanged(t){if(!t||t.type!=="comp")return;let r=this.elementProvider.getElementById(t.id);r.labels=t.calcLabels(),this._projects.forEach(o=>o.updateLabels(t.id))}askToSave(){return $(this,null,function*(){return this.hasUnsavedProjects?this.popup.showPopup(qx,"POPUP.UNSAVED_CHANGES.TITLE",!1):!0})}get hasUnsavedProjects(){for(let t of this._projects)if(t.saveDirty)return!0;return!1}moveProjectToIndex(t,r){let o=this._projects.filter(s=>s!==t);o.splice(r,0,t),this._projects=o}reloadUserElements(){return $(this,null,function*(){let t=this.loadingService.add("LOADING.RELOAD_ELEMENTS");yield this.projectSaveManagementService.getAllComponentsInfo(),this._userDefinedElementsReloadSubject.next(),this.errorHandling.showInfo("INFO.PROJECTS.RELOADED_ELEMENTS"),t()})}cloneShare(){return $(this,null,function*(){if(this._mainProject.source==="share")try{let t=yield this.projectSaveManagementService.cloneProjectShare(this._mainProject);this.projectSaveManagementService.clearElements("share"),yield this.openNewProject(t),this.location.set("project",this.projectSaveManagementService.getUuidForProject(t.id)),this.errorHandling.showInfo("INFO.PROJECTS.CLONE_SHARE",{name:t.name})}catch(t){console.error(t)}})}};e.\u0275fac=function(r){return new(r||e)(D(Ei),D(hn),D(be),D(Sn),D(Ip),D(rl),D(Ii))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var fi=new fe("WorkerCommunication Injection Token");var Xo=(()=>{let e=class e{constructor(t){this.workerCommunicationService=t,this._tickerFunctions=new Map,this._startedAllCont=!1}addTickerFunction(t,r){this._tickerFunctions.set(t,{fn:this.getTickerFunction(r,t),requestedFrame:!1,started:!1,singleFramePromiseResolveFns:[]}),this._startedAllCont&&this.startTicker(t)}removeTickerFunction(t){this._tickerFunctions.has(t)&&(this.stopTicker(t,!1,!0),this._tickerFunctions.delete(t))}singleFrame(t){let r=this._tickerFunctions.get(t);return new Promise(o=>{if(!r){o();return}!r.started&&!r.requestedFrame&&(r.requestedFrame=!0,Ot.shared.addOnce(r.fn,this)),r.singleFramePromiseResolveFns.push(o)})}startTicker(t){let r=this._tickerFunctions.get(t);r&&!r.started&&(r.started=!0,Ot.shared.add(r.fn,this))}startAllContSim(){this._startedAllCont=!0;for(let t of this._tickerFunctions.keys())this.startTicker(t)}stopAllContSim(){this._startedAllCont=!1;for(let t of this._tickerFunctions.keys())this.stopTicker(t,!0,!0)}stopTicker(t,r=!0,o=!1){if(!this._tickerFunctions.has(t)||this._startedAllCont&&!o)return;let s=this._tickerFunctions.get(t);s.started=!1,s.singleFramePromiseResolveFns=[],Ot.shared.remove(s.fn,this),s.requestedFrame&&r&&Ot.shared.addOnce(s.fn,this)}get FPS(){return Ot.shared.FPS}get frameTime(){return Ot.shared.elapsedMS}getTickerFunction(t,r){return()=>{t();let o=this._tickerFunctions.get(r);o.requestedFrame=!1;for(let s of o.singleFramePromiseResolveFns)s();o.singleFramePromiseResolveFns=[],r==="0"&&this.workerCommunicationService.setFrameTime(this.frameTime)}}};e.\u0275fac=function(r){return new(r||e)(D(fi))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var qo=(()=>{let e=class e{constructor(t,r,o,s){this.workerCommunication=t,this.storage=r,this.renderTicker=o,this.ngZone=s,this._targetMode=!1,this._syncMode=!0,this._targetTickRate=1,this._threadCount=1,this._autoStartSimulation=(this.storage.get("autoStartSim")??"true")==="true"}enterSimulation(){return $(this,null,function*(){yield this.workerCommunication.init(),this._autoStartSimulation&&this.continueSim()})}leaveSimulation(){this.renderTicker.stopAllContSim(),this.workerCommunication.stop()}continueSim(t=!1){!t&&this.simulationRunning||(this._targetMode?this.workerCommunication.startTarget():this._syncMode?this.workerCommunication.startSync():this.workerCommunication.start(this._threadCount),this.ngZone.runOutsideAngular(()=>this.renderTicker.startAllContSim()))}pauseSim(){this.renderTicker.stopAllContSim(),this.workerCommunication.pause()}stopSim(){this.renderTicker.stopAllContSim(),this.workerCommunication.stop()}singleStepSim(){this.workerCommunication.singleStep()}toggleTargetMode(){this._targetMode=!this._targetMode,this._targetMode&&(this.setTarget(this._targetTickRate),this._syncMode=!1),this.simulationRunning&&this.continueSim(!0)}toggleSyncMode(){this._syncMode=!this._syncMode,this._syncMode&&(this._targetMode=!1),this.simulationRunning&&this.continueSim(!0)}setTarget(t){this._targetTickRate=t,this.workerCommunication.setTarget(this._targetTickRate)}get simulationStatus(){return this.workerCommunication.status}get simulationRunning(){return this.workerCommunication.isRunning}setThreadCount(t){this._threadCount&&(this._threadCount=t,this._threadCount<1&&(this._threadCount=1),this._threadCount>512&&(this._threadCount=512),this.simulationRunning&&(this.workerCommunication.pause(),this.continueSim()))}get targetMode(){return this._targetMode}get syncMode(){return this._syncMode}get threadCount(){return this._threadCount}get autoStartSimulation(){return this._autoStartSimulation}set autoStartSimulation(t){this._autoStartSimulation=t,this.storage.set("autoStartSim",t)}};e.\u0275fac=function(r){return new(r||e)(D(fi),D(Xn),D(Xo),D(ye))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var mn=(()=>{let e=class e{constructor(t,r,o,s,a){this.projects=t,this.elemProv=r,this.simulationManagement=o,this.translate=s,this.loadingService=a,this._currentWorkMode=0,this._currentWorkModeSubject=new ts(0),this._simulationModeSubject=new _e,this._currentComponentTypeToBuild=void 0}setWorkMode(t,r){this._currentComponentTypeToBuild=r,this._currentWorkMode=t,this._currentWorkModeSubject.next(t)}enterSimulation(t){return $(this,null,function*(){let r=this.loadingService.add("LOADING.ENTER_SIMULATION",t);yield this.projects.saveAllProjects();try{yield this.simulationManagement.enterSimulation(),delete this._currentComponentTypeToBuild,this._currentWorkMode=7,this._currentWorkModeSubject.next(7),this._simulationModeSubject.next(!0)}finally{r()}})}leaveSimulation(t){return $(this,null,function*(){let r=this.loadingService.add("LOADING.LEAVE_SIMULATION",t);yield this.simulationManagement.leaveSimulation(),delete this._currentComponentTypeToBuild,this._currentWorkMode=0,this._currentWorkModeSubject.next(0),this._simulationModeSubject.next(!1),r()})}get currentWorkMode(){return this._currentWorkMode}get currentWorkMode$(){return this._currentWorkModeSubject.asObservable()}get isSimulationMode$(){return this._simulationModeSubject.asObservable()}get workModeDescription$(){return this._currentWorkModeSubject.pipe(Ni(t=>t===3?this.translate.get(this.elemProv.getElementById(this._currentComponentTypeToBuild).name).pipe(Ni(r=>this.translate.get("WORK_MODE_DES."+t,{comp:r}))):this.translate.get("WORK_MODE_DES."+t)))}get currentComponentToBuild(){return this._currentComponentTypeToBuild}};e.\u0275fac=function(r){return new(r||e)(D(We),D(be),D(qo),D(yn),D(Ii))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var Si=(()=>{let e=class e{constructor(t,r){this.projectsService=t,this.ngZone=r,this._selectedIds=new Map,this._selectedConnections=new Map}selectFromRect(t,r,o){return this.ngZone.run(()=>{this.clearForSelect(t,r,o);let s=this._selectedConnections.get(t.id),a=new Set,l=Ce.inRectChunks(r,o);for(let u of l){let d=t.currState.chunksFromCoords([u])[0];if(!d)continue;let h=Ce.chunkToPoints(new R(u.x,u.y));if(Ce.isRectFullyInRect(h.start,h.end,r,o))d.elements.forEach(p=>{p.typeId!==7&&a.add(p.id)}),d.connectionPoints.forEach(p=>s.push(p));else{for(let p of d.elements)Ce.isElementInFloatRect(p,r,o)&&a.add(p.id);for(let p of d.connectionPoints)Ce.isConPointInRect(p,r,o)&&s.push(p)}}let c=[...a];return this._selectedIds.set(t.id,c),c})}cutFromRect(t,r,o){return this.ngZone.run(()=>{this.clearForSelect(t,r,o);let s=[],a=this._selectedConnections.get(t.id),l=new Set,c=Ce.inRectChunks(r,o);for(let u of t.currState.chunksFromCoords(c)){for(let d of u.elements)d.typeId===0?this.splitAndSelectWire(d,r,o,l,t,s):d.typeId===7?Ce.isElementInFloatRect(d,r,o)&&l.add(d.id):Ce.isRectFullyInRect(d.pos,d.endPos,r,o)&&l.add(d.id);for(let d of u.connectionPoints)Ce.isConPointInRect(d,r,o)&&a.push(d)}return this._selectedIds.set(t.id,[...l]),s.push(...t.currState.specialActions),s.length>0&&t.newState(s,!0),s})}cancelCut(t){t.cancelLastStep()}splitAndSelectWire(t,r,o,s,a,l){let c=Ce.rectCuttingPoints(t,r,o);if(c===void 0)return;let u=[t];for(let d of c)for(let h of u){let p=a.splitWire(h,d);u=[...p.elements],l.push(...p.actions)}for(let d of u)Ce.isElementInFloatRect(d,r,o)&&s.add(d.id)}clearForSelect(t,r,o){Z.correctPosOrder(r,o),this._selectedIds.set(t.id,[]),this._selectedConnections.set(t.id,[])}selectComponent(t,r){this.ngZone.run(()=>{this._selectedIds.set(r??this.projectsService.currProject.id,[t])})}isSingleSelect(t){let r=t??this.projectsService.currProject?.id;return this._selectedIds.has(r)?this._selectedIds.get(r).length===1:!1}selectedIds(t){let r=t??this.projectsService.currProject?.id;return this._selectedIds.has(r)?this._selectedIds.get(r):[]}selectedConnections(t){let r=t??this.projectsService.currProject?.id;return this._selectedConnections.has(r)?this._selectedConnections.get(r):[]}clearSelection(t){this.ngZone.run(()=>{this._selectedIds.delete(t??this.projectsService.currProject.id),this._selectedConnections.delete(t??this.projectsService.currProject.id)})}};e.\u0275fac=function(r){return new(r||e)(D(We),D(ye))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var ny=[{action:"copy",usableIn:"editor",shortcutConfig:{key_code:"C",ctrl:!0}},{action:"paste",usableIn:"editor",shortcutConfig:{key_code:"V",ctrl:!0}},{action:"cut",usableIn:"editor",shortcutConfig:{key_code:"X",ctrl:!0}},{action:"delete",usableIn:"editor",shortcutConfig:{key_code:"Delete"}},{action:"undo",usableIn:"editor",shortcutConfig:{key_code:"Z",ctrl:!0}},{action:"redo",usableIn:"editor",shortcutConfig:{key_code:"Y",ctrl:!0}},{action:"editPlugs",usableIn:"editor"},{action:"zoom100",usableIn:"both",shortcutConfig:{key_code:"0",ctrl:!0}},{action:"zoomIn",usableIn:"both"},{action:"zoomOut",usableIn:"both"},{action:"fullscreen",usableIn:"both",shortcutConfig:{key_code:"F",ctrl:!0,shift:!0}},{action:"connWireMode",usableIn:"editor",shortcutConfig:{key_code:"C"}},{action:"wireMode",usableIn:"editor",shortcutConfig:{key_code:"W"}},{action:"selectMode",usableIn:"editor",shortcutConfig:{key_code:"S"}},{action:"eraserMode",usableIn:"editor",shortcutConfig:{key_code:"E"}},{action:"cutSelectMode",usableIn:"editor",shortcutConfig:{key_code:"S",shift:!0}},{action:"textMode",usableIn:"editor",shortcutConfig:{key_code:"T"}},{action:"newComp",usableIn:"editor",shortcutConfig:{key_code:"N",alt:!0}},{action:"newProj",usableIn:"editor",shortcutConfig:{key_code:"N",alt:!0,ctrl:!0}},{action:"openProj",usableIn:"editor",shortcutConfig:{key_code:"O",ctrl:!0}},{action:"save",usableIn:"editor",shortcutConfig:{key_code:"S",ctrl:!0}},{action:"enterSim",usableIn:"editor",shortcutConfig:{key_code:"ENTER"}},{action:"leaveSim",usableIn:"simulation",shortcutConfig:{key_code:"ESCAPE"}},{action:"startSim",usableIn:"simulation"},{action:"pauseSim",usableIn:"simulation"},{action:"stopSim",usableIn:"simulation"},{action:"singleStepSim",usableIn:"simulation"}];var Ir=(()=>{let e=class e{constructor(t){this.cdr=t,this.onChange=()=>{},this.onTouched=()=>{}}ngOnChanges(){this.checked!==void 0&&(this.state=this.checked)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}writeValue(t){this.state=t,this.cdr.detectChanges()}switchClick(){this.state=!this.state,this.onChange(this.state),this.onTouched()}};e.\u0275fac=function(r){return new(r||e)(x(Zt))},e.\u0275cmp=ie({type:e,selectors:[["app-switch"]],inputs:{checked:"checked"},features:[rn([{provide:di,useExisting:Xt(()=>e),multi:!0}]),cn],decls:2,vars:2,consts:[["tabindex","0",1,"switch",3,"click"],[1,"bubble"]],template:function(r,o){r&1&&(v(0,"div",0),T("click",function(){return o.switchClick()}),q(1,"div",1),y()),r&2&&Ve("off",!o.state)},styles:[".switch[_ngcontent-%COMP%]{width:3rem;height:1.5rem;border-radius:.75rem}.theme-light[_nghost-%COMP%]   .switch[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .switch[_ngcontent-%COMP%]{border:2px solid}.theme-dark[_nghost-%COMP%]   .switch[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .switch[_ngcontent-%COMP%]{border:2px solid}.switch[_ngcontent-%COMP%]:hover{cursor:pointer}.switch[_ngcontent-%COMP%]   .bubble[_ngcontent-%COMP%]{width:calc(1.5rem - 4px);height:calc(1.5rem - 4px);border-radius:50%;position:relative;left:1.5rem;transition:left .1s}.theme-light[_nghost-%COMP%]   .switch[_ngcontent-%COMP%]   .bubble[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .switch[_ngcontent-%COMP%]   .bubble[_ngcontent-%COMP%]{background-color:#27ae60}.theme-dark[_nghost-%COMP%]   .switch[_ngcontent-%COMP%]   .bubble[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .switch[_ngcontent-%COMP%]   .bubble[_ngcontent-%COMP%]{background-color:#27ae60}.switch.off[_ngcontent-%COMP%]   .bubble[_ngcontent-%COMP%]{left:0}.theme-light[_nghost-%COMP%]   .switch.off[_ngcontent-%COMP%]   .bubble[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .switch.off[_ngcontent-%COMP%]   .bubble[_ngcontent-%COMP%]{background-color:#ad2f26}.theme-dark[_nghost-%COMP%]   .switch.off[_ngcontent-%COMP%]   .bubble[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .switch.off[_ngcontent-%COMP%]   .bubble[_ngcontent-%COMP%]{background-color:#cc392f}"]});let i=e;return i})();function oV(i,e){if(i&1){let n=le();v(0,"span",7),T("mouseenter",function(){H(n);let r=A();return W(r.showTooltip=!0)})("mouseleave",function(){H(n);let r=A();return W(r.showTooltip=!1)}),y()}if(i&2){let n=A();Ve("invalid",n.invalid)}}function sV(i,e){if(i&1&&(v(0,"div",8),O(1),y()),i&2){let n=A();g(1),U(" ",n.helpTooltip," ")}}var aV=["*"],Sr=(()=>{let e=class e{constructor(t,r){this.cdr=t,this.controlContainer=r,this.type="text",this.disabled=!1,this.showTooltip=!1,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this.controlContainer&&(this.control=this.controlContainer.control.get(this.formControlName))}get invalid(){return this.control?this.control.touched&&this.control.invalid:!1}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t}writeValue(t){this.state=t,this.cdr.detectChanges()}stateChange(){this.onTouched(),this.onChange(this.state)}};e.\u0275fac=function(r){return new(r||e)(x(Zt),x(Ln,13))},e.\u0275cmp=ie({type:e,selectors:[["app-input"]],inputs:{label:"label",type:"type",helpTooltip:"helpTooltip",formControlName:"formControlName"},features:[rn([{provide:di,useExisting:Xt(()=>e),multi:!0}])],ngContentSelectors:aV,decls:9,vars:15,consts:[[1,"input-group"],[1,"input-container"],["autocomplete","false",3,"type","name","id","ngModel","disabled","ngModelChange"],[3,"for"],["class","tooltip-button",3,"invalid","mouseenter","mouseleave",4,"ngIf"],["class","tooltip",4,"ngIf"],[1,"errors"],[1,"tooltip-button",3,"mouseenter","mouseleave"],[1,"tooltip"]],template:function(r,o){r&1&&(Ca(),v(0,"div",0)(1,"div",1)(2,"input",2),T("ngModelChange",function(a){return o.state=a})("ngModelChange",function(){return o.stateChange()}),y(),v(3,"label",3),O(4),y(),J(5,oV,1,2,"span",4)(6,sV,2,1,"div",5),y(),v(7,"div",6),ba(8),y()()),r&2&&(g(2),Ve("invalid",o.invalid),w("type",o.type)("name",o.label)("id",o.label+"id")("ngModel",o.state)("disabled",o.disabled),g(1),Ve("has-value",o.state)("invalid",o.invalid),w("for",o.label+"id"),g(1),K(o.label),g(1),w("ngIf",o.helpTooltip),g(1),w("ngIf",o.helpTooltip&&o.showTooltip))},dependencies:[Be,In,Et,jn],styles:['.input-group[_ngcontent-%COMP%]{margin-bottom:2rem}.input-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;position:relative}.theme-light[_nghost-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;font-size:1rem;pointer-events:none;left:.25rem;bottom:.25rem;transition:.2s ease all}.theme-light[_nghost-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   label.invalid[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   label.invalid[_ngcontent-%COMP%]{color:#ad2f26}.theme-light[_nghost-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{outline:none;border:none;padding:.25rem;font-size:.9rem;border-bottom:1px solid #000000;color:#000;background-color:#f5f5f5;flex-grow:1}.theme-light[_nghost-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus ~ label[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus ~ label[_ngcontent-%COMP%]{bottom:1.6rem;font-size:.7rem}.theme-light[_nghost-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   input.invalid[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   input.invalid[_ngcontent-%COMP%]{border-bottom:1px solid #ad2f26;color:#ad2f26}.theme-light[_nghost-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .tooltip-button[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .tooltip-button[_ngcontent-%COMP%]{font-size:1rem;width:1.5rem;height:1.7rem;background-size:1.3rem;background-repeat:no-repeat;background-position:center;border-bottom:1px solid #000000;background-image:url("./media/info-V5WMK4A3.svg")}.theme-light[_nghost-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .tooltip-button[_ngcontent-%COMP%]:hover, .theme-light   [_nghost-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .tooltip-button[_ngcontent-%COMP%]:hover{cursor:pointer}.theme-light[_nghost-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .tooltip-button.invalid[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .tooltip-button.invalid[_ngcontent-%COMP%]{border-bottom:1px solid #ad2f26}.theme-light[_nghost-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .tooltip[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .tooltip[_ngcontent-%COMP%]{position:absolute;right:0;bottom:-2.4rem;background-color:#fff;padding:.5rem;border-radius:.3rem;z-index:10}.theme-light[_nghost-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .has-value[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .has-value[_ngcontent-%COMP%]{bottom:1.6rem;font-size:.7rem}.theme-dark[_nghost-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;font-size:1rem;pointer-events:none;left:.25rem;bottom:.25rem;transition:.2s ease all}.theme-dark[_nghost-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   label.invalid[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   label.invalid[_ngcontent-%COMP%]{color:#cc392f}.theme-dark[_nghost-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{outline:none;border:none;padding:.25rem;font-size:.9rem;border-bottom:1px solid #cccccc;color:#ccc;background-color:#262a2b;flex-grow:1}.theme-dark[_nghost-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus ~ label[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus ~ label[_ngcontent-%COMP%]{bottom:1.6rem;font-size:.7rem}.theme-dark[_nghost-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   input.invalid[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   input.invalid[_ngcontent-%COMP%]{border-bottom:1px solid #cc392f;color:#cc392f}.theme-dark[_nghost-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .tooltip-button[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .tooltip-button[_ngcontent-%COMP%]{font-size:1rem;width:1.5rem;height:1.7rem;background-size:1.3rem;background-repeat:no-repeat;background-position:center;border-bottom:1px solid #cccccc;background-image:url("./media/info-PFYBPWYR.svg")}.theme-dark[_nghost-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .tooltip-button[_ngcontent-%COMP%]:hover, .theme-dark   [_nghost-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .tooltip-button[_ngcontent-%COMP%]:hover{cursor:pointer}.theme-dark[_nghost-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .tooltip-button.invalid[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .tooltip-button.invalid[_ngcontent-%COMP%]{border-bottom:1px solid #cc392f}.theme-dark[_nghost-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .tooltip[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .tooltip[_ngcontent-%COMP%]{position:absolute;right:0;bottom:-2.4rem;background-color:#1a1a1a;padding:.5rem;border-radius:.3rem;z-index:10}.theme-dark[_nghost-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .has-value[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .has-value[_ngcontent-%COMP%]{bottom:1.6rem;font-size:.7rem}.input-group[_ngcontent-%COMP%]   .errors[_ngcontent-%COMP%]{display:flex;flex-direction:column}']});let i=e;return i})();function lV(i,e){i&1&&(st(0),v(1,"div"),ba(2),y(),at())}var cV=["*"],al=(()=>{let e=class e{constructor(t){this.control=t}get showError(){return this.error?this.control.touched&&this.control.errors&&this.control.errors[this.error]:this.control.touched}};e.\u0275fac=function(r){return new(r||e)(x(Ji))},e.\u0275cmp=ie({type:e,selectors:[["app-input-error"]],inputs:{error:"error"},ngContentSelectors:cV,decls:1,vars:1,consts:[[4,"ngIf"]],template:function(r,o){r&1&&(Ca(),J(0,lV,3,0,"ng-container",0)),r&2&&w("ngIf",o.showError)},dependencies:[Be],styles:[`.theme-light app-input-error>div{margin-top:.25rem;font-size:.9rem;color:#ad2f26}.theme-dark app-input-error>div{margin-top:.25rem;font-size:.9rem;color:#cc392f}
`],encapsulation:2});let i=e;return i})();var mI=(()=>{let e=class e extends Nt{constructor(t,r){super(),this.formBuilder=t,this.eastereggs=r}ngOnInit(){this.newCompForm=this.formBuilder.group({name:["",[mt.required,mt.maxLength(20)]],symbol:["",[mt.required,mt.maxLength(5)]],description:["",[mt.maxLength(2048)]],public:[!0]})}fromSubmitClick(){return $(this,null,function*(){if(this.newCompForm.invalid)return;let t=this.newCompForm.controls.name.value.toLowerCase().replace(" ","");(t==="asdf"||t==="test")&&this.eastereggs.achieve("LAZ"),this.requestClose.emit(this.newCompForm.value)})}};e.\u0275fac=function(r){return new(r||e)(x(xr),x(nl))},e.\u0275cmp=ie({type:e,selectors:[["app-new-component"]],features:[ke],decls:36,vars:44,consts:[["autocomplete","off",1,"new-component-form",3,"formGroup","ngSubmit"],["formControlName","name","type","text",3,"label","helpTooltip"],["error","required"],["error","maxlength"],["formControlName","symbol","type","text",3,"label","helpTooltip"],["formControlName","description","type","text",3,"label","helpTooltip"],[1,"explanation"],[1,"public-switch"],["formControlName","public"],["type","submit",1,"btn-raised","primary",3,"disabled"]],template:function(r,o){r&1&&(v(0,"form",0),T("ngSubmit",function(){return o.fromSubmitClick()}),v(1,"app-input",1),M(2,"translate"),M(3,"translate"),v(4,"app-input-error",2),O(5),M(6,"translate"),y(),v(7,"app-input-error",3),O(8),M(9,"translate"),y()(),v(10,"app-input",4),M(11,"translate"),M(12,"translate"),v(13,"app-input-error",2),O(14),M(15,"translate"),y(),v(16,"app-input-error",3),O(17),M(18,"translate"),y()(),v(19,"app-input",5),M(20,"translate"),M(21,"translate"),v(22,"app-input-error",3),O(23),M(24,"translate"),y()(),v(25,"p",6),O(26),M(27,"translate"),y(),v(28,"div",7)(29,"p"),O(30),M(31,"translate"),y(),q(32,"app-switch",8),y(),v(33,"button",9),O(34),M(35,"translate"),y()()),r&2&&(w("formGroup",o.newCompForm),g(1),w("label",E(2,16,"POPUP.NEW_COMP.NAME"))("helpTooltip",E(3,18,"POPUP.NEW_COMP.NAME_INFO")),g(4),K(E(6,20,"POPUP.NEW_COMP.NAME_REQUIRED")),g(3),K(E(9,22,"POPUP.NEW_COMP.NAME_MAX_LENGTH")),g(2),w("label",E(11,24,"POPUP.NEW_COMP.SYMBOL"))("helpTooltip",E(12,26,"POPUP.NEW_COMP.SYMBOL_INFO")),g(4),K(E(15,28,"POPUP.NEW_COMP.SYMBOL_REQUIRED")),g(3),K(E(18,30,"POPUP.NEW_COMP.SYMBOL_MAX_LENGTH")),g(2),w("label",E(20,32,"POPUP.NEW_COMP.DESCRIPTION"))("helpTooltip",E(21,34,"POPUP.NEW_COMP.DESCRIPTION_INFO")),g(4),K(E(24,36,"POPUP.NEW_COMP.DESCRIPTION_MAX_LENGTH")),g(3),U(" ",E(27,38,"POPUP.NEW_COMP.PUBLIC_EXPLANATION")," "),g(4),K(E(31,40,"POPUP.NEW_COMP.PUBLIC")),g(3),w("disabled",o.newCompForm.invalid),g(1),U(" ",E(35,42,"POPUP.NEW_COMP.CREATE")," "))},dependencies:[Uo,Et,wr,Mi,ao,Ir,Sr,al,Pe],styles:[".new-component-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:2rem 1.5rem;max-width:30rem}.new-component-form[_ngcontent-%COMP%]   .explanation[_ngcontent-%COMP%]{margin:0 0 1rem}.new-component-form[_ngcontent-%COMP%]   .public-switch[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:.5rem 0 1rem}.new-component-form[_ngcontent-%COMP%]   .public-switch[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{margin:0}"],changeDetection:0});let i=e;return i})();function uV(i,e){i&1&&q(0,"img",5)}function dV(i,e){i&1&&q(0,"img",6)}var gI=(()=>{let e=class e{constructor(t,r){this.http=t,this.theme=r,this.accept="*",this.isDragging=!1,this.isDisabled=!1,this.onChange=()=>{},this.onTouch=()=>{}}ngOnInit(){this.currTheme=this.theme.currentTheme}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouch=t}setDisabledState(t){this.isDisabled=t}writeValue(t){this.onChange(t)}onDragStart(t){t.preventDefault(),t.stopPropagation(),this.isDragging=!0}onDragStop(t){t.preventDefault(),t.stopPropagation(),this.isDragging=!1}onDrop(t){t.preventDefault(),t.stopPropagation(),this.isDragging=!1,t.dataTransfer.files&&this.onChange(t.dataTransfer.files[0])}fileChange(t){let o=t.target.files;o&&o.length>0&&this.onChange(o[0])}};e.\u0275fac=function(r){return new(r||e)(x(bs),x(Re))},e.\u0275cmp=ie({type:e,selectors:[["app-file-input"]],inputs:{accept:"accept"},features:[rn([{provide:di,useExisting:Xt(()=>e),multi:!0}])],decls:7,vars:10,consts:[["tabindex","0",1,"upload-container",3,"dragenter","dragstart","dragover","drag","dragend","dragleave","drop","click"],["type","file",3,"accept","disabled","change"],["fileInput",""],["src","assets/icons/light/cloud_upload.svg","alt","Upload",4,"ngIf"],["src","assets/icons/dark/cloud_upload.svg","alt","Upload",4,"ngIf"],["src","assets/icons/light/cloud_upload.svg","alt","Upload"],["src","assets/icons/dark/cloud_upload.svg","alt","Upload"]],template:function(r,o){if(r&1){let s=le();v(0,"div",0),T("dragenter",function(l){return o.onDragStart(l)})("dragstart",function(l){return o.onDragStart(l)})("dragover",function(l){return o.onDragStart(l)})("drag",function(l){return o.onDragStart(l)})("dragend",function(l){return o.onDragStop(l)})("dragleave",function(l){return o.onDragStop(l)})("drop",function(l){return o.onDrop(l)})("click",function(){H(s);let l=ii(2);return W(l.click())}),v(1,"input",1,2),T("change",function(l){return o.fileChange(l)}),y(),J(3,uV,1,0,"img",3)(4,dV,1,0,"img",4),v(5,"p"),O(6,"Drop your files here."),y()()}r&2&&(Ve("dragging",o.isDragging)("disabled",o.isDisabled)("enabled",!o.isDisabled),g(1),w("accept",o.accept)("disabled",o.isDisabled),g(2),w("ngIf",o.currTheme==="light"),g(1),w("ngIf",o.currTheme==="dark"))},dependencies:[Be],styles:[".upload-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;border-radius:.5rem;padding:.5rem;width:100%;height:100%}.theme-light[_nghost-%COMP%]   .upload-container[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .upload-container[_ngcontent-%COMP%]{border:2px dashed #27ae60}.theme-dark[_nghost-%COMP%]   .upload-container[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .upload-container[_ngcontent-%COMP%]{border:2px dashed #27ae60}.upload-container.enabled[_ngcontent-%COMP%]{cursor:pointer}.theme-light[_nghost-%COMP%]   .upload-container.enabled[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .upload-container.enabled[_ngcontent-%COMP%]{background-color:#d1d1d1}.theme-dark[_nghost-%COMP%]   .upload-container.enabled[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .upload-container.enabled[_ngcontent-%COMP%]{background-color:#3a4042}.upload-container.disabled[_ngcontent-%COMP%]{cursor:not-allowed}.theme-light[_nghost-%COMP%]   .upload-container.disabled[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .upload-container.disabled[_ngcontent-%COMP%]{background-color:#b8b8b8}.theme-dark[_nghost-%COMP%]   .upload-container.disabled[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .upload-container.disabled[_ngcontent-%COMP%]{background-color:#525a5d}.upload-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.upload-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{transition:all .5s ease;margin:0}.theme-light[_nghost-%COMP%]   .upload-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .upload-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#000}.theme-dark[_nghost-%COMP%]   .upload-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .upload-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ccc}.upload-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;height:100%}.upload-container.dragging[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:0}"]});let i=e;return i})();function pV(i,e){i&1&&(v(0,"div",14)(1,"p",15),O(2),M(3,"translate"),y(),v(4,"p",16),O(5),M(6,"translate"),y()()),i&2&&(g(2),K(E(3,2,"POPUP.OPEN.NAME")),g(3),K(E(6,4,"POPUP.OPEN.EDITED")))}function fV(i,e){i&1&&(v(0,"div")(1,"p",17),O(2),M(3,"translate"),y()()),i&2&&(g(2),K(E(3,1,"POPUP.OPEN.NOTHING_FOUND")))}function mV(i,e){if(i&1){let n=le();v(0,"div",18)(1,"p",15),O(2),y(),v(3,"p",16),O(4),M(5,"date"),y(),v(6,"button",19),T("click",function(){let o=H(n).$implicit,s=A(3);return W(s.openServer(o.id))}),O(7),M(8,"translate"),y()()}if(i&2){let n=e.$implicit;g(2),K(n.name),g(2),K(xo(5,3,n.lastEdited,"medium")),g(3),U(" ",E(8,6,"POPUP.OPEN.OPEN")," ")}}function gV(i,e){if(i&1&&(st(0),J(1,pV,7,6,"div",12)(2,fV,4,3,"div",9)(3,mV,9,8,"div",13),at()),i&2){let n=e.ngIf;g(1),w("ngIf",n.count>0),g(1),w("ngIf",n.count===0),g(1),w("ngForOf",n.entries)}}function _V(i,e){if(i&1){let n=le();v(0,"button",21),T("click",function(){H(n);let r=A().$implicit,o=A(2);return W(o.pageButtonClick(r.target))}),O(1),y()}if(i&2){let n=A().$implicit;Ve("is-active",n.active),w("disabled",n.disabled),g(1),U(" ",n.value," ")}}function vV(i,e){if(i&1&&(st(0),J(1,_V,2,4,"button",20),at()),i&2){let n=e.$implicit;g(1),w("ngIf",!n.hidden)}}function yV(i,e){if(i&1){let n=le();v(0,"div",8)(1,"app-input",3),T("ngModelChange",function(r){H(n);let o=A();return W(o.searchText=r)})("ngModelChange",function(){H(n);let r=A();return W(r.searchTextChanged())}),M(2,"translate"),y(),J(3,gV,4,3,"ng-container",9),v(4,"div",10),J(5,vV,2,1,"ng-container",11),y()()}if(i&2){let n=A();g(1),w("label",E(2,4,"POPUP.OPEN.SEARCH"))("ngModel",n.searchText),g(2),w("ngIf",n.projectsList),g(2),w("ngForOf",n.paginationButtons)}}var _I=(()=>{let e=class e extends Nt{constructor(t,r,o){super(),this.user=t,this.projectSave=r,this.cdr=o,this.paginationButtons=[],this.searchTextChange=new _e}ngOnInit(){this.isLoggedIn&&(this.getProjectList(0),this.searchTextChange.pipe(Sf(500)).subscribe(()=>this.getProjectList(0)))}get isLoggedIn(){return this.user.isLoggedIn}searchTextChanged(){this.searchTextChange.next()}getProjectList(t){return $(this,null,function*(){this.projectsList=yield this.projectSave.getProjectsInfo(t,this.searchText!==""?this.searchText:void 0).pipe(xt(r=>r.data)).toPromise(),this.updatePagination(),this.cdr.detectChanges()})}pageButtonClick(t){this.getProjectList(t)}updatePagination(){this.paginationButtons.length===0&&(this.paginationButtons=Array.from(Array(7),(s,a)=>{let l={hidden:!1,disabled:!1,active:!1,value:"",target:0};switch(a){case 0:l.value="<<";break;case 1:l.value="<";break;case 5:l.value=">";break;case 6:l.value=">>";break}return l}));let t=new Array(7);t[0]=this.projectsList.page>0?0:void 0,t[1]=this.projectsList.page>0?this.projectsList.page-1:void 0,t[2]=void 0,t[3]=void 0,t[4]=void 0;let r,o;this.projectsList.page===0?(r=0,o=this.projectsList.total>3?3:this.projectsList.total-1):this.projectsList.page===this.projectsList.total-1?(r=Math.max(this.projectsList.total-3,0),o=this.projectsList.total-1):(r=this.projectsList.page-1,o=this.projectsList.page+1);for(let s=r,a=2;s<=o;s++,a++)t[a]=s;t[5]=this.projectsList.page<this.projectsList.total-1?this.projectsList.page+1:void 0,t[6]=this.projectsList.page<this.projectsList.total-1?this.projectsList.total-1:void 0,this.paginationButtons.forEach((s,a)=>{a<=1||a>=5?(s.hidden=!1,s.disabled=t[a]===void 0):(s.disabled=!1,s.hidden=t[a]===void 0,s.active=t[a]===this.projectsList.page,s.value=t[a]+1),s.target=t[a]})}openServer(t){this.requestClose.emit({type:"server",data:t})}openFile(){this.requestClose.emit({type:"local",data:this.fileToOpen})}openShare(){let t;this.shareLinkId.includes("/")?t=this.shareLinkId.substring(this.shareLinkId.lastIndexOf("/")+1):t=this.shareLinkId,this.requestClose.emit({type:"share",data:t})}};e.\u0275fac=function(r){return new(r||e)(x($n),x(Ei),x(Zt))},e.\u0275cmp=ie({type:e,selectors:[["app-open-project"]],features:[ke],decls:25,vars:23,consts:[[1,"open-project"],["class","open-server",4,"ngIf"],[1,"open-share"],[3,"label","ngModel","ngModelChange"],[1,"btn-outline","primary","open-button",3,"disabled","click"],[1,"open-file-headline"],[1,"file-upload"],["accept",".json",3,"ngModel","ngModelChange"],[1,"open-server"],[4,"ngIf"],[1,"pagination-buttons"],[4,"ngFor","ngForOf"],["class","single-project-server table-header",4,"ngIf"],["class","single-project-server",4,"ngFor","ngForOf"],[1,"single-project-server","table-header"],[1,"name"],[1,"last-edit"],[1,"not-found"],[1,"single-project-server"],[1,"btn-outline","primary","small","open-button",3,"click"],["class","btn-outline secondary small",3,"disabled","is-active","click",4,"ngIf"],[1,"btn-outline","secondary","small",3,"disabled","click"]],template:function(r,o){r&1&&(v(0,"div",0),J(1,yV,6,6,"div",1),v(2,"div")(3,"h2"),O(4),M(5,"translate"),y(),v(6,"div",2)(7,"app-input",3),T("ngModelChange",function(a){return o.shareLinkId=a}),M(8,"translate"),y(),v(9,"button",4),T("click",function(){return o.openShare()}),O(10),M(11,"translate"),y()()(),v(12,"div")(13,"h2",5),O(14),M(15,"translate"),y(),v(16,"div",6)(17,"app-file-input",7),T("ngModelChange",function(a){return o.fileToOpen=a}),y(),v(18,"div")(19,"p"),O(20),M(21,"translate"),y(),v(22,"button",4),T("click",function(){return o.openFile()}),O(23),M(24,"translate"),y()()()()()),r&2&&(g(1),w("ngIf",o.isLoggedIn),g(3),K(E(5,11,"POPUP.OPEN.OPEN_SHARE")),g(3),w("label",E(8,13,"POPUP.OPEN.SHARE_LABEL"))("ngModel",o.shareLinkId),g(2),w("disabled",!o.shareLinkId),g(1),U(" ",E(11,15,"POPUP.OPEN.OPEN")," "),g(4),K(E(15,17,"POPUP.OPEN.OPEN_FILE")),g(3),w("ngModel",o.fileToOpen),g(3),U(" ",o.fileToOpen?o.fileToOpen.name:E(21,19,"POPUP.OPEN.NO_FILE")," "),g(2),w("disabled",!o.fileToOpen||o.fileToOpen.type!=="application/json"),g(1),U(" ",E(24,21,"POPUP.OPEN.OPEN")," "))},dependencies:[sn,Be,Et,jn,Sr,gI,Ww,Pe],styles:[".open-project[_ngcontent-%COMP%]{margin:1rem 1.5rem}.open-project[_ngcontent-%COMP%]   .open-button[_ngcontent-%COMP%]{height:2rem}.open-project[_ngcontent-%COMP%]   .open-server[_ngcontent-%COMP%]{margin-top:1rem}.open-project[_ngcontent-%COMP%]   .open-server[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]{margin-top:-1rem}.open-project[_ngcontent-%COMP%]   .open-server[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:600}.open-project[_ngcontent-%COMP%]   .open-server[_ngcontent-%COMP%]   .not-found[_ngcontent-%COMP%]{margin-top:-1.5rem;text-align:center}.open-project[_ngcontent-%COMP%]   .open-server[_ngcontent-%COMP%]   .single-project-server[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;margin-bottom:.25rem}.open-project[_ngcontent-%COMP%]   .open-server[_ngcontent-%COMP%]   .single-project-server[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:.25rem;margin-bottom:.25rem}.open-project[_ngcontent-%COMP%]   .open-server[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{min-width:7rem}.open-project[_ngcontent-%COMP%]   .open-server[_ngcontent-%COMP%]   .last-edit[_ngcontent-%COMP%]{flex:1}.open-project[_ngcontent-%COMP%]   .open-server[_ngcontent-%COMP%]   .pagination-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center}.theme-light[_nghost-%COMP%]   .open-project[_ngcontent-%COMP%]   .open-server[_ngcontent-%COMP%]   .pagination-buttons[_ngcontent-%COMP%]   .is-active[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .open-project[_ngcontent-%COMP%]   .open-server[_ngcontent-%COMP%]   .pagination-buttons[_ngcontent-%COMP%]   .is-active[_ngcontent-%COMP%]{background-color:#27ae60;border-color:#27ae60;color:#000}.theme-light[_nghost-%COMP%]   .open-project[_ngcontent-%COMP%]   .open-server[_ngcontent-%COMP%]   .pagination-buttons[_ngcontent-%COMP%]   .is-active[_ngcontent-%COMP%]:hover, .theme-light   [_nghost-%COMP%]   .open-project[_ngcontent-%COMP%]   .open-server[_ngcontent-%COMP%]   .pagination-buttons[_ngcontent-%COMP%]   .is-active[_ngcontent-%COMP%]:hover{background-color:#27ae60b3}.theme-light[_nghost-%COMP%]   .open-project[_ngcontent-%COMP%]   .open-server[_ngcontent-%COMP%]   .pagination-buttons[_ngcontent-%COMP%]   .is-active[_ngcontent-%COMP%]:active, .theme-light   [_nghost-%COMP%]   .open-project[_ngcontent-%COMP%]   .open-server[_ngcontent-%COMP%]   .pagination-buttons[_ngcontent-%COMP%]   .is-active[_ngcontent-%COMP%]:active{background-color:#27ae60}.theme-dark[_nghost-%COMP%]   .open-project[_ngcontent-%COMP%]   .open-server[_ngcontent-%COMP%]   .pagination-buttons[_ngcontent-%COMP%]   .is-active[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .open-project[_ngcontent-%COMP%]   .open-server[_ngcontent-%COMP%]   .pagination-buttons[_ngcontent-%COMP%]   .is-active[_ngcontent-%COMP%]{background-color:#27ae60;border-color:#27ae60;color:#000}.theme-dark[_nghost-%COMP%]   .open-project[_ngcontent-%COMP%]   .open-server[_ngcontent-%COMP%]   .pagination-buttons[_ngcontent-%COMP%]   .is-active[_ngcontent-%COMP%]:hover, .theme-dark   [_nghost-%COMP%]   .open-project[_ngcontent-%COMP%]   .open-server[_ngcontent-%COMP%]   .pagination-buttons[_ngcontent-%COMP%]   .is-active[_ngcontent-%COMP%]:hover{background-color:#27ae60b3}.theme-dark[_nghost-%COMP%]   .open-project[_ngcontent-%COMP%]   .open-server[_ngcontent-%COMP%]   .pagination-buttons[_ngcontent-%COMP%]   .is-active[_ngcontent-%COMP%]:active, .theme-dark   [_nghost-%COMP%]   .open-project[_ngcontent-%COMP%]   .open-server[_ngcontent-%COMP%]   .pagination-buttons[_ngcontent-%COMP%]   .is-active[_ngcontent-%COMP%]:active{background-color:#27ae60}.open-project[_ngcontent-%COMP%]   .open-share[_ngcontent-%COMP%]{display:flex;flex-direction:row;padding-top:.2rem}.open-project[_ngcontent-%COMP%]   .open-share[_ngcontent-%COMP%]   app-input[_ngcontent-%COMP%]{flex-grow:1;margin-right:1rem}.open-project[_ngcontent-%COMP%]   .open-file-headline[_ngcontent-%COMP%]{margin-top:0}.open-project[_ngcontent-%COMP%]   .file-upload[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}.open-project[_ngcontent-%COMP%]   .file-upload[_ngcontent-%COMP%]   app-file-input[_ngcontent-%COMP%]{width:100%;height:5rem}.open-project[_ngcontent-%COMP%]   .file-upload[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:.83rem;align-items:center}.open-project[_ngcontent-%COMP%]   .file-upload[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}"],changeDetection:0});let i=e;return i})();function CV(i,e){if(i&1){let n=le();v(0,"button",8),T("click",function(){H(n);let r=A();return W(r.saveToServer())}),O(1),M(2,"translate"),y()}if(i&2){let n=A();w("disabled",n.saveForm.invalid),g(1),U(" ",E(2,2,"POPUP.SAVE.CLOUD")," ")}}var vI=(()=>{let e=class e extends Nt{constructor(t,r){super(),this.user=t,this.formBuilder=r}ngOnInit(){this.saveForm=this.formBuilder.group({name:["",[mt.required,mt.minLength(2),mt.maxLength(20),mt.pattern("^.+$")]],description:["",[mt.maxLength(1e3)]],public:[!0]})}get isLoggedIn(){return this.user.isLoggedIn}saveToServer(){return $(this,null,function*(){this.requestClose.emit(Q({target:"server"},this.saveForm.value))})}exportProject(){this.requestClose.emit(Q({target:"local"},this.saveForm.value))}};e.\u0275fac=function(r){return new(r||e)(x($n),x(xr))},e.\u0275cmp=ie({type:e,selectors:[["app-save-as"]],features:[ke],decls:28,vars:33,consts:[[3,"formGroup"],["formControlName","name",3,"label","helpTooltip"],["error","required"],["error","maxlength"],["formControlName","description",3,"label","helpTooltip"],[1,"explanation"],[1,"public-switch"],["formControlName","public"],[1,"btn-raised","primary",3,"disabled","click"],["class","btn-raised primary",3,"disabled","click",4,"ngIf"]],template:function(r,o){r&1&&(v(0,"form",0)(1,"app-input",1),M(2,"translate"),M(3,"translate"),v(4,"app-input-error",2),O(5),M(6,"translate"),y(),v(7,"app-input-error",3),O(8),M(9,"translate"),y()(),v(10,"app-input",4),M(11,"translate"),M(12,"translate"),v(13,"app-input-error",3),O(14),M(15,"translate"),y()(),v(16,"p",5),O(17),M(18,"translate"),y(),v(19,"div",6)(20,"p"),O(21),M(22,"translate"),y(),q(23,"app-switch",7),y(),v(24,"button",8),T("click",function(){return o.exportProject()}),O(25),M(26,"translate"),y(),J(27,CV,3,4,"button",9),y()),r&2&&(w("formGroup",o.saveForm),g(1),w("label",E(2,13,"POPUP.SAVE.NAME"))("helpTooltip",E(3,15,"POPUP.SAVE.NAME_INFO")),g(4),K(E(6,17,"POPUP.NEW_COMP.NAME_REQUIRED")),g(3),K(E(9,19,"POPUP.NEW_COMP.NAME_MAX_LENGTH")),g(2),w("label",E(11,21,"POPUP.NEW_COMP.DESCRIPTION"))("helpTooltip",E(12,23,"POPUP.SAVE.DESCRIPTION_INFO")),g(4),K(E(15,25,"POPUP.NEW_COMP.DESCRIPTION_MAX_LENGTH")),g(3),U(" ",E(18,27,"POPUP.NEW_COMP.PUBLIC_EXPLANATION")," "),g(4),K(E(22,29,"POPUP.NEW_COMP.PUBLIC")),g(3),w("disabled",o.saveForm.invalid),g(1),U(" ",E(26,31,"POPUP.SAVE.DOWNLOAD")," "),g(2),w("ngIf",o.isLoggedIn))},dependencies:[Be,Uo,Et,wr,Mi,ao,Ir,Sr,al,Pe],styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:2rem 1.5rem;max-width:30rem}form[_ngcontent-%COMP%]   .explanation[_ngcontent-%COMP%]{margin:0 0 1rem}form[_ngcontent-%COMP%]   .public-switch[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:.5rem 0 1rem}form[_ngcontent-%COMP%]   .public-switch[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{margin:0}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:1rem}"],changeDetection:0});let i=e;return i})();var bV=["loadingRef"],yI=(()=>{let e=class e extends Nt{constructor(t,r,o,s){super(),this.api=t,this.projectSaveManagement=r,this.cdr=o,this.loadingService=s}ngOnInit(){return $(this,null,function*(){this.isPublic=this.inputFromOpener.isPublic,this.link=this.getShareLink(this.inputFromOpener.link)})}copyLink(){let t=document.createElement("textarea");t.value=this.link,document.body.appendChild(t),t.select(),document.execCommand("copy"),t.remove()}regenerateLink(){return $(this,null,function*(){let t=this.loadingService.add("LOADING.SHARE_REGENERATE_LINK",this._loadingRef,!0);try{let r=yield this.api.patch(`/project/${this.getProjectUuid()}`,{updateLink:!0},{errorMessage:"ERROR.PROJECTS.REGENERATE_SHARE_LINK"}).toPromise();this.inputFromOpener.link=r.data.link,this.link=this.getShareLink(r.data.link)}finally{t(),this.cdr.detectChanges()}})}saveClick(){return $(this,null,function*(){if(this.inputFromOpener.isPublic===this.isPublic){this.requestClose.emit();return}let t=this.loadingService.add("LOADING.UPDATE_SHARE_INFO",this._loadingRef,!0);try{let r=yield this.api.patch(`/project/${this.getProjectUuid()}`,{public:this.isPublic},{errorMessage:"ERROR.PROJECTS.UPDATE_SHARE_INFO"}).toPromise();this.inputFromOpener.isPublic=r.data.public,this.requestClose.emit()}finally{t()}})}cancelClick(){this.requestClose.emit()}getProjectUuid(){return this.projectSaveManagement.getUuidForProject(this.inputFromOpener.id)}getShareLink(t){return C.url+"/share/"+t}};e.\u0275fac=function(r){return new(r||e)(x(Go),x(Ei),x(Zt),x(Ii))},e.\u0275cmp=ie({type:e,selectors:[["app-share-project"]],viewQuery:function(r,o){if(r&1&&et(bV,7,dn),r&2){let s;Je(s=tt())&&(o._loadingRef=s.first)}},features:[ke],decls:33,vars:26,consts:[[1,"share"],[1,"explanation"],[1,"link-head"],[1,"link"],["type","button",1,"btn-outline","primary","link-copy",3,"click"],["type","button",1,"btn-outline","secondary","link-regenerate",3,"click"],[1,"regenerate-warn"],[1,"public-switch"],[3,"ngModel","ngModelChange"],[1,"buttons"],["type","button",1,"btn-raised","secondary","cancel",3,"click"],["type","submit",1,"btn-raised","primary","submit",3,"click"],["loadingRef",""]],template:function(r,o){r&1&&(v(0,"div",0)(1,"p",1),O(2),M(3,"translate"),y(),v(4,"h4",2),O(5),M(6,"translate"),y(),v(7,"div",3)(8,"p"),O(9),y(),v(10,"button",4),T("click",function(){return o.copyLink()}),O(11),M(12,"translate"),y(),v(13,"button",5),T("click",function(){return o.regenerateLink()}),O(14),M(15,"translate"),y()(),v(16,"p",6),O(17),M(18,"translate"),y(),v(19,"div",7)(20,"p"),O(21),M(22,"translate"),y(),v(23,"app-switch",8),T("ngModelChange",function(a){return o.isPublic=a}),y()(),v(24,"div",9)(25,"button",10),T("click",function(){return o.cancelClick()}),O(26),M(27,"translate"),y(),v(28,"button",11),T("click",function(){return o.saveClick()}),O(29),M(30,"translate"),y()(),Hi(31,null,12),y()),r&2&&(g(2),K(E(3,10,"POPUP.SHARE.EXPLANATION")),g(3),K(E(6,12,"POPUP.SHARE.LINK")),g(4),K(o.link),g(2),U(" ",E(12,14,"POPUP.SHARE.COPY")," "),g(3),U(" ",E(15,16,"POPUP.SHARE.REGENERATE")," "),g(3),K(E(18,18,"POPUP.SHARE.REGENERATE_WARN")),g(4),K(E(22,20,"POPUP.SHARE.PUBLIC")),g(2),w("ngModel",o.isPublic),g(3),U(" ",E(27,22,"POPUP.SHARE.CANCEL")," "),g(3),U(" ",E(30,24,"POPUP.SHARE.SAVE")," "))},dependencies:[Et,jn,Ir,Pe],styles:[".share[_ngcontent-%COMP%]{max-width:30rem;padding:1rem}.share[_ngcontent-%COMP%]   .explanation[_ngcontent-%COMP%]{margin:0 0 1rem}.share[_ngcontent-%COMP%]   .public-switch[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:.5rem 0 1rem}.share[_ngcontent-%COMP%]   .public-switch[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{margin:0}.share[_ngcontent-%COMP%]   .link-head[_ngcontent-%COMP%]{margin:1rem 0 .5rem}.share[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin:.5rem 0}.share[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{scrollbar-width:thin;overflow:scroll;margin:0 .5rem 0 0;height:1.5rem;white-space:nowrap}.theme-light[_nghost-%COMP%]   .share[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]::-webkit-scrollbar-track, .theme-light   [_nghost-%COMP%]   .share[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#f5f5f5}.theme-dark[_nghost-%COMP%]   .share[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]::-webkit-scrollbar-track, .theme-dark   [_nghost-%COMP%]   .share[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#262a2b}.share[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:3px}.share[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:0}.theme-light[_nghost-%COMP%]   .share[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, .theme-light   [_nghost-%COMP%]   .share[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#d1d1d1}.theme-dark[_nghost-%COMP%]   .share[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, .theme-dark   [_nghost-%COMP%]   .share[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#3a4042}.theme-light[_nghost-%COMP%]   .share[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%] > p[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .share[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{scrollbar-color:#d1d1d1 #f5f5f5}.theme-dark[_nghost-%COMP%]   .share[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%] > p[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .share[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{scrollbar-color:#3a4042 #262a2b}.share[_ngcontent-%COMP%]   .link-regenerate[_ngcontent-%COMP%]{white-space:nowrap;margin-left:.5rem}.share[_ngcontent-%COMP%]   .regenerate-warn[_ngcontent-%COMP%]{margin-top:.5rem;margin-bottom:1rem}.share[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;margin-bottom:1rem}.share[_ngcontent-%COMP%]   .cancel[_ngcontent-%COMP%]{margin-right:.5rem}.share[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]{margin-left:.5rem;min-width:4rem}"],changeDetection:0});let i=e;return i})();var PV=["compInputs"],wV=["compOutputs"];function xV(i,e){if(i&1){let n=le();v(0,"div",8,9)(2,"input",10),T("keypress",function(r){H(n);let o=A();return W(o.onChange(r))}),y(),v(3,"div",11),T("mousedown",function(r){H(n);let o=ii(1),s=A();return W(s.mouseDown(r,o,"input"))}),q(4,"div",12),y()()}if(i&2){let n=e.$implicit;g(2),w("formControl",n)}}function MV(i,e){if(i&1){let n=le();v(0,"div",8,9)(2,"input",10),T("keypress",function(r){H(n);let o=A();return W(o.onChange(r))}),y(),v(3,"div",11),T("mousedown",function(r){H(n);let o=ii(1),s=A();return W(s.mouseDown(r,o,"output"))}),q(4,"div",12),y()()}if(i&2){let n=e.$implicit;g(2),w("formControl",n)}}var CI=(()=>{let e=class e extends Nt{constructor(t,r){super(),this.formBuilder=t,this.projectsService=r,this._destroySubject=new _e,this._inputStates=[],this._outputStates=[]}ngOnInit(){let t=this.inputFromOpener.currState.allPlugs();this._inputPlugs=t.slice(0,this.inputFromOpener.numInputs),this._outputPlugs=t.slice(this.inputFromOpener.numInputs),this.inputLabelsForm=this.formBuilder.group({labels:this.formBuilder.array(this._inputPlugs.map(r=>this.formBuilder.control(r.data??"IN",[mt.maxLength(5),mt.pattern(/^[^,]*$/)])))}),this.outputLabelsForm=this.formBuilder.group({labels:this.formBuilder.array(this._outputPlugs.map(r=>this.formBuilder.control(r.data??"OUT",[mt.maxLength(5),mt.pattern(/^[^,]*$/)])))})}ngAfterViewInit(){for(let t of this._compInputs.nativeElement.children)this._inputStates.push({element:t,pos:t.offsetTop,adjustment:0});for(let t of this._compOutputs.nativeElement.children)this._outputStates.push({element:t,pos:t.offsetTop,adjustment:0});ut(window,"mouseup").pipe(xe(this._destroySubject)).subscribe(()=>this.mouseUp()),ut(window,"mousemove").pipe(xe(this._destroySubject)).subscribe(t=>this.mouseMove(t))}get inputLabelsControls(){return this.inputLabelsForm.controls.labels.controls}get outputLabelsControls(){return this.outputLabelsForm.controls.labels.controls}mouseDown(t,r,o){t.button===0&&(t.preventDefault(),this._currentlyDragging=o,this._dragStart=t.clientY,this._dragElement=this._inputStates.find(s=>s.element===r)||this._outputStates.find(s=>s.element===r),this._dragElement.element.style.transitionDuration="0s")}mouseUp(){if(this._currentlyDragging){this._dragElement.element.style.transitionDuration="";let t=this._currentlyDragging==="input"?this._inputStates:this._outputStates;for(let r of t)r.adjustment=Math.round(Number(r.element.style.top.replace("px","")||"0")/r.element.offsetHeight);this._dragElement.adjustment=Math.min(this._dragElement.adjustment,t.length-1-this._dragElement.pos/this._dragElement.element.offsetHeight),this._dragElement.element.style.top=this._dragElement.adjustment*this._dragElement.element.offsetHeight+"px",this._currentlyDragging=void 0}}mouseMove(t){if(this._currentlyDragging){let r=this._dragElement.adjustment*this._dragElement.element.offsetHeight,o=t.clientY-this._dragStart+r;if(o+this._dragElement.pos+this._dragElement.element.offsetHeight>this._compInputs.nativeElement.offsetHeight)return;if(o+this._dragElement.pos<0)return;this._dragElement.element.style.top=o+"px";for(let s of this._currentlyDragging==="input"?this._inputStates:this._outputStates){if(s===this._dragElement)continue;let a=s.pos+s.adjustment*s.element.offsetHeight;a+s.element.offsetHeight/2<=this._dragElement.pos+r&&a+s.element.offsetHeight/2>this._dragElement.element.offsetTop?s.element.style.top=this._dragElement.element.offsetHeight+s.adjustment*s.element.offsetHeight+"px":a-s.element.offsetHeight/2>this._dragElement.pos+r&&a-s.element.offsetHeight/2<=this._dragElement.element.offsetTop?s.element.style.top=-this._dragElement.element.offsetHeight+s.adjustment*s.element.offsetHeight+"px":s.element.style.top=s.adjustment*s.element.offsetHeight+"px"}}}onChange(t){return t.key!==","}save(){let t=[...this._inputStates.map((r,o)=>[r,this._inputPlugs[o],this.inputLabelsForm.value.labels[o]]).sort((r,o)=>r[0].element.offsetTop-o[0].element.offsetTop),...this._outputStates.map((r,o)=>[r,this._outputPlugs[o],this.outputLabelsForm.value.labels[o]]).sort((r,o)=>r[0].element.offsetTop-o[0].element.offsetTop)];this.inputFromOpener.setPlugConfiguration(t.map(r=>r[1].id),t.map(r=>r[2])),this.projectsService.labelsCustomComponentChanged(this.inputFromOpener),this.requestClose.emit()}ngOnDestroy(){this._destroySubject.next(null),this._destroySubject.complete()}};e.\u0275fac=function(r){return new(r||e)(x(xr),x(We))},e.\u0275cmp=ie({type:e,selectors:[["app-edit-component-plugs"]],viewQuery:function(r,o){if(r&1&&(et(PV,7),et(wV,7)),r&2){let s;Je(s=tt())&&(o._compInputs=s.first),Je(s=tt())&&(o._compOutputs=s.first)}},features:[ke],decls:11,vars:8,consts:[[1,"edit-plugs"],[1,"component"],[1,"controls","inputs",3,"formGroup"],["compInputs",""],["class","control",4,"ngFor","ngForOf"],[1,"controls","outputs",3,"formGroup"],["compOutputs",""],[1,"btn-raised","primary","save",3,"disabled","click"],[1,"control"],["control",""],["maxlength","5",3,"formControl","keypress"],[1,"drag",3,"mousedown"],[1,"wire-end"]],template:function(r,o){r&1&&(v(0,"div",0)(1,"div",1)(2,"form",2,3),J(4,xV,5,1,"div",4),y(),v(5,"form",5,6),J(7,MV,5,1,"div",4),y()(),v(8,"button",7),T("click",function(){return o.save()}),O(9),M(10,"translate"),y()()),r&2&&(g(2),w("formGroup",o.inputLabelsForm),g(2),w("ngForOf",o.inputLabelsControls),g(1),w("formGroup",o.outputLabelsForm),g(2),w("ngForOf",o.outputLabelsControls),g(1),w("disabled",o.inputLabelsForm.invalid||o.outputLabelsForm.invalid),g(1),U(" ",E(10,6,"POPUP.EDIT_COMPONENT_PLUGS.SAVE")," "))},dependencies:[sn,Uo,In,Et,wr,Rc,so,Mi,Pe],styles:['.edit-plugs[_ngcontent-%COMP%]{width:100%}.edit-plugs[_ngcontent-%COMP%]   .component[_ngcontent-%COMP%]{width:10rem;margin:1rem auto;display:flex;justify-content:space-between}.theme-light[_nghost-%COMP%]   .edit-plugs[_ngcontent-%COMP%]   .component[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .edit-plugs[_ngcontent-%COMP%]   .component[_ngcontent-%COMP%]{border:1px solid #000000}.theme-dark[_nghost-%COMP%]   .edit-plugs[_ngcontent-%COMP%]   .component[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .edit-plugs[_ngcontent-%COMP%]   .component[_ngcontent-%COMP%]{border:1px solid #27ae60}.edit-plugs[_ngcontent-%COMP%]   .component[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{position:relative}.edit-plugs[_ngcontent-%COMP%]   .component[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]{position:relative;height:30px;transition:top .25s ease}.edit-plugs[_ngcontent-%COMP%]   .component[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{outline:none;border:none;font-size:1.1rem;width:4.5rem;background-color:transparent;line-height:30px;height:30px}.theme-light[_nghost-%COMP%]   .edit-plugs[_ngcontent-%COMP%]   .component[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .edit-plugs[_ngcontent-%COMP%]   .component[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:#000}.theme-dark[_nghost-%COMP%]   .edit-plugs[_ngcontent-%COMP%]   .component[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .edit-plugs[_ngcontent-%COMP%]   .component[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:#ccc}.edit-plugs[_ngcontent-%COMP%]   .component[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   .drag[_ngcontent-%COMP%]{position:absolute;width:3rem;top:0;height:100%;display:flex;align-items:center;cursor:pointer;background-repeat:no-repeat;background-position-y:center}.theme-light[_nghost-%COMP%]   .edit-plugs[_ngcontent-%COMP%]   .component[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   .drag[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .edit-plugs[_ngcontent-%COMP%]   .component[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   .drag[_ngcontent-%COMP%]{background-image:url("./media/drag-points-MTSZQRMZ.svg")}.theme-dark[_nghost-%COMP%]   .edit-plugs[_ngcontent-%COMP%]   .component[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   .drag[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .edit-plugs[_ngcontent-%COMP%]   .component[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   .drag[_ngcontent-%COMP%]{background-image:url("./media/drag-points-DTYR77X2.svg")}.edit-plugs[_ngcontent-%COMP%]   .component[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   .drag[_ngcontent-%COMP%]   .wire-end[_ngcontent-%COMP%]{width:1.5rem}.theme-light[_nghost-%COMP%]   .edit-plugs[_ngcontent-%COMP%]   .component[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   .drag[_ngcontent-%COMP%]   .wire-end[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .edit-plugs[_ngcontent-%COMP%]   .component[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   .drag[_ngcontent-%COMP%]   .wire-end[_ngcontent-%COMP%]{border-bottom:1px solid #000000}.theme-dark[_nghost-%COMP%]   .edit-plugs[_ngcontent-%COMP%]   .component[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   .drag[_ngcontent-%COMP%]   .wire-end[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .edit-plugs[_ngcontent-%COMP%]   .component[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   .drag[_ngcontent-%COMP%]   .wire-end[_ngcontent-%COMP%]{border-bottom:1px solid #27ae60}.theme-light[_nghost-%COMP%]   .edit-plugs[_ngcontent-%COMP%]   .component[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   .drag[_ngcontent-%COMP%]:hover   .wire-end[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .edit-plugs[_ngcontent-%COMP%]   .component[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   .drag[_ngcontent-%COMP%]:hover   .wire-end[_ngcontent-%COMP%]{border-bottom:2px solid #000000}.theme-dark[_nghost-%COMP%]   .edit-plugs[_ngcontent-%COMP%]   .component[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   .drag[_ngcontent-%COMP%]:hover   .wire-end[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .edit-plugs[_ngcontent-%COMP%]   .component[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]   .drag[_ngcontent-%COMP%]:hover   .wire-end[_ngcontent-%COMP%]{border-bottom:2px solid #27ae60}.edit-plugs[_ngcontent-%COMP%]   .component[_ngcontent-%COMP%]   .inputs[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{text-align:left;margin-left:.2rem!important;padding-left:0!important}.edit-plugs[_ngcontent-%COMP%]   .component[_ngcontent-%COMP%]   .inputs[_ngcontent-%COMP%]   .drag[_ngcontent-%COMP%]{left:-3rem;justify-content:flex-end;background-position-x:left}.edit-plugs[_ngcontent-%COMP%]   .component[_ngcontent-%COMP%]   .outputs[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{text-align:right;margin-right:.2rem!important;padding-right:0!important}.edit-plugs[_ngcontent-%COMP%]   .component[_ngcontent-%COMP%]   .outputs[_ngcontent-%COMP%]   .drag[_ngcontent-%COMP%]{right:-3rem;justify-content:flex-start;background-position-x:right}.edit-plugs[_ngcontent-%COMP%]   .save[_ngcontent-%COMP%]{float:right}']});let i=e;return i})();var Ap=(()=>{let e=class e{constructor(t,r){this.selection=t,this.projects=r,this._copiedElements=[],this._copiedConPoints=[]}copySelection(){let t=this.selection.selectedIds();t.length!==0&&(this.copyIds(t),this.copyConPoints(this.selection.selectedConnections()))}copyIds(t){return this.copyElements(this.projects.currProject.currState.getElementsById(t))}copyElements(t){this._copiedElements=new Array(t.length);for(let r=0;r<t.length;r++)this._copiedElements[r]=Z.clone(t[r]);return this._copiedElements}copyConPoints(t){this._copiedConPoints=new Array(t.length);for(let r=0;r<t.length;r++)this._copiedConPoints[r]=t[r].clone();return this._copiedConPoints}get copiedElements(){return this.copyElements(this._copiedElements)}get copiedConPoints(){return this.copyConPoints(this._copiedConPoints)}getCopiedElementsBoundingBox(){this.copyElements(this.copiedElements);let t=new Ts;for(let r=0;r<this._copiedElements.length;r++)t.addPoint(this._copiedElements[r].pos),t.addPoint(this._copiedElements[r].endPos);return t.getRectangle(ze.EMPTY)}};e.\u0275fac=function(r){return new(r||e)(D(Si),D(We))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var gn=(()=>{let e=class e{constructor(t,r,o,s,a,l,c){this.projectsService=t,this.selection=r,this.copyService=o,this.ngZone=s,this.popupService=a,this.errorHandling=l,this.loadingService=c,this._editorActionsSubject=new _e}subscribeEditorAction(...t){return!t||t.length===0?this._editorActionsSubject.asObservable():this._editorActionsSubject.pipe(ki(r=>t.includes(r)))}zoomIn(){this._editorActionsSubject.next(6)}zoomOut(){this._editorActionsSubject.next(7)}zoom100(){this._editorActionsSubject.next(8)}delete(){this.projectsService.currProject.removeElementsById(this.selection.selectedIds()),this.projectsService.inputsOutputsCustomComponentChanged(this.projectsService.currProject),this._editorActionsSubject.next(3)}copy(){this.copyService.copySelection(),this._editorActionsSubject.next(0)}cut(){this.copyService.copySelection(),this.projectsService.currProject.removeElementsById(this.selection.selectedIds()),this.projectsService.inputsOutputsCustomComponentChanged(this.projectsService.currProject),this._editorActionsSubject.next(2)}paste(){this._editorActionsSubject.next(1)}undo(){this.projectsService.currProject.stepBack(),this.projectsService.inputsOutputsCustomComponentChanged(this.projectsService.currProject),this._editorActionsSubject.next(4)}redo(){this.projectsService.currProject.stepForward(),this.projectsService.inputsOutputsCustomComponentChanged(this.projectsService.currProject),this._editorActionsSubject.next(5)}editCustomComponentPlugs(){let t=this.projectsService.currProject;this.popupService.showPopup(CI,"POPUP.EDIT_COMPONENT_PLUGS.TITLE",!1,t)}fullscreen(){this._editorActionsSubject.next(9)}newProject(){this.ngZone.run(()=>$(this,null,function*(){(yield this.projectsService.askToSave())&&(yield this.projectsService.newProject())}))}openProject(){return $(this,null,function*(){yield this.ngZone.run(()=>$(this,null,function*(){if(yield this.projectsService.askToSave()){let t=yield this.popupService.showPopup(_I,"POPUP.OPEN.TITLE",!0);if(!t)return;switch(t.type){case"server":this.projectsService.openProjectUuid(t.data);break;case"local":this.openProjectFile(t.data);break;case"share":this.projectsService.openShare(t.data);break}}}))})}saveProject(){return $(this,null,function*(){if(this.projectsService.mainProject.source==="local"&&!this.projectsService.mainProject.saveDirty&&this.projectsService.allProjects.length>1)this.projectsService.saveAllComponents();else if(this.projectsService.mainProject.source!=="local")this.projectsService.saveAllProjects();else{let t=yield this.popupService.showPopup(vI,"POPUP.SAVE.TITLE",!0);if(!t)return;switch(t.target){case"server":this.projectsService.saveProjectServer(t.name,t.description,t.public);break;case"local":this.exportToFile(t.name)}}})}openProjectFile(t){return $(this,null,function*(){if(t.type!=="application/json"){this.errorHandling.showErrorMessage("ERROR.PROJECTS.INVALID_FILE_TYPE");return}if(yield this.projectsService.askToSave()){let r=this.loadingService.add("LOADING.OPENING_FILE"),o=new FileReader;o.readAsText(t,"UTF-8"),o.onload=s=>$(this,null,function*(){yield this.projectsService.openFile(s.target.result),r()})}})}newComponent(){return this.ngZone.run(()=>$(this,null,function*(){let t=yield this.popupService.showPopup(mI,"POPUP.NEW_COMP.TITLE",!1);if(t){let r=this.loadingService.add("LOADING.CREATE_COMPONENT");yield this.projectsService.createComponent(t.name,t.symbol,t.description,t.public),r()}}))}shareProject(){this.ngZone.run(()=>{this.popupService.showPopup(yI,"POPUP.SHARE.TITLE",!1,this.projectsService.mainProject,{project:this.projectsService.mainProject.name})})}exportToFile(t){return $(this,null,function*(){let r=this.loadingService.add("LOADING.EXPORT_FILE");yield this.projectsService.exportToFile(t),r()})}};e.\u0275fac=function(r){return new(r||e)(D(We),D(Si),D(Ap),D(ye),D(hn),D(Sn),D(Ii))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var _n=(()=>{let e=class e{constructor(t,r,o,s,a,l,c,u){this.workMode=t,this.editorInteraction=r,this.projects=o,this.simulationManagement=s,this.userService=a,this.apiService=l,this.popupService=c,this.ngZone=u,this._shortcutConfig=ny,this._customShortcuts=new Map,this._shortcutListenerEnabled=!0,this.userService.userInfo$.subscribe(d=>{if(!d){this._shortcutConfig=ny,this._customShortcuts.clear();return}for(let h of d.shortcuts){let p=this._shortcutConfig.findIndex(f=>f.action===h.name);p>=0&&(this._shortcutConfig[p].shortcutConfig={key_code:h.keyCode,shift:h.shift,ctrl:h.ctrl,alt:h.alt},this._customShortcuts.set(h.name,this._shortcutConfig[p].shortcutConfig))}})}keyDownListener(t){if(!this.shortcutListenerEnabled)return;let r=this.getShortcutFromKeyEvent(t);!r||!this.isShortcutUsable(r)||(t.preventDefault(),t.stopPropagation(),this.ngZone.run(()=>this.applyShortcutAction(r.action)))}getShortcutConfigFromKeyEvent(t){return{key_code:t.key.toUpperCase(),shift:t.shiftKey,ctrl:t.ctrlKey,alt:t.altKey}}getShortcutText(t){let r="";t.ctrl&&(r+="Ctrl+"),t.alt&&(r+="Alt+"),t.shift&&(r+="Shift+");let o=t.key_code.toUpperCase();return o===" "&&(o="SPACE"),r+o}getShortcutTextForAction(t){let r=this._shortcutConfig.find(o=>o.action===t);return r?.shortcutConfig?this.getShortcutText(r.shortcutConfig):""}getShortcutFromKeyEvent(t){for(let r of this._shortcutConfig)if(r.shortcutConfig&&t.key.toUpperCase()===r.shortcutConfig.key_code.toUpperCase()&&t.shiftKey===!!r.shortcutConfig.shift&&t.ctrlKey===!!r.shortcutConfig.ctrl&&t.altKey===!!r.shortcutConfig.alt)return r}isShortcutUsable(t){return t.usableIn==="simulation"?this.workMode.currentWorkMode===7:t.usableIn==="editor"?this.workMode.currentWorkMode!==7:!0}setShortcutConfig(t){return $(this,null,function*(){for(let[o,s]of t){let a=this._shortcutConfig.findIndex(l=>l.action===o);a>=0&&(this._shortcutConfig[a].shortcutConfig=s,this._customShortcuts.set(o,s))}let r=[];for(let[o,s]of this._customShortcuts)r.push({name:o,keyCode:s.key_code,shift:s.shift,ctrl:s.ctrl,alt:s.alt});yield this.apiService.patch("/user",{shortcuts:r},{errorMessage:"ERROR.USER.UPDATE_SHORTCUTS"}).toPromise()})}get shortcutActionConfig(){return this._shortcutConfig}enableShortcutListener(){this._shortcutListenerEnabled=!0}disableShortcutListener(){this._shortcutListenerEnabled=!1}get shortcutListenerEnabled(){return this._shortcutListenerEnabled&&!this.popupService.isPopupOpened}applyShortcutAction(t){switch(t){case"copy":this.editorInteraction.copy();break;case"paste":this.editorInteraction.paste();break;case"cut":this.editorInteraction.cut();break;case"delete":this.editorInteraction.delete();break;case"undo":this.editorInteraction.undo();break;case"redo":this.editorInteraction.redo();break;case"editPlugs":this.editorInteraction.editCustomComponentPlugs();break;case"zoomIn":this.editorInteraction.zoomIn();break;case"zoomOut":this.editorInteraction.zoomOut();break;case"zoom100":this.editorInteraction.zoom100();break;case"fullscreen":this.editorInteraction.fullscreen();break;case"wireMode":this.workMode.setWorkMode(4);break;case"connWireMode":this.workMode.setWorkMode(5);break;case"selectMode":this.workMode.setWorkMode(0);break;case"cutSelectMode":this.workMode.setWorkMode(1);break;case"eraserMode":this.workMode.setWorkMode(2);break;case"textMode":this.workMode.setWorkMode(6);break;case"newComp":this.editorInteraction.newComponent();break;case"newProj":this.editorInteraction.newProject();break;case"openProj":this.editorInteraction.openProject();break;case"save":this.editorInteraction.saveProject();break;case"enterSim":this.workMode.enterSimulation();break;case"leaveSim":this.workMode.leaveSimulation();break;case"startSim":this.simulationManagement.continueSim();break;case"pauseSim":this.simulationManagement.pauseSim();break;case"stopSim":this.simulationManagement.stopSim();break;case"singleStepSim":this.simulationManagement.singleStepSim();break}}};e.\u0275fac=function(r){return new(r||e)(D(mn),D(gn),D(We),D(qo),D($n),D(Go),D(hn),D(ye))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var EV=R,er=class er{static getGridGeometry(e){if(this._gridGeometries.has(e))return this._gridGeometries.get(e);let n=new bt;n.beginFill(ee(Re).getEditorColor("grid"));for(let t=0;t<C.chunkSize;t++)for(let r=0;r<C.chunkSize;r++)n.drawRect(t*C.gridPixelWidth,r*C.gridPixelWidth,1/e,1/e);return this._showChunks&&(n.beginFill(0,0),n.lineStyle(1/e,16777215),n.drawRect(0,0,C.gridPixelWidth*C.chunkSize,C.gridPixelWidth*C.chunkSize)),this._gridGeometries.set(e,n.geometry),n.geometry}static showChunks(e){this._gridGeometries.clear(),this._showChunks=e}static get chunksVisible(){return this._showChunks}static generateGridGraphics(e){return new bt(this.getGridGeometry(e))}static getGridPosForPixelPos(e){return new R(Math.floor(e.x/C.gridPixelWidth),Math.floor(e.y/C.gridPixelWidth))}static getFloatGridPosForPixelPos(e){return new R(e.x/C.gridPixelWidth,e.y/C.gridPixelWidth)}static getPixelPosForGridPos(e){return new R(e.x*C.gridPixelWidth,e.y*C.gridPixelWidth)}static getLocalChunkPixelPosForGridPos(e){let n=e.clone();return n.x%=C.chunkSize,n.y%=C.chunkSize,er.getPixelPosForGridPos(n)}static getLocalChunkPixelPosForGridPosWire(e){let n=e.clone();return n.x+=.5,n.y+=.5,er.getLocalChunkPixelPosForGridPos(n)}static getPixelPosForGridPosWire(e){return er.getPixelPosForGridPos(new EV(e.x+.5,e.y+.5))}static getPixelPosForPixelPosOnGridWire(e){let n=er.getGridPosForPixelPos(e);return n.x+=.5,n.y+=.5,er.getPixelPosForGridPos(n)}static getPixelPosOnGridForPixelPos(e){let n=er.getGridPosForPixelPos(e);return er.getPixelPosForGridPos(n)}};er._gridGeometries=new Map,er._showChunks=!1;var Ie=er;var Dp=class{constructor(e){this.TYPE_IDS=[1,2,3,4,5,6,8,10,11,12,13,14,15,16,17,100,101,102,200,201,202,203,204],this.selectionSer=ee(Si),this.elemProvider=ee(be),this.failed=!1,this.project=e}runAndTestRandom(e,n){this.failed=!1;for(let t=0;t<e&&!this.failed;t++)Math.floor(t%(e/10))===0&&console.log("Step "+t+" of "+e),this.randomStep(n),this.checkForErrors(n);console.log("Project has "+this.project.allElements.length+" elements!"),this.failed?console.log("failed"):console.log("success")}randomStep(e){let n=this.randomInt(0,25);switch(n>16&&(n=5),n){case 0:case 1:case 2:this.project.addElement(this.randomTypeId(),this.randomPos(e));break;case 3:case 4:case 5:let t=this.randomPos(e);Math.random()>.5?this.project.addWire(t,this.randomPosFromPos(t,e)):this.project.addWire(this.randomPosFromPos(t,e),t,this.randomPosFromPos(t,e));break;case 6:case 7:case 8:case 9:case 10:case 11:let r=this.selectionSer.selectFromRect(this.project,this.randomPos(e),this.randomPos(e));this.project.moveElementsById(r,this.randomPos(e/4));break;case 12:if(this.project.allElements.length===0)break;this.project.removeElementsById(this.randomElemIds(this.project.allElements.length/10));break;case 13:if(this.project.allElements.length===0)break;let o=this.randomElemId(),s=this.randomInt(0,4);this.project.rotateComponent(o,s);break;case 14:if(this.project.allElements.length===0)break;let a=this.randomElemId(),l=this.elemProvider.getElementById(this.project.currState.getElementById(a).typeId);this.project.setNumInputs(a,this.randomInt(l.minInputs,l.maxInputs));break;case 15:this.project.stepBack();break;case 16:this.project.stepForward();break}}randomTypeId(){return this.TYPE_IDS[this.randomInt(0,this.TYPE_IDS.length)]}randomPos(e){return new R(this.randomInt(0,e),this.randomInt(0,e))}randomElemId(){let e;do e=this.randomInt(0,this.project.currState.highestTakenId+1);while(!this.project.currState.model.has(e));return e}randomElemIds(e){let n=new Set;for(let t=0;t<this.project.allElements.length&&t<e;t++){let r;do r=this.randomElemId();while(n.has(r));n.add(r)}return[...n]}randomPosFromPos(e,n){return Math.random()>.5?new R(e.x,this.randomInt(0,n)):new R(this.randomInt(0,n),e.y)}randomInt(e,n){return Math.floor(Math.random()*(n-e)+e)}checkForErrors(e){for(let n=0;n<=e/16;n++)for(let t=0;t<=e/16;t++){let r=this.project.currState.chunk(new R(n,t));if(r)for(let o of r.connectionPoints)this.checkCon(o)}this.checkWireEnd(Z.allWireEnds(this.project.allElements))}checkCon(e){this.project.currState.elemsOnPoint(e).length<3&&(console.log("wrong conPoint at: ",e),this.failed=!0)}checkWireEnd(e){for(let[n,t]of e)for(let r of t){let o=new R(n,r),s=this.project.currState.elemsOnPoint(o),a=Ce.inRectChunks(o,o)[0];this.project.currState.chunkHasCon(this.project.currState.chunks[a.x][a.y],o)!==s.length>2&&(console.log("wrong conPoint or conPoint missing at: ",o),this.failed=!0)}}};var Tr=class{static pushInMapArray(e,n,t){e.has(n)?e.get(n).push(t):e.set(n,[t])}static pushInMapArrayUnique(e,n,t){e.has(n)?e.get(n).includes(t)||e.get(n).push(t):e.set(n,[t])}static array2dSame(e,n){if(!e||!n||e.length!==n.length)return!1;for(let t=0;t<e.length;t++){if(e[t].length!==n[t].length)return!1;for(let r=0;r<e[t].length;r++)if(e[t][r]!==n[t][r])return!1}return!0}};var Ti=class i{static generateUnits(e){let n=new Map,t=new Map;for(let r of e.model.values()){let o=i.fromElement(r);o&&(n.set(o,r),t.set(r,o))}return{unitToElement:n,elementToUnit:t}}static fromElement(e){if(be.isCompileElement(e.typeId)){let n={type:e.typeId,inputs:new Array(e.numInputs),outputs:new Array(e.numOutputs),ops:e.options||[]};if(n.type===12){n.ops=[];let t=atob(e.data||"");for(let r=0;r<t.length;r++)n.ops.push(t.charCodeAt(r))}return n}}static clone(e){return{type:e.type,inputs:[...e.inputs],outputs:[...e.outputs],ops:[...e.ops]}}static cloneMult(e){let n=new Array(e.length);for(let t=0;t<e.length;t++)n[t]=i.clone(e[t]);return n}static concatIO(e){return e.inputs.concat(e.outputs)}static setInputOutput(e,n,t){n<e.inputs.length?e.inputs[n]=t:e.outputs[n-e.inputs.length]=t}static wireIdHasLink(e,n,t){return e.has(n)&&e.get(n).has(t)}static removePlugs(e,n){let t=[...n.plugsByIndex.values()].sort((r,o)=>r-o);for(let r=t.length-1;r>=0;r--)e.splice(t[r],1)}static loadConnectedPlugs(e){let n=e.plugsByIndex,t=[...n.keys()];for(let r=0;r<t.length;r++){let o=t[r],s=i.concatIO([...e.units.keys()][n.get(o)])[0];for(let a=r+1;a<t.length;a++){let l=t[a],c=i.concatIO([...e.units.keys()][n.get(l)])[0];if(s===c){let u=!1;for(let d of e.connectedPlugs)d.includes(o)&&!d.includes(l)?(d.push(n.get(l)),u=!0):d.includes(l)&&!d.includes(o)?(d.push(n.get(o)),u=!0):d.includes(l)&&d.includes(o)&&(u=!0);u||e.connectedPlugs.push([o,l])}}}}static mapTunnels(e){let n=new Map;for(let t of e)Tr.pushInMapArray(n,t.options[0],t);return n}};var Hs=class extends Error{constructor(e,n,t){super(e),this.src=n,this.comp=t}};var ll=class extends Error{constructor(e,n,t){super(e),this.comp=n,this.plugIndex=t}};var kp=(()=>{let e=class e{constructor(t,r){this.projectSaveManagement=t,this.elementProvider=r,this._udcCache=new Map}compileAsInt32Array(t){return $(this,null,function*(){let r=yield this.compile(t),o=[r.length];for(let s of r)o.push(s.type,s.ops.length||0,s.inputs.length,s.outputs.length,...s.ops||[],...s.inputs,...s.outputs);return new Int32Array(o)})}compile(t){return $(this,null,function*(){this._highestLinkId=0,this._wiresOnLinks=new Map,this._wireEndsOnLinks=new Map;let r=yield this.projectsToCompile(t);this._depTree=r;let o=Date.now();this.compileDependencies(r);let s=this.projectUnits(t.id,"0");return console.log(`compilation took ${Date.now()-o}ms`),s})}initElemsOnLinksCache(t){this._wiresOnLinksCache||(this._wiresOnLinksCache=new Map),this._wireEndsOnLinksCache||(this._wireEndsOnLinksCache=new Map),this._wiresOnLinksCache.set(t,new Map),this._wireEndsOnLinksCache.set(t,new Map)}initElemsOnLinks(t){this._wiresOnLinks||(this._wiresOnLinks=new Map),this._wireEndsOnLinks||(this._wireEndsOnLinks=new Map),this._ioElemUnitCache||(this._ioElemUnitCache=new Map),this._ioElemIndexes||(this._ioElemIndexes=new Map),this._wiresOnLinks.set(t,new Map),this._wireEndsOnLinks.set(t,new Map),this._ioElemUnitCache.set(t,new Map),this._ioElemIndexes.set(t,new Map)}projectsToCompile(t){return $(this,null,function*(){let r=yield this.projectSaveManagement.buildDependencyTree(t);return r.set(t.id,t),r})}clearCache(){this._udcCache.clear(),this._wiresOnLinksCache&&(this._wiresOnLinksCache.clear(),this._wireEndsOnLinksCache.clear(),this._wiresOnLinks.clear(),this._wireEndsOnLinks.clear(),this._ioElemUnitCache.clear(),this._ioElemIndexes.clear()),this._highestLinkId=0}compileDependencies(t){this._compiledDeps=new Set;for(let[r,o]of t.entries())this._udcCache.has(r)&&!o.compileDirty?console.log("load from cache",r,o.name):this.compileSingle(o)}compileSingle(t){if(this._compiledDeps.has(t.id))throw new Hs("ERROR.COMPILE.CIRCULAR_DEP",this._currTypeId,t.id);this.validatePlugIndices(t),this._compiledDeps.add(t.id);let r=this._currTypeId;this._currTypeId=t.id;let o=Ti.generateUnits(t.currState),s;this._udcCache.has(t.id)&&(s=this._udcCache.get(t.id).connectedPlugs),this._udcCache.set(t.id,this.calcCompiledComp(t.currState,o)),this.compilerOuterIfNeeded(s,t),this._currTypeId=r,t.compileDirty=!1}compilerOuterIfNeeded(t,r){if(!Tr.array2dSame(t,this._udcCache.get(r.id).connectedPlugs))for(let[o,s]of this._udcCache.entries())s.includesUdcs.has(r.id)&&this.compileSingle(this._depTree.get(o))}calcCompiledComp(t,r){let o={units:new Map,connectedPlugs:[],plugsByIndex:new Map,includesUdcs:new Set,tunnels:Ti.mapTunnels(t.tunnels)},s=new Map;return this.setAllLinks(r,s,t,o),o.units=r.unitToElement,Ti.loadConnectedPlugs(o),o}setAllLinks(t,r,o,s){let a=0,l=0;this.initElemsOnLinksCache(this._currTypeId);for(let c of t.unitToElement.values()){let u=-1;for(let d of Z.wireEnds(c))u++,!Ti.wireIdHasLink(r,c,u)&&(l=this.setLinks(o,d,r,l,t,s)+1);this.elementProvider.getElementById(c.typeId).ignoreOutputs&&(l=this.setIgnoreOutputsLinks(t,c,l)+1),this.elementProvider.isPlugElement(c.typeId)&&s.plugsByIndex.set(c.plugIndex,a),a++}}setIgnoreOutputsLinks(t,r,o){for(let s=0;s<r.numOutputs;s++){let a=r.numInputs+s;t.elementToUnit.get(r).outputs[s]=++o,Tr.pushInMapArray(this._wireEndsOnLinksCache.get(this._currTypeId),o,{component:r,wireIndex:a})}return o}setLinks(t,r,o,s,a,l,c){c=c||[];for(let[u,d]of t.wireEndsOnPoint(r))c.find(h=>h.id===u.id&&h.pos.equals(r))||(c.push({id:u.id,pos:r}),u.typeId===0?this.setWireLink(u,r,t,o,s,a,l,c):u.typeId===8?this.setTunnelLink(l,u,t,o,s,a,c):(this.setCompLink(o,u,d,s,a),this.elementProvider.isCustomElement(u.typeId)&&(this.includePlugLinks(u,d,t,o,s,a,l,c),l.includesUdcs.add(u.typeId))));return s}setTunnelLink(t,r,o,s,a,l,c){let u=t.tunnels.get(r.options[0]);for(let d of u)this.setLinks(o,Z.wireEnds(d)[0],s,a,l,t,c);Tr.pushInMapArray(this._wireEndsOnLinksCache.get(this._currTypeId),a,{component:r,wireIndex:0})}setWireLink(t,r,o,s,a,l,c,u){let d=Z.otherWirePos(t,r);this.setLinks(o,d,s,a,l,c,u),Tr.pushInMapArrayUnique(this._wiresOnLinksCache.get(this._currTypeId),a,t)}setCompLink(t,r,o,s,a){t.has(r)?t.get(r).set(o,s):t.set(r,new Map([[o,s]])),Ti.setInputOutput(a.elementToUnit.get(r),o,s),Tr.pushInMapArray(this._wireEndsOnLinksCache.get(this._currTypeId),s,{component:r,wireIndex:o})}includePlugLinks(t,r,o,s,a,l,c,u){this._udcCache.has(t.typeId)||this.compileSingle(this._depTree.get(t.typeId));for(let d of this._udcCache.get(t.typeId).connectedPlugs)if(d.includes(r))for(let h of d)h!==r&&this.setLinks(o,Z.wireEnds(t)[h],s,a,l,c,u)}projectUnits(t,r,o){let s=this._udcCache.get(t),a=Ti.cloneMult([...s.units.keys()]);if(a.length===0)return[];let l=new Map;if(o)for(let[f,m]of s.plugsByIndex)l.set(Ti.concatIO(a[m])[0],Ti.concatIO(o)[f]),this._highestLinkId++;this._highestLinkId>0&&this._highestLinkId++;let c=this._highestLinkId,u=[],d=[],h=0,p=0;for(let f of a){if([f.inputs,f.outputs].forEach(m=>{for(let _=0;_<m.length;_++){let P=l.has(m[_])?l.get(m[_]):m[_]+this._highestLinkId;this._wiresOnLinks.has(r)||this.initElemsOnLinks(r),this.pushWiresOnLink(r,P,t,m[_]),m[_]=P,m[_]>c&&(c=m[_])}}),this.elementProvider.isCustomElement(f.type))u.push(h),d.push(h+p);else if(this.elementProvider.isIoElement(f.type))this.setIOLink(r,s,h+p,f);else if(this.elementProvider.isPlugElement(f.type)){p++;continue}h++}this._highestLinkId=c,o&&Ti.removePlugs(a,s);for(let f=u.length-1;f>=0;f--){let m=u[f],_=`${r}:${[...s.units.values()][d[f]].id}`,P=this.projectUnits(a[m].type,_,a[m]);a.splice(m,1),a.push(...P)}for(let[f,m]of this._ioElemUnitCache.entries()){this._ioElemIndexes.set(f,new Map);for(let[_,P]of m.entries())this._ioElemIndexes.get(f).set(_,a.indexOf(P))}return a}pushWiresOnLink(t,r,o,s){this._wiresOnLinks.get(t).has(r)&&this._wiresOnLinks.get(t).get(r).length>0?this._wiresOnLinks.get(t).get(r)[0]!==this._wiresOnLinksCache.get(o).get(s)[0]&&this._wiresOnLinks.get(t).get(r).push(...this._wiresOnLinksCache.get(o).get(s)||[]):this._wiresOnLinks.get(t).set(r,this._wiresOnLinksCache.get(o).get(s)||[]),this._wireEndsOnLinks.get(t).has(r)&&this._wireEndsOnLinks.get(t).get(r).length>0?this._wireEndsOnLinks.get(t).get(r)[0]!==this._wireEndsOnLinksCache.get(o).get(s)[0]&&this._wireEndsOnLinks.get(t).get(r).push(...this._wireEndsOnLinksCache.get(o).get(s)||[]):this._wireEndsOnLinks.get(t).set(r,this._wireEndsOnLinksCache.get(o).get(s)||[])}setIOLink(t,r,o,s){this._ioElemUnitCache.has(t)||this._ioElemUnitCache.set(t,new Map);let a=[...r.units.keys()][o],l=r.units.get(a);this._ioElemUnitCache.get(t).set(l.id,s)}validatePlugIndices(t){let r=new Set;for(let o of t.currState.allPlugs()){if(r.has(o.plugIndex)){let s=o.typeId===100;throw new ll(s?"ERROR.COMPILE.INVALID_INPUT_PLUGS":"ERROR.COMPILE.INVALID_OUTPUT_PLUGS",t.id,(s?o.plugIndex:o.plugIndex+t.numInputs)+1)}r.add(o.plugIndex)}}get wiresOnLinks(){return this._wiresOnLinks}get wireEndsOnLinks(){return this._wireEndsOnLinks}get ioElemIndexes(){return this._ioElemIndexes}get highestLinkId(){return this._highestLinkId}};e.\u0275fac=function(r){return new(r||e)(D(Ei),D(be))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var PI=(()=>{let e=class e{constructor(t,r){this.ngZone=t,this.elRef=r,this.event="click",this.emitter=new Me}ngOnInit(){this.ngZone.runOutsideAngular(()=>{this.handler=t=>this.emitter.emit(t),this.elRef.nativeElement.addEventListener(this.event,this.handler)})}ngOnDestroy(){this.elRef.nativeElement.removeEventListener(this.event,this.handler)}};e.\u0275fac=function(r){return new(r||e)(x(ye),x(zt))},e.\u0275dir=He({type:e,selectors:[["","appOutsideNgZoneEvent",""]],inputs:{event:"event"},outputs:{emitter:"appOutsideNgZoneEvent"}});let i=e;return i})();var SV=["tooltip"],wI=(()=>{let e=class e{constructor(t){this.renderer2=t}ngAfterViewInit(){let t=window.pageYOffset,r=this.hostElement.nativeElement.offsetHeight,o=this.hostElement.nativeElement.offsetWidth,s=this.hostElement.nativeElement.getBoundingClientRect();this.renderer2.setStyle(this.tooltipRef.nativeElement,"top",s.top+t+r+4+"px"),this.renderer2.setStyle(this.tooltipRef.nativeElement,"z-index","100");let a=s.left+o/2-this.tooltipRef.nativeElement.offsetWidth/2;a<0&&(a=0),this.renderer2.setStyle(this.tooltipRef.nativeElement,"left",a+"px")}};e.\u0275fac=function(r){return new(r||e)(x(Mn))},e.\u0275cmp=ie({type:e,selectors:[["app-toolbar-item-tooltip"]],viewQuery:function(r,o){if(r&1&&et(SV,7),r&2){let s;Je(s=tt())&&(o.tooltipRef=s.first)}},inputs:{tooltipText:"tooltipText",hostElement:"hostElement"},decls:4,vars:1,consts:[[1,"tooltip"],["tooltip",""]],template:function(r,o){r&1&&(v(0,"div",0,1)(2,"p"),O(3),y()()),r&2&&(g(3),K(o.tooltipText))},styles:[".tooltip[_ngcontent-%COMP%]{position:absolute;border-radius:.2rem;animation-name:_ngcontent-%COMP%_fadeIn;animation-duration:.1s;animation-fill-mode:both}.theme-light[_nghost-%COMP%]   .tooltip[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .tooltip[_ngcontent-%COMP%]{background-color:#d1d1d1;border:1px solid #ffffff}.theme-light[_nghost-%COMP%]   .tooltip[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .tooltip[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#000;margin:.3rem}.theme-dark[_nghost-%COMP%]   .tooltip[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .tooltip[_ngcontent-%COMP%]{background-color:#3a4042;border:1px solid #1a1a1a}.theme-dark[_nghost-%COMP%]   .tooltip[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .tooltip[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ccc;margin:.3rem}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}"]});let i=e;return i})();var xI=(()=>{let e=class e{constructor(t,r,o,s){this.elementRef=t,this.componentFactoryResolver=r,this.appRef=o,this.injector=s}onMouseEnter(){this.show()}onMouseLeave(){this.hide()}show(){this._showTimeout=setTimeout(()=>{if(this._componentRef)return;this._componentRef=this.componentFactoryResolver.resolveComponentFactory(wI).create(this.injector),this._componentRef.instance.tooltipText=this.tooltipText,this._componentRef.instance.hostElement=this.elementRef,this.appRef.attachView(this._componentRef.hostView);let t=this._componentRef.hostView.rootNodes[0];document.body.appendChild(t)},100)}hide(){clearTimeout(this._showTimeout),this._componentRef&&(this.appRef.detachView(this._componentRef.hostView),this._componentRef.destroy(),delete this._componentRef)}};e.\u0275fac=function(r){return new(r||e)(x(zt),x(xn),x(vn),x(nn))},e.\u0275dir=He({type:e,selectors:[["button","appToolbarItemTooltip","",8,"toolbar-button"]],hostBindings:function(r,o){r&1&&T("mouseenter",function(){return o.onMouseEnter()})("mouseleave",function(){return o.onMouseLeave()})},inputs:{tooltipText:"tooltipText"}});let i=e;return i})();var MI=(()=>{let e=class e{transform(t,r=2){let o=0,s=0;for(;t>=1e3&&o<e.siSymbols_gr.length;o++)t/=1e3;for(;t>0&&t<1&&s<e.siSymbols_lw.length;s++)t*=1e3;return Math.round(t*Math.pow(10,r))/Math.pow(10,r)+e.siSymbols_gr[o]+e.siSymbols_lw[s]}};e.siSymbols_gr=["","k","M","G","T","P","E","Z","Y"],e.siSymbols_lw=["","m","\u03BC","n","p","f","a","z","y"],e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=dr({name:"si",type:e,pure:!0});let i=e;return i})();var DV=["enterSimulationLoading"];function kV(i,e){if(i&1){let n=le();st(0),v(1,"button",8),T("click",function(){H(n);let r=A();return W(r.save())}),M(2,"translate"),y(),v(3,"button",9),T("click",function(){H(n);let r=A();return W(r.openProject())}),M(4,"translate"),y(),v(5,"button",10),T("click",function(){H(n);let r=A();return W(r.newComponent())}),M(6,"translate"),y(),q(7,"div",11),v(8,"button",12),T("appOutsideNgZoneEvent",function(){H(n);let r=A();return W(r.copy())}),M(9,"translate"),y(),v(10,"button",13),T("appOutsideNgZoneEvent",function(){H(n);let r=A();return W(r.cut())}),M(11,"translate"),y(),v(12,"button",14),T("appOutsideNgZoneEvent",function(){H(n);let r=A();return W(r.paste())}),M(13,"translate"),y(),v(14,"button",15),T("appOutsideNgZoneEvent",function(){H(n);let r=A();return W(r.delete())}),M(15,"translate"),y(),q(16,"div",11),v(17,"button",16),T("appOutsideNgZoneEvent",function(){H(n);let r=A();return W(r.undo())}),M(18,"translate"),y(),v(19,"button",17),T("appOutsideNgZoneEvent",function(){H(n);let r=A();return W(r.redo())}),M(20,"translate"),y(),q(21,"div",11),at()}if(i&2){let n=A();g(1),w("tooltipText",E(2,9,"TOOLBAR.TOOLTIP.SAVE")+n.getShortcut("save")),g(2),w("tooltipText",E(4,11,"TOOLBAR.TOOLTIP.OPEN")+n.getShortcut("openProj")),g(2),w("tooltipText",E(6,13,"TOOLBAR.TOOLTIP.NEW_COMP")+n.getShortcut("newComp")),g(3),w("tooltipText",E(9,15,"TOOLBAR.TOOLTIP.COPY")+n.getShortcut("copy")),g(2),w("tooltipText",E(11,17,"TOOLBAR.TOOLTIP.CUT")+n.getShortcut("cut")),g(2),w("tooltipText",E(13,19,"TOOLBAR.TOOLTIP.PASTE")+n.getShortcut("paste")),g(2),w("tooltipText",E(15,21,"TOOLBAR.TOOLTIP.DELETE")+n.getShortcut("delete")),g(3),w("tooltipText",E(18,23,"TOOLBAR.TOOLTIP.UNDO")+n.getShortcut("undo")),g(2),w("tooltipText",E(20,25,"TOOLBAR.TOOLTIP.REDO")+n.getShortcut("redo"))}}function NV(i,e){if(i&1){let n=le();st(0),q(1,"div",11),v(2,"button",18),T("click",function(){H(n);let r=A();return W(r.setWorkMode("WIRE"))}),M(3,"translate"),y(),v(4,"button",19),T("click",function(){H(n);let r=A();return W(r.setWorkMode("CONN_WIRE"))}),M(5,"translate"),y(),v(6,"button",20),T("click",function(){H(n);let r=A();return W(r.setWorkMode("SELECT"))}),M(7,"translate"),y(),v(8,"button",21),T("click",function(){H(n);let r=A();return W(r.setWorkMode("CUT_SELECT"))}),M(9,"translate"),y(),v(10,"button",22),T("click",function(){H(n);let r=A();return W(r.setWorkMode("ERASER"))}),M(11,"translate"),y(),v(12,"button",23),T("click",function(){H(n);let r=A();return W(r.setWorkMode("TEXT"))}),M(13,"translate"),y(),at()}if(i&2){let n=A();g(2),Ve("active-button",n.isWireMode),w("tooltipText",E(3,18,"TOOLBAR.TOOLTIP.WIRE")+n.getShortcut("wireMode")),g(2),Ve("active-button",n.isConnWireMode),w("tooltipText",E(5,20,"TOOLBAR.TOOLTIP.CONN_WIRE")+n.getShortcut("connWireMode")),g(2),Ve("active-button",n.isSelectMode),w("tooltipText",E(7,22,"TOOLBAR.TOOLTIP.SELECT")+n.getShortcut("selectMode")),g(2),Ve("active-button",n.isCutSelectMode),w("tooltipText",E(9,24,"TOOLBAR.TOOLTIP.SELECT_CUT")+n.getShortcut("cutSelectMode")),g(2),Ve("active-button",n.isEraserMode),w("tooltipText",E(11,26,"TOOLBAR.TOOLTIP.ERASER")+n.getShortcut("eraserMode")),g(2),Ve("active-button",n.isTextMode),w("tooltipText",E(13,28,"TOOLBAR.TOOLTIP.TEXT")+n.getShortcut("textMode"))}}function RV(i,e){if(i&1){let n=le();st(0),v(1,"input",30),T("ngModelChange",function(r){H(n);let o=A(2);return W(o.targetTickRate=r)})("ngModelChange",function(){H(n);let r=A(2);return W(r.setTarget())}),y(),v(2,"select",31),T("ngModelChange",function(r){H(n);let o=A(2);return W(o.targetMultiplier=r)})("ngModelChange",function(){H(n);let r=A(2);return W(r.setTarget())}),v(3,"option",32),O(4,"Hz"),y(),v(5,"option",33),O(6,"kHz"),y(),v(7,"option",34),O(8,"MHz"),y()(),at()}if(i&2){let n=A(2);g(1),w("ngModel",n.targetTickRate),g(1),w("ngModel",n.targetMultiplier)}}function FV(i,e){if(i&1&&(st(0),q(1,"div",11),v(2,"p"),O(3),M(4,"si"),y(),at()),i&2){let n=A(2);g(3),U("Current Speed: ",xo(4,1,n.simulationStatus.speed,2),"Hz")}}function LV(i,e){if(i&1){let n=le();st(0),q(1,"div",11),v(2,"button",24),T("click",function(){H(n);let r=A();return W(r.continueSim())}),M(3,"translate"),y(),v(4,"button",25),T("click",function(){H(n);let r=A();return W(r.singleStepSim())}),M(5,"translate"),y(),v(6,"button",26),T("click",function(){H(n);let r=A();return W(r.pauseSim())}),M(7,"translate"),y(),v(8,"button",27),T("click",function(){H(n);let r=A();return W(r.stopSim())}),M(9,"translate"),y(),q(10,"div",11),v(11,"button",28),T("click",function(){H(n);let r=A();return W(r.toggleTargetMode())}),M(12,"translate"),y(),v(13,"button",29),T("click",function(){H(n);let r=A();return W(r.toggleSyncMode())}),M(14,"translate"),y(),J(15,RV,9,2,"ng-container",2)(16,FV,5,4,"ng-container",2),at()}if(i&2){let n=A();g(2),Ve("active-button",n.simulationRunning),w("tooltipText",E(3,14,"TOOLBAR.TOOLTIP.SIM_CONT")+n.getShortcut("startSim")),g(2),w("tooltipText",E(5,16,"TOOLBAR.TOOLTIP.SIM_SINGLE")+n.getShortcut("singleStepSim")),g(2),w("tooltipText",E(7,18,"TOOLBAR.TOOLTIP.SIM_PAUSE")+n.getShortcut("pauseSim")),g(2),w("tooltipText",E(9,20,"TOOLBAR.TOOLTIP.SIM_STOP")+n.getShortcut("stopSim")),g(3),Ve("active-button",n.targetMode),w("tooltipText",E(12,22,"TOOLBAR.TOOLTIP.SIM_TARGET_MODE")),g(2),Ve("active-button",n.syncMode),w("tooltipText",E(14,24,"TOOLBAR.TOOLTIP.SIM_SYNC_MODE")),g(2),w("ngIf",n.targetMode),g(1),w("ngIf",n.simulationRunning)}}function jV(i,e){if(i&1){let n=le();st(0),v(1,"button",35),T("click",function(){H(n);let r=A();return W(r.printBoard())}),O(2,"board"),y(),v(3,"button",35),T("click",function(){H(n);let r=A();return W(r.printElements())}),O(4,"elements"),y(),v(5,"button",35),T("click",function(){H(n);let r=A();return W(r.printCalls())}),O(6,"calls"),y(),v(7,"button",35),T("click",function(){H(n);let r=A();return W(r.runTests())}),O(8,"tests"),y(),v(9,"button",35),T("click",function(){H(n);let r=A();return W(r.runStep())}),O(10,"step"),y(),v(11,"button",35),T("click",function(){H(n);let r=A();return W(r.toggleChunks())}),O(12,"chunks"),y(),at()}}function BV(i,e){i&1&&q(0,"img",40)}function VV(i,e){i&1&&q(0,"img",41)}function UV(i,e){if(i&1){let n=le();v(0,"div",36),T("click",function(){H(n);let r=A();return W(r.enterSimulation())}),J(1,BV,1,0,"img",37)(2,VV,1,0,"img",38),v(3,"p",39),O(4),M(5,"translate"),y()()}if(i&2){let n=A();g(1),w("ngIf",n.currentTheme==="dark"),g(1),w("ngIf",n.currentTheme==="light"),g(2),K(E(5,3,"TOOLBAR.START_SIM"))}}function zV(i,e){i&1&&q(0,"img",44)}function HV(i,e){i&1&&q(0,"img",45)}function WV(i,e){if(i&1){let n=le();v(0,"div",36),T("click",function(){H(n);let r=A();return W(r.leaveSimulation())}),J(1,zV,1,0,"img",42)(2,HV,1,0,"img",43),v(3,"p",39),O(4),M(5,"translate"),y()()}if(i&2){let n=A();g(1),w("ngIf",n.currentTheme==="dark"),g(1),w("ngIf",n.currentTheme==="light"),g(2),K(E(5,3,"TOOLBAR.EXIT_SIM"))}}var OI=(()=>{let e=class e{constructor(t,r,o,s,a,l,c){this.workModeService=t,this.projectService=r,this.editorInteractionService=o,this.stateCompiler=s,this.shortcutService=a,this.simulationManagement=l,this.themingService=c,this.targetMultiplier="1",this.targetTickRate=1,this.threadCount=1,this.environment=C}get production(){return C.production}printElements(){console.log(this.projectService.currProject.allElements)}printCalls(){console.log(this.projectService.currProject.boardRecorder.stringify())}runTests(){new Dp(this.projectService.currProject).runAndTestRandom(1e5,16*7)}runStep(){this.test.runStep(!0)}printBoard(){return $(this,null,function*(){console.log(JSON.stringify({components:yield this.stateCompiler.compile(this.projectService.currProject),links:this.stateCompiler.highestLinkId+1}))})}toggleChunks(){Ie.showChunks(!Ie.chunksVisible)}get currentTheme(){return this.themingService.currentTheme}setWorkMode(t){switch(t){case"SELECT":this.workModeService.setWorkMode(0);break;case"CUT_SELECT":this.workModeService.setWorkMode(1);break;case"ERASER":this.workModeService.setWorkMode(2);break;case"TEXT":this.workModeService.setWorkMode(6);break;case"WIRE":this.workModeService.setWorkMode(4);break;case"CONN_WIRE":this.workModeService.setWorkMode(5);break}}getShortcut(t){let r=this.shortcutService.getShortcutTextForAction(t);return r?` (${r})`:""}enterSimulation(){this.workModeService.enterSimulation(this._enterSimulationLoading)}leaveSimulation(){this.workModeService.leaveSimulation(this._enterSimulationLoading)}get isSimulationMode(){return this.workModeService.currentWorkMode===7}get isSelectMode(){return this.workModeService.currentWorkMode===0}get isCutSelectMode(){return this.workModeService.currentWorkMode===1}get isEraserMode(){return this.workModeService.currentWorkMode===2}get isTextMode(){return this.workModeService.currentWorkMode===6}get isWireMode(){return this.workModeService.currentWorkMode===4}get isConnWireMode(){return this.workModeService.currentWorkMode===5}zoomIn(){this.editorInteractionService.zoomIn()}zoomOut(){this.editorInteractionService.zoomOut()}undo(){this.editorInteractionService.undo()}redo(){this.editorInteractionService.redo()}copy(){this.editorInteractionService.copy()}cut(){this.editorInteractionService.cut()}paste(){this.editorInteractionService.paste()}delete(){this.editorInteractionService.delete()}save(){this.editorInteractionService.saveProject()}newComponent(){this.editorInteractionService.newComponent()}openProject(){this.editorInteractionService.openProject()}continueSim(){this.simulationManagement.continueSim()}pauseSim(){this.simulationManagement.pauseSim()}stopSim(){this.simulationManagement.stopSim()}singleStepSim(){this.simulationManagement.singleStepSim()}toggleTargetMode(){this.simulationManagement.toggleTargetMode()}toggleSyncMode(){this.simulationManagement.toggleSyncMode()}setTarget(){let t=this.targetTickRate*Number(this.targetMultiplier);t<0&&(this.targetTickRate=0),this.simulationManagement.setTarget(t)}setThreadCount(){this.simulationManagement.setThreadCount(this.threadCount)}get simulationStatus(){return this.simulationManagement.simulationStatus}get simulationRunning(){return this.simulationManagement.simulationRunning}get targetMode(){return this.simulationManagement.targetMode}get syncMode(){return this.simulationManagement.syncMode}};e.\u0275fac=function(r){return new(r||e)(x(mn),x(We),x(gn),x(kp),x(_n),x(qo),x(Re))},e.\u0275cmp=ie({type:e,selectors:[["app-toolbar"]],viewQuery:function(r,o){if(r&1&&et(DV,7,dn),r&2){let s;Je(s=tt())&&(o._enterSimulationLoading=s.first)}},decls:15,vars:12,consts:[[1,"toolbar"],[1,"toolbar-buttons"],[4,"ngIf"],["appToolbarItemTooltip","","aria-label","Zoom Out",1,"toolbar-button","zoom-out",3,"tooltipText","appOutsideNgZoneEvent"],["appToolbarItemTooltip","","aria-label","Zoom In",1,"toolbar-button","zoom-in",3,"tooltipText","appOutsideNgZoneEvent"],[1,"toolbar-end"],["enterSimulationLoading",""],["tabindex","0",3,"click",4,"ngIf"],["aria-label","Save","appToolbarItemTooltip","",1,"toolbar-button","save",3,"tooltipText","click"],["aria-label","Open","appToolbarItemTooltip","",1,"toolbar-button","open",3,"tooltipText","click"],["aria-label","New Component","appToolbarItemTooltip","",1,"toolbar-button","new-comp",3,"tooltipText","click"],[1,"divider"],["aria-label","Copy","appToolbarItemTooltip","",1,"toolbar-button","copy",3,"tooltipText","appOutsideNgZoneEvent"],["aria-label","Cut","appToolbarItemTooltip","",1,"toolbar-button","cut",3,"tooltipText","appOutsideNgZoneEvent"],["aria-label","Paste","appToolbarItemTooltip","",1,"toolbar-button","paste",3,"tooltipText","appOutsideNgZoneEvent"],["aria-label","Delete","appToolbarItemTooltip","",1,"toolbar-button","delete",3,"tooltipText","appOutsideNgZoneEvent"],["appToolbarItemTooltip","","aria-label","Undo",1,"toolbar-button","undo",3,"tooltipText","appOutsideNgZoneEvent"],["appToolbarItemTooltip","","aria-label","Redo",1,"toolbar-button","redo",3,"tooltipText","appOutsideNgZoneEvent"],["aria-label","Place Wire","appToolbarItemTooltip","",1,"toolbar-button","wire",3,"tooltipText","click"],["aria-label","Connect Wire","appToolbarItemTooltip","",1,"toolbar-button","conn-wire",3,"tooltipText","click"],["aria-label","Select","appToolbarItemTooltip","",1,"toolbar-button","select",3,"tooltipText","click"],["aria-label","Select Cut","appToolbarItemTooltip","",1,"toolbar-button","select-cut",3,"tooltipText","click"],["aria-label","Eraser","appToolbarItemTooltip","",1,"toolbar-button","eraser",3,"tooltipText","click"],["aria-label","Place Text","appToolbarItemTooltip","",1,"toolbar-button","text",3,"tooltipText","click"],["appToolbarItemTooltip","","aria-label","continue simulation",1,"toolbar-button","play",3,"tooltipText","click"],["appToolbarItemTooltip","","aria-label","single step simulation",1,"toolbar-button","step",3,"tooltipText","click"],["appToolbarItemTooltip","","aria-label","pause simulation",1,"toolbar-button","pause",3,"tooltipText","click"],["appToolbarItemTooltip","","aria-label","stop simulation",1,"toolbar-button","stop",3,"tooltipText","click"],["appToolbarItemTooltip","","aria-label","target clock speed",1,"toolbar-button","target-clock-speed",3,"tooltipText","click"],["appToolbarItemTooltip","","aria-label","sync to frame rate",1,"toolbar-button","sync-to-frame-rate",3,"tooltipText","click"],["type","number","min","0",1,"target-tick-rate",3,"ngModel","ngModelChange"],[1,"target-tick-rate",3,"ngModel","ngModelChange"],["value","1"],["value","1000"],["value","1000000"],[3,"click"],["tabindex","0",3,"click"],["src","assets/icons/dark/control-play.svg","alt","Start Simulation",4,"ngIf"],["src","assets/icons/light/control-play.svg","alt","Start Simulation",4,"ngIf"],[1,"start-sim"],["src","assets/icons/dark/control-play.svg","alt","Start Simulation"],["src","assets/icons/light/control-play.svg","alt","Start Simulation"],["src","assets/icons/dark/control-stop.svg","alt","Start Simulation",4,"ngIf"],["src","assets/icons/light/control-stop.svg","alt","Start Simulation",4,"ngIf"],["src","assets/icons/dark/control-stop.svg","alt","Start Simulation"],["src","assets/icons/light/control-stop.svg","alt","Start Simulation"]],template:function(r,o){r&1&&(v(0,"div",0)(1,"div",1),J(2,kV,22,27,"ng-container",2),v(3,"button",3),T("appOutsideNgZoneEvent",function(){return o.zoomOut()}),M(4,"translate"),y(),v(5,"button",4),T("appOutsideNgZoneEvent",function(){return o.zoomIn()}),M(6,"translate"),y(),J(7,NV,14,30,"ng-container",2)(8,LV,17,26,"ng-container",2)(9,jV,13,0,"ng-container",2),y(),v(10,"div",5),Hi(11,null,6),J(13,UV,6,5,"div",7)(14,WV,6,5,"div",7),y()()),r&2&&(g(2),w("ngIf",!o.isSimulationMode),g(1),w("tooltipText",E(4,8,"TOOLBAR.TOOLTIP.ZOOM_OUT")+o.getShortcut("zoomOut")),g(2),w("tooltipText",E(6,10,"TOOLBAR.TOOLTIP.ZOOM_IN")+o.getShortcut("zoomIn")),g(2),w("ngIf",!o.isSimulationMode),g(1),w("ngIf",o.isSimulationMode),g(1),w("ngIf",!o.production),g(4),w("ngIf",!o.isSimulationMode),g(1),w("ngIf",o.isSimulationMode))},dependencies:[Be,Ja,el,In,kc,zo,Et,Nc,jn,PI,xI,Pe,MI],styles:['.toolbar[_ngcontent-%COMP%]{position:static;width:100%;height:40px;-webkit-user-select:none;user-select:none;display:flex}.theme-light[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#000;border-bottom:1px solid #d1d1d1}.theme-dark[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]{background-color:#262a2b;color:#ccc;border-bottom:1px solid #3a4042}.toolbar[_ngcontent-%COMP%]   .toolbar-button[_ngcontent-%COMP%]{height:calc(40px - .4rem);width:calc(40px - .4rem);margin:.2rem .1rem;border:none;padding:.4rem;outline:none;background-size:contain;background-origin:content-box;background-repeat:no-repeat;border-radius:.1rem}.theme-light[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-button[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-button[_ngcontent-%COMP%]{background-color:#f5f5f5}.theme-dark[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-button[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-button[_ngcontent-%COMP%]{background-color:#262a2b}.toolbar[_ngcontent-%COMP%]   .toolbar-button[_ngcontent-%COMP%]:hover{cursor:default}.theme-light[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-button[_ngcontent-%COMP%]:hover, .theme-light   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-button[_ngcontent-%COMP%]:hover{background-color:#ebebeb}.theme-dark[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-button[_ngcontent-%COMP%]:hover, .theme-dark   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-button[_ngcontent-%COMP%]:hover{background-color:#3a4042}.theme-light[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .active-button[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .active-button[_ngcontent-%COMP%]{background-color:#cfcfcf}.theme-light[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .active-button[_ngcontent-%COMP%]:hover, .theme-light   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .active-button[_ngcontent-%COMP%]:hover{background-color:#cfcfcf}.theme-dark[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .active-button[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .active-button[_ngcontent-%COMP%]{background-color:#4a5254}.theme-dark[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .active-button[_ngcontent-%COMP%]:hover, .theme-dark   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .active-button[_ngcontent-%COMP%]:hover{background-color:#4a5254}.toolbar[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{height:20px;padding:0;margin-right:.5rem;margin-left:.5rem}.theme-light[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{border-left:1px solid #000000}.theme-dark[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{border-left:1px solid #cccccc}.toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;flex-shrink:0;align-items:center;padding-left:.5rem}.theme-light[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .save[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .save[_ngcontent-%COMP%]{background-image:url("./media/save_new-GSWYQ33O.svg")}.theme-light[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .open[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .open[_ngcontent-%COMP%]{background-image:url("./media/folder-3ZBFM52U.svg")}.theme-light[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .new-comp[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .new-comp[_ngcontent-%COMP%]{background-image:url("./media/new-component-M5NDAJON.svg")}.theme-light[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .paste[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .paste[_ngcontent-%COMP%]{background-image:url("./media/clipboard-XIZGL2Q6.svg")}.theme-light[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .copy[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .copy[_ngcontent-%COMP%]{background-image:url("./media/files-5TC6MR7N.svg")}.theme-light[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .cut[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .cut[_ngcontent-%COMP%]{background-image:url("./media/cut-6WHNR2QY.svg")}.theme-light[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{background-image:url("./media/trash-THD3ANQV.svg")}.theme-light[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .undo[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .undo[_ngcontent-%COMP%]{background-image:url("./media/back-left-XDAIVWAY.svg")}.theme-light[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .redo[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .redo[_ngcontent-%COMP%]{background-image:url("./media/back-right-UW2JIFCR.svg")}.theme-light[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{background-image:url("./media/text-BKCNTZ3Z.svg")}.theme-light[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .eraser[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .eraser[_ngcontent-%COMP%]{background-image:url("./media/eraser-VWQMWHQ2.svg")}.theme-light[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .wire[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .wire[_ngcontent-%COMP%]{background-image:url("./media/connection-2KLEP2J6.svg")}.theme-light[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .conn-wire[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .conn-wire[_ngcontent-%COMP%]{background-image:url("./media/connect_wire-NDEPYTIW.svg")}.theme-light[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]{background-image:url("./media/selection1-ZZMODVTM.svg")}.theme-light[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .select-cut[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .select-cut[_ngcontent-%COMP%]{background-image:url("./media/selection_cut-563SLTQT.svg")}.theme-light[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .sim-start[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .sim-start[_ngcontent-%COMP%]{background-image:url("./media/control-play-ZV4YUFMI.svg")}.theme-light[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .sim-pause[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .sim-pause[_ngcontent-%COMP%]{background-image:url("./media/control-pause-UBMD4LIG.svg")}.theme-light[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .sim-step[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .sim-step[_ngcontent-%COMP%]{background-image:url("./media/angle-right-QEZIOA64.svg")}.theme-light[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .sim-stop[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .sim-stop[_ngcontent-%COMP%]{background-image:url("./media/control-stop-V3PMBWAZ.svg")}.theme-light[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .zoom-out[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .zoom-out[_ngcontent-%COMP%]{background-image:url("./media/zoom-out-VSOOLEH6.svg")}.theme-light[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .zoom-in[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .zoom-in[_ngcontent-%COMP%]{background-image:url("./media/zoom-in-RBMQJ2IC.svg")}.theme-light[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .play[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .play[_ngcontent-%COMP%]{background-image:url("./media/control-play-ZV4YUFMI.svg")}.theme-light[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .pause[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .pause[_ngcontent-%COMP%]{background-image:url("./media/control-pause-UBMD4LIG.svg")}.theme-light[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]{background-image:url("./media/angle-right-QEZIOA64.svg")}.theme-light[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .stop[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .stop[_ngcontent-%COMP%]{background-image:url("./media/control-stop-V3PMBWAZ.svg")}.theme-light[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .target-clock-speed[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .target-clock-speed[_ngcontent-%COMP%]{background-image:url("./media/speed_limit-EEPJQ54I.svg")}.theme-light[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .sync-to-frame-rate[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .sync-to-frame-rate[_ngcontent-%COMP%]{background-image:url("./media/speed_sync-B2UHATAW.svg")}.theme-light[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .target-tick-rate[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .target-tick-rate[_ngcontent-%COMP%], .theme-light[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .thread-count[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .thread-count[_ngcontent-%COMP%]{outline:none;border:none;margin-left:.2rem;padding:.25rem;font-size:.9rem;width:5rem;height:70%;border-bottom:1px solid #000000;color:#000;background-color:#f5f5f5}.theme-dark[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .save[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .save[_ngcontent-%COMP%]{background-image:url("./media/save_new-ZBUC22TO.svg")}.theme-dark[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .open[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .open[_ngcontent-%COMP%]{background-image:url("./media/folder-COL65QFD.svg")}.theme-dark[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .new-comp[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .new-comp[_ngcontent-%COMP%]{background-image:url("./media/new-component-4PWSYCUA.svg")}.theme-dark[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .paste[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .paste[_ngcontent-%COMP%]{background-image:url("./media/clipboard-C4KAWMXR.svg")}.theme-dark[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .copy[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .copy[_ngcontent-%COMP%]{background-image:url("./media/files-RJSMUFKH.svg")}.theme-dark[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .cut[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .cut[_ngcontent-%COMP%]{background-image:url("./media/cut-L7C3ELD7.svg")}.theme-dark[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{background-image:url("./media/trash-BLU7JMNA.svg")}.theme-dark[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .undo[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .undo[_ngcontent-%COMP%]{background-image:url("./media/back-left-3OLQNUK3.svg")}.theme-dark[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .redo[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .redo[_ngcontent-%COMP%]{background-image:url("./media/back-right-K2MQYSSZ.svg")}.theme-dark[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{background-image:url("./media/text-LJ6NDACO.svg")}.theme-dark[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .eraser[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .eraser[_ngcontent-%COMP%]{background-image:url("./media/eraser-JBTD3FSQ.svg")}.theme-dark[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .wire[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .wire[_ngcontent-%COMP%]{background-image:url("./media/connection-KB26K5UG.svg")}.theme-dark[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .conn-wire[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .conn-wire[_ngcontent-%COMP%]{background-image:url("./media/connect_wire-PY7RRU5U.svg")}.theme-dark[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]{background-image:url("./media/selection1-TJBKW2NV.svg")}.theme-dark[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .select-cut[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .select-cut[_ngcontent-%COMP%]{background-image:url("./media/selection_cut-GIT2EKMB.svg")}.theme-dark[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .sim-start[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .sim-start[_ngcontent-%COMP%]{background-image:url("./media/control-play-MZSB3ZDV.svg")}.theme-dark[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .sim-pause[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .sim-pause[_ngcontent-%COMP%]{background-image:url("./media/control-pause-5KPATTDB.svg")}.theme-dark[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .sim-step[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .sim-step[_ngcontent-%COMP%]{background-image:url("./media/angle-right-LOUQW3OT.svg")}.theme-dark[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .sim-stop[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .sim-stop[_ngcontent-%COMP%]{background-image:url("./media/control-stop-FUOTPJSD.svg")}.theme-dark[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .zoom-out[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .zoom-out[_ngcontent-%COMP%]{background-image:url("./media/zoom-out-UWB73XAV.svg")}.theme-dark[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .zoom-in[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .zoom-in[_ngcontent-%COMP%]{background-image:url("./media/zoom-in-LAMQXT6S.svg")}.theme-dark[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .play[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .play[_ngcontent-%COMP%]{background-image:url("./media/control-play-MZSB3ZDV.svg")}.theme-dark[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .pause[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .pause[_ngcontent-%COMP%]{background-image:url("./media/control-pause-5KPATTDB.svg")}.theme-dark[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]{background-image:url("./media/angle-right-LOUQW3OT.svg")}.theme-dark[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .stop[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .stop[_ngcontent-%COMP%]{background-image:url("./media/control-stop-FUOTPJSD.svg")}.theme-dark[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .target-clock-speed[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .target-clock-speed[_ngcontent-%COMP%]{background-image:url("./media/speed_limit-GAHM2RL2.svg")}.theme-dark[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .sync-to-frame-rate[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .sync-to-frame-rate[_ngcontent-%COMP%]{background-image:url("./media/speed_sync-R5QZRUBE.svg")}.theme-dark[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .target-tick-rate[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .target-tick-rate[_ngcontent-%COMP%], .theme-dark[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .thread-count[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-buttons[_ngcontent-%COMP%]   .thread-count[_ngcontent-%COMP%]{outline:none;border:none;margin-left:.2rem;padding:.25rem;font-size:.9rem;width:5rem;height:70%;border-bottom:1px solid #cccccc;color:#ccc;background-color:#262a2b}.toolbar[_ngcontent-%COMP%]   .toolbar-end[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end;align-items:center;font-size:1.2rem;padding-right:.7rem;flex:auto}.toolbar[_ngcontent-%COMP%]   .toolbar-end[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;align-items:center;height:100%}.toolbar[_ngcontent-%COMP%]   .toolbar-end[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{cursor:pointer}.toolbar[_ngcontent-%COMP%]   .toolbar-end[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 0 .25rem;display:block ruby;line-height:100%}.toolbar[_ngcontent-%COMP%]   .toolbar-end[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;padding:.5rem 0}']});let i=e;return i})();function XV(i,e){if(i&1){let n=le();v(0,"div",7)(1,"p"),O(2),M(3,"translate"),y(),v(4,"input",8),T("focus",function(){H(n);let r=A();return W(r.focusInput())})("blur",function(){H(n);let r=A();return r.resetNumInputsValue(),W(r.blurInput())}),y()()}if(i&2){let n=A();g(2),U("",E(3,3,"SETTINGS_INFO.INPUTS"),":"),g(2),w("min",n.elementType.minInputs)("max",n.elementType.maxInputs)}}function qV(i,e){i&1&&(v(0,"div",7)(1,"p"),O(2),M(3,"translate"),y(),v(4,"select",9)(5,"option",10),O(6),M(7,"translate"),y(),v(8,"option",11),O(9),M(10,"translate"),y(),v(11,"option",12),O(12),M(13,"translate"),y(),v(14,"option",13),O(15),M(16,"translate"),y()()()),i&2&&(g(2),U("",E(3,5,"SETTINGS_INFO.DIRECTION"),":"),g(4),U(" ",E(7,7,"SETTINGS_INFO.DIRECTIONS.RIGHT")," \u2192 "),g(3),U(" ",E(10,9,"SETTINGS_INFO.DIRECTIONS.DOWN")," \u2193 "),g(3),U(" ",E(13,11,"SETTINGS_INFO.DIRECTIONS.LEFT")," \u2190 "),g(3),U(" ",E(16,13,"SETTINGS_INFO.DIRECTIONS.UP")," \u2191 "))}function YV(i,e){if(i&1&&(v(0,"option",16),O(1),y()),i&2){let n=e.$implicit,t=A(2);w("value",n),g(1),U(" ",t.toUserPlugIndex(n)," ")}}function ZV(i,e){if(i&1&&(v(0,"div",7)(1,"p"),O(2),M(3,"translate"),y(),v(4,"select",14),J(5,YV,2,2,"option",15),y()()),i&2){let n=A();g(2),U("",E(3,2,"SETTINGS_INFO.PLUG_INDEX"),":"),g(3),w("ngForOf",n.possiblePlugIndexes)}}function $V(i,e){if(i&1){let n=le();v(0,"div",7)(1,"p"),O(2),M(3,"translate"),y(),v(4,"input",17),T("keypress",function(r){H(n);let o=A();return W(o.onLabelChange(r))})("focus",function(){H(n);let r=A();return W(r.focusInput())})("blur",function(){H(n);let r=A();return W(r.blurInput())}),y()()}i&2&&(g(2),U("",E(3,1,"SETTINGS_INFO.PLUG_LABEL"),":"))}function KV(i,e){if(i&1){let n=le();v(0,"input",21),T("blur",function(){H(n);let r=A().index,o=A();return W(o.resetOptionsValue(r))}),y()}if(i&2){let n=A().index,t=A();w("formControl",t.optionsControls[n])("min",t.elementType.optionsConfig[n].min)("max",t.elementType.optionsConfig[n].max)}}function QV(i,e){if(i&1&&(v(0,"option",16),O(1),M(2,"translate"),y()),i&2){let n=e.$implicit,t=A(3);w("value",t.getOptionsDropdownValue(n)),g(1),U(" ",E(2,2,t.getOptionsDropdownLabel(n))," ")}}function JV(i,e){if(i&1&&(v(0,"select",22),J(1,QV,3,4,"option",15),y()),i&2){let n=A().index,t=A();w("formControl",t.optionsControls[n]),g(1),w("ngForOf",t.elementType.optionsConfig[n].allowedValues)}}function eU(i,e){if(i&1&&(v(0,"div",18)(1,"p"),O(2),M(3,"translate"),y(),J(4,KV,1,3,"input",19)(5,JV,2,2,"select",20),y()),i&2){let n=e.index,t=A();g(2),U("",E(3,3,t.elementType.optionsConfig[n].name),":"),g(2),w("ngIf",!t.elementType.optionsConfig[n].allowedValues),g(1),w("ngIf",t.elementType.optionsConfig[n].allowedValues)}}function tU(i,e){if(i&1&&(v(0,"div",23)(1,"h6"),O(2),M(3,"translate"),y(),q(4,"span",24),M(5,"translate"),y()),i&2){let n=A();g(2),U("",E(3,2,"SETTINGS_INFO.DESCRIPTION"),":"),g(2),w("innerHTML",E(5,4,n.elementType.description),Gr)}}function nU(i,e){if(i&1){let n=le();v(0,"button",25),T("click",function(){H(n);let r=A();return W(r.editClick())}),O(1),M(2,"translate"),y()}i&2&&(g(1),U(" ",E(2,1,"SETTINGS_INFO.EDIT")," "))}function iU(i,e){if(i&1){let n=le();v(0,"button",25),T("click",function(){H(n);let r=A();return W(r.customisePlugs())}),O(1),M(2,"translate"),y()}i&2&&(g(1),U(" ",E(2,1,"SETTINGS_INFO.PLUG_EDIT")," "))}var EI=(()=>{let e=class e{constructor(t,r,o,s,a){this.elemProvider=t,this.projects=r,this.formBuilder=o,this.editorActions=s,this.editorInteractionService=a}ngOnChanges(){this.formSubscription&&this.formSubscription.unsubscribe(),this._element=this.isElementPlaced?this.projects.currProject.currState.getElementById(this.selectedCompId):void 0,this.elementType=this.elemProvider.getElementById(this.selectedElemTypeId),this.propertiesForm=this.formBuilder.group({numInputs:[this.isElementPlaced?this._element.numInputs:this.elementType.numInputs],rotation:[this.isElementPlaced?this._element.rotation:this.elementType.rotation],plugIndex:[this.isElementPlaced?this._element.plugIndex:void 0],label:[this._element&&this._element.data?this._element.data:""],options:this.formBuilder.array(this.getOptionsArray(this.elementType,this.isElementPlaced?this._element.options:this.elementType.options))}),this.formSubscription=this.propertiesForm.valueChanges.subscribe(t=>{if(t.rotation=Number(t.rotation||0),this.isElementPlaced){if(this.elementType.isRotatable&&t.rotation!==this._element.rotation&&(this.projects.currProject.rotateComponent(this.selectedCompId,Number(t.rotation))||this.propertiesForm.controls.rotation.setValue(this._element.rotation)),t.numInputs<=this.elementType.maxInputs&&t.numInputs>=this.elementType.minInputs?t.numInputs!==this._element.numInputs&&!this.projects.currProject.setNumInputs(this.selectedCompId,t.numInputs)&&this.propertiesForm.controls.numInputs.setValue(this._element.numInputs):t.numInputs*10>=this.elementType.maxInputs&&this.elementType.maxInputs!==this.elementType.minInputs&&this.propertiesForm.controls.numInputs.setValue(this._element.numInputs),this.elementType.hasPlugIndex&&t.plugIndex!==this._element.plugIndex&&(this.projects.currProject.setPlugIndex(this.selectedCompId,Number(t.plugIndex)),this.propertiesForm.controls.plugIndex.setValue(this._element.plugIndex),this.projects.labelsCustomComponentChanged(this.projects.currProject)),this.elementType.hasLabel&&t.label!==this._element.data&&(this.projects.currProject.setData(this.selectedCompId,t.label),this.projects.labelsCustomComponentChanged(this.projects.currProject)),this.elementType.optionsConfig)for(let r=0;r<t.options.length;r++){let o=Number(t.options[r]);if(this.elementType.optionsConfig[r].allowedValues||o<=this.elementType.optionsConfig[r].max&&o>=this.elementType.optionsConfig[r].min){if(this._element.options[r]!==o){let s=[...this._element.options];s[r]=o,this.projects.currProject.setOptions(this.selectedCompId,s)||this.propertiesForm.controls.options.controls[r].setValue(this._element.options[r])}}else o*10>=this.elementType.optionsConfig[r].max&&this.propertiesForm.get("options").controls[r].setValue(this._element.options[r])}}else if(this.elementType.isRotatable&&t.rotation!==this.elementType.rotation&&(this.elementType.rotation=t.rotation),t.numInputs<=this.elementType.maxInputs&&t.numInputs>=this.elementType.minInputs?this.elementType.numInputs=t.numInputs:t.numInputs*10>=this.elementType.maxInputs&&this.elementType.maxInputs!==this.elementType.minInputs&&this.propertiesForm.controls.numInputs.setValue(this.elementType.numInputs),this.elementType.optionsConfig)for(let r=0;r<t.options.length;r++){let o=Number(t.options[r]);this.elementType.optionsConfig[r].allowedValues||o<=this.elementType.optionsConfig[r].max&&o>=this.elementType.optionsConfig[r].min?(this.elementType.options[r]=o,this.elementType.onOptionsChanged&&this.elementType.onOptionsChanged()):o*10>=this.elementType.optionsConfig[r].max&&this.propertiesForm.get("options").controls[r].setValue(this.elementType.options[r])}})}editClick(){this.elementType.edit(this.selectedElemTypeId,this.selectedCompId,this.projects)}customisePlugs(){this.editorInteractionService.editCustomComponentPlugs()}onLabelChange(t){return t.key!==","}get possiblePlugIndexes(){return this.projects.currProject.possiblePlugIndexes(this.selectedCompId)}toUserPlugIndex(t){return this.selectedElemTypeId===100?t+1:this.selectedElemTypeId===101?t-this.projects.currProject.numInputs+1:0}resetNumInputsValue(){let t=this.propertiesForm.controls.numInputs.value;if(t>this.elementType.maxInputs||t<this.elementType.minInputs){let r;this.isElementPlaced?r=this.projects.currProject.currState.getElementById(this.selectedCompId).numInputs:r=this.elementType.numInputs,this.propertiesForm.controls.numInputs.setValue(r)}}resetOptionsValue(t){let r=Number(this.propertiesForm.get("options").controls[t].value);if(r>this.elementType.optionsConfig[t].max||r<this.elementType.optionsConfig[t].min){let o;this.isElementPlaced?o=this.projects.currProject.currState.getElementById(this.selectedCompId).options[t]:o=this.elementType.options[t],this.propertiesForm.get("options").controls[t].setValue(o)}}getOptionsArray(t,r){let o=[];return t.optionsConfig&&t.optionsConfig.forEach((s,a)=>{o.push(this.formBuilder.control(r[a]))}),o}get optionsControls(){return this.propertiesForm.get("options").controls}getOptionsDropdownValue(t){return typeof t=="number"?t:t.value}getOptionsDropdownLabel(t){return typeof t=="number"?t.toString():t.label}focusInput(){this.editorActions.disableShortcutListener()}blurInput(){this.editorActions.enableShortcutListener()}get isElementPlaced(){return this.selectedCompId!==void 0&&this.selectedCompId!==null}ngOnDestroy(){this.editorActions.enableShortcutListener(),this.formSubscription&&this.formSubscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)(x(be),x(We),x(xr),x(_n),x(gn))},e.\u0275cmp=ie({type:e,selectors:[["app-settings-info-box"]],inputs:{selectedElemTypeId:"selectedElemTypeId",selectedCompId:"selectedCompId"},features:[cn],decls:14,vars:12,consts:[[1,"box"],[1,"header"],[1,"content",3,"formGroup"],["class","property",4,"ngIf"],["class","property","formArrayName","options",4,"ngFor","ngForOf"],["class","description",4,"ngIf"],["class","btn-outline secondary small edit",3,"click",4,"ngIf"],[1,"property"],["type","number","formControlName","numInputs",3,"min","max","focus","blur"],["formControlName","rotation"],["value","0"],["value","1"],["value","2"],["value","3"],["formControlName","plugIndex"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["formControlName","label","type","text","maxlength","5",3,"keypress","focus","blur"],["formArrayName","options",1,"property"],["type","number",3,"formControl","min","max","blur",4,"ngIf"],[3,"formControl",4,"ngIf"],["type","number",3,"formControl","min","max","blur"],[3,"formControl"],[1,"description"],[3,"innerHTML"],[1,"btn-outline","secondary","small","edit",3,"click"]],template:function(r,o){r&1&&(v(0,"div",0)(1,"div",1)(2,"h2"),O(3),M(4,"translate"),y()(),v(5,"div",2),J(6,XV,5,5,"div",3)(7,qV,17,15,"div",3)(8,ZV,6,4,"div",3)(9,$V,5,3,"div",3)(10,eU,6,5,"div",4)(11,tU,6,6,"div",5)(12,nU,3,3,"button",6)(13,iU,3,3,"button",6),y()()),r&2&&(g(3),K(E(4,10,o.elementType==null?null:o.elementType.name)),g(2),w("formGroup",o.propertiesForm),g(1),w("ngIf",o.elementType.minInputs!==o.elementType.maxInputs),g(1),w("ngIf",o.elementType.isRotatable),g(1),w("ngIf",o.elementType.hasPlugIndex&&o.isElementPlaced),g(1),w("ngIf",o.elementType.hasLabel&&o.isElementPlaced),g(1),w("ngForOf",o.optionsControls),g(1),w("ngIf",o.elementType==null?null:o.elementType.description),g(1),w("ngIf",o.elementType.edit&&(o.isElementPlaced||o.elementType.canEditType)),g(1),w("ngIf",o.elementType.hasPlugIndex&&o.isElementPlaced))},dependencies:[sn,Be,Ja,el,In,kc,zo,Et,wr,Rc,Nc,S0,so,Mi,ao,lp,Pe],styles:[".box[_ngcontent-%COMP%]{position:absolute;right:.5rem;bottom:calc(.5rem + 22px);width:250px;display:grid;grid-template-rows:3rem auto}.theme-light[_nghost-%COMP%]   .box[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .box[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#000;border:1px solid #d1d1d1;border-radius:.1rem}.theme-dark[_nghost-%COMP%]   .box[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .box[_ngcontent-%COMP%]{background-color:#262a2b;color:#ccc;border:1px solid #3a4042;border-radius:.1rem}.box[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:row;align-items:center;justify-content:center}.theme-light[_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{background-color:#d1d1d1}.theme-dark[_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{background-color:#3a4042}.box[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.2rem;font-weight:400}.box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:.5rem}.box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]{height:2.5rem;display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding-bottom:.75rem}.box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;align-self:flex-end}.box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{outline:none;border:none;padding:.25rem;font-size:.9rem;width:40%}.theme-light[_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-bottom:1px solid #000000;color:#000;background-color:#f5f5f5}.theme-dark[_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-bottom:1px solid #cccccc;color:#ccc;background-color:#262a2b}.box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:40%;font-size:.9rem;outline:none;border:none}.theme-light[_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border-bottom:1px solid #000000;color:#000;background-color:#f5f5f5}.theme-dark[_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border-bottom:1px solid #cccccc;color:#ccc;background-color:#262a2b}.box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:.9rem;margin:0;margin-bottom:.2rem}.box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .edit[_ngcontent-%COMP%]{margin-top:.25rem;float:right;min-width:40%}"],changeDetection:0});let i=e;return i})();var Np=(()=>{let e=class e{constructor(t,r,o){this.elementRef=t,this.fontWidthService=r,this.platformId=o}ngAfterContentChecked(){let t=this.elementRef.nativeElement.innerText;this.oldText!==t&&(this.adjustFontSize(),this.oldText=t)}ngOnChanges(){this.adjustFontSize()}adjustFontSize(){if(!wi(this.platformId))return;let t=this.elementRef.nativeElement.innerText,r=window.getComputedStyle(this.elementRef.nativeElement),o=Number(r.getPropertyValue("font-size").replace("px","")),s=r.getPropertyValue("font");if(!s){let c=r.getPropertyValue("font-style"),u=r.getPropertyValue("font-variant"),d=r.getPropertyValue("font-weight"),h=r.getPropertyValue("font-size"),p=r.getPropertyValue("font-family");s=(c+" "+u+" "+d+" "+h+" "+p).replace(/ +/g," ").trim()}let a=this.fontWidthService.getTextWidth(t,s),l=o*(this.desiredFontWidth/a);l<o&&(this.elementRef.nativeElement.style.fontSize=l+"px")}};e.\u0275fac=function(r){return new(r||e)(x(zt),x(Er),x(Wn))},e.\u0275dir=He({type:e,selectors:[["","appAutoFontSize",""]],inputs:{desiredFontWidth:"desiredFontWidth"},features:[cn]});let i=e;return i})();function oU(i,e){if(i&1){let n=le();v(0,"button",6),T("click",function(){H(n);let r=A();return W(r.reloadButtonClick())}),y()}}function sU(i,e){if(i&1&&q(0,"img",12),i&2){let n=A(2).$implicit;w("src",n.symbolImage,vs)("alt",n.symbol)}}function aU(i,e){if(i&1&&(v(0,"p",13),O(1),y()),i&2){let n=A(2).$implicit;w("desiredFontWidth",53),g(1),U(" ",n.symbol," ")}}function lU(i,e){if(i&1){let n=le();v(0,"div",9),T("click",function(){H(n);let r=A().$implicit,o=A(2);return W(o.selectComponent(r.id))})("dblclick",function(){H(n);let r=A().$implicit,o=A(2);return W(o.openComponent(r.id))}),v(1,"div"),J(2,sU,1,2,"img",10)(3,aU,2,2,"p",11),y(),v(4,"p"),O(5),M(6,"translate"),y()()}if(i&2){let n=A().$implicit,t=A(2);Ve("active-selected-component",t.isComponentMode&&t.currentSelectedComponent===n.id),g(2),w("ngIf",n.symbolImage),g(1),w("ngIf",!n.symbolImage),g(2),K(E(6,5,n.name))}}function cU(i,e){if(i&1&&(st(0),J(1,lU,7,7,"div",8),M(2,"async"),at()),i&2){let n=e.$implicit,t=A(2);g(1),w("ngIf",n.showInConstructionBox&&(t.searchText===""||E(2,1,t.isInSearchResult(n)))&&!t.isCurrentCustomElement(n.id)||t.isHiddenPlug(t.searchText,n.id))}}function uU(i,e){if(i&1&&(st(0),J(1,cU,3,3,"ng-container",7),at()),i&2){let n=A();g(1),w("ngForOf",n.components)("ngForTrackBy",n.componentsTrackBy)}}function dU(i,e){i&1&&(v(0,"div",14),O(1,"There are no components in this category."),y())}var SI=(()=>{let e=class e{constructor(t,r,o,s){this.workModeService=t,this.translate=r,this.elemProv=o,this.projects=s,this.reloadElements=new Me}componentsTrackBy(t,r){return r?r.id:null}isHiddenPlug(t,r){return t===""||r!==102?!1:t.trim().toLowerCase().replace(" ","")==="buttplug"}isInSearchResult(t){return this.translate.get(t.name).pipe(xt(r=>r.toLowerCase().includes(this.searchText.trim().toLowerCase())||t.symbol.toLowerCase().includes(this.searchText.trim().toLowerCase())))}isCurrentCustomElement(t){return this.projects.currProject?this.elemProv.isCustomElement(t)&&this.projects.currProject.id===t:!1}selectComponent(t){this.workModeService.setWorkMode(3,t)}openComponent(t){this.elemProv.isCustomElement(t)&&this.projects.openComponent(t)}get isComponentMode(){return this.workModeService.currentWorkMode===3}get currentSelectedComponent(){return this.workModeService.currentComponentToBuild}reloadButtonClick(){this.reloadElements.emit()}};e.\u0275fac=function(r){return new(r||e)(x(mn),x(yn),x(be),x(We))},e.\u0275cmp=ie({type:e,selectors:[["app-construction-box-category"]],inputs:{components:"components",categoryName:"categoryName",showReloadButton:"showReloadButton",searchText:"searchText"},outputs:{reloadElements:"reloadElements"},decls:10,vars:6,consts:[[1,"box"],[1,"header"],["class","reload","aria-label","reload components",3,"click",4,"ngIf"],[1,"content"],[4,"ngIf","ngIfElse"],["noComponents",""],["aria-label","reload components",1,"reload",3,"click"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","component-to-select","tabindex","0",3,"active-selected-component","click","dblclick",4,"ngIf"],["tabindex","0",1,"component-to-select",3,"click","dblclick"],[3,"src","alt",4,"ngIf"],["appAutoFontSize","",3,"desiredFontWidth",4,"ngIf"],[3,"src","alt"],["appAutoFontSize","",3,"desiredFontWidth"],[1,"no-components"]],template:function(r,o){if(r&1&&(v(0,"div",0)(1,"div",1)(2,"h2"),O(3),M(4,"translate"),y(),J(5,oU,1,0,"button",2),y(),v(6,"div",3),J(7,uU,2,2,"ng-container",4),y()(),J(8,dU,2,0,"ng-template",null,5,Td)),r&2){let s=ii(9);g(3),K(E(4,4,o.categoryName)),g(2),w("ngIf",o.showReloadButton),g(2),w("ngIf",o.components.length>0)("ngIfElse",s)}},dependencies:[sn,Be,Np,Mo,Pe],styles:['.box[_ngcontent-%COMP%]{width:15.25rem;margin-left:.25rem;margin-bottom:.8rem}.box[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{height:2.3rem;display:flex;flex-direction:row;align-items:center;justify-content:space-between;border-top-left-radius:.1rem;border-top-right-radius:.1rem}.theme-light[_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{background-color:#d1d1d1;color:#000;border-top:1px solid #d1d1d1;border-left:1px solid #d1d1d1;border-right:1px solid #d1d1d1}.theme-dark[_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{background-color:#3a4042;color:#ccc;border-top:1px solid #3a4042;border-left:1px solid #3a4042;border-right:1px solid #3a4042}.box[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-weight:400;font-size:1.2rem;padding:.5rem}.box[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .reload[_ngcontent-%COMP%]{height:1.8rem;width:1.8rem;border:none;outline:none;background-size:contain;background-origin:content-box;background-repeat:no-repeat;margin-right:.25rem;padding:.25rem;border-radius:.1rem}.theme-light[_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .reload[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .reload[_ngcontent-%COMP%]{background-color:transparent;background-image:url("./media/reload-OBYJPV4N.svg")}.theme-dark[_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .reload[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .reload[_ngcontent-%COMP%]{background-color:transparent;background-image:url("./media/reload-AUKGIIT3.svg")}.box[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .reload[_ngcontent-%COMP%]:hover{cursor:pointer}.theme-light[_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .reload[_ngcontent-%COMP%]:hover, .theme-light   [_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .reload[_ngcontent-%COMP%]:hover{background-color:#ebebeb}.theme-dark[_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .reload[_ngcontent-%COMP%]:hover, .theme-dark   [_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .reload[_ngcontent-%COMP%]:hover{background-color:#262a2b}.box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:grid;grid-gap:.7rem;grid-template-columns:1fr 1fr 1fr;padding:.7rem;-webkit-user-select:none;user-select:none;border-bottom-left-radius:.1rem;border-bottom-right-radius:.1rem}.theme-light[_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#000;border:1px solid #d1d1d1}.theme-dark[_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{background-color:#262a2b;color:#ccc;border:1px solid #3a4042}.box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .no-components[_ngcontent-%COMP%]{grid-column:1/-1}.box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .component-to-select[_ngcontent-%COMP%]{height:fit-content}.box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .component-to-select[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{text-align:center;position:relative;border:1px solid;border-radius:.1rem;width:100%;padding-top:100%}.box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .component-to-select[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{top:calc(50% - .2rem);left:0;bottom:0;right:0;position:absolute;font-size:1.2rem;line-height:0}.box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .component-to-select[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;inset:50% 0 0 50%;transform:translateY(-50%) translate(-50%);height:60%;width:60%}.box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .component-to-select[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;font-size:.9rem;margin:.25rem 0 0;word-break:break-word}.theme-light[_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .component-to-select[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .component-to-select[_ngcontent-%COMP%]{color:#000}.theme-light[_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .component-to-select[_ngcontent-%COMP%]:hover, .theme-light   [_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .component-to-select[_ngcontent-%COMP%]:hover{color:#d1d1d1}.theme-light[_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .component-to-select[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .component-to-select[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{filter:invert(91%) sepia(0%) saturate(96%) hue-rotate(178deg) brightness(92%) contrast(95%)}.theme-dark[_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .component-to-select[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .component-to-select[_ngcontent-%COMP%]{color:#ccc}.theme-dark[_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .component-to-select[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .component-to-select[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:invert(99%) sepia(0%) saturate(540%) hue-rotate(169deg) brightness(81%) contrast(100%)}.theme-dark[_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .component-to-select[_ngcontent-%COMP%]:hover, .theme-dark   [_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .component-to-select[_ngcontent-%COMP%]:hover{color:#3a4042}.theme-dark[_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .component-to-select[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .component-to-select[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{filter:invert(22%) sepia(14%) saturate(285%) hue-rotate(149deg) brightness(94%) contrast(88%)}.theme-light[_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .active-selected-component[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .active-selected-component[_ngcontent-%COMP%]{color:#27ae60}.theme-light[_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .active-selected-component[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .active-selected-component[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:invert(63%) sepia(63%) saturate(498%) hue-rotate(93deg) brightness(93%) contrast(89%)}.theme-light[_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .active-selected-component[_ngcontent-%COMP%]:hover, .theme-light   [_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .active-selected-component[_ngcontent-%COMP%]:hover{color:#27ae60}.theme-light[_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .active-selected-component[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .active-selected-component[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{filter:invert(63%) sepia(63%) saturate(498%) hue-rotate(93deg) brightness(93%) contrast(89%)}.theme-dark[_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .active-selected-component[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .active-selected-component[_ngcontent-%COMP%]{color:#27ae60}.theme-dark[_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .active-selected-component[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .active-selected-component[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:invert(50%) sepia(76%) saturate(435%) hue-rotate(93deg) brightness(95%) contrast(88%)}.theme-dark[_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .active-selected-component[_ngcontent-%COMP%]:hover, .theme-dark   [_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .active-selected-component[_ngcontent-%COMP%]:hover{color:#27ae60}.theme-dark[_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .active-selected-component[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .box[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .active-selected-component[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{filter:invert(50%) sepia(76%) saturate(435%) hue-rotate(93deg) brightness(95%) contrast(88%)}']});let i=e;return i})();function pU(i,e){if(i&1&&q(0,"app-construction-box-category",10),i&2){let n=A();w("components",n.plugComponents)("searchText",n.searchText)}}function fU(i,e){if(i&1&&q(0,"app-construction-box-category",11),i&2){let n=A();w("components",n.localComponents)("searchText",n.searchText)}}function mU(i,e){if(i&1&&q(0,"app-construction-box-category",12),i&2){let n=A();w("components",n.sharedComponents)("searchText",n.searchText)}}var TI=(()=>{let e=class e{constructor(t,r,o){this.componentProviderService=t,this.shortcuts=r,this.projects=o,this.searchText=""}get showPlugComponents(){return this.projects.currProject?this.projects.currProject.type==="comp":!1}get basicComponents(){return this.componentProviderService.basicElements}get advancedComponents(){return this.componentProviderService.advancedElements}get plugComponents(){return this.componentProviderService.plugElements}get ioComponents(){return this.componentProviderService.ioElements}get userDefinedComponents(){return this.componentProviderService.userDefinedElements}get localComponents(){return this.componentProviderService.localElements}get sharedComponents(){return this.componentProviderService.shareElements}focusSearch(){this.shortcuts.disableShortcutListener()}blurSearch(){this.shortcuts.enableShortcutListener()}reloadUserElements(){this.projects.reloadUserElements()}};e.\u0275fac=function(r){return new(r||e)(x(be),x(_n),x(We))},e.\u0275cmp=ie({type:e,selectors:[["app-construction-box"]],decls:11,vars:16,consts:[["id","construction-box"],["id","component-search","type","text","aria-label","Search",3,"placeholder","ngModel","ngModelChange","focus","blur"],[1,"scroll-container"],["categoryName","CONST_BOX.CATEGORIES.BASIC",3,"components","searchText"],["categoryName","CONST_BOX.CATEGORIES.ADVANCED",3,"components","searchText"],["categoryName","CONST_BOX.CATEGORIES.PLUG",3,"components","searchText",4,"ngIf"],["categoryName","CONST_BOX.CATEGORIES.IO",3,"components","searchText"],["categoryName","CONST_BOX.CATEGORIES.USER",3,"components","searchText","showReloadButton","reloadElements"],["categoryName","CONST_BOX.CATEGORIES.LOCAL",3,"components","searchText",4,"ngIf"],["categoryName","CONST_BOX.CATEGORIES.SHARE",3,"components","searchText",4,"ngIf"],["categoryName","CONST_BOX.CATEGORIES.PLUG",3,"components","searchText"],["categoryName","CONST_BOX.CATEGORIES.LOCAL",3,"components","searchText"],["categoryName","CONST_BOX.CATEGORIES.SHARE",3,"components","searchText"]],template:function(r,o){r&1&&(v(0,"div",0)(1,"input",1),T("ngModelChange",function(a){return o.searchText=a})("focus",function(){return o.focusSearch()})("blur",function(){return o.blurSearch()}),M(2,"translate"),y(),v(3,"div",2),q(4,"app-construction-box-category",3)(5,"app-construction-box-category",4),J(6,pU,1,2,"app-construction-box-category",5),q(7,"app-construction-box-category",6),v(8,"app-construction-box-category",7),T("reloadElements",function(){return o.reloadUserElements()}),y(),J(9,fU,1,2,"app-construction-box-category",8)(10,mU,1,2,"app-construction-box-category",9),y()()),r&2&&(g(1),w("placeholder",E(2,14,"CONST_BOX.SEARCH"))("ngModel",o.searchText),g(3),w("components",o.basicComponents)("searchText",o.searchText),g(1),w("components",o.advancedComponents)("searchText",o.searchText),g(1),w("ngIf",o.showPlugComponents),g(1),w("components",o.ioComponents)("searchText",o.searchText),g(1),w("components",o.userDefinedComponents)("searchText",o.searchText)("showReloadButton",!0),g(1),w("ngIf",o.localComponents.length>0),g(1),w("ngIf",o.sharedComponents.length>0))},dependencies:[Be,In,Et,jn,SI,Pe],styles:['#construction-box[_ngcontent-%COMP%]{height:calc(100vh - 95px);width:16rem;display:flex;flex-direction:column}.theme-light[_nghost-%COMP%]   #construction-box[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   #construction-box[_ngcontent-%COMP%]{background-color:#f5f5f5;border-right:1px solid #d1d1d1}.theme-dark[_nghost-%COMP%]   #construction-box[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   #construction-box[_ngcontent-%COMP%]{background-color:#262a2b;border-right:1px solid #3a4042}#construction-box[_ngcontent-%COMP%]   #component-search[_ngcontent-%COMP%]{width:15.25rem;height:2.5rem;font-size:.9rem;padding:1.25rem;outline:none;border-radius:.3rem;margin-left:.25rem;margin-top:.5rem;margin-bottom:.5rem;background-position:right;background-repeat:no-repeat;background-origin:content-box}.theme-light[_nghost-%COMP%]   #construction-box[_ngcontent-%COMP%]   #component-search[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   #construction-box[_ngcontent-%COMP%]   #component-search[_ngcontent-%COMP%]{border:1px solid #d1d1d1;background-color:#f5f5f5;color:#000;background-image:url("./media/search-JTHDFMT4.svg")}.theme-dark[_nghost-%COMP%]   #construction-box[_ngcontent-%COMP%]   #component-search[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   #construction-box[_ngcontent-%COMP%]   #component-search[_ngcontent-%COMP%]{border:1px solid #3a4042;background-color:#262a2b;color:#ccc;background-image:url("./media/search-HTUX52MG.svg")}.theme-dark[_nghost-%COMP%]   #construction-box[_ngcontent-%COMP%]   #component-search[_ngcontent-%COMP%]::placeholder, .theme-dark   [_nghost-%COMP%]   #construction-box[_ngcontent-%COMP%]   #component-search[_ngcontent-%COMP%]::placeholder{color:#7e7e7e}#construction-box[_ngcontent-%COMP%]   .scroll-container[_ngcontent-%COMP%]{width:16rem;height:calc(100vh - 40px - 3.5rem);overflow:auto;margin:auto;overflow-x:hidden;scrollbar-width:thin}.theme-light[_nghost-%COMP%]   #construction-box[_ngcontent-%COMP%]   .scroll-container[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   #construction-box[_ngcontent-%COMP%]   .scroll-container[_ngcontent-%COMP%]{background-color:#f5f5f5;border-right:1px solid #d1d1d1}.theme-dark[_nghost-%COMP%]   #construction-box[_ngcontent-%COMP%]   .scroll-container[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   #construction-box[_ngcontent-%COMP%]   .scroll-container[_ngcontent-%COMP%]{background-color:#262a2b;border-right:1px solid #3a4042}.theme-light[_nghost-%COMP%]   #construction-box[_ngcontent-%COMP%]   .scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar-track, .theme-light   [_nghost-%COMP%]   #construction-box[_ngcontent-%COMP%]   .scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#f5f5f5}.theme-dark[_nghost-%COMP%]   #construction-box[_ngcontent-%COMP%]   .scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar-track, .theme-dark   [_nghost-%COMP%]   #construction-box[_ngcontent-%COMP%]   .scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#262a2b}#construction-box[_ngcontent-%COMP%]   .scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:5px}#construction-box[_ngcontent-%COMP%]   .scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:2.5px}.theme-light[_nghost-%COMP%]   #construction-box[_ngcontent-%COMP%]   .scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, .theme-light   [_nghost-%COMP%]   #construction-box[_ngcontent-%COMP%]   .scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#d1d1d1}.theme-dark[_nghost-%COMP%]   #construction-box[_ngcontent-%COMP%]   .scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, .theme-dark   [_nghost-%COMP%]   #construction-box[_ngcontent-%COMP%]   .scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#3a4042}.theme-light[_nghost-%COMP%]   #construction-box[_ngcontent-%COMP%]   .scroll-container[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   #construction-box[_ngcontent-%COMP%]   .scroll-container[_ngcontent-%COMP%]{scrollbar-color:#d1d1d1 #f5f5f5}.theme-dark[_nghost-%COMP%]   #construction-box[_ngcontent-%COMP%]   .scroll-container[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   #construction-box[_ngcontent-%COMP%]   .scroll-container[_ngcontent-%COMP%]{scrollbar-color:#3a4042 #262a2b}']});let i=e;return i})();var _U=["loadingRef"];function vU(i,e){i&1&&(v(0,"div",9)(1,"app-input",10),M(2,"translate"),v(3,"app-input-error",11),O(4),M(5,"translate"),y(),v(6,"app-input-error",12),O(7),M(8,"translate"),y(),v(9,"app-input-error",13),O(10),M(11,"translate"),y()(),v(12,"app-input",14),M(13,"translate"),v(14,"app-input-error",11),O(15),M(16,"translate"),y(),v(17,"app-input-error",12),O(18),M(19,"translate"),y(),v(20,"app-input-error",13),O(21),M(22,"translate"),y()()()),i&2&&(g(1),w("label",E(2,8,"POPUP.IMAGE_EXPORT.WIDTH")),g(3),K(E(5,10,"POPUP.IMAGE_EXPORT.MIN_ERROR")),g(3),K(E(8,12,"POPUP.IMAGE_EXPORT.MAX_ERROR")),g(3),K(E(11,14,"POPUP.IMAGE_EXPORT.REQ_ERROR")),g(2),w("label",E(13,16,"POPUP.IMAGE_EXPORT.HEIGHT")),g(3),K(E(16,18,"POPUP.IMAGE_EXPORT.MIN_ERROR")),g(3),K(E(19,20,"POPUP.IMAGE_EXPORT.MAX_ERROR")),g(3),K(E(22,22,"POPUP.IMAGE_EXPORT.REQ_ERROR")))}var AI=(()=>{let e=class e extends Nt{constructor(t,r,o,s,a,l){super(),this.formBuilder=t,this.imageExporter=r,this.fileSaverService=o,this.projectService=s,this.themingService=a,this.loadingService=l}ngOnInit(){this.form=this.formBuilder.group({transparent:[],customDimensions:[],dimensionX:["",[mt.required,mt.min(1),mt.max(15e3)]],dimensionY:["",[mt.required,mt.min(1),mt.max(15e3)]]})}isInvalid(){return this.form.controls.customDimensions.value&&this.form.invalid}generate(t){return $(this,null,function*(){let r,o=this.loadingService.add("LOADING.GENERATING_IMAGE",this._loadingRef,!0);this.form.controls.customDimensions.value&&(r=new R(this.form.controls.dimensionX.value,this.form.controls.dimensionY.value));let s=this.themingService.currentTheme==="dark"?this.form.controls.transparent.value?2:0:this.form.controls.transparent.value?3:1;try{t==="svg"?yield this.fileSaverService.saveLocalFile(this.imageExporter.generateSVG(this.projectService.currProject,{size:r,theme:s}),"svg",this.projectService.currProject.name):yield this.fileSaverService.saveLocalFileBlob(yield this.imageExporter.generateImage(this.projectService.currProject,t,{size:r,theme:s}),t==="jpeg"?"jpg":t,this.projectService.currProject.name)}finally{o()}})}};e.\u0275fac=function(r){return new(r||e)(x(xr),x(Ep),x(vp),x(We),x(Re),x(Ii))},e.\u0275cmp=ie({type:e,selectors:[["app-image-export"]],viewQuery:function(r,o){if(r&1&&et(_U,7,dn),r&2){let s;Je(s=tt())&&(o._loadingRef=s.first)}},features:[ke],decls:25,vars:20,consts:[[1,"image-export"],[3,"formGroup"],[1,"checkbox"],["formControlName","transparent"],["formControlName","customDimensions"],["class","dimensions",4,"ngIf"],[1,"buttons"],[1,"btn-raised","primary",3,"disabled","click"],["loadingRef",""],[1,"dimensions"],["formControlName","dimensionX","type","number",3,"label"],["error","min"],["error","max"],["error","required"],["formControlName","dimensionY","type","number",3,"label"]],template:function(r,o){r&1&&(v(0,"div",0)(1,"form",1)(2,"div",2)(3,"span"),O(4),M(5,"translate"),y(),q(6,"app-switch",3),y(),v(7,"div",2)(8,"span"),O(9),M(10,"translate"),y(),q(11,"app-switch",4),y(),J(12,vU,23,24,"div",5),v(13,"div",6)(14,"button",7),T("click",function(){return o.generate("svg")}),O(15),M(16,"translate"),y(),v(17,"button",7),T("click",function(){return o.generate("png")}),O(18),M(19,"translate"),y(),v(20,"button",7),T("click",function(){return o.generate("jpeg")}),O(21),M(22,"translate"),y()(),Hi(23,null,8),y()()),r&2&&(g(1),w("formGroup",o.form),g(3),K(E(5,10,"POPUP.IMAGE_EXPORT.TRANSPARENT")),g(5),K(E(10,12,"POPUP.IMAGE_EXPORT.RESOLUTION")),g(3),w("ngIf",o.form.controls.customDimensions.value),g(2),w("disabled",o.isInvalid()),g(1),U(" ",E(16,14,"POPUP.IMAGE_EXPORT.GENERATE_SVG")," "),g(2),w("disabled",o.isInvalid()),g(1),U(" ",E(19,16,"POPUP.IMAGE_EXPORT.GENERATE_PNG")," "),g(2),w("disabled",o.form.controls.transparent.value||o.isInvalid()),g(1),U(" ",E(22,18,"POPUP.IMAGE_EXPORT.GENERATE_JPG")," "))},dependencies:[Be,Uo,Et,wr,Mi,ao,Ir,Sr,al,Pe],styles:[".image-export[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin:1rem}.image-export[_ngcontent-%COMP%]   form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;margin:1rem 0}.image-export[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .dimensions[_ngcontent-%COMP%] > app-input[_ngcontent-%COMP%]{width:100%}.image-export[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .dimensions[_ngcontent-%COMP%] > app-input[_ngcontent-%COMP%]:first-of-type{margin-right:.5rem}.image-export[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .dimensions[_ngcontent-%COMP%] > app-input[_ngcontent-%COMP%]:last-of-type{margin-left:.5rem}"]});let i=e;return i})();var cl=(()=>{let e=class e{constructor(t){this.shortcutsService=t}transform(t){return this.shortcutsService.getShortcutTextForAction(t)}};e.\u0275fac=function(r){return new(r||e)(x(_n,16))},e.\u0275pipe=dr({name:"shortcutText",type:e,pure:!0});let i=e;return i})();function yU(i,e){if(i&1){let n=le();v(0,"div",1),T("click",function(){H(n);let r=A();return W(r.saveProject())}),O(1),M(2,"translate"),v(3,"span"),O(4),M(5,"shortcutText"),y()()}i&2&&(g(1),U(" ",E(2,2,"DROPDOWN.FILE.SAVE")," "),g(3),K(E(5,4,"save")))}function CU(i,e){if(i&1){let n=le();v(0,"div",1),T("click",function(){H(n);let r=A();return W(r.cloneProject())}),O(1),M(2,"translate"),y()}i&2&&(g(1),U(" ",E(2,1,"DROPDOWN.FILE.CLONE")," "))}function bU(i,e){if(i&1){let n=le();st(0),q(1,"hr"),v(2,"div",1),T("click",function(){H(n);let r=A();return W(r.shareProject())}),O(3),M(4,"translate"),y(),at()}i&2&&(g(3),U(" ",E(4,1,"DROPDOWN.FILE.SHARE")," "))}var DI=(()=>{let e=class e{constructor(t,r,o,s){this.editorInteractionService=t,this.user=r,this.projects=o,this.popupService=s,this.requestClosed=new Me}close(){this.requestClosed.emit()}get canClone(){return this.projects.mainProject.source==="share"&&this.user.isLoggedIn}get canSave(){return this.projects.mainProject.source!=="share"}get canShare(){return this.projects.mainProject.source==="server"&&this.user.isLoggedIn}newProject(){this.close(),this.editorInteractionService.newProject()}newComponent(){this.editorInteractionService.newComponent(),this.close()}openProject(){this.close(),this.editorInteractionService.openProject()}saveProject(){this.editorInteractionService.saveProject(),this.close()}exportProject(){return $(this,null,function*(){this.editorInteractionService.exportToFile(),this.close()})}shareProject(){this.editorInteractionService.shareProject(),this.close()}cloneProject(){this.projects.cloneShare(),this.close()}screenshot(){return $(this,null,function*(){this.popupService.showPopup(AI,"POPUP.IMAGE_EXPORT.TITLE",!1),this.close()})}};e.\u0275fac=function(r){return new(r||e)(x(gn),x($n),x(We),x(hn))},e.\u0275cmp=ie({type:e,selectors:[["app-file-dropdown"]],outputs:{requestClosed:"requestClosed"},decls:30,vars:27,consts:[[1,"dropdown"],["tabindex","0",3,"click"],["tabindex","0",3,"click",4,"ngIf"],[4,"ngIf"]],template:function(r,o){r&1&&(v(0,"div",0)(1,"div",1),T("click",function(){return o.newProject()}),O(2),M(3,"translate"),v(4,"span"),O(5),M(6,"shortcutText"),y()(),v(7,"div",1),T("click",function(){return o.newComponent()}),O(8),M(9,"translate"),v(10,"span"),O(11),M(12,"shortcutText"),y()(),q(13,"hr"),v(14,"div",1),T("click",function(){return o.openProject()}),O(15),M(16,"translate"),v(17,"span"),O(18),M(19,"shortcutText"),y()(),J(20,yU,6,6,"div",2)(21,CU,3,3,"div",2),v(22,"div",1),T("click",function(){return o.exportProject()}),O(23),M(24,"translate"),y(),J(25,bU,5,3,"ng-container",3),q(26,"hr"),v(27,"div",1),T("click",function(){return o.screenshot()}),O(28),M(29,"translate"),y()()),r&2&&(g(2),U(" ",E(3,11,"DROPDOWN.FILE.NEW_PROJECT")," "),g(3),K(E(6,13,"newProj")),g(3),U(" ",E(9,15,"DROPDOWN.FILE.NEW_COMPONENT")," "),g(3),K(E(12,17,"newComp")),g(4),U(" ",E(16,19,"DROPDOWN.FILE.OPEN")," "),g(3),K(E(19,21,"openProj")),g(2),w("ngIf",o.canSave),g(1),w("ngIf",o.canClone),g(2),U(" ",E(24,23,"DROPDOWN.FILE.EXPORT")," "),g(2),w("ngIf",o.canShare),g(3),U(" ",E(29,25,"DROPDOWN.FILE.IMAGE")," "))},dependencies:[Be,Pe,cl],styles:[".dropdown[_ngcontent-%COMP%]{position:absolute;z-index:200;width:max-content;min-width:10rem;min-height:1rem;display:flex;flex-direction:column;-webkit-user-select:none;user-select:none;font-size:.9rem}.theme-light[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#000;border:solid #d1d1d1 1px;border-top-right-radius:.1rem;border-bottom-left-radius:.1rem;border-bottom-right-radius:.1rem}.theme-light[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:.5rem}.theme-light[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover, .theme-light   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{background-color:#d1d1d1}.theme-light[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{float:right;margin-left:3rem}.theme-light[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:100%;margin:auto;border-width:0;border-bottom-width:1px;border-style:solid;border-color:#d1d1d1}.theme-dark[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]{background-color:#262a2b;color:#ccc;border:solid #3a4042 1px;border-top-right-radius:.1rem;border-bottom-left-radius:.1rem;border-bottom-right-radius:.1rem}.theme-dark[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:.5rem}.theme-dark[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover, .theme-dark   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{background-color:#3a4042}.theme-dark[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{float:right;margin-left:3rem}.theme-dark[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:100%;margin:auto;border-width:0;border-bottom-width:1px;border-style:solid;border-color:#3a4042}"],changeDetection:0});let i=e;return i})();function wU(i,e){if(i&1){let n=le();st(0),q(1,"hr"),v(2,"div",1),T("click",function(){H(n);let r=A();return W(r.plugs())}),O(3),M(4,"translate"),v(5,"span"),O(6),M(7,"shortcutText"),y()(),at()}i&2&&(g(3),U(" ",E(4,2,"DROPDOWN.EDIT.PLUGS")," "),g(3),K(E(7,4,"editPlugs")))}var kI=(()=>{let e=class e{constructor(t,r,o){this.editorInteractionService=t,this.projects=r,this.elemProv=o,this.requestClosed=new Me}get istCustomComponent(){return this.elemProv.isCustomElement(this.projects.currProject.id)}close(){this.requestClosed.emit()}undo(){this.editorInteractionService.undo(),this.close()}redo(){this.editorInteractionService.redo(),this.close()}copy(){this.editorInteractionService.copy(),this.close()}paste(){this.editorInteractionService.paste(),this.close()}cut(){this.editorInteractionService.cut(),this.close()}delete(){this.editorInteractionService.delete(),this.close()}plugs(){this.editorInteractionService.editCustomComponentPlugs(),this.close()}};e.\u0275fac=function(r){return new(r||e)(x(gn),x(We),x(be))},e.\u0275cmp=ie({type:e,selectors:[["app-edit-dropdown"]],outputs:{requestClosed:"requestClosed"},decls:40,vars:37,consts:[[1,"dropdown"],["tabindex","0",3,"click"],[4,"ngIf"]],template:function(r,o){r&1&&(v(0,"div",0)(1,"div",1),T("click",function(){return o.undo()}),O(2),M(3,"translate"),v(4,"span"),O(5),M(6,"shortcutText"),y()(),v(7,"div",1),T("click",function(){return o.redo()}),O(8),M(9,"translate"),v(10,"span"),O(11),M(12,"shortcutText"),y()(),q(13,"hr"),v(14,"div",1),T("click",function(){return o.copy()}),O(15),M(16,"translate"),v(17,"span"),O(18),M(19,"shortcutText"),y()(),v(20,"div",1),T("click",function(){return o.paste()}),O(21),M(22,"translate"),v(23,"span"),O(24),M(25,"shortcutText"),y()(),v(26,"div",1),T("click",function(){return o.cut()}),O(27),M(28,"translate"),v(29,"span"),O(30),M(31,"shortcutText"),y()(),q(32,"hr"),v(33,"div",1),T("click",function(){return o.delete()}),O(34),M(35,"translate"),v(36,"span"),O(37),M(38,"shortcutText"),y()(),J(39,wU,8,6,"ng-container",2),y()),r&2&&(g(2),U(" ",E(3,13,"DROPDOWN.EDIT.UNDO")," "),g(3),K(E(6,15,"undo")),g(3),U(" ",E(9,17,"DROPDOWN.EDIT.REDO")," "),g(3),K(E(12,19,"redo")),g(4),U(" ",E(16,21,"DROPDOWN.EDIT.COPY")," "),g(3),K(E(19,23,"copy")),g(3),U(" ",E(22,25,"DROPDOWN.EDIT.PASTE")," "),g(3),K(E(25,27,"paste")),g(3),U(" ",E(28,29,"DROPDOWN.EDIT.CUT")," "),g(3),K(E(31,31,"cut")),g(4),U(" ",E(35,33,"DROPDOWN.EDIT.DELETE")," "),g(3),K(E(38,35,"delete")),g(2),w("ngIf",o.istCustomComponent))},dependencies:[Be,Pe,cl],styles:[".dropdown[_ngcontent-%COMP%]{position:absolute;z-index:200;width:max-content;min-width:10rem;min-height:1rem;display:flex;flex-direction:column;-webkit-user-select:none;user-select:none;font-size:.9rem}.theme-light[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#000;border:solid #d1d1d1 1px;border-top-right-radius:.1rem;border-bottom-left-radius:.1rem;border-bottom-right-radius:.1rem}.theme-light[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:.5rem}.theme-light[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover, .theme-light   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{background-color:#d1d1d1}.theme-light[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{float:right;margin-left:3rem}.theme-light[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:100%;margin:auto;border-width:0;border-bottom-width:1px;border-style:solid;border-color:#d1d1d1}.theme-dark[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]{background-color:#262a2b;color:#ccc;border:solid #3a4042 1px;border-top-right-radius:.1rem;border-bottom-left-radius:.1rem;border-bottom-right-radius:.1rem}.theme-dark[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:.5rem}.theme-dark[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover, .theme-dark   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{background-color:#3a4042}.theme-dark[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{float:right;margin-left:3rem}.theme-dark[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:100%;margin:auto;border-width:0;border-bottom-width:1px;border-style:solid;border-color:#3a4042}"],changeDetection:0});let i=e;return i})();var NI=(()=>{let e=class e{constructor(t){this.editorInteractionService=t,this.requestClosed=new Me}close(){this.requestClosed.emit()}zoomIn(){this.editorInteractionService.zoomIn(),this.close()}zoomOut(){this.editorInteractionService.zoomOut(),this.close()}zoom100(){this.editorInteractionService.zoom100(),this.close()}fullscreen(){this.editorInteractionService.fullscreen(),this.close()}};e.\u0275fac=function(r){return new(r||e)(x(gn))},e.\u0275cmp=ie({type:e,selectors:[["app-view-dropdown"]],outputs:{requestClosed:"requestClosed"},decls:26,vars:24,consts:[[1,"dropdown"],["tabindex","0",3,"click"]],template:function(r,o){r&1&&(v(0,"div",0)(1,"div",1),T("click",function(){return o.zoomIn()}),O(2),M(3,"translate"),v(4,"span"),O(5),M(6,"shortcutText"),y()(),v(7,"div",1),T("click",function(){return o.zoomOut()}),O(8),M(9,"translate"),v(10,"span"),O(11),M(12,"shortcutText"),y()(),v(13,"div",1),T("click",function(){return o.zoom100()}),O(14),M(15,"translate"),v(16,"span"),O(17),M(18,"shortcutText"),y()(),q(19,"hr"),v(20,"div",1),T("click",function(){return o.fullscreen()}),O(21),M(22,"translate"),v(23,"span"),O(24),M(25,"shortcutText"),y()()()),r&2&&(g(2),U(" ",E(3,8,"DROPDOWN.VIEW.ZOOM_IN")," "),g(3),K(E(6,10,"zoomIn")),g(3),U(" ",E(9,12,"DROPDOWN.VIEW.ZOOM_OUT")," "),g(3),K(E(12,14,"zoomOut")),g(3),U(" ",E(15,16,"DROPDOWN.VIEW.100")," "),g(3),K(E(18,18,"zoom100")),g(4),U(" ",E(22,20,"DROPDOWN.VIEW.FULLSCREEN")," "),g(3),K(E(25,22,"fullscreen")))},dependencies:[Pe,cl],styles:[".dropdown[_ngcontent-%COMP%]{position:absolute;z-index:200;width:max-content;min-width:10rem;min-height:1rem;display:flex;flex-direction:column;-webkit-user-select:none;user-select:none;font-size:.9rem}.theme-light[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#000;border:solid #d1d1d1 1px;border-top-right-radius:.1rem;border-bottom-left-radius:.1rem;border-bottom-right-radius:.1rem}.theme-light[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:.5rem}.theme-light[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover, .theme-light   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{background-color:#d1d1d1}.theme-light[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{float:right;margin-left:3rem}.theme-light[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:100%;margin:auto;border-width:0;border-bottom-width:1px;border-style:solid;border-color:#d1d1d1}.theme-dark[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]{background-color:#262a2b;color:#ccc;border:solid #3a4042 1px;border-top-right-radius:.1rem;border-bottom-left-radius:.1rem;border-bottom-right-radius:.1rem}.theme-dark[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:.5rem}.theme-dark[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover, .theme-dark   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{background-color:#3a4042}.theme-dark[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{float:right;margin-left:3rem}.theme-dark[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:100%;margin:auto;border-width:0;border-bottom-width:1px;border-style:solid;border-color:#3a4042}"],changeDetection:0});let i=e;return i})();function sy(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Gs=sy();function BI(i){Gs=i}var VI=/[&<>"']/,OU=new RegExp(VI.source,"g"),UI=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,EU=new RegExp(UI.source,"g"),IU={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},RI=i=>IU[i];function mi(i,e){if(e){if(VI.test(i))return i.replace(OU,RI)}else if(UI.test(i))return i.replace(EU,RI);return i}var SU=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function TU(i){return i.replace(SU,(e,n)=>(n=n.toLowerCase(),n==="colon"?":":n.charAt(0)==="#"?n.charAt(1)==="x"?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1)):""))}var AU=/(^|[^\[])\^/g;function Pt(i,e){i=typeof i=="string"?i:i.source,e=e||"";let n={replace:(t,r)=>(r=typeof r=="object"&&"source"in r?r.source:r,r=r.replace(AU,"$1"),i=i.replace(t,r),n),getRegex:()=>new RegExp(i,e)};return n}function FI(i){try{i=encodeURI(i).replace(/%25/g,"%")}catch{return null}return i}var Fp={exec:()=>null};function LI(i,e){let n=i.replace(/\|/g,(o,s,a)=>{let l=!1,c=s;for(;--c>=0&&a[c]==="\\";)l=!l;return l?"|":" |"}),t=n.split(/ \|/),r=0;if(t[0].trim()||t.shift(),t.length>0&&!t[t.length-1].trim()&&t.pop(),e)if(t.length>e)t.splice(e);else for(;t.length<e;)t.push("");for(;r<t.length;r++)t[r]=t[r].trim().replace(/\\\|/g,"|");return t}function Rp(i,e,n){let t=i.length;if(t===0)return"";let r=0;for(;r<t;){let o=i.charAt(t-r-1);if(o===e&&!n)r++;else if(o!==e&&n)r++;else break}return i.slice(0,t-r)}function DU(i,e){if(i.indexOf(e[1])===-1)return-1;let n=0;for(let t=0;t<i.length;t++)if(i[t]==="\\")t++;else if(i[t]===e[0])n++;else if(i[t]===e[1]&&(n--,n<0))return t;return-1}function jI(i,e,n,t){let r=e.href,o=e.title?mi(e.title):null,s=i[1].replace(/\\([\[\]])/g,"$1");if(i[0].charAt(0)!=="!"){t.state.inLink=!0;let a={type:"link",raw:n,href:r,title:o,text:s,tokens:t.inlineTokens(s)};return t.state.inLink=!1,a}return{type:"image",raw:n,href:r,title:o,text:mi(s)}}function kU(i,e){let n=i.match(/^(\s+)(?:```)/);if(n===null)return e;let t=n[1];return e.split(`
`).map(r=>{let o=r.match(/^\s+/);if(o===null)return r;let[s]=o;return s.length>=t.length?r.slice(t.length):r}).join(`
`)}var dl=class{options;rules;lexer;constructor(e){this.options=e||Gs}space(e){let n=this.rules.block.newline.exec(e);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(e){let n=this.rules.block.code.exec(e);if(n){let t=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?t:Rp(t,`
`)}}}fences(e){let n=this.rules.block.fences.exec(e);if(n){let t=n[0],r=kU(t,n[3]||"");return{type:"code",raw:t,lang:n[2]?n[2].trim().replace(this.rules.inline._escapes,"$1"):n[2],text:r}}}heading(e){let n=this.rules.block.heading.exec(e);if(n){let t=n[2].trim();if(/#$/.test(t)){let r=Rp(t,"#");(this.options.pedantic||!r||/ $/.test(r))&&(t=r.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(e){let n=this.rules.block.hr.exec(e);if(n)return{type:"hr",raw:n[0]}}blockquote(e){let n=this.rules.block.blockquote.exec(e);if(n){let t=Rp(n[0].replace(/^ *>[ \t]?/gm,""),`
`),r=this.lexer.state.top;this.lexer.state.top=!0;let o=this.lexer.blockTokens(t);return this.lexer.state.top=r,{type:"blockquote",raw:n[0],tokens:o,text:t}}}list(e){let n=this.rules.block.list.exec(e);if(n){let t=n[1].trim(),r=t.length>1,o={type:"list",raw:"",ordered:r,start:r?+t.slice(0,-1):"",loose:!1,items:[]};t=r?`\\d{1,9}\\${t.slice(-1)}`:`\\${t}`,this.options.pedantic&&(t=r?t:"[*+-]");let s=new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),a="",l="",c=!1;for(;e;){let u=!1;if(!(n=s.exec(e))||this.rules.block.hr.test(e))break;a=n[0],e=e.substring(a.length);let d=n[2].split(`
`,1)[0].replace(/^\t+/,P=>" ".repeat(3*P.length)),h=e.split(`
`,1)[0],p=0;this.options.pedantic?(p=2,l=d.trimStart()):(p=n[2].search(/[^ ]/),p=p>4?1:p,l=d.slice(p),p+=n[1].length);let f=!1;if(!d&&/^ *$/.test(h)&&(a+=h+`
`,e=e.substring(h.length+1),u=!0),!u){let P=new RegExp(`^ {0,${Math.min(3,p-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),I=new RegExp(`^ {0,${Math.min(3,p-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),b=new RegExp(`^ {0,${Math.min(3,p-1)}}(?:\`\`\`|~~~)`),S=new RegExp(`^ {0,${Math.min(3,p-1)}}#`);for(;e;){let k=e.split(`
`,1)[0];if(h=k,this.options.pedantic&&(h=h.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),b.test(h)||S.test(h)||P.test(h)||I.test(e))break;if(h.search(/[^ ]/)>=p||!h.trim())l+=`
`+h.slice(p);else{if(f||d.search(/[^ ]/)>=4||b.test(d)||S.test(d)||I.test(d))break;l+=`
`+h}!f&&!h.trim()&&(f=!0),a+=k+`
`,e=e.substring(k.length+1),d=h.slice(p)}}o.loose||(c?o.loose=!0:/\n *\n *$/.test(a)&&(c=!0));let m=null,_;this.options.gfm&&(m=/^\[[ xX]\] /.exec(l),m&&(_=m[0]!=="[ ] ",l=l.replace(/^\[[ xX]\] +/,""))),o.items.push({type:"list_item",raw:a,task:!!m,checked:_,loose:!1,text:l,tokens:[]}),o.raw+=a}o.items[o.items.length-1].raw=a.trimEnd(),o.items[o.items.length-1].text=l.trimEnd(),o.raw=o.raw.trimEnd();for(let u=0;u<o.items.length;u++)if(this.lexer.state.top=!1,o.items[u].tokens=this.lexer.blockTokens(o.items[u].text,[]),!o.loose){let d=o.items[u].tokens.filter(p=>p.type==="space"),h=d.length>0&&d.some(p=>/\n.*\n/.test(p.raw));o.loose=h}if(o.loose)for(let u=0;u<o.items.length;u++)o.items[u].loose=!0;return o}}html(e){let n=this.rules.block.html.exec(e);if(n)return{type:"html",block:!0,raw:n[0],pre:n[1]==="pre"||n[1]==="script"||n[1]==="style",text:n[0]}}def(e){let n=this.rules.block.def.exec(e);if(n){let t=n[1].toLowerCase().replace(/\s+/g," "),r=n[2]?n[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",o=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline._escapes,"$1"):n[3];return{type:"def",tag:t,raw:n[0],href:r,title:o}}}table(e){let n=this.rules.block.table.exec(e);if(n){if(!/[:|]/.test(n[2]))return;let t={type:"table",raw:n[0],header:LI(n[1]).map(r=>({text:r,tokens:[]})),align:n[2].replace(/^\||\| *$/g,"").split("|"),rows:n[3]&&n[3].trim()?n[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(t.header.length===t.align.length){let r=t.align.length,o,s,a,l;for(o=0;o<r;o++){let c=t.align[o];c&&(/^ *-+: *$/.test(c)?t.align[o]="right":/^ *:-+: *$/.test(c)?t.align[o]="center":/^ *:-+ *$/.test(c)?t.align[o]="left":t.align[o]=null)}for(r=t.rows.length,o=0;o<r;o++)t.rows[o]=LI(t.rows[o],t.header.length).map(c=>({text:c,tokens:[]}));for(r=t.header.length,s=0;s<r;s++)t.header[s].tokens=this.lexer.inline(t.header[s].text);for(r=t.rows.length,s=0;s<r;s++)for(l=t.rows[s],a=0;a<l.length;a++)l[a].tokens=this.lexer.inline(l[a].text);return t}}}lheading(e){let n=this.rules.block.lheading.exec(e);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(e){let n=this.rules.block.paragraph.exec(e);if(n){let t=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:t,tokens:this.lexer.inline(t)}}}text(e){let n=this.rules.block.text.exec(e);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(e){let n=this.rules.inline.escape.exec(e);if(n)return{type:"escape",raw:n[0],text:mi(n[1])}}tag(e){let n=this.rules.inline.tag.exec(e);if(n)return!this.lexer.state.inLink&&/^<a /i.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:n[0]}}link(e){let n=this.rules.inline.link.exec(e);if(n){let t=n[2].trim();if(!this.options.pedantic&&/^</.test(t)){if(!/>$/.test(t))return;let s=Rp(t.slice(0,-1),"\\");if((t.length-s.length)%2===0)return}else{let s=DU(n[2],"()");if(s>-1){let l=(n[0].indexOf("!")===0?5:4)+n[1].length+s;n[2]=n[2].substring(0,s),n[0]=n[0].substring(0,l).trim(),n[3]=""}}let r=n[2],o="";if(this.options.pedantic){let s=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);s&&(r=s[1],o=s[3])}else o=n[3]?n[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(this.options.pedantic&&!/>$/.test(t)?r=r.slice(1):r=r.slice(1,-1)),jI(n,{href:r&&r.replace(this.rules.inline._escapes,"$1"),title:o&&o.replace(this.rules.inline._escapes,"$1")},n[0],this.lexer)}}reflink(e,n){let t;if((t=this.rules.inline.reflink.exec(e))||(t=this.rules.inline.nolink.exec(e))){let r=(t[2]||t[1]).replace(/\s+/g," ");if(r=n[r.toLowerCase()],!r){let o=t[0].charAt(0);return{type:"text",raw:o,text:o}}return jI(t,r,t[0],this.lexer)}}emStrong(e,n,t=""){let r=this.rules.inline.emStrong.lDelim.exec(e);if(!r||r[3]&&t.match(/[\p{L}\p{N}]/u))return;if(!(r[1]||r[2]||"")||!t||this.rules.inline.punctuation.exec(t)){let s=[...r[0]].length-1,a,l,c=s,u=0,d=r[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(d.lastIndex=0,n=n.slice(-1*e.length+s);(r=d.exec(n))!=null;){if(a=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!a)continue;if(l=[...a].length,r[3]||r[4]){c+=l;continue}else if((r[5]||r[6])&&s%3&&!((s+l)%3)){u+=l;continue}if(c-=l,c>0)continue;l=Math.min(l,l+c+u);let h=[...r[0]][0].length,p=e.slice(0,s+r.index+h+l);if(Math.min(s,l)%2){let m=p.slice(1,-1);return{type:"em",raw:p,text:m,tokens:this.lexer.inlineTokens(m)}}let f=p.slice(2,-2);return{type:"strong",raw:p,text:f,tokens:this.lexer.inlineTokens(f)}}}}codespan(e){let n=this.rules.inline.code.exec(e);if(n){let t=n[2].replace(/\n/g," "),r=/[^ ]/.test(t),o=/^ /.test(t)&&/ $/.test(t);return r&&o&&(t=t.substring(1,t.length-1)),t=mi(t,!0),{type:"codespan",raw:n[0],text:t}}}br(e){let n=this.rules.inline.br.exec(e);if(n)return{type:"br",raw:n[0]}}del(e){let n=this.rules.inline.del.exec(e);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(e){let n=this.rules.inline.autolink.exec(e);if(n){let t,r;return n[2]==="@"?(t=mi(n[1]),r="mailto:"+t):(t=mi(n[1]),r=t),{type:"link",raw:n[0],text:t,href:r,tokens:[{type:"text",raw:t,text:t}]}}}url(e){let n;if(n=this.rules.inline.url.exec(e)){let t,r;if(n[2]==="@")t=mi(n[0]),r="mailto:"+t;else{let o;do o=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0];while(o!==n[0]);t=mi(n[0]),n[1]==="www."?r="http://"+n[0]:r=n[0]}return{type:"link",raw:n[0],text:t,href:r,tokens:[{type:"text",raw:t,text:t}]}}}inlineText(e){let n=this.rules.inline.text.exec(e);if(n){let t;return this.lexer.state.inRawBlock?t=n[0]:t=mi(n[0]),{type:"text",raw:n[0],text:t}}}},we={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:Fp,lheading:/^(?!bull )((?:.|\n(?!\s*?\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};we._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;we._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;we.def=Pt(we.def).replace("label",we._label).replace("title",we._title).getRegex();we.bullet=/(?:[*+-]|\d{1,9}[.)])/;we.listItemStart=Pt(/^( *)(bull) */).replace("bull",we.bullet).getRegex();we.list=Pt(we.list).replace(/bull/g,we.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+we.def.source+")").getRegex();we._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";we._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;we.html=Pt(we.html,"i").replace("comment",we._comment).replace("tag",we._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();we.lheading=Pt(we.lheading).replace(/bull/g,we.bullet).getRegex();we.paragraph=Pt(we._paragraph).replace("hr",we.hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",we._tag).getRegex();we.blockquote=Pt(we.blockquote).replace("paragraph",we.paragraph).getRegex();we.normal=Q({},we);we.gfm=Xe(Q({},we.normal),{table:"^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"});we.gfm.table=Pt(we.gfm.table).replace("hr",we.hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",we._tag).getRegex();we.gfm.paragraph=Pt(we._paragraph).replace("hr",we.hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",we.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",we._tag).getRegex();we.pedantic=Xe(Q({},we.normal),{html:Pt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",we._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Fp,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Pt(we.normal._paragraph).replace("hr",we.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",we.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var ce={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Fp,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,rDelimAst:/^[^_*]*?__[^_*]*?\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\*)[punct](\*+)(?=[\s]|$)|[^punct\s](\*+)(?!\*)(?=[punct\s]|$)|(?!\*)[punct\s](\*+)(?=[^punct\s])|[\s](\*+)(?!\*)(?=[punct])|(?!\*)[punct](\*+)(?!\*)(?=[punct])|[^punct\s](\*+)(?=[^punct\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\s]|$)|[^punct\s](_+)(?!_)(?=[punct\s]|$)|(?!_)[punct\s](_+)(?=[^punct\s])|[\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Fp,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^((?![*_])[\spunctuation])/};ce._punctuation="\\p{P}$+<=>`^|~";ce.punctuation=Pt(ce.punctuation,"u").replace(/punctuation/g,ce._punctuation).getRegex();ce.blockSkip=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g;ce.anyPunctuation=/\\[punct]/g;ce._escapes=/\\([punct])/g;ce._comment=Pt(we._comment).replace("(?:-->|$)","-->").getRegex();ce.emStrong.lDelim=Pt(ce.emStrong.lDelim,"u").replace(/punct/g,ce._punctuation).getRegex();ce.emStrong.rDelimAst=Pt(ce.emStrong.rDelimAst,"gu").replace(/punct/g,ce._punctuation).getRegex();ce.emStrong.rDelimUnd=Pt(ce.emStrong.rDelimUnd,"gu").replace(/punct/g,ce._punctuation).getRegex();ce.anyPunctuation=Pt(ce.anyPunctuation,"gu").replace(/punct/g,ce._punctuation).getRegex();ce._escapes=Pt(ce._escapes,"gu").replace(/punct/g,ce._punctuation).getRegex();ce._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;ce._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;ce.autolink=Pt(ce.autolink).replace("scheme",ce._scheme).replace("email",ce._email).getRegex();ce._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;ce.tag=Pt(ce.tag).replace("comment",ce._comment).replace("attribute",ce._attribute).getRegex();ce._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;ce._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;ce._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;ce.link=Pt(ce.link).replace("label",ce._label).replace("href",ce._href).replace("title",ce._title).getRegex();ce.reflink=Pt(ce.reflink).replace("label",ce._label).replace("ref",we._label).getRegex();ce.nolink=Pt(ce.nolink).replace("ref",we._label).getRegex();ce.reflinkSearch=Pt(ce.reflinkSearch,"g").replace("reflink",ce.reflink).replace("nolink",ce.nolink).getRegex();ce.normal=Q({},ce);ce.pedantic=Xe(Q({},ce.normal),{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Pt(/^!?\[(label)\]\((.*?)\)/).replace("label",ce._label).getRegex(),reflink:Pt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",ce._label).getRegex()});ce.gfm=Xe(Q({},ce.normal),{escape:Pt(ce.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/});ce.gfm.url=Pt(ce.gfm.url,"i").replace("email",ce.gfm._extended_email).getRegex();ce.breaks=Xe(Q({},ce.gfm),{br:Pt(ce.br).replace("{2,}","*").getRegex(),text:Pt(ce.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var lo=class i{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Gs,this.options.tokenizer=this.options.tokenizer||new dl,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let n={block:we.normal,inline:ce.normal};this.options.pedantic?(n.block=we.pedantic,n.inline=ce.pedantic):this.options.gfm&&(n.block=we.gfm,this.options.breaks?n.inline=ce.breaks:n.inline=ce.gfm),this.tokenizer.rules=n}static get rules(){return{block:we,inline:ce}}static lex(e,n){return new i(n).lex(e)}static lexInline(e,n){return new i(n).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);let n;for(;n=this.inlineQueue.shift();)this.inlineTokens(n.src,n.tokens);return this.tokens}blockTokens(e,n=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(a,l,c)=>l+"    ".repeat(c.length));let t,r,o,s;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(t=a.call({lexer:this},e,n))?(e=e.substring(t.raw.length),n.push(t),!0):!1))){if(t=this.tokenizer.space(e)){e=e.substring(t.raw.length),t.raw.length===1&&n.length>0?n[n.length-1].raw+=`
`:n.push(t);continue}if(t=this.tokenizer.code(e)){e=e.substring(t.raw.length),r=n[n.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+t.raw,r.text+=`
`+t.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text):n.push(t);continue}if(t=this.tokenizer.fences(e)){e=e.substring(t.raw.length),n.push(t);continue}if(t=this.tokenizer.heading(e)){e=e.substring(t.raw.length),n.push(t);continue}if(t=this.tokenizer.hr(e)){e=e.substring(t.raw.length),n.push(t);continue}if(t=this.tokenizer.blockquote(e)){e=e.substring(t.raw.length),n.push(t);continue}if(t=this.tokenizer.list(e)){e=e.substring(t.raw.length),n.push(t);continue}if(t=this.tokenizer.html(e)){e=e.substring(t.raw.length),n.push(t);continue}if(t=this.tokenizer.def(e)){e=e.substring(t.raw.length),r=n[n.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+t.raw,r.text+=`
`+t.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text):this.tokens.links[t.tag]||(this.tokens.links[t.tag]={href:t.href,title:t.title});continue}if(t=this.tokenizer.table(e)){e=e.substring(t.raw.length),n.push(t);continue}if(t=this.tokenizer.lheading(e)){e=e.substring(t.raw.length),n.push(t);continue}if(o=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0,l=e.slice(1),c;this.options.extensions.startBlock.forEach(u=>{c=u.call({lexer:this},l),typeof c=="number"&&c>=0&&(a=Math.min(a,c))}),a<1/0&&a>=0&&(o=e.substring(0,a+1))}if(this.state.top&&(t=this.tokenizer.paragraph(o))){r=n[n.length-1],s&&r.type==="paragraph"?(r.raw+=`
`+t.raw,r.text+=`
`+t.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):n.push(t),s=o.length!==e.length,e=e.substring(t.raw.length);continue}if(t=this.tokenizer.text(e)){e=e.substring(t.raw.length),r=n[n.length-1],r&&r.type==="text"?(r.raw+=`
`+t.raw,r.text+=`
`+t.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):n.push(t);continue}if(e){let a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){let t,r,o,s=e,a,l,c;if(this.tokens.links){let u=Object.keys(this.tokens.links);if(u.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(s))!=null;)u.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(s))!=null;)s=s.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(s))!=null;)s=s.slice(0,a.index)+"++"+s.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(l||(c=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>(t=u.call({lexer:this},e,n))?(e=e.substring(t.raw.length),n.push(t),!0):!1))){if(t=this.tokenizer.escape(e)){e=e.substring(t.raw.length),n.push(t);continue}if(t=this.tokenizer.tag(e)){e=e.substring(t.raw.length),r=n[n.length-1],r&&t.type==="text"&&r.type==="text"?(r.raw+=t.raw,r.text+=t.text):n.push(t);continue}if(t=this.tokenizer.link(e)){e=e.substring(t.raw.length),n.push(t);continue}if(t=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(t.raw.length),r=n[n.length-1],r&&t.type==="text"&&r.type==="text"?(r.raw+=t.raw,r.text+=t.text):n.push(t);continue}if(t=this.tokenizer.emStrong(e,s,c)){e=e.substring(t.raw.length),n.push(t);continue}if(t=this.tokenizer.codespan(e)){e=e.substring(t.raw.length),n.push(t);continue}if(t=this.tokenizer.br(e)){e=e.substring(t.raw.length),n.push(t);continue}if(t=this.tokenizer.del(e)){e=e.substring(t.raw.length),n.push(t);continue}if(t=this.tokenizer.autolink(e)){e=e.substring(t.raw.length),n.push(t);continue}if(!this.state.inLink&&(t=this.tokenizer.url(e))){e=e.substring(t.raw.length),n.push(t);continue}if(o=e,this.options.extensions&&this.options.extensions.startInline){let u=1/0,d=e.slice(1),h;this.options.extensions.startInline.forEach(p=>{h=p.call({lexer:this},d),typeof h=="number"&&h>=0&&(u=Math.min(u,h))}),u<1/0&&u>=0&&(o=e.substring(0,u+1))}if(t=this.tokenizer.inlineText(o)){e=e.substring(t.raw.length),t.raw.slice(-1)!=="_"&&(c=t.raw.slice(-1)),l=!0,r=n[n.length-1],r&&r.type==="text"?(r.raw+=t.raw,r.text+=t.text):n.push(t);continue}if(e){let u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return n}},Ar=class{options;constructor(e){this.options=e||Gs}code(e,n,t){let r=(n||"").match(/^\S*/)?.[0];return e=e.replace(/\n$/,"")+`
`,r?'<pre><code class="language-'+mi(r)+'">'+(t?e:mi(e,!0))+`</code></pre>
`:"<pre><code>"+(t?e:mi(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e,n){return e}heading(e,n,t){return`<h${n}>${e}</h${n}>
`}hr(){return`<hr>
`}list(e,n,t){let r=n?"ol":"ul",o=n&&t!==1?' start="'+t+'"':"";return"<"+r+o+`>
`+e+"</"+r+`>
`}listitem(e,n,t){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(e){return`<p>${e}</p>
`}table(e,n){return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+n+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,n){let t=n.header?"th":"td";return(n.align?`<${t} align="${n.align}">`:`<${t}>`)+e+`</${t}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return"<br>"}del(e){return`<del>${e}</del>`}link(e,n,t){let r=FI(e);if(r===null)return t;e=r;let o='<a href="'+e+'"';return n&&(o+=' title="'+n+'"'),o+=">"+t+"</a>",o}image(e,n,t){let r=FI(e);if(r===null)return t;e=r;let o=`<img src="${e}" alt="${t}"`;return n&&(o+=` title="${n}"`),o+=">",o}text(e){return e}},Uc=class{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,n,t){return""+t}image(e,n,t){return""+t}br(){return""}},co=class i{options;renderer;textRenderer;constructor(e){this.options=e||Gs,this.options.renderer=this.options.renderer||new Ar,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Uc}static parse(e,n){return new i(n).parse(e)}static parseInline(e,n){return new i(n).parseInline(e)}parse(e,n=!0){let t="";for(let r=0;r<e.length;r++){let o=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]){let s=o,a=this.options.extensions.renderers[s.type].call({parser:this},s);if(a!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(s.type)){t+=a||"";continue}}switch(o.type){case"space":continue;case"hr":{t+=this.renderer.hr();continue}case"heading":{let s=o;t+=this.renderer.heading(this.parseInline(s.tokens),s.depth,TU(this.parseInline(s.tokens,this.textRenderer)));continue}case"code":{let s=o;t+=this.renderer.code(s.text,s.lang,!!s.escaped);continue}case"table":{let s=o,a="",l="";for(let u=0;u<s.header.length;u++)l+=this.renderer.tablecell(this.parseInline(s.header[u].tokens),{header:!0,align:s.align[u]});a+=this.renderer.tablerow(l);let c="";for(let u=0;u<s.rows.length;u++){let d=s.rows[u];l="";for(let h=0;h<d.length;h++)l+=this.renderer.tablecell(this.parseInline(d[h].tokens),{header:!1,align:s.align[h]});c+=this.renderer.tablerow(l)}t+=this.renderer.table(a,c);continue}case"blockquote":{let s=o,a=this.parse(s.tokens);t+=this.renderer.blockquote(a);continue}case"list":{let s=o,a=s.ordered,l=s.start,c=s.loose,u="";for(let d=0;d<s.items.length;d++){let h=s.items[d],p=h.checked,f=h.task,m="";if(h.task){let _=this.renderer.checkbox(!!p);c?h.tokens.length>0&&h.tokens[0].type==="paragraph"?(h.tokens[0].text=_+" "+h.tokens[0].text,h.tokens[0].tokens&&h.tokens[0].tokens.length>0&&h.tokens[0].tokens[0].type==="text"&&(h.tokens[0].tokens[0].text=_+" "+h.tokens[0].tokens[0].text)):h.tokens.unshift({type:"text",text:_+" "}):m+=_+" "}m+=this.parse(h.tokens,c),u+=this.renderer.listitem(m,f,!!p)}t+=this.renderer.list(u,a,l);continue}case"html":{let s=o;t+=this.renderer.html(s.text,s.block);continue}case"paragraph":{let s=o;t+=this.renderer.paragraph(this.parseInline(s.tokens));continue}case"text":{let s=o,a=s.tokens?this.parseInline(s.tokens):s.text;for(;r+1<e.length&&e[r+1].type==="text";)s=e[++r],a+=`
`+(s.tokens?this.parseInline(s.tokens):s.text);t+=n?this.renderer.paragraph(a):a;continue}default:{let s='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(s),"";throw new Error(s)}}}return t}parseInline(e,n){n=n||this.renderer;let t="";for(let r=0;r<e.length;r++){let o=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]){let s=this.options.extensions.renderers[o.type].call({parser:this},o);if(s!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){t+=s||"";continue}}switch(o.type){case"escape":{let s=o;t+=n.text(s.text);break}case"html":{let s=o;t+=n.html(s.text);break}case"link":{let s=o;t+=n.link(s.href,s.title,this.parseInline(s.tokens,n));break}case"image":{let s=o;t+=n.image(s.href,s.title,s.text);break}case"strong":{let s=o;t+=n.strong(this.parseInline(s.tokens,n));break}case"em":{let s=o;t+=n.em(this.parseInline(s.tokens,n));break}case"codespan":{let s=o;t+=n.codespan(s.text);break}case"br":{t+=n.br();break}case"del":{let s=o;t+=n.del(this.parseInline(s.tokens,n));break}case"text":{let s=o;t+=n.text(s.text);break}default:{let s='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(s),"";throw new Error(s)}}}return t}},ul=class{options;constructor(e){this.options=e||Gs}static passThroughHooks=new Set(["preprocess","postprocess"]);preprocess(e){return e}postprocess(e){return e}},oy=class{defaults=sy();options=this.setOptions;parse=this.#e(lo.lex,co.parse);parseInline=this.#e(lo.lexInline,co.parseInline);Parser=co;Renderer=Ar;TextRenderer=Uc;Lexer=lo;Tokenizer=dl;Hooks=ul;constructor(...e){this.use(...e)}walkTokens(e,n){let t=[];for(let r of e)switch(t=t.concat(n.call(this,r)),r.type){case"table":{let o=r;for(let s of o.header)t=t.concat(this.walkTokens(s.tokens,n));for(let s of o.rows)for(let a of s)t=t.concat(this.walkTokens(a.tokens,n));break}case"list":{let o=r;t=t.concat(this.walkTokens(o.items,n));break}default:{let o=r;this.defaults.extensions?.childTokens?.[o.type]?this.defaults.extensions.childTokens[o.type].forEach(s=>{t=t.concat(this.walkTokens(o[s],n))}):o.tokens&&(t=t.concat(this.walkTokens(o.tokens,n)))}}return t}use(...e){let n=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(t=>{let r=Q({},t);if(r.async=this.defaults.async||r.async||!1,t.extensions&&(t.extensions.forEach(o=>{if(!o.name)throw new Error("extension name required");if("renderer"in o){let s=n.renderers[o.name];s?n.renderers[o.name]=function(...a){let l=o.renderer.apply(this,a);return l===!1&&(l=s.apply(this,a)),l}:n.renderers[o.name]=o.renderer}if("tokenizer"in o){if(!o.level||o.level!=="block"&&o.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let s=n[o.level];s?s.unshift(o.tokenizer):n[o.level]=[o.tokenizer],o.start&&(o.level==="block"?n.startBlock?n.startBlock.push(o.start):n.startBlock=[o.start]:o.level==="inline"&&(n.startInline?n.startInline.push(o.start):n.startInline=[o.start]))}"childTokens"in o&&o.childTokens&&(n.childTokens[o.name]=o.childTokens)}),r.extensions=n),t.renderer){let o=this.defaults.renderer||new Ar(this.defaults);for(let s in t.renderer){let a=t.renderer[s],l=s,c=o[l];o[l]=(...u)=>{let d=a.apply(o,u);return d===!1&&(d=c.apply(o,u)),d||""}}r.renderer=o}if(t.tokenizer){let o=this.defaults.tokenizer||new dl(this.defaults);for(let s in t.tokenizer){let a=t.tokenizer[s],l=s,c=o[l];o[l]=(...u)=>{let d=a.apply(o,u);return d===!1&&(d=c.apply(o,u)),d}}r.tokenizer=o}if(t.hooks){let o=this.defaults.hooks||new ul;for(let s in t.hooks){let a=t.hooks[s],l=s,c=o[l];ul.passThroughHooks.has(s)?o[l]=u=>{if(this.defaults.async)return Promise.resolve(a.call(o,u)).then(h=>c.call(o,h));let d=a.call(o,u);return c.call(o,d)}:o[l]=(...u)=>{let d=a.apply(o,u);return d===!1&&(d=c.apply(o,u)),d}}r.hooks=o}if(t.walkTokens){let o=this.defaults.walkTokens,s=t.walkTokens;r.walkTokens=function(a){let l=[];return l.push(s.call(this,a)),o&&(l=l.concat(o.call(this,a))),l}}this.defaults=Q(Q({},this.defaults),r)}),this}setOptions(e){return this.defaults=Q(Q({},this.defaults),e),this}lexer(e,n){return lo.lex(e,n??this.defaults)}parser(e,n){return co.parse(e,n??this.defaults)}#e(e,n){return(t,r)=>{let o=Q({},r),s=Q(Q({},this.defaults),o);this.defaults.async===!0&&o.async===!1&&(s.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),s.async=!0);let a=this.#t(!!s.silent,!!s.async);if(typeof t>"u"||t===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(s.hooks&&(s.hooks.options=s),s.async)return Promise.resolve(s.hooks?s.hooks.preprocess(t):t).then(l=>e(l,s)).then(l=>s.walkTokens?Promise.all(this.walkTokens(l,s.walkTokens)).then(()=>l):l).then(l=>n(l,s)).then(l=>s.hooks?s.hooks.postprocess(l):l).catch(a);try{s.hooks&&(t=s.hooks.preprocess(t));let l=e(t,s);s.walkTokens&&this.walkTokens(l,s.walkTokens);let c=n(l,s);return s.hooks&&(c=s.hooks.postprocess(c)),c}catch(l){return a(l)}}}#t(e,n){return t=>{if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let r="<p>An error occurred:</p><pre>"+mi(t.message+"",!0)+"</pre>";return n?Promise.resolve(r):r}if(n)return Promise.reject(t);throw t}}},Ws=new oy;function ht(i,e){return Ws.parse(i,e)}ht.options=ht.setOptions=function(i){return Ws.setOptions(i),ht.defaults=Ws.defaults,BI(ht.defaults),ht};ht.getDefaults=sy;ht.defaults=Gs;ht.use=function(...i){return Ws.use(...i),ht.defaults=Ws.defaults,BI(ht.defaults),ht};ht.walkTokens=function(i,e){return Ws.walkTokens(i,e)};ht.parseInline=Ws.parseInline;ht.Parser=co;ht.parser=co.parse;ht.Renderer=Ar;ht.TextRenderer=Uc;ht.Lexer=lo;ht.lexer=lo.lex;ht.Tokenizer=dl;ht.Hooks=ul;ht.parse=ht;var Ene=ht.options,Ine=ht.setOptions,Sne=ht.use,Tne=ht.walkTokens,Ane=ht.parseInline;var Dne=co.parse,kne=lo.lex;var NU=["*"],RU="Copy",FU="Copied",LU=(()=>{let e=class e{constructor(){this._buttonClick$=new _e,this.copied$=this._buttonClick$.pipe(Ni(()=>If(Dn(!0),is(3e3).pipe(Pl(!1)))),wl(),ia(1)),this.copiedText$=this.copied$.pipe(Df(!1),xt(t=>t?FU:RU))}onCopyToClipboardClick(){this._buttonClick$.next()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ie({type:e,selectors:[["markdown-clipboard"]],standalone:!0,features:[Pa],decls:4,vars:7,consts:[[1,"markdown-clipboard-button",3,"click"]],template:function(r,o){r&1&&(v(0,"button",0),T("click",function(){return o.onCopyToClipboardClick()}),M(1,"async"),O(2),M(3,"async"),y()),r&2&&(Ve("copied",E(1,3,o.copied$)),g(2),K(E(3,5,o.copiedText$)))},dependencies:[Mo],encapsulation:2,changeDetection:0});let i=e;return i})(),jU=new fe("CLIPBOARD_OPTIONS");var ay=function(i){return i.CommandLine="command-line",i.LineHighlight="line-highlight",i.LineNumbers="line-numbers",i}(ay||{}),HI=new fe("MARKED_EXTENSIONS"),BU=new fe("MARKED_OPTIONS"),VU="[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information",UU="[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information",zU="[ngx-markdown] When using the `mermaid` attribute you *have to* include Mermaid files to `angular.json` or use imports. See README for more information",HU="[ngx-markdown] When using the `clipboard` attribute you *have to* include Clipboard files to `angular.json` or use imports. See README for more information",WU="[ngx-markdown] When using the `clipboard` attribute you *have to* provide the `viewContainerRef` parameter to `MarkdownService.render()` function",GU="[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information",WI=new fe("SECURITY_CONTEXT");var GI=(()=>{let e=class e{get options(){return this._options}set options(t){this._options=Q(Q({},this.DEFAULT_MARKED_OPTIONS),t)}get renderer(){return this.options.renderer}set renderer(t){this.options.renderer=t}constructor(t,r,o,s,a,l,c){this.clipboardOptions=t,this.extensions=r,this.platform=s,this.securityContext=a,this.http=l,this.sanitizer=c,this.DEFAULT_MARKED_OPTIONS={renderer:new Ar},this.DEFAULT_KATEX_OPTIONS={delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}]},this.DEFAULT_MERMAID_OPTIONS={startOnLoad:!1},this.DEFAULT_CLIPBOARD_OPTIONS={buttonComponent:void 0},this.DEFAULT_PARSE_OPTIONS={decodeHtml:!1,inline:!1,emoji:!1,mermaid:!1,markedOptions:void 0,disableSanitizer:!1},this.DEFAULT_RENDER_OPTIONS={clipboard:!1,clipboardOptions:void 0,katex:!1,katexOptions:void 0,mermaid:!1,mermaidOptions:void 0},this._reload$=new _e,this.reload$=this._reload$.asObservable(),this.options=o}parse(t,r=this.DEFAULT_PARSE_OPTIONS){let{decodeHtml:o,inline:s,emoji:a,mermaid:l,disableSanitizer:c}=r,u=Q(Q({},this.options),r.markedOptions),d=u.renderer||this.renderer||new Ar;this.extensions&&(this.renderer=this.extendsRendererForExtensions(d)),l&&(this.renderer=this.extendsRendererForMermaid(d));let h=this.trimIndentation(t),p=o?this.decodeHtml(h):h,f=a?this.parseEmoji(p):p,m=this.parseMarked(f,u,s);return(c?m:this.sanitizer.sanitize(this.securityContext,m))||""}render(t,r=this.DEFAULT_RENDER_OPTIONS,o){let{clipboard:s,clipboardOptions:a,katex:l,katexOptions:c,mermaid:u,mermaidOptions:d}=r;s&&this.renderClipboard(t,o,Q(Q(Q({},this.DEFAULT_CLIPBOARD_OPTIONS),this.clipboardOptions),a)),l&&this.renderKatex(t,Q(Q({},this.DEFAULT_KATEX_OPTIONS),c)),u&&this.renderMermaid(t,Q(Q({},this.DEFAULT_MERMAID_OPTIONS),d)),this.highlight(t)}reload(){this._reload$.next()}getSource(t){if(!this.http)throw new Error(GU);return this.http.get(t,{responseType:"text"}).pipe(xt(r=>this.handleExtension(t,r)))}highlight(t){if(!wi(this.platform)||typeof Prism>"u"||typeof Prism.highlightAllUnder>"u")return;t||(t=document);let r=t.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(r,o=>o.classList.add("language-none")),Prism.highlightAllUnder(t)}decodeHtml(t){if(!wi(this.platform))return t;let r=document.createElement("textarea");return r.innerHTML=t,r.value}extendsRendererForExtensions(t){let r=t;return r.\u0275NgxMarkdownRendererExtendedForExtensions===!0||(this.extensions?.length>0&&ht.use(...this.extensions),r.\u0275NgxMarkdownRendererExtendedForExtensions=!0),t}extendsRendererForMermaid(t){let r=t;if(r.\u0275NgxMarkdownRendererExtendedForMermaid===!0)return t;let o=t.code;return t.code=function(s,a,l){return a==="mermaid"?`<div class="mermaid">${s}</div>`:o.call(this,s,a,l)},r.\u0275NgxMarkdownRendererExtendedForMermaid=!0,t}handleExtension(t,r){let o=t.lastIndexOf("://"),s=o>-1?t.substring(o+4):t,a=s.lastIndexOf("/"),l=a>-1?s.substring(a+1).split("?")[0]:"",c=l.lastIndexOf("."),u=c>-1?l.substring(c+1):"";return u&&u!=="md"?"```"+u+`
`+r+"\n```":r}parseMarked(t,r,o=!1){return r.renderer&&(ht.use({renderer:r.renderer}),delete r.renderer),o?ht.parseInline(t,r):ht.parse(t,r)}parseEmoji(t){if(!wi(this.platform))return t;if(typeof joypixels>"u"||typeof joypixels.shortnameToUnicode>"u")throw new Error(VU);return joypixels.shortnameToUnicode(t)}renderKatex(t,r){if(wi(this.platform)){if(typeof katex>"u"||typeof renderMathInElement>"u")throw new Error(UU);renderMathInElement(t,r)}}renderClipboard(t,r,o){if(!wi(this.platform))return;if(typeof ClipboardJS>"u")throw new Error(HU);if(!r)throw new Error(WU);let{buttonComponent:s,buttonTemplate:a}=o,l=t.querySelectorAll("pre");for(let c=0;c<l.length;c++){let u=l.item(c),d=document.createElement("div");d.style.position="relative",u.parentNode.insertBefore(d,u),d.appendChild(u);let h=document.createElement("div");h.style.position="absolute",h.style.top=".5em",h.style.right=".5em",h.style.opacity="0",h.style.transition="opacity 250ms ease-out",d.insertAdjacentElement("beforeend",h),u.onmouseover=()=>h.style.opacity="1",u.onmouseout=()=>h.style.opacity="0";let p;s?p=r.createComponent(s).hostView:a?p=r.createEmbeddedView(a):p=r.createComponent(LU).hostView;let f;p.rootNodes.forEach(m=>{m.onmouseover=()=>h.style.opacity="1",h.appendChild(m),f=new ClipboardJS(m,{text:()=>u.innerText})}),p.onDestroy(()=>f.destroy())}}renderMermaid(t,r=this.DEFAULT_MERMAID_OPTIONS){if(!wi(this.platform))return;if(typeof mermaid>"u"||typeof mermaid.initialize>"u")throw new Error(zU);let o=t.querySelectorAll(".mermaid");o.length!==0&&(mermaid.initialize(r),mermaid.run({nodes:o}))}trimIndentation(t){if(!t)return"";let r;return t.split(`
`).map(o=>{let s=r;return o.length>0&&(s=isNaN(s)?o.search(/\S|$/):Math.min(o.search(/\S|$/),s)),isNaN(r)&&(r=s),s?o.substring(s):o}).join(`
`)}};e.\u0275fac=function(r){return new(r||e)(D(jU,8),D(HI,8),D(BU,8),D(Wn),D(WI),D(bs,8),D(Jl))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let i=e;return i})(),XI=(()=>{let e=class e{get disableSanitizer(){return this._disableSanitizer}set disableSanitizer(t){this._disableSanitizer=this.coerceBooleanProperty(t)}get inline(){return this._inline}set inline(t){this._inline=this.coerceBooleanProperty(t)}get clipboard(){return this._clipboard}set clipboard(t){this._clipboard=this.coerceBooleanProperty(t)}get emoji(){return this._emoji}set emoji(t){this._emoji=this.coerceBooleanProperty(t)}get katex(){return this._katex}set katex(t){this._katex=this.coerceBooleanProperty(t)}get mermaid(){return this._mermaid}set mermaid(t){this._mermaid=this.coerceBooleanProperty(t)}get lineHighlight(){return this._lineHighlight}set lineHighlight(t){this._lineHighlight=this.coerceBooleanProperty(t)}get lineNumbers(){return this._lineNumbers}set lineNumbers(t){this._lineNumbers=this.coerceBooleanProperty(t)}get commandLine(){return this._commandLine}set commandLine(t){this._commandLine=this.coerceBooleanProperty(t)}constructor(t,r,o){this.element=t,this.markdownService=r,this.viewContainerRef=o,this.error=new Me,this.load=new Me,this.ready=new Me,this._clipboard=!1,this._commandLine=!1,this._disableSanitizer=!1,this._emoji=!1,this._inline=!1,this._katex=!1,this._lineHighlight=!1,this._lineNumbers=!1,this._mermaid=!1,this.destroyed$=new _e}ngOnChanges(){this.loadContent()}loadContent(){if(this.data!=null){this.handleData();return}if(this.src!=null){this.handleSrc();return}}ngAfterViewInit(){!this.data&&!this.src&&this.handleTransclusion(),this.markdownService.reload$.pipe(xe(this.destroyed$)).subscribe(()=>this.loadContent())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}render(t,r=!1){return $(this,null,function*(){let o={decodeHtml:r,inline:this.inline,emoji:this.emoji,mermaid:this.mermaid,disableSanitizer:this.disableSanitizer},s={clipboard:this.clipboard,clipboardOptions:{buttonComponent:this.clipboardButtonComponent,buttonTemplate:this.clipboardButtonTemplate},katex:this.katex,katexOptions:this.katexOptions,mermaid:this.mermaid,mermaidOptions:this.mermaidOptions},a=yield this.markdownService.parse(t,o);this.element.nativeElement.innerHTML=a,this.handlePlugins(),this.markdownService.render(this.element.nativeElement,s,this.viewContainerRef),this.ready.emit()})}coerceBooleanProperty(t){return t!=null&&`${String(t)}`!="false"}handleData(){this.render(this.data)}handleSrc(){this.markdownService.getSource(this.src).subscribe({next:t=>{this.render(t).then(()=>{this.load.emit(t)})},error:t=>this.error.emit(t)})}handleTransclusion(){this.render(this.element.nativeElement.innerHTML,!0)}handlePlugins(){this.commandLine&&(this.setPluginClass(this.element.nativeElement,ay.CommandLine),this.setPluginOptions(this.element.nativeElement,{dataFilterOutput:this.filterOutput,dataHost:this.host,dataPrompt:this.prompt,dataOutput:this.output,dataUser:this.user})),this.lineHighlight&&this.setPluginOptions(this.element.nativeElement,{dataLine:this.line,dataLineOffset:this.lineOffset}),this.lineNumbers&&(this.setPluginClass(this.element.nativeElement,ay.LineNumbers),this.setPluginOptions(this.element.nativeElement,{dataStart:this.start}))}setPluginClass(t,r){let o=t.querySelectorAll("pre");for(let s=0;s<o.length;s++){let a=r instanceof Array?r:[r];o.item(s).classList.add(...a)}}setPluginOptions(t,r){let o=t.querySelectorAll("pre");for(let s=0;s<o.length;s++)Object.keys(r).forEach(a=>{let l=r[a];if(l){let c=this.toLispCase(a);o.item(s).setAttribute(c,l.toString())}})}toLispCase(t){let r=t.match(/([A-Z])/g);if(!r)return t;let o=t.toString();for(let s=0,a=r.length;s<a;s++)o=o.replace(new RegExp(r[s]),"-"+r[s].toLowerCase());return o.slice(0,1)==="-"&&(o=o.slice(1)),o}};e.\u0275fac=function(r){return new(r||e)(x(zt),x(GI),x(dn))},e.\u0275cmp=ie({type:e,selectors:[["markdown"],["","markdown",""]],inputs:{data:"data",src:"src",disableSanitizer:"disableSanitizer",inline:"inline",clipboard:"clipboard",clipboardButtonComponent:"clipboardButtonComponent",clipboardButtonTemplate:"clipboardButtonTemplate",emoji:"emoji",katex:"katex",katexOptions:"katexOptions",mermaid:"mermaid",mermaidOptions:"mermaidOptions",lineHighlight:"lineHighlight",line:"line",lineOffset:"lineOffset",lineNumbers:"lineNumbers",start:"start",commandLine:"commandLine",filterOutput:"filterOutput",host:"host",prompt:"prompt",output:"output",user:"user"},outputs:{error:"error",load:"load",ready:"ready"},standalone:!0,features:[cn,Pa],ngContentSelectors:NU,decls:1,vars:0,template:function(r,o){r&1&&(Ca(),ba(0))},encapsulation:2});let i=e;return i})();function XU(i){return[GI,i?.loader??[],i?.clipboardOptions??[],i?.markedOptions??[],{provide:HI,useValue:i?.markedExtensions??[]},{provide:WI,useValue:i?.sanitize??Gn.HTML}]}var qI=(()=>{let e=class e{static forRoot(t){return{ngModule:e,providers:[XU(t)]}}static forChild(){return{ngModule:e}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Yt({type:e}),e.\u0275inj=qt({imports:[Gd]});let i=e;return i})(),zI;(function(i){let e;(function(r){r.Strict="strict",r.Loose="loose",r.Antiscript="antiscript",r.Sandbox="sandbox"})(e=i.SecurityLevel||(i.SecurityLevel={}));let n;(function(r){r.Base="base",r.Forest="forest",r.Dark="dark",r.Default="default",r.Neutral="neutral"})(n=i.Theme||(i.Theme={}));let t;(function(r){r[r.Debug=1]="Debug",r[r.Info=2]="Info",r[r.Warn=3]="Warn",r[r.Error=4]="Error",r[r.Fatal=5]="Fatal"})(t=i.LogLevel||(i.LogLevel={}))})(zI||(zI={}));var YI=(()=>{let e=class e extends Nt{constructor(t){super(),this.translate=t,this.helpToRender="get-started"}get currentLang(){return this.translate.currentLang}get markdownUrl(){return`assets/help/${this.currentLang}/${this.helpToRender}.md`}get githubEditUrl(){return`https://github.com/logigator/logigator/tree/master/logigator-editor/src/assets/help/${this.currentLang}/${this.helpToRender}.md`}};e.\u0275fac=function(r){return new(r||e)(x(yn))},e.\u0275cmp=ie({type:e,selectors:[["app-help"]],features:[ke],decls:35,vars:41,consts:[[1,"help-popup-container"],[1,"sidebar"],["tabindex","0",3,"click"],["target","_blank","rel","noopener",3,"href"],[1,"markdown-body",3,"disableSanitizer","src"]],template:function(r,o){r&1&&(v(0,"div",0)(1,"div",1)(2,"ul")(3,"li")(4,"p",2),T("click",function(){return o.helpToRender="get-started"}),O(5),M(6,"translate"),y()(),v(7,"li")(8,"p",2),T("click",function(){return o.helpToRender="basic"}),O(9),M(10,"translate"),y()(),v(11,"li")(12,"p",2),T("click",function(){return o.helpToRender="advanced"}),O(13),M(14,"translate"),y()(),v(15,"li")(16,"p",2),T("click",function(){return o.helpToRender="io"}),O(17),M(18,"translate"),y()(),v(19,"li")(20,"p",2),T("click",function(){return o.helpToRender="user-defined"}),O(21),M(22,"translate"),y()(),v(23,"li")(24,"p",2),T("click",function(){return o.helpToRender="saving"}),O(25),M(26,"translate"),y()(),v(27,"li")(28,"p",2),T("click",function(){return o.helpToRender="tutorial-vids"}),O(29),M(30,"translate"),y()()(),v(31,"a",3),O(32),M(33,"translate"),y()(),q(34,"markdown",4),y()),r&2&&(g(4),Ve("active",o.helpToRender==="get-started"),g(1),U(" ",E(6,25,"POPUP.HELP.PAGE.GET_STARTED")," "),g(3),Ve("active",o.helpToRender==="basic"),g(1),U(" ",E(10,27,"POPUP.HELP.PAGE.BASIC")," "),g(3),Ve("active",o.helpToRender==="advanced"),g(1),U(" ",E(14,29,"POPUP.HELP.PAGE.ADVANCED")," "),g(3),Ve("active",o.helpToRender==="io"),g(1),U(" ",E(18,31,"POPUP.HELP.PAGE.IO")," "),g(3),Ve("active",o.helpToRender==="user-defined"),g(1),U(" ",E(22,33,"POPUP.HELP.PAGE.USER_DEFINED")," "),g(3),Ve("active",o.helpToRender==="saving"),g(1),U(" ",E(26,35,"POPUP.HELP.PAGE.SAVING")," "),g(3),Ve("active",o.helpToRender==="tutorial-vids"),g(1),U(" ",E(30,37,"POPUP.HELP.PAGE.TUTORIAL_VIDS")," "),g(2),w("href",o.githubEditUrl,vs),g(1),K(E(33,39,"POPUP.HELP.EDIT")),g(2),w("disableSanitizer",!0)("src",o.markdownUrl))},dependencies:[XI,Pe],styles:[`.markdown-body .octicon{display:inline-block;fill:currentColor;vertical-align:text-bottom}.markdown-body .anchor{float:left;line-height:1;margin-left:-20px;padding-right:4px}.markdown-body .anchor:focus{outline:none}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#1b1f23;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1:hover .anchor .octicon-link:before,.markdown-body h2:hover .anchor .octicon-link:before,.markdown-body h3:hover .anchor .octicon-link:before,.markdown-body h4:hover .anchor .octicon-link:before,.markdown-body h5:hover .anchor .octicon-link:before,.markdown-body h6:hover .anchor .octicon-link:before{width:16px;height:16px;content:" ";display:inline-block;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true'%3E%3Cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'%3E%3C/path%3E%3C/svg%3E")}.markdown-body{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;color:#24292e;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body details{display:block}.markdown-body summary{display:list-item}.markdown-body a{background-color:initial}.markdown-body a:active,.markdown-body a:hover{outline-width:0}.markdown-body strong{font-weight:inherit;font-weight:bolder}.markdown-body h1{font-size:2em;margin:.67em 0}.markdown-body img{border-style:none}.markdown-body code,.markdown-body kbd,.markdown-body pre{font-family:monospace,monospace;font-size:1em}.markdown-body hr{box-sizing:initial;height:0;overflow:visible}.markdown-body input{font:inherit;margin:0}.markdown-body input{overflow:visible}.markdown-body [type=checkbox]{box-sizing:border-box;padding:0}.markdown-body *{box-sizing:border-box}.markdown-body input{font-family:inherit;font-size:inherit;line-height:inherit}.markdown-body a{color:#0366d6;text-decoration:none}.markdown-body a:hover{text-decoration:underline}.markdown-body strong{font-weight:600}.markdown-body hr{height:0;margin:15px 0;overflow:hidden;background:transparent;border:0;border-bottom:1px solid #dfe2e5}.markdown-body hr:after,.markdown-body hr:before{display:table;content:""}.markdown-body hr:after{clear:both}.markdown-body table{border-spacing:0;border-collapse:collapse}.markdown-body td,.markdown-body th{padding:0}.markdown-body details summary{cursor:pointer}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:0;margin-bottom:0}.markdown-body h1{font-size:32px}.markdown-body h1,.markdown-body h2{font-weight:600}.markdown-body h2{font-size:24px}.markdown-body h3{font-size:20px}.markdown-body h3,.markdown-body h4{font-weight:600}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:14px}.markdown-body h5,.markdown-body h6{font-weight:600}.markdown-body h6{font-size:12px}.markdown-body p{margin-top:0;margin-bottom:10px}.markdown-body blockquote{margin:0}.markdown-body ol,.markdown-body ul{padding-left:0;margin-top:0;margin-bottom:0}.markdown-body ol ol,.markdown-body ul ol{list-style-type:lower-roman}.markdown-body ol ol ol,.markdown-body ol ul ol,.markdown-body ul ol ol,.markdown-body ul ul ol{list-style-type:lower-alpha}.markdown-body dd{margin-left:0}.markdown-body code,.markdown-body pre{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px}.markdown-body pre{margin-top:0;margin-bottom:0}.markdown-body input::-webkit-inner-spin-button,.markdown-body input::-webkit-outer-spin-button{margin:0;-webkit-appearance:none;appearance:none}.markdown-body :checked+.radio-label{position:relative;z-index:1;border-color:#0366d6}.markdown-body .border{border:1px solid #e1e4e8!important}.markdown-body .border-0{border:0!important}.markdown-body .border-bottom{border-bottom:1px solid #e1e4e8!important}.markdown-body .rounded-1{border-radius:3px!important}.markdown-body .bg-white{background-color:#fff!important}.markdown-body .bg-gray-light{background-color:#fafbfc!important}.markdown-body .text-gray-light{color:#6a737d!important}.markdown-body .my-2{margin-top:8px!important;margin-bottom:8px!important}.markdown-body .pl-3,.markdown-body .px-3{padding-left:16px!important}.markdown-body .px-3{padding-right:16px!important}.markdown-body .f6{font-size:12px!important}.markdown-body .lh-condensed{line-height:1.25!important}.markdown-body .text-bold{font-weight:600!important}.markdown-body .pl-c{color:#6a737d}.markdown-body .pl-c1,.markdown-body .pl-s .pl-v{color:#005cc5}.markdown-body .pl-e,.markdown-body .pl-en{color:#6f42c1}.markdown-body .pl-s .pl-s1,.markdown-body .pl-smi{color:#24292e}.markdown-body .pl-ent{color:#22863a}.markdown-body .pl-k{color:#d73a49}.markdown-body .pl-pds,.markdown-body .pl-s,.markdown-body .pl-s .pl-pse .pl-s1,.markdown-body .pl-sr,.markdown-body .pl-sr .pl-cce,.markdown-body .pl-sr .pl-sra,.markdown-body .pl-sr .pl-sre{color:#032f62}.markdown-body .pl-smw,.markdown-body .pl-v{color:#e36209}.markdown-body .pl-bu{color:#b31d28}.markdown-body .pl-ii{color:#fafbfc;background-color:#b31d28}.markdown-body .pl-c2{color:#fafbfc;background-color:#d73a49}.markdown-body .pl-c2:before{content:"^M"}.markdown-body .pl-sr .pl-cce{font-weight:700;color:#22863a}.markdown-body .pl-ml{color:#735c0f}.markdown-body .pl-mh,.markdown-body .pl-mh .pl-en,.markdown-body .pl-ms{font-weight:700;color:#005cc5}.markdown-body .pl-mi{font-style:italic;color:#24292e}.markdown-body .pl-mb{font-weight:700;color:#24292e}.markdown-body .pl-md{color:#b31d28;background-color:#ffeef0}.markdown-body .pl-mi1{color:#22863a;background-color:#f0fff4}.markdown-body .pl-mc{color:#e36209;background-color:#ffebda}.markdown-body .pl-mi2{color:#f6f8fa;background-color:#005cc5}.markdown-body .pl-mdr{font-weight:700;color:#6f42c1}.markdown-body .pl-ba{color:#586069}.markdown-body .pl-sg{color:#959da5}.markdown-body .pl-corl{text-decoration:underline;color:#032f62}.markdown-body .mb-0{margin-bottom:0!important}.markdown-body .my-2{margin-bottom:8px!important}.markdown-body .my-2{margin-top:8px!important}.markdown-body .pl-0{padding-left:0!important}.markdown-body .py-0{padding-top:0!important;padding-bottom:0!important}.markdown-body .pl-1{padding-left:4px!important}.markdown-body .pl-2{padding-left:8px!important}.markdown-body .py-2{padding-top:8px!important;padding-bottom:8px!important}.markdown-body .pl-3{padding-left:16px!important}.markdown-body .pl-4{padding-left:24px!important}.markdown-body .pl-5{padding-left:32px!important}.markdown-body .pl-6{padding-left:40px!important}.markdown-body .pl-7{padding-left:48px!important}.markdown-body .pl-8{padding-left:64px!important}.markdown-body .pl-9{padding-left:80px!important}.markdown-body .pl-10{padding-left:96px!important}.markdown-body .pl-11{padding-left:112px!important}.markdown-body .pl-12{padding-left:128px!important}.markdown-body hr{border-bottom-color:#eee}.markdown-body kbd{display:inline-block;padding:3px 5px;font:11px SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;line-height:10px;color:#444d56;vertical-align:middle;background-color:#fafbfc;border:1px solid #d1d5da;border-radius:3px;box-shadow:inset 0 -1px #d1d5da}.markdown-body:after,.markdown-body:before{display:table;content:""}.markdown-body:after{clear:both}.markdown-body>:first-child{margin-top:0!important}.markdown-body>:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body blockquote,.markdown-body details,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e1e4e8;border:0}.markdown-body blockquote{padding:0 1em;color:#6a737d;border-left:.25em solid #dfe2e5}.markdown-body blockquote>:first-child{margin-top:0}.markdown-body blockquote>:last-child{margin-bottom:0}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eaecef}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#6a737d}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li{word-wrap:break-all}.markdown-body li>p{margin-top:16px}.markdown-body li+li{margin-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:600}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table{display:block;width:100%;overflow:auto}.markdown-body table th{font-weight:600}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #dfe2e5}.markdown-body table tr{background-color:#fff;border-top:1px solid #c6cbd1}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}.markdown-body img{max-width:100%;box-sizing:initial;background-color:#fff}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body code{padding:.2em .4em;margin:0;font-size:85%;background-color:#1b1f230d;border-radius:3px}.markdown-body pre{word-wrap:normal}.markdown-body pre>code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f6f8fa;border-radius:3px}.markdown-body pre code{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:initial;border:0}.markdown-body .commit-tease-sha{display:inline-block;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:90%;color:#444d56}.markdown-body .full-commit .btn-outline:not(:disabled):hover{color:#005cc5;border-color:#005cc5}.markdown-body .blob-wrapper{overflow-x:auto;overflow-y:hidden}.markdown-body .blob-wrapper-embedded{max-height:240px;overflow-y:auto}.markdown-body .blob-num{width:1%;min-width:50px;padding-right:10px;padding-left:10px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;line-height:20px;color:#1b1f234d;text-align:right;white-space:nowrap;vertical-align:top;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-body .blob-num:hover{color:#1b1f2399}.markdown-body .blob-num:before{content:attr(data-line-number)}.markdown-body .blob-code{position:relative;padding-right:10px;padding-left:10px;line-height:20px;vertical-align:top}.markdown-body .blob-code-inner{overflow:visible;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;color:#24292e;word-wrap:normal;white-space:pre}.markdown-body .pl-token.active,.markdown-body .pl-token:hover{cursor:pointer;background:#ffea7f}.markdown-body .tab-size[data-tab-size="1"]{-moz-tab-size:1;tab-size:1}.markdown-body .tab-size[data-tab-size="2"]{-moz-tab-size:2;tab-size:2}.markdown-body .tab-size[data-tab-size="3"]{-moz-tab-size:3;tab-size:3}.markdown-body .tab-size[data-tab-size="4"]{-moz-tab-size:4;tab-size:4}.markdown-body .tab-size[data-tab-size="5"]{-moz-tab-size:5;tab-size:5}.markdown-body .tab-size[data-tab-size="6"]{-moz-tab-size:6;tab-size:6}.markdown-body .tab-size[data-tab-size="7"]{-moz-tab-size:7;tab-size:7}.markdown-body .tab-size[data-tab-size="8"]{-moz-tab-size:8;tab-size:8}.markdown-body .tab-size[data-tab-size="9"]{-moz-tab-size:9;tab-size:9}.markdown-body .tab-size[data-tab-size="10"]{-moz-tab-size:10;tab-size:10}.markdown-body .tab-size[data-tab-size="11"]{-moz-tab-size:11;tab-size:11}.markdown-body .tab-size[data-tab-size="12"]{-moz-tab-size:12;tab-size:12}.markdown-body .task-list-item{list-style-type:none}.markdown-body .task-list-item+.task-list-item{margin-top:3px}.markdown-body .task-list-item input{margin:0 .2em .25em -1.6em;vertical-align:middle}.theme-light .help-popup-container{display:flex;flex-direction:row;width:80vw}.theme-light .help-popup-container .sidebar{width:200px;min-width:200px;padding:1rem;display:flex;gap:4rem;flex-direction:column;justify-content:space-between;border-right:1px solid #d1d1d1}.theme-light .help-popup-container .sidebar>a{color:#27ae60}.theme-light .help-popup-container .sidebar ul{margin:0;padding:0;text-align:left;list-style:none}.theme-light .help-popup-container .sidebar ul li{margin-bottom:1.5rem}.theme-light .help-popup-container .sidebar ul li p{margin:0}.theme-light .help-popup-container .sidebar ul li p:hover{cursor:pointer;text-decoration:underline}.theme-light .help-popup-container .sidebar ul li p.active{color:#27ae60}.theme-light .help-popup-container .sidebar ul li p.active:hover{cursor:default;text-decoration:none}.theme-light .help-popup-container .sidebar ul li:last-of-type{margin-bottom:0}.theme-light .help-popup-container .markdown-body{flex-grow:1;margin:1rem;max-height:80vh;height:80vh;padding:0 1rem;font-family:inherit;color:#000!important;overflow-y:auto;overflow-x:hidden}.theme-light .help-popup-container .markdown-body h1,.theme-light .help-popup-container .markdown-body h2{border-bottom-color:#000}.theme-light .help-popup-container .markdown-body table tr{background-color:inherit!important}.theme-light .help-popup-container .markdown-body pre,.theme-light .help-popup-container .markdown-body code{background-color:#d1d1d1}.theme-light .help-popup-container .markdown-body a{color:#27ae60!important}.theme-light .help-popup-container .markdown-body img{background-color:transparent}.theme-light .help-popup-container .markdown-body .rows{display:flex;flex-direction:row}.theme-light .help-popup-container .markdown-body .rows.align-center{align-items:center}.theme-light .help-popup-container .markdown-body .rows.align-center p{margin-bottom:0}.theme-light .help-popup-container .markdown-body .rows .margin-left{width:fit-content}.theme-light .help-popup-container .markdown-body .rows table{width:auto;overflow:initial}.theme-light .help-popup-container .markdown-body .margin-left{margin-left:1rem}.theme-light .help-popup-container .markdown-body .margin-bottom{margin-bottom:1rem}.theme-light .help-popup-container .markdown-body img[title=icon-img]{width:40px;height:40px}.theme-light .help-popup-container .markdown-body .video{width:100%;max-width:800px}.theme-dark .help-popup-container{display:flex;flex-direction:row;width:80vw}.theme-dark .help-popup-container .sidebar{width:200px;min-width:200px;padding:1rem;display:flex;gap:4rem;flex-direction:column;justify-content:space-between;border-right:1px solid #3a4042}.theme-dark .help-popup-container .sidebar>a{color:#27ae60}.theme-dark .help-popup-container .sidebar ul{margin:0;padding:0;text-align:left;list-style:none}.theme-dark .help-popup-container .sidebar ul li{margin-bottom:1.5rem}.theme-dark .help-popup-container .sidebar ul li p{margin:0}.theme-dark .help-popup-container .sidebar ul li p:hover{cursor:pointer;text-decoration:underline}.theme-dark .help-popup-container .sidebar ul li p.active{color:#27ae60}.theme-dark .help-popup-container .sidebar ul li p.active:hover{cursor:default;text-decoration:none}.theme-dark .help-popup-container .sidebar ul li:last-of-type{margin-bottom:0}.theme-dark .help-popup-container .markdown-body{flex-grow:1;margin:1rem;max-height:80vh;height:80vh;padding:0 1rem;font-family:inherit;color:#ccc!important;overflow-y:auto;overflow-x:hidden}.theme-dark .help-popup-container .markdown-body h1,.theme-dark .help-popup-container .markdown-body h2{border-bottom-color:#ccc}.theme-dark .help-popup-container .markdown-body table tr{background-color:inherit!important}.theme-dark .help-popup-container .markdown-body pre,.theme-dark .help-popup-container .markdown-body code{background-color:#3a4042}.theme-dark .help-popup-container .markdown-body a{color:#27ae60!important}.theme-dark .help-popup-container .markdown-body img{background-color:transparent}.theme-dark .help-popup-container .markdown-body .rows{display:flex;flex-direction:row}.theme-dark .help-popup-container .markdown-body .rows.align-center{align-items:center}.theme-dark .help-popup-container .markdown-body .rows.align-center p{margin-bottom:0}.theme-dark .help-popup-container .markdown-body .rows .margin-left{width:fit-content}.theme-dark .help-popup-container .markdown-body .rows table{width:auto;overflow:initial}.theme-dark .help-popup-container .markdown-body .margin-left{margin-left:1rem}.theme-dark .help-popup-container .markdown-body .margin-bottom{margin-bottom:1rem}.theme-dark .help-popup-container .markdown-body img[title=icon-img]{width:40px;height:40px}.theme-dark .help-popup-container .markdown-body .video{width:100%;max-width:800px}.help-popup-container .markdown-body{scrollbar-width:thin}:host-context(.theme-light) .help-popup-container .markdown-body::-webkit-scrollbar-track{background-color:#f5f5f5}:host-context(.theme-dark) .help-popup-container .markdown-body::-webkit-scrollbar-track{background-color:#262a2b}.help-popup-container .markdown-body::-webkit-scrollbar{width:10px}.help-popup-container .markdown-body::-webkit-scrollbar-thumb{border-radius:5px}:host-context(.theme-light) .help-popup-container .markdown-body::-webkit-scrollbar-thumb{background-color:#d1d1d1}:host-context(.theme-dark) .help-popup-container .markdown-body::-webkit-scrollbar-thumb{background-color:#3a4042}:host-context(.theme-light) .help-popup-container .markdown-body{scrollbar-color:#d1d1d1 #f5f5f5}:host-context(.theme-dark) .help-popup-container .markdown-body{scrollbar-color:#3a4042 #262a2b}
`],encapsulation:2});let i=e;return i})();var ZI=(()=>{let e=class e extends Nt{constructor(){super(...arguments),this.hex=new Qa("0",mt.pattern(/^([0-9]|[A-Fa-f])+$/)),this.bin=new Qa("0",mt.pattern("^(1|0)+$")),this.dec=new Qa("0",mt.min(0))}hexInput(){if(this.hex.value==="")return;let t=parseInt(this.hex.value,16);this.hex.invalid||isNaN(t)?(this.dec.setValue("Invalid"),this.bin.setValue("Invalid")):(this.dec.setValue(t.toString(10)),this.bin.setValue(t.toString(2)))}binInput(){if(this.bin.value==="")return;let t=parseInt(this.bin.value,2);this.bin.invalid||isNaN(t)?(this.dec.setValue("Invalid"),this.hex.setValue("Invalid")):(this.dec.setValue(t.toString(10)),this.hex.setValue(t.toString(16)))}decInput(){if(this.dec.value==="")return;let t=parseInt(this.dec.value,10);this.dec.invalid||isNaN(t)?(this.bin.setValue("Invalid"),this.hex.setValue("Invalid")):(this.dec.setValue(t),this.bin.setValue(t.toString(2)),this.hex.setValue(t.toString(16)))}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=un(e)))(o||e)}})(),e.\u0275cmp=ie({type:e,selectors:[["app-hex-bin-dec-converter"]],features:[ke],decls:7,vars:12,consts:[[1,"converter-form"],["type","text",3,"formControl","label","input"]],template:function(r,o){r&1&&(v(0,"div",0)(1,"app-input",1),T("input",function(){return o.hexInput()}),M(2,"translate"),y(),v(3,"app-input",1),T("input",function(){return o.binInput()}),M(4,"translate"),y(),v(5,"app-input",1),T("input",function(){return o.decInput()}),M(6,"translate"),y()()),r&2&&(g(1),w("formControl",o.hex)("label",E(2,6,"POPUP.HEX_BIN_DEC.HEX")),g(2),w("formControl",o.bin)("label",E(4,8,"POPUP.HEX_BIN_DEC.BIN")),g(2),w("formControl",o.dec)("label",E(6,10,"POPUP.HEX_BIN_DEC.DEC")))},dependencies:[Et,so,Sr,Pe],styles:[".converter-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:2rem 1.5rem 0}"],changeDetection:0});let i=e;return i})();var YU=["tutorialWindow"];function ZU(i,e){if(i&1){let n=le();v(0,"img",10),T("click",function(){H(n);let r=A();return W(r.skipClick())}),y()}}function $U(i,e){if(i&1){let n=le();v(0,"img",11),T("click",function(){H(n);let r=A();return W(r.skipClick())}),y()}}function KU(i,e){if(i&1){let n=le();v(0,"button",12),T("click",function(){H(n);let r=A();return W(r.nextClick())}),O(1),M(2,"translate"),y()}i&2&&(g(1),U(" ",E(2,1,"TUTORIAL.NEXT")," "))}function QU(i,e){if(i&1){let n=le();v(0,"button",12),T("click",function(){H(n);let r=A();return W(r.nextClick())}),O(1),M(2,"translate"),y()}i&2&&(g(1),U(" ",E(2,1,"TUTORIAL.FINISH")," "))}var JU=(i,e)=>({top:i,left:e}),$I=(()=>{let e=class e{constructor(t,r){this.theming=t,this.cdr=r,this.skip=new Me,this.next=new Me,this._destroySubject=new _e,ut(window,"resize").pipe(xe(this._destroySubject)).subscribe(()=>this.elementToExplainChanged())}elementToExplainChanged(){if(this.tutorialWindow.nativeElement.classList.remove("top","left","bottom","right"),delete this.arrowLeft,delete this.arrowTop,!this.step.elementToExplain){this.xPos=window.innerWidth/2-this.tutorialWindow.nativeElement.offsetWidth/2,this.yPos=window.innerHeight/2-this.tutorialWindow.nativeElement.offsetHeight/2,this.cdr.detectChanges();return}let t=this.step.elementToExplain.getBoundingClientRect();switch(this.step.explanationBoxLocation){case 0:this.yPos=t.top-(this.tutorialWindow.nativeElement.offsetHeight+20),this.tutorialWindow.nativeElement.classList.add("top");break;case 3:this.xPos=t.left-340,this.tutorialWindow.nativeElement.classList.add("left");break;case 2:this.yPos=t.top+t.height+20,this.tutorialWindow.nativeElement.classList.add("bottom");break;case 1:this.xPos=t.left+t.width+20,this.tutorialWindow.nativeElement.classList.add("right");break}if(this.step.explanationBoxLocation===3||this.step.explanationBoxLocation===1)this.yPos=t.top+t.height/2-this.tutorialWindow.nativeElement.offsetHeight/2,this.arrowTop=this.tutorialWindow.nativeElement.offsetHeight/2-19;else{let r=t.left+t.width/2-this.tutorialWindow.nativeElement.offsetWidth/2;r<0?r=5:r>window.innerWidth-380&&(r=window.innerWidth-385),this.arrowLeft=t.left+t.width/2-r-19,this.xPos=r}this.cdr.detectChanges()}get currentTheme(){return this.theming.currentTheme}skipClick(){this.skip.emit()}nextClick(){this.next.emit()}set xPos(t){this.tutorialWindow.nativeElement.style.left=t+"px"}set yPos(t){this.tutorialWindow.nativeElement.style.top=t+"px"}ngOnDestroy(){this._destroySubject.next(null),this._destroySubject.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)(x(Re),x(Zt))},e.\u0275cmp=ie({type:e,selectors:[["app-tutorial-window"]],viewQuery:function(r,o){if(r&1&&et(YU,7),r&2){let s;Je(s=tt())&&(o.tutorialWindow=s.first)}},inputs:{step:"step",isLastStep:"isLastStep"},outputs:{skip:"skip",next:"next"},decls:15,vars:14,consts:[[1,"tutorial-window"],["tutorialWindow",""],[1,"arrow",3,"ngStyle"],[1,"header"],["src","assets/icons/dark/close.svg","class","dark","alt","close","tabindex","0",3,"click",4,"ngIf"],["src","assets/icons/light/close.svg","class","light","alt","close","tabindex","0",3,"click",4,"ngIf"],[1,"content"],[1,"help-text",3,"innerHTML"],[1,"buttons"],["class","btn-raised primary",3,"click",4,"ngIf"],["src","assets/icons/dark/close.svg","alt","close","tabindex","0",1,"dark",3,"click"],["src","assets/icons/light/close.svg","alt","close","tabindex","0",1,"light",3,"click"],[1,"btn-raised","primary",3,"click"]],template:function(r,o){r&1&&(v(0,"div",0,1),q(2,"div",2),v(3,"div",3)(4,"div"),O(5),M(6,"translate"),y(),J(7,ZU,1,0,"img",4)(8,$U,1,0,"img",5),y(),v(9,"div",6),q(10,"p",7),M(11,"translate"),v(12,"div",8),J(13,KU,3,3,"button",9)(14,QU,3,3,"button",9),y()()()),r&2&&(g(2),w("ngStyle",vw(11,JU,o.arrowTop?o.arrowTop+"px":"",o.arrowLeft?o.arrowLeft+"px":"")),g(3),K(E(6,7,o.step.title)),g(2),w("ngIf",o.currentTheme==="dark"),g(1),w("ngIf",o.currentTheme==="light"),g(2),w("innerHTML",E(11,9,o.step.text),Gr),g(3),w("ngIf",!o.isLastStep),g(1),w("ngIf",o.isLastStep))},dependencies:[Be,zw,Pe],styles:[".tutorial-window[_ngcontent-%COMP%]{position:fixed;top:300px;left:300px;z-index:500;width:380px;box-shadow:10px 10px 10px -5px #00000080}.theme-light[_nghost-%COMP%]   .tutorial-window[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .tutorial-window[_ngcontent-%COMP%]{background-color:#f5f5f5;border:1px solid #ffffff;color:#000}.theme-dark[_nghost-%COMP%]   .tutorial-window[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .tutorial-window[_ngcontent-%COMP%]{background-color:#262a2b;border:1px solid #1a1a1a;color:#ccc}.tutorial-window[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{border-bottom:18px solid transparent;border-left:18px solid transparent;border-right:18px solid transparent;border-top:18px solid transparent;height:0;position:absolute;width:0;pointer-events:none}.tutorial-window.top[_ngcontent-%COMP%] > .arrow[_ngcontent-%COMP%]{left:0;bottom:-37px}.theme-light[_nghost-%COMP%]   .tutorial-window.top[_ngcontent-%COMP%] > .arrow[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .tutorial-window.top[_ngcontent-%COMP%] > .arrow[_ngcontent-%COMP%]{border-top:18px solid #d1d1d1}.theme-dark[_nghost-%COMP%]   .tutorial-window.top[_ngcontent-%COMP%] > .arrow[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .tutorial-window.top[_ngcontent-%COMP%] > .arrow[_ngcontent-%COMP%]{border-top:18px solid #3a4042}.tutorial-window.left[_ngcontent-%COMP%] > .arrow[_ngcontent-%COMP%]{top:0;right:-37px}.theme-light[_nghost-%COMP%]   .tutorial-window.left[_ngcontent-%COMP%] > .arrow[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .tutorial-window.left[_ngcontent-%COMP%] > .arrow[_ngcontent-%COMP%]{border-left:18px solid #d1d1d1}.theme-dark[_nghost-%COMP%]   .tutorial-window.left[_ngcontent-%COMP%] > .arrow[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .tutorial-window.left[_ngcontent-%COMP%] > .arrow[_ngcontent-%COMP%]{border-left:18px solid #3a4042}.tutorial-window.bottom[_ngcontent-%COMP%] > .arrow[_ngcontent-%COMP%]{left:0;top:-37px}.theme-light[_nghost-%COMP%]   .tutorial-window.bottom[_ngcontent-%COMP%] > .arrow[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .tutorial-window.bottom[_ngcontent-%COMP%] > .arrow[_ngcontent-%COMP%]{border-bottom:18px solid #d1d1d1}.theme-dark[_nghost-%COMP%]   .tutorial-window.bottom[_ngcontent-%COMP%] > .arrow[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .tutorial-window.bottom[_ngcontent-%COMP%] > .arrow[_ngcontent-%COMP%]{border-bottom:18px solid #3a4042}.tutorial-window.right[_ngcontent-%COMP%] > .arrow[_ngcontent-%COMP%]{top:0;left:-37px}.theme-light[_nghost-%COMP%]   .tutorial-window.right[_ngcontent-%COMP%] > .arrow[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .tutorial-window.right[_ngcontent-%COMP%] > .arrow[_ngcontent-%COMP%]{border-right:18px solid #d1d1d1}.theme-dark[_nghost-%COMP%]   .tutorial-window.right[_ngcontent-%COMP%] > .arrow[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .tutorial-window.right[_ngcontent-%COMP%] > .arrow[_ngcontent-%COMP%]{border-right:18px solid #3a4042}.tutorial-window[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;width:100%;text-align:center;font-size:1.2rem;font-weight:400;justify-content:space-between;align-items:center;padding:.5rem}@media (max-width: 350px){.tutorial-window[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{padding-top:1rem}}.theme-light[_nghost-%COMP%]   .tutorial-window[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .tutorial-window[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{background-color:#d1d1d1}.theme-dark[_nghost-%COMP%]   .tutorial-window[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .tutorial-window[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{background-color:#3a4042}.tutorial-window[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:1px;border-radius:.25rem;height:27px;padding:.25rem}.theme-light[_nghost-%COMP%]   .tutorial-window[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover, .theme-light   [_nghost-%COMP%]   .tutorial-window[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{background-color:#fff}.theme-dark[_nghost-%COMP%]   .tutorial-window[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover, .theme-dark   [_nghost-%COMP%]   .tutorial-window[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{background-color:#3e4446}.tutorial-window[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin:1rem}.tutorial-window[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .help-text[_ngcontent-%COMP%]{margin:0}.tutorial-window[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;margin-top:1rem}"],changeDetection:0});let i=e;return i})();var ly={id:"gettingStarted",name:"TUTORIAL.GETTING_STARTED.NAME",steps:[{title:"TUTORIAL.GETTING_STARTED.WELCOME.TITLE",text:"TUTORIAL.GETTING_STARTED.WELCOME.TEXT"},{title:"TUTORIAL.GETTING_STARTED.ZOOM_PAN.TITLE",text:"TUTORIAL.GETTING_STARTED.ZOOM_PAN.TEXT"},{title:"TUTORIAL.GETTING_STARTED.PLACING_ELEMS.TITLE",text:"TUTORIAL.GETTING_STARTED.PLACING_ELEMS.TEXT",elementToExplain:"#construction-box",explanationBoxLocation:1},{title:"TUTORIAL.GETTING_STARTED.WIRES.TITLE",text:"TUTORIAL.GETTING_STARTED.WIRES.TEXT",elementToExplain:"app-toolbar .toolbar-button.wire",explanationBoxLocation:2},{title:"TUTORIAL.GETTING_STARTED.CONN_WIRE.TITLE",text:"TUTORIAL.GETTING_STARTED.CONN_WIRE.TEXT",elementToExplain:"app-toolbar .toolbar-button.conn-wire",explanationBoxLocation:2},{title:"TUTORIAL.GETTING_STARTED.SELECT.TITLE",text:"TUTORIAL.GETTING_STARTED.SELECT.TEXT",elementToExplain:"app-toolbar .toolbar-button.select",explanationBoxLocation:2},{title:"TUTORIAL.GETTING_STARTED.SELECT_CUT.TITLE",text:"TUTORIAL.GETTING_STARTED.SELECT_CUT.TEXT",elementToExplain:"app-toolbar .toolbar-button.select-cut",explanationBoxLocation:2},{title:"TUTORIAL.GETTING_STARTED.ERASER.TITLE",text:"TUTORIAL.GETTING_STARTED.ERASER.TEXT",elementToExplain:"app-toolbar .toolbar-button.eraser",explanationBoxLocation:2},{title:"TUTORIAL.GETTING_STARTED.TEXT.TITLE",text:"TUTORIAL.GETTING_STARTED.TEXT.TEXT",elementToExplain:"app-toolbar .toolbar-button.text",explanationBoxLocation:2},{title:"TUTORIAL.GETTING_STARTED.CUSTOM_COMPONENTS.TITLE",text:"TUTORIAL.GETTING_STARTED.CUSTOM_COMPONENTS.TEXT",elementToExplain:"app-toolbar .toolbar-button.new-comp",explanationBoxLocation:2},{title:"TUTORIAL.GETTING_STARTED.SIMULATION_MODE.TITLE",text:"TUTORIAL.GETTING_STARTED.SIMULATION_MODE.TEXT",elementToExplain:"app-toolbar div.toolbar-end > div",explanationBoxLocation:2}]};var Lp=(()=>{let e=class e{constructor(t,r,o,s){this.componentFactoryResolver=t,this.appRef=r,this.injector=o,this.storage=s,this._tutorials=new Map([[ly.id,ly]]);let a=this.storage.get("tutorials");this._finishedTutorials=a?new Set(a):new Set}get allTutorials(){return[...this._tutorials.values()]}startTutorial(t){this._finishedTutorials.has(t)||this.manuallyStartTutorial(t)}manuallyStartTutorial(t){if(this._currentRunningTutorial)return;this._currentRunningTutorial=t,this._tutorialStepPointer=0;let r=this.componentFactoryResolver.resolveComponentFactory($I);this._tutWindowInstance=r.create(this.injector),this._skipSubscription=this._tutWindowInstance.instance.skip.subscribe(()=>{this.finishTutorial()}),this._nextSubscription=this._tutWindowInstance.instance.next.subscribe(()=>{this._tutorials.get(this._currentRunningTutorial).steps.length-1===this._tutorialStepPointer?this.finishTutorial():(this._tutorialStepPointer++,this.tutorialStep())}),this.appRef.attachView(this._tutWindowInstance.hostView);let o=this._tutWindowInstance.hostView.rootNodes[0];document.body.appendChild(o),this.tutorialStep()}tutorialStep(){let t=this._tutorials.get(this._currentRunningTutorial);this._tutWindowInstance.instance.step=Xe(Q({},t.steps[this._tutorialStepPointer]),{elementToExplain:document.querySelector(t.steps[this._tutorialStepPointer].elementToExplain)}),this._tutWindowInstance.instance.isLastStep=t.steps.length-1===this._tutorialStepPointer,this._tutWindowInstance.changeDetectorRef.detectChanges(),this._tutWindowInstance.instance.elementToExplainChanged()}finishTutorial(){this._nextSubscription.unsubscribe(),this._skipSubscription.unsubscribe(),this._tutWindowInstance.destroy(),delete this._tutWindowInstance,this._finishedTutorials.add(this._currentRunningTutorial),this.storage.set("tutorials",[...this._finishedTutorials]),delete this._currentRunningTutorial}};e.\u0275fac=function(r){return new(r||e)(D(xn),D(vn),D(nn),D(Xn))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();function e4(i,e){if(i&1){let n=le();v(0,"div",1),T("click",function(){let o=H(n).$implicit,s=A(2);return W(s.tutorialClick(o.id))}),O(1),M(2,"translate"),y()}if(i&2){let n=e.$implicit;g(1),U(" ",E(2,1,n.name)," ")}}function t4(i,e){if(i&1&&(st(0),q(1,"hr"),J(2,e4,3,3,"div",3),at()),i&2){let n=e.ngIf;g(2),w("ngForOf",n)}}var QI=(()=>{let e=class e{constructor(t,r){this.popupService=t,this.tutorialService=r,this.requestClosed=new Me}get tutorials(){return this.tutorialService.allTutorials}close(){this.requestClosed.emit()}help(){this.popupService.showPopup(YI,"POPUP.HELP.TITLE",!0),this.close()}tutorialClick(t){this.tutorialService.manuallyStartTutorial(t),this.close()}hexBinDec(){this.popupService.showPopup(ZI,"POPUP.HEX_BIN_DEC.TITLE",!1),this.close()}};e.\u0275fac=function(r){return new(r||e)(x(hn),x(Lp))},e.\u0275cmp=ie({type:e,selectors:[["app-help-dropdown"]],outputs:{requestClosed:"requestClosed"},decls:9,vars:7,consts:[[1,"dropdown"],["tabindex","0",3,"click"],[4,"ngIf"],["tabindex","0",3,"click",4,"ngFor","ngForOf"]],template:function(r,o){r&1&&(v(0,"div",0)(1,"div",1),T("click",function(){return o.hexBinDec()}),O(2),M(3,"translate"),y(),q(4,"hr"),v(5,"div",1),T("click",function(){return o.help()}),O(6),M(7,"translate"),y(),J(8,t4,3,1,"ng-container",2),y()),r&2&&(g(2),U(" ",E(3,3,"DROPDOWN.HELP.HEX_BIN_DEC")," "),g(4),U(" ",E(7,5,"DROPDOWN.HELP.HELP")," "),g(2),w("ngIf",o.tutorials))},dependencies:[sn,Be,Pe],styles:[".dropdown[_ngcontent-%COMP%]{position:absolute;z-index:200;width:max-content;min-width:10rem;min-height:1rem;display:flex;flex-direction:column;-webkit-user-select:none;user-select:none;font-size:.9rem}.theme-light[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#000;border:solid #d1d1d1 1px;border-top-right-radius:.1rem;border-bottom-left-radius:.1rem;border-bottom-right-radius:.1rem}.theme-light[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:.5rem}.theme-light[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover, .theme-light   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{background-color:#d1d1d1}.theme-light[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{float:right;margin-left:3rem}.theme-light[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:100%;margin:auto;border-width:0;border-bottom-width:1px;border-style:solid;border-color:#d1d1d1}.theme-dark[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]{background-color:#262a2b;color:#ccc;border:solid #3a4042 1px;border-top-right-radius:.1rem;border-bottom-left-radius:.1rem;border-bottom-right-radius:.1rem}.theme-dark[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:.5rem}.theme-dark[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover, .theme-dark   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{background-color:#3a4042}.theme-dark[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{float:right;margin-left:3rem}.theme-dark[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:100%;margin:auto;border-width:0;border-bottom-width:1px;border-style:solid;border-color:#3a4042}"],changeDetection:0});let i=e;return i})();var i4=["inputContainer"],jp=(()=>{let e=class e{constructor(t,r,o){this.actions=t,this.ngZone=r,this.cdr=o,this.isRecording=!1,this._destroySubject=new _e}ngOnInit(){this.shortcutText=this.actions.getShortcutTextForAction(this.shortcut.action),this.ngZone.runOutsideAngular(()=>{ut(window,"click").pipe(xe(this._destroySubject)).subscribe(t=>this.onWindowClick(t)),ut(this.inputContainer.nativeElement,"keydown").pipe(xe(this._destroySubject)).subscribe(t=>this.onKeyDown(t))})}onWindowClick(t){this.inputContainer.nativeElement.contains(t.target)||(this.isRecording=!1,this.cdr.detectChanges())}saveClick(){this.isRecording=!1}onKeyDown(t){this.isRecording&&(t.preventDefault(),t.stopPropagation(),this._newShortcutConfig=this.actions.getShortcutConfigFromKeyEvent(t),this.shortcutText=this.actions.getShortcutText(this._newShortcutConfig),this.cdr.detectChanges())}startRecording(){this.isRecording=!0}get changedShortcutSettings(){return this._newShortcutConfig?{key:this.shortcut.action,config:this._newShortcutConfig}:null}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)(x(_n),x(ye),x(Zt))},e.\u0275cmp=ie({type:e,selectors:[["app-single-shortcut-config"]],viewQuery:function(r,o){if(r&1&&et(i4,7),r&2){let s;Je(s=tt())&&(o.inputContainer=s.first)}},inputs:{shortcut:"shortcut"},decls:8,vars:6,consts:[[1,"single-shortcut-config"],["tabindex","0",1,"shortcut-input-container",3,"click"],["readonly","",1,"shortcut-input",3,"ngModel","ngModelChange"],["inputContainer",""],["tabindex","0",1,"save",3,"click"]],template:function(r,o){r&1&&(v(0,"div",0)(1,"p"),O(2),M(3,"translate"),y(),v(4,"div",1),T("click",function(){return o.startRecording()}),v(5,"input",2,3),T("ngModelChange",function(a){return o.shortcutText=a}),y(),v(7,"div",4),T("click",function(){return o.saveClick()}),y()()()),r&2&&(g(2),K(E(3,4,"POPUP.SHORTCUTS.DESCRIPTION."+o.shortcut.action)),g(2),Ve("recording",o.isRecording),g(1),w("ngModel",o.shortcutText))},dependencies:[In,Et,jn,Pe],styles:['.single-shortcut-config[_ngcontent-%COMP%]{width:35vw;min-width:30rem;max-width:40rem;display:flex;flex-direction:row;justify-content:space-between;align-items:center;margin:auto}.single-shortcut-config[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.9rem}.theme-light[_nghost-%COMP%]   .single-shortcut-config[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .single-shortcut-config[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#000}.theme-dark[_nghost-%COMP%]   .single-shortcut-config[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .single-shortcut-config[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ccc}.single-shortcut-config[_ngcontent-%COMP%]   .shortcut-input-container[_ngcontent-%COMP%]{width:15rem;margin-bottom:1rem;border-radius:.1rem}.single-shortcut-config[_ngcontent-%COMP%]   .shortcut-input-container[_ngcontent-%COMP%]   .shortcut-input[_ngcontent-%COMP%]{width:100%;height:33px;border:none;outline:none;border-radius:.1rem;padding:.5rem;font-size:.9rem;-webkit-user-select:none;user-select:none;transition:width .2s}.theme-light[_nghost-%COMP%]   .single-shortcut-config[_ngcontent-%COMP%]   .shortcut-input-container[_ngcontent-%COMP%]   .shortcut-input[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .single-shortcut-config[_ngcontent-%COMP%]   .shortcut-input-container[_ngcontent-%COMP%]   .shortcut-input[_ngcontent-%COMP%]{background-color:#d1d1d1;color:#000}.theme-dark[_nghost-%COMP%]   .single-shortcut-config[_ngcontent-%COMP%]   .shortcut-input-container[_ngcontent-%COMP%]   .shortcut-input[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .single-shortcut-config[_ngcontent-%COMP%]   .shortcut-input-container[_ngcontent-%COMP%]   .shortcut-input[_ngcontent-%COMP%]{background-color:#3a4042;color:#ccc}.single-shortcut-config[_ngcontent-%COMP%]   .shortcut-input-container[_ngcontent-%COMP%]   .save[_ngcontent-%COMP%]{display:inline-block;vertical-align:bottom;height:33px;width:0;border-bottom-right-radius:.25rem;border-top-right-radius:.25rem;transition:width .2s}.theme-light[_nghost-%COMP%]   .single-shortcut-config[_ngcontent-%COMP%]   .shortcut-input-container[_ngcontent-%COMP%]   .save[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .single-shortcut-config[_ngcontent-%COMP%]   .shortcut-input-container[_ngcontent-%COMP%]   .save[_ngcontent-%COMP%]{background-color:#e8e8e8}.theme-light[_nghost-%COMP%]   .single-shortcut-config[_ngcontent-%COMP%]   .shortcut-input-container[_ngcontent-%COMP%]   .save[_ngcontent-%COMP%]:hover, .theme-light   [_nghost-%COMP%]   .single-shortcut-config[_ngcontent-%COMP%]   .shortcut-input-container[_ngcontent-%COMP%]   .save[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#fff}.theme-dark[_nghost-%COMP%]   .single-shortcut-config[_ngcontent-%COMP%]   .shortcut-input-container[_ngcontent-%COMP%]   .save[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .single-shortcut-config[_ngcontent-%COMP%]   .shortcut-input-container[_ngcontent-%COMP%]   .save[_ngcontent-%COMP%]{background-color:#1a1d1d}.theme-dark[_nghost-%COMP%]   .single-shortcut-config[_ngcontent-%COMP%]   .shortcut-input-container[_ngcontent-%COMP%]   .save[_ngcontent-%COMP%]:hover, .theme-dark   [_nghost-%COMP%]   .single-shortcut-config[_ngcontent-%COMP%]   .shortcut-input-container[_ngcontent-%COMP%]   .save[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#3e4446}.theme-light[_nghost-%COMP%]   .single-shortcut-config[_ngcontent-%COMP%]   .shortcut-input-container.recording[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .single-shortcut-config[_ngcontent-%COMP%]   .shortcut-input-container.recording[_ngcontent-%COMP%]{box-shadow:0 0 0 3px #f5f5f5}.theme-dark[_nghost-%COMP%]   .single-shortcut-config[_ngcontent-%COMP%]   .shortcut-input-container.recording[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .single-shortcut-config[_ngcontent-%COMP%]   .shortcut-input-container.recording[_ngcontent-%COMP%]{box-shadow:0 0 0 3px #262a2b}.single-shortcut-config[_ngcontent-%COMP%]   .shortcut-input-container.recording[_ngcontent-%COMP%]   .shortcut-input[_ngcontent-%COMP%]{border-bottom-right-radius:0;border-top-right-radius:0;width:80%}.theme-light[_nghost-%COMP%]   .single-shortcut-config[_ngcontent-%COMP%]   .shortcut-input-container.recording[_ngcontent-%COMP%]   .save[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .single-shortcut-config[_ngcontent-%COMP%]   .shortcut-input-container.recording[_ngcontent-%COMP%]   .save[_ngcontent-%COMP%]{background-image:url("./media/check-7P5K26UR.svg");background-repeat:no-repeat;background-size:60%;background-position:center;width:20%}.theme-dark[_nghost-%COMP%]   .single-shortcut-config[_ngcontent-%COMP%]   .shortcut-input-container.recording[_ngcontent-%COMP%]   .save[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .single-shortcut-config[_ngcontent-%COMP%]   .shortcut-input-container.recording[_ngcontent-%COMP%]   .save[_ngcontent-%COMP%]{background-image:url("./media/check-MHSO5E3D.svg");background-repeat:no-repeat;background-size:60%;background-position:center;width:20%}'],changeDetection:0});let i=e;return i})();function o4(i,e){if(i&1&&q(0,"app-single-shortcut-config",3),i&2){let n=e.$implicit;w("shortcut",n)}}var JI=(()=>{let e=class e extends Nt{constructor(t){super(),this.actionsService=t}get shortcuts(){return this.actionsService.shortcutActionConfig}save(){let t=new Map;this.singleConfigs.forEach(r=>{let o=r.changedShortcutSettings;o&&t.set(o.key,o.config)}),this.actionsService.setShortcutConfig(t),this.requestClose.emit()}};e.\u0275fac=function(r){return new(r||e)(x(_n))},e.\u0275cmp=ie({type:e,selectors:[["app-shortcut-config"]],viewQuery:function(r,o){if(r&1&&et(jp,5),r&2){let s;Je(s=tt())&&(o.singleConfigs=s)}},features:[ke],decls:5,vars:4,consts:[[1,"shortcut-config"],[3,"shortcut",4,"ngFor","ngForOf"],[1,"btn-raised","primary",3,"click"],[3,"shortcut"]],template:function(r,o){r&1&&(v(0,"div",0),J(1,o4,1,1,"app-single-shortcut-config",1),v(2,"button",2),T("click",function(){return o.save()}),O(3),M(4,"translate"),y()()),r&2&&(g(1),w("ngForOf",o.shortcuts),g(2),U(" ",E(4,2,"POPUP.SHORTCUTS.SAVE")," "))},dependencies:[sn,jp,Pe],styles:[".shortcut-config[_ngcontent-%COMP%]{max-height:70vh;padding:0 1rem;margin:.5rem 0;overflow:auto;scrollbar-width:thin}.theme-light[_nghost-%COMP%]   .shortcut-config[_ngcontent-%COMP%]::-webkit-scrollbar-track, .theme-light   [_nghost-%COMP%]   .shortcut-config[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#f5f5f5}.theme-dark[_nghost-%COMP%]   .shortcut-config[_ngcontent-%COMP%]::-webkit-scrollbar-track, .theme-dark   [_nghost-%COMP%]   .shortcut-config[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#262a2b}.shortcut-config[_ngcontent-%COMP%]::-webkit-scrollbar{width:5px}.shortcut-config[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:2.5px}.theme-light[_nghost-%COMP%]   .shortcut-config[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, .theme-light   [_nghost-%COMP%]   .shortcut-config[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#d1d1d1}.theme-dark[_nghost-%COMP%]   .shortcut-config[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, .theme-dark   [_nghost-%COMP%]   .shortcut-config[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#3a4042}.theme-light[_nghost-%COMP%]   .shortcut-config[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .shortcut-config[_ngcontent-%COMP%]{scrollbar-color:#d1d1d1 #f5f5f5}.theme-dark[_nghost-%COMP%]   .shortcut-config[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .shortcut-config[_ngcontent-%COMP%]{scrollbar-color:#3a4042 #262a2b}.shortcut-config[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:.5rem 0;float:right;width:20%;min-width:100px}"],changeDetection:0});let i=e;return i})();var eS=(()=>{let e=class e extends Nt{constructor(t){super(),this.theming=t}reloadPostponed(){this.setTheme(),this.requestClose.emit()}reloadConfirm(){this.setTheme(),window.location.reload()}close(){this.requestClose.emit()}setTheme(){this.theming.pendingTheme==="dark"?this.theming.setTheme("light"):this.theming.setTheme("dark")}};e.\u0275fac=function(r){return new(r||e)(x(Re))},e.\u0275cmp=ie({type:e,selectors:[["app-reload-question"]],features:[ke],decls:13,vars:12,consts:[[1,"reload"],[3,"innerHTML"],[1,"buttons"],[1,"btn-raised","primary",3,"click"],[1,"btn-raised","secondary",3,"click"],[1,"btn-raised","danger",3,"click"]],template:function(r,o){r&1&&(v(0,"div",0),q(1,"p",1),M(2,"translate"),v(3,"div",2)(4,"button",3),T("click",function(){return o.reloadConfirm()}),O(5),M(6,"translate"),y(),v(7,"button",4),T("click",function(){return o.reloadPostponed()}),O(8),M(9,"translate"),y(),v(10,"button",5),T("click",function(){return o.close()}),O(11),M(12,"translate"),y()()()),r&2&&(g(1),w("innerHTML",E(2,4,"POPUP.RELOAD.QUESTION"),Gr),g(4),U(" ",E(6,6,"POPUP.RELOAD.YES")," "),g(3),U(" ",E(9,8,"POPUP.RELOAD.POSTPONE")," "),g(3),U(" ",E(12,10,"POPUP.RELOAD.CANCEL")," "))},dependencies:[Pe],styles:[".reload[_ngcontent-%COMP%]{margin:1rem}.reload[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end}.reload[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:.5rem}"],changeDetection:0});let i=e;return i})();function s4(i,e){i&1&&q(0,"img",21)}function a4(i,e){i&1&&q(0,"img",22)}function l4(i,e){i&1&&q(0,"img",25)}function c4(i,e){i&1&&q(0,"img",26)}function u4(i,e){if(i&1){let n=le();v(0,"a",15),T("click",function(){H(n);let r=A();return W(r.accountSettings())}),J(1,l4,1,0,"img",23)(2,c4,1,0,"img",24),O(3),M(4,"translate"),y()}if(i&2){let n=A();g(1),w("ngIf",n.theming.currentTheme==="dark"),g(1),w("ngIf",n.theming.currentTheme==="light"),g(1),U(" ",E(4,3,"DROPDOWN.SETTINGS.ACCOUNT")," ")}}var tS=(()=>{let e=class e{constructor(t,r,o,s,a){this.theming=t,this.simulationMgmt=r,this.popupService=o,this.translation=s,this.user=a,this.requestClosed=new Me,this.showDropDown=!0}ngOnInit(){this.currentLang=this.translation.currentLang}get isLoggedIn(){return this.user.isLoggedIn}languageChange(){this.translation.use(this.currentLang)}close(){this.requestClosed.emit()}showCustomizeShortcuts(){return $(this,null,function*(){this.showDropDown=!1,yield this.popupService.showPopup(JI,"POPUP.SHORTCUTS.TITLE",!1),this.close()})}accountSettings(){window.open(`${C.homeUrl}/my/account/profile`,"_blank")}privacyPolicy(){window.open(`${C.homeUrl}/privacy-policy`,"_blank")}showReloadPopup(){return $(this,null,function*(){this.showDropDown=!1,yield this.popupService.showPopup(eS,"POPUP.RELOAD.TITLE",!1),this.close()})}};e.\u0275fac=function(r){return new(r||e)(x(Re),x(qo),x(hn),x(yn),x($n))},e.\u0275cmp=ie({type:e,selectors:[["app-settings-dropdown"]],outputs:{requestClosed:"requestClosed"},decls:41,vars:27,consts:[[1,"dropdown"],[1,"switch","item"],["for","settings-dropdown__dark-mode"],["id","settings-dropdown__dark-mode",3,"checked","click"],["for","settings-dropdown__show-grid"],["id","settings-dropdown__show-grid",3,"ngModel","ngModelChange"],["for","settings-dropdown__autostart"],["id","settings-dropdown__autostart",3,"ngModel","ngModelChange"],[1,"select","item"],["for","settings-dropdown__langugage"],["id","settings-dropdown__langugage",3,"ngModel","ngModelChange"],["value","en"],["value","de"],["value","es"],["value","fr"],["tabindex","0",1,"link","item",3,"click"],["alt","settings icon","src","assets/icons/dark/settings.svg",4,"ngIf"],["alt","settings icon","src","assets/icons/light/settings.svg",4,"ngIf"],["class","link item","tabindex","0",3,"click",4,"ngIf"],[1,"link","item"],[1,"btn-outline","secondary","small",3,"click"],["alt","settings icon","src","assets/icons/dark/settings.svg"],["alt","settings icon","src","assets/icons/light/settings.svg"],["alt","user icon","src","assets/icons/dark/user.svg",4,"ngIf"],["alt","user icon","src","assets/icons/light/user.svg",4,"ngIf"],["alt","user icon","src","assets/icons/dark/user.svg"],["alt","user icon","src","assets/icons/light/user.svg"]],template:function(r,o){r&1&&(v(0,"div",0)(1,"div",1)(2,"label",2),O(3),M(4,"translate"),y(),v(5,"app-switch",3),T("click",function(){return o.showReloadPopup()}),y()(),v(6,"div",1)(7,"label",4),O(8),M(9,"translate"),y(),v(10,"app-switch",5),T("ngModelChange",function(a){return o.theming.showGrid=a}),y()(),v(11,"div",1)(12,"label",6),O(13),M(14,"translate"),y(),v(15,"app-switch",7),T("ngModelChange",function(a){return o.simulationMgmt.autoStartSimulation=a}),y()(),v(16,"div",8)(17,"label",9),O(18),M(19,"translate"),y(),v(20,"select",10),T("ngModelChange",function(a){return o.currentLang=a})("ngModelChange",function(){return o.languageChange()}),v(21,"option",11),O(22,"English"),y(),v(23,"option",12),O(24,"Deutsch"),y(),v(25,"option",13),O(26,"Espa\xF1ol"),y(),v(27,"option",14),O(28,"Fran\xE7ais"),y()()(),q(29,"hr"),v(30,"a",15),T("click",function(){return o.showCustomizeShortcuts()}),J(31,s4,1,0,"img",16)(32,a4,1,0,"img",17),O(33),M(34,"translate"),y(),J(35,u4,5,5,"a",18),q(36,"hr"),v(37,"div",19)(38,"button",20),T("click",function(){return o.privacyPolicy()}),O(39),M(40,"translate"),y()()()),r&2&&(Ve("hidden",!o.showDropDown),g(3),K(E(4,15,"DROPDOWN.SETTINGS.DARK_MODE")),g(2),w("checked",o.theming.pendingTheme==="dark"),g(3),K(E(9,17,"DROPDOWN.SETTINGS.SHOW_GRID")),g(2),w("ngModel",o.theming.showGrid),g(3),K(E(14,19,"DROPDOWN.SETTINGS.AUTOSTART_SIM")),g(2),w("ngModel",o.simulationMgmt.autoStartSimulation),g(3),K(E(19,21,"DROPDOWN.SETTINGS.LANGUAGE")),g(2),w("ngModel",o.currentLang),g(11),w("ngIf",o.theming.currentTheme==="dark"),g(1),w("ngIf",o.theming.currentTheme==="light"),g(1),U(" ",E(34,23,"DROPDOWN.SETTINGS.SHORTCUTS")," "),g(2),w("ngIf",o.isLoggedIn),g(4),U(" ",E(40,25,"DROPDOWN.SETTINGS.PRIVACY")," "))},dependencies:[Be,Ja,el,zo,Et,jn,Ir,Pe],styles:[".dropdown[_ngcontent-%COMP%]{position:absolute;z-index:200;width:max-content;min-width:20rem;display:flex;flex-direction:column;right:0;top:55px}.dropdown.hidden[_ngcontent-%COMP%]{display:none}.theme-light[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#000;border:1px solid #d1d1d1;border-radius:.1rem}.theme-light[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]{justify-content:space-between}.theme-light[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]{justify-content:space-between}.theme-light[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:40%;font-size:.9rem;outline:none;border:none;border-bottom:1px solid #000000;color:#000;background-color:#f5f5f5}.theme-light[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;height:3rem;padding:.5rem 1rem;text-decoration:none}.theme-light[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;margin-right:1rem}.theme-light[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{cursor:pointer}.theme-light[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:hover, .theme-light   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:hover{background-color:#d1d1d1}.theme-light[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   .new-version[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   .new-version[_ngcontent-%COMP%]{color:#000;background-color:#27ae60}.theme-light[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   .new-version[_ngcontent-%COMP%]:hover, .theme-light   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   .new-version[_ngcontent-%COMP%]:hover{background-color:#295;color:#000}.theme-light[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:100%;margin:auto;border-width:0;border-bottom-width:1px;border-style:solid;border-color:#d1d1d1}.theme-dark[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]{background-color:#262a2b;color:#ccc;border:1px solid #3a4042;border-radius:.1rem}.theme-dark[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]{justify-content:space-between}.theme-dark[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]{justify-content:space-between}.theme-dark[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:40%;font-size:.9rem;outline:none;border:none;border-bottom:1px solid #cccccc;color:#ccc;background-color:#262a2b}.theme-dark[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;height:3rem;padding:.5rem 1rem;text-decoration:none}.theme-dark[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;margin-right:1rem}.theme-dark[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{cursor:pointer}.theme-dark[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:hover, .theme-dark   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:hover{background-color:#3a4042}.theme-dark[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   .new-version[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   .new-version[_ngcontent-%COMP%]{color:#ccc;background-color:#27ae60}.theme-dark[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   .new-version[_ngcontent-%COMP%]:hover, .theme-dark   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   .new-version[_ngcontent-%COMP%]:hover{background-color:#295;color:#ccc}.theme-dark[_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .dropdown[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:100%;margin:auto;border-width:0;border-bottom-width:1px;border-style:solid;border-color:#3a4042}"],changeDetection:0});let i=e;return i})();function h4(i,e){if(i&1){let n=le();v(0,"div",14),T("click",function(){H(n);let r=A();return W(r.closeDropdowns())}),y()}}function p4(i,e){if(i&1){let n=le();v(0,"app-file-dropdown",15),T("requestClosed",function(){H(n);let r=A(2);return W(r.closeDropdowns())}),y()}}function f4(i,e){if(i&1){let n=le();v(0,"div")(1,"p",8),T("mouseover",function(){H(n);let r=A();return W(r.switchDropdownIfActive("file"))})("focus",function(){H(n);let r=A();return W(r.switchDropdownIfActive("file"))})("click",function(){H(n);let r=A();return W(r.toggleDropdown("file"))}),O(2),M(3,"translate"),y(),J(4,p4,1,0,"app-file-dropdown",9),y()}if(i&2){let n=A();g(2),U(" ",E(3,2,"DROPDOWN.FILE.TITLE")," "),g(2),w("ngIf",n.dropdownOpen==="file")}}function m4(i,e){if(i&1){let n=le();v(0,"app-edit-dropdown",15),T("requestClosed",function(){H(n);let r=A(2);return W(r.closeDropdowns())}),y()}}function g4(i,e){if(i&1){let n=le();v(0,"div")(1,"p",8),T("mouseover",function(){H(n);let r=A();return W(r.switchDropdownIfActive("edit"))})("focus",function(){H(n);let r=A();return W(r.switchDropdownIfActive("edit"))})("click",function(){H(n);let r=A();return W(r.toggleDropdown("edit"))}),O(2),M(3,"translate"),y(),J(4,m4,1,0,"app-edit-dropdown",9),y()}if(i&2){let n=A();g(2),U(" ",E(3,2,"DROPDOWN.EDIT.TITLE")," "),g(2),w("ngIf",n.dropdownOpen==="edit")}}function _4(i,e){if(i&1){let n=le();v(0,"app-view-dropdown",15),T("requestClosed",function(){H(n);let r=A();return W(r.closeDropdowns())}),y()}}function v4(i,e){if(i&1){let n=le();v(0,"app-help-dropdown",15),T("requestClosed",function(){H(n);let r=A();return W(r.closeDropdowns())}),y()}}function y4(i,e){if(i&1){let n=le();st(0),v(1,"div",16),T("click",function(){H(n);let r=A();return W(r.toggleDropdown("settings"))}),v(2,"p"),O(3),y(),q(4,"img",17),y(),at()}if(i&2){let n=e.ngIf;g(3),K(n.username),g(1),w("src",n.image.publicUrl,vs)}}function C4(i,e){if(i&1){let n=le();v(0,"app-settings-dropdown",15),T("requestClosed",function(){H(n);let r=A();return W(r.closeDropdowns())}),y()}}function b4(i,e){if(i&1){let n=le();v(0,"p",18),T("click",function(){H(n);let r=A();return W(r.login())}),O(1),M(2,"translate"),y(),q(3,"div",19),v(4,"p",20),T("click",function(){H(n);let r=A();return W(r.register())}),O(5),M(6,"translate"),y(),v(7,"div",21),T("click",function(){H(n);let r=A();return W(r.toggleDropdown("settings"))}),y()}i&2&&(g(1),U(" ",E(2,2,"TOP_BAR.LOGIN")," "),g(4),U(" ",E(6,4,"TOP_BAR.REGISTER")," "))}var nS=(()=>{let e=class e{constructor(t,r,o){this.projectService=t,this.userService=r,this.workMode=o,this.dropdownOpen=null,this.homeUrl=C.homeUrl}get isSimulationMode(){return this.workMode.currentWorkMode===7}get userInfo$(){return this.userService.userInfo$}login(){window.open("/login","_blank")}register(){window.open("/register","_blank")}get mainProjectName(){return this.projectService.mainProject?this.projectService.mainProject.name:""}openDropdown(t){this.dropdownOpen=t}closeDropdowns(){this.dropdownOpen=null}switchDropdownIfActive(t){this.dropdownOpen&&this.openDropdown(t)}toggleDropdown(t){this.dropdownOpen===t?this.closeDropdowns():this.openDropdown(t)}};e.\u0275fac=function(r){return new(r||e)(x(We),x($n),x(mn))},e.\u0275cmp=ie({type:e,selectors:[["app-top-bar"]],decls:27,vars:18,consts:[["id","top-bar"],["class","background","tabindex","0",3,"click",4,"ngIf"],["target","_blank","rel","noopener",3,"href"],["alt","Logigator","src","assets/logo.svg"],[1,"main-menu"],[1,"project-title"],[1,"menu-entries"],[4,"ngIf"],["tabindex","0",3,"mouseover","focus","click"],[3,"requestClosed",4,"ngIf"],[1,"top-bar-end"],[1,"login-register"],[4,"ngIf","ngIfElse"],["loginRegister",""],["tabindex","0",1,"background",3,"click"],[3,"requestClosed"],["tabindex","0",1,"logged-in-settings",3,"click"],["alt","User image",1,"user-img",3,"src"],["tabindex","0",1,"login",3,"click"],[1,"divider"],["tabindex","0",1,"register",3,"click"],["tabindex","0",1,"settings",3,"click"]],template:function(r,o){if(r&1&&(v(0,"div",0),J(1,h4,1,0,"div",1),v(2,"a",2),q(3,"img",3),y(),v(4,"div",4)(5,"p",5),O(6),y(),v(7,"div",6),J(8,f4,5,4,"div",7)(9,g4,5,4,"div",7),v(10,"div")(11,"p",8),T("mouseover",function(){return o.switchDropdownIfActive("view")})("focus",function(){return o.switchDropdownIfActive("view")})("click",function(){return o.toggleDropdown("view")}),O(12),M(13,"translate"),y(),J(14,_4,1,0,"app-view-dropdown",9),y(),v(15,"div")(16,"p",8),T("mouseover",function(){return o.switchDropdownIfActive("help")})("focus",function(){return o.switchDropdownIfActive("help")})("click",function(){return o.toggleDropdown("help")}),O(17),M(18,"translate"),y(),J(19,v4,1,0,"app-help-dropdown",9),y()()(),v(20,"div",10)(21,"div",11),J(22,y4,5,2,"ng-container",12),M(23,"async"),J(24,C4,1,0,"app-settings-dropdown",9),y()()(),J(25,b4,8,6,"ng-template",null,13,Td)),r&2){let s=ii(26);g(1),w("ngIf",o.dropdownOpen),g(1),w("href",o.homeUrl,vs),g(4),K(o.mainProjectName),g(2),w("ngIf",!o.isSimulationMode),g(1),w("ngIf",!o.isSimulationMode),g(3),U(" ",E(13,12,"DROPDOWN.VIEW.TITLE")," "),g(2),w("ngIf",o.dropdownOpen==="view"),g(3),U(" ",E(18,14,"DROPDOWN.HELP.TITLE")," "),g(2),w("ngIf",o.dropdownOpen==="help"),g(3),w("ngIf",E(23,16,o.userInfo$))("ngIfElse",s),g(2),w("ngIf",o.dropdownOpen==="settings")}},dependencies:[Be,DI,kI,NI,QI,tS,Mo,Pe],styles:['#top-bar[_ngcontent-%COMP%]{width:100%;height:55px;-webkit-user-select:none;user-select:none;display:flex}.theme-light[_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]{background-color:#27ae60;color:#000}.theme-light[_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#000}.theme-dark[_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]{background-color:#27ae60;color:#000}.theme-dark[_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#000}#top-bar[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#0000;z-index:100}#top-bar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:.7rem;height:100%}#top-bar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}#top-bar[_ngcontent-%COMP%]   .main-menu[_ngcontent-%COMP%]{height:75%;width:100%;display:flex;flex-direction:column;justify-content:space-between;align-self:center}#top-bar[_ngcontent-%COMP%]   .main-menu[_ngcontent-%COMP%]   .project-title[_ngcontent-%COMP%]{font-size:1.2rem;padding-left:.17rem;margin:0}#top-bar[_ngcontent-%COMP%]   .main-menu[_ngcontent-%COMP%]   .menu-entries[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center;position:relative}#top-bar[_ngcontent-%COMP%]   .main-menu[_ngcontent-%COMP%]   .menu-entries[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{z-index:200}#top-bar[_ngcontent-%COMP%]   .main-menu[_ngcontent-%COMP%]   .menu-entries[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{height:100%;padding:.1rem .2rem;margin:0 .5rem 0 0;border-top-right-radius:.1rem;border-top-left-radius:.1rem}#top-bar[_ngcontent-%COMP%]   .main-menu[_ngcontent-%COMP%]   .menu-entries[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{cursor:pointer}.theme-light[_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]   .main-menu[_ngcontent-%COMP%]   .menu-entries[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover, .theme-light   [_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]   .main-menu[_ngcontent-%COMP%]   .menu-entries[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{background-color:#d1d1d1;color:#000}.theme-dark[_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]   .main-menu[_ngcontent-%COMP%]   .menu-entries[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover, .theme-dark   [_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]   .main-menu[_ngcontent-%COMP%]   .menu-entries[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{background-color:#3a4042;color:#ccc}#top-bar[_ngcontent-%COMP%]   .top-bar-end[_ngcontent-%COMP%]{-webkit-app-region:drag;width:100%;display:flex;flex-direction:row;justify-content:flex-end}#top-bar[_ngcontent-%COMP%]   .top-bar-end[_ngcontent-%COMP%]   .login-register[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:flex-end;-webkit-app-region:no-drag}#top-bar[_ngcontent-%COMP%]   .top-bar-end[_ngcontent-%COMP%]   .login-register[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;margin:0}#top-bar[_ngcontent-%COMP%]   .top-bar-end[_ngcontent-%COMP%]   .login-register[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]:hover, #top-bar[_ngcontent-%COMP%]   .top-bar-end[_ngcontent-%COMP%]   .login-register[_ngcontent-%COMP%]   .register[_ngcontent-%COMP%]:hover{cursor:pointer}#top-bar[_ngcontent-%COMP%]   .top-bar-end[_ngcontent-%COMP%]   .login-register[_ngcontent-%COMP%]   .logged-in-settings[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:flex-end;cursor:pointer;padding-right:.7rem;height:100%}.theme-light[_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]   .top-bar-end[_ngcontent-%COMP%]   .login-register[_ngcontent-%COMP%]   .logged-in-settings[_ngcontent-%COMP%]:hover, .theme-light   [_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]   .top-bar-end[_ngcontent-%COMP%]   .login-register[_ngcontent-%COMP%]   .logged-in-settings[_ngcontent-%COMP%]:hover{background-color:#36d278}.theme-dark[_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]   .top-bar-end[_ngcontent-%COMP%]   .login-register[_ngcontent-%COMP%]   .logged-in-settings[_ngcontent-%COMP%]:hover, .theme-dark   [_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]   .top-bar-end[_ngcontent-%COMP%]   .login-register[_ngcontent-%COMP%]   .logged-in-settings[_ngcontent-%COMP%]:hover{background-color:#36d278}#top-bar[_ngcontent-%COMP%]   .top-bar-end[_ngcontent-%COMP%]   .login-register[_ngcontent-%COMP%]   .logged-in-settings[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 .5rem}#top-bar[_ngcontent-%COMP%]   .top-bar-end[_ngcontent-%COMP%]   .login-register[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{border-left:1px solid black;height:15px;padding:0;margin-right:1rem;margin-left:1rem}#top-bar[_ngcontent-%COMP%]   .top-bar-end[_ngcontent-%COMP%]   .login-register[_ngcontent-%COMP%]   .settings[_ngcontent-%COMP%]{height:27.5px;width:27.5px;border:none;cursor:pointer;padding:0;margin-right:.7rem;margin-left:.7rem;outline:none;background-size:cover;background-image:url("./media/settings-RBGRFTTD.svg")}.theme-light[_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]   .top-bar-end[_ngcontent-%COMP%]   .login-register[_ngcontent-%COMP%]   .settings[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]   .top-bar-end[_ngcontent-%COMP%]   .login-register[_ngcontent-%COMP%]   .settings[_ngcontent-%COMP%]{background-color:#27ae60}.theme-dark[_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]   .top-bar-end[_ngcontent-%COMP%]   .login-register[_ngcontent-%COMP%]   .settings[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]   .top-bar-end[_ngcontent-%COMP%]   .login-register[_ngcontent-%COMP%]   .settings[_ngcontent-%COMP%]{background-color:#27ae60}#top-bar[_ngcontent-%COMP%]   .top-bar-end[_ngcontent-%COMP%]   .login-register[_ngcontent-%COMP%]   .user-img[_ngcontent-%COMP%]{height:36.6666666667px;width:36.6666666667px;outline:none;padding:0}#top-bar[_ngcontent-%COMP%]   .top-bar-end[_ngcontent-%COMP%]   .window-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row;-webkit-app-region:no-drag}#top-bar[_ngcontent-%COMP%]   .top-bar-end[_ngcontent-%COMP%]   .window-buttons[_ngcontent-%COMP%]   .minimize[_ngcontent-%COMP%]{width:55px;height:55px;background-image:url("./media/minimize-AJNAHPJY.svg");background-repeat:no-repeat;background-position:bottom}.theme-light[_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]   .top-bar-end[_ngcontent-%COMP%]   .window-buttons[_ngcontent-%COMP%]   .minimize[_ngcontent-%COMP%]:hover, .theme-light   [_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]   .top-bar-end[_ngcontent-%COMP%]   .window-buttons[_ngcontent-%COMP%]   .minimize[_ngcontent-%COMP%]:hover{background-color:#36d278}.theme-dark[_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]   .top-bar-end[_ngcontent-%COMP%]   .window-buttons[_ngcontent-%COMP%]   .minimize[_ngcontent-%COMP%]:hover, .theme-dark   [_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]   .top-bar-end[_ngcontent-%COMP%]   .window-buttons[_ngcontent-%COMP%]   .minimize[_ngcontent-%COMP%]:hover{background-color:#36d278}#top-bar[_ngcontent-%COMP%]   .top-bar-end[_ngcontent-%COMP%]   .window-buttons[_ngcontent-%COMP%]   .maximize[_ngcontent-%COMP%]{width:55px;height:55px;background-image:url("./media/fullscreen-RU6YNIPV.svg");background-repeat:no-repeat;background-position:center}.theme-light[_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]   .top-bar-end[_ngcontent-%COMP%]   .window-buttons[_ngcontent-%COMP%]   .maximize[_ngcontent-%COMP%]:hover, .theme-light   [_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]   .top-bar-end[_ngcontent-%COMP%]   .window-buttons[_ngcontent-%COMP%]   .maximize[_ngcontent-%COMP%]:hover{background-color:#36d278}.theme-dark[_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]   .top-bar-end[_ngcontent-%COMP%]   .window-buttons[_ngcontent-%COMP%]   .maximize[_ngcontent-%COMP%]:hover, .theme-dark   [_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]   .top-bar-end[_ngcontent-%COMP%]   .window-buttons[_ngcontent-%COMP%]   .maximize[_ngcontent-%COMP%]:hover{background-color:#36d278}#top-bar[_ngcontent-%COMP%]   .top-bar-end[_ngcontent-%COMP%]   .window-buttons[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{width:55px;height:55px;background-image:url("./media/close-FPICBYY7.svg");background-repeat:no-repeat;background-position:center}.theme-light[_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]   .top-bar-end[_ngcontent-%COMP%]   .window-buttons[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]   .top-bar-end[_ngcontent-%COMP%]   .window-buttons[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{background-color:#ad2f26}.theme-light[_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]   .top-bar-end[_ngcontent-%COMP%]   .window-buttons[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover, .theme-light   [_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]   .top-bar-end[_ngcontent-%COMP%]   .window-buttons[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover{background-color:#d23e34}.theme-dark[_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]   .top-bar-end[_ngcontent-%COMP%]   .window-buttons[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]   .top-bar-end[_ngcontent-%COMP%]   .window-buttons[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{background-color:#cc392f}.theme-dark[_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]   .top-bar-end[_ngcontent-%COMP%]   .window-buttons[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover, .theme-dark   [_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]   .top-bar-end[_ngcontent-%COMP%]   .window-buttons[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover{background-color:#d85e56}']});let i=e;return i})();var Bp=class extends bt{constructor(e,n){super(),this.themingService=ee(Re),this.simActiveState=!1,this.shouldHaveActiveState=!1,this.element=n,this._scale=e,this.lineStyle(1/e,16777215),this.tint=this.themingService.getEditorColor("wire"),this.moveTo(0,0);let t=Ie.getPixelPosForGridPosWire(this.element.endPos),r=Ie.getPixelPosForGridPosWire(this.element.pos);this.lineTo(t.x-r.x,t.y-r.y)}updateScale(e){if(this._scale!==e){this._scale=e;for(let n of this.geometry.graphicsData)this.simActiveState?n.lineStyle.width=3/e:n.lineStyle.width=1/e;this.geometry.invalidate()}}setSimulationState(e){this.shouldHaveActiveState=e[0],this.worldVisible&&this.applySimState(this._scale)}applySimState(e){if(this.simActiveState!=this.shouldHaveActiveState){this.simActiveState=this.shouldHaveActiveState;for(let n of this.geometry.graphicsData)this.simActiveState?n.lineStyle.width=3/e:n.lineStyle.width=1/e;this._scale=e,this.geometry.invalidate()}}setSelected(e){e?this.tint=this.themingService.getEditorColor("wireSelectColor"):this.tint=this.themingService.getEditorColor("wire")}};function Kn(i){return"name"in i&&"numInputs"in i&&"numOutputs"in i&&"maxInputs"in i&&"minInputs"in i&&"symbol"in i&&"description"in i&&"rotation"in i&&"category"in i}var Xs=class extends bt{constructor(e,n){if(super(),this.themingService=ee(Re),this.elemProvService=ee(be),this.simActiveState=[],this.shouldHaveActiveState=[],this.interactiveChildren=!1,this.sortableChildren=!1,this._scale=e,Kn(n))this.element={rotation:n.rotation,numInputs:n.numInputs,numOutputs:n.numOutputs,typeId:n.id},this._symbol=n.symbol,n.calcLabels&&(this._labels=n.calcLabels());else{this.element=n;let t=this.elemProvService.getElementById(this.element.typeId);this._symbol=t.symbol,t.calcLabels&&(this._labels=t.calcLabels(this.element))}this._size=Z.calcPixelElementSize(this.element),this.drawComponent()}drawComponent(){switch(this.removeChildren(0),this.lineStyle(1/this._scale,this.themingService.getEditorColor("wire")),this.moveTo(0,0),this.beginFill(this.themingService.getEditorColor("wire")),this.element.rotation){case 0:this.rotation0(this.element.numInputs,this.element.numOutputs,this._size.y,this._size.x);break;case 1:this.rotation1(this.element.numInputs,this.element.numOutputs,this._size.y,this._size.x);break;case 2:this.rotation2(this.element.numInputs,this.element.numOutputs,this._size.y,this._size.x);break;case 3:this.rotation3(this.element.numInputs,this.element.numOutputs,this._size.y,this._size.x);break}let e=new Yn(this._symbol,{fontName:"Roboto",fontSize:this.calcFontSize(),tint:this.themingService.getEditorColor("fontTint")});e.anchor=.5,e.position.x=this._size.x/2,e.position.y=this._size.y/2,this.addChild(e)}calcFontSize(){let e=ee(Er).getTextWidth(this._symbol,"10px Roboto"),n=10*(C.gridPixelWidth*1.4/e);return n<C.gridPixelWidth*.9?n:C.gridPixelWidth*.9}rotation0(e,n,t,r){for(let o=0;o<e;o++){if(this.moveTo(-(C.gridPixelWidth/2),C.gridPixelWidth/2+C.gridPixelWidth*o),this.lineTo(0,C.gridPixelWidth/2+C.gridPixelWidth*o),!this._labels||!this._labels[o])continue;let s=this.getLabelText(this._labels[o]);s.anchor=new R(0,.5),s.x=1,s.y=C.gridPixelWidth/2+C.gridPixelWidth*o,this.addChild(s)}for(let o=0;o<n;o++){if(this.moveTo(r,C.gridPixelWidth/2+C.gridPixelWidth*o),this.lineTo(r+C.gridPixelWidth/2,C.gridPixelWidth/2+C.gridPixelWidth*o),!this._labels||!this._labels[e+o])continue;let s=this.getLabelText(this._labels[e+o]);s.anchor=new R(1,.5),s.x=r-1,s.y=C.gridPixelWidth/2+C.gridPixelWidth*o,this.addChild(s)}this.beginFill(this.themingService.getEditorColor("background")),this.moveTo(0,0),this.lineTo(r-3,0),this.lineTo(r,3),this.lineTo(r,t-3),this.lineTo(r-3,t),this.lineTo(0,t),this.lineTo(0,0)}rotation1(e,n,t,r){for(let o=0;o<e;o++){if(this.moveTo(r-C.gridPixelWidth/2-C.gridPixelWidth*o,0),this.lineTo(r-C.gridPixelWidth/2-C.gridPixelWidth*o,-(C.gridPixelWidth/2)),!this._labels||!this._labels[o])continue;let s=this.getLabelText(this._labels[o]);s.anchor=new R(.5,0),s.x=r-C.gridPixelWidth/2-C.gridPixelWidth*o,s.y=1,this.addChild(s)}for(let o=0;o<n;o++){if(this.moveTo(r-C.gridPixelWidth/2-C.gridPixelWidth*o,t),this.lineTo(r-C.gridPixelWidth/2-C.gridPixelWidth*o,t+C.gridPixelWidth/2),!this._labels||!this._labels[e+o])continue;let s=this.getLabelText(this._labels[e+o]);s.anchor=new R(.5,1),s.x=r-C.gridPixelWidth/2-C.gridPixelWidth*o,s.y=t-1,this.addChild(s)}this.beginFill(this.themingService.getEditorColor("background")),this.moveTo(0,0),this.lineTo(r,0),this.lineTo(r,t-3),this.lineTo(r-3,t),this.lineTo(3,t),this.lineTo(0,t-3),this.lineTo(0,0)}rotation2(e,n,t,r){for(let o=0;o<e;o++){if(this.moveTo(r,t-C.gridPixelWidth/2-C.gridPixelWidth*o),this.lineTo(r+C.gridPixelWidth/2,t-C.gridPixelWidth/2-C.gridPixelWidth*o),!this._labels||!this._labels[o])continue;let s=this.getLabelText(this._labels[o]);s.anchor=new R(1,.5),s.x=r-1,s.y=t-C.gridPixelWidth/2-C.gridPixelWidth*o,this.addChild(s)}for(let o=0;o<n;o++){if(this.moveTo(0,t-C.gridPixelWidth/2-C.gridPixelWidth*o),this.lineTo(-C.gridPixelWidth/2,t-C.gridPixelWidth/2-C.gridPixelWidth*o),!this._labels||!this._labels[e+o])continue;let s=this.getLabelText(this._labels[e+o]);s.anchor=new R(0,.5),s.x=1,s.y=t-C.gridPixelWidth/2-C.gridPixelWidth*o,this.addChild(s)}this.beginFill(this.themingService.getEditorColor("background")),this.moveTo(3,0),this.lineTo(r,0),this.lineTo(r,t),this.lineTo(3,t),this.lineTo(0,t-3),this.lineTo(0,3),this.lineTo(3,0)}rotation3(e,n,t,r){for(let o=0;o<e;o++){if(this.moveTo(C.gridPixelWidth/2+C.gridPixelWidth*o,t),this.lineTo(C.gridPixelWidth/2+C.gridPixelWidth*o,t+C.gridPixelWidth/2),!this._labels||!this._labels[o])continue;let s=this.getLabelText(this._labels[o]);s.anchor=new R(.5,1),s.x=C.gridPixelWidth/2+C.gridPixelWidth*o,s.y=t-1,this.addChild(s)}for(let o=0;o<n;o++){if(this.moveTo(C.gridPixelWidth/2+C.gridPixelWidth*o,0),this.lineTo(C.gridPixelWidth/2+C.gridPixelWidth*o,-(C.gridPixelWidth/2)),!this._labels||!this._labels[e+o])continue;let s=this.getLabelText(this._labels[e+o]);s.anchor=new R(.5,0),s.x=C.gridPixelWidth/2+C.gridPixelWidth*o,s.y=1,this.addChild(s)}this.beginFill(this.themingService.getEditorColor("background")),this.moveTo(3,0),this.lineTo(r-3,0),this.lineTo(r,3),this.lineTo(r,t),this.lineTo(0,t),this.lineTo(0,3),this.lineTo(3,0)}getLabelText(e){return new Yn(e,{fontName:"Roboto",fontSize:C.gridPixelWidth*.5,tint:this.themingService.getEditorColor("fontTint")})}applySimState(e){if(this.shouldHaveActiveState.every((t,r)=>t===this.simActiveState[r]))return!1;this.simActiveState=this.shouldHaveActiveState;let n=0;for(let t of this.geometry.graphicsData)t.shape instanceof Ft&&(this.simActiveState[n]?t.lineStyle.width=3/e:t.lineStyle.width=1/e,n++);return this._scale=e,this.geometry.invalidate(),!0}setSimulationState(e){this.shouldHaveActiveState=e,this.worldVisible&&this.applySimState(this._scale)}updateScale(e){if(this._scale===e)return;this._scale=e;let n=0;for(let t of this.geometry.graphicsData)t.shape instanceof Ft?(this.simActiveState[n]?t.lineStyle.width=3/e:t.lineStyle.width=1/e,n++):t.lineStyle.width=1/e;this.geometry.invalidate()}setSelected(e){e?this.tint=this.themingService.getEditorColor("selectTint"):this.tint=16777215}updateComponent(e,n){this.element.numInputs=n.numInputs,this.element.numOutputs=n.numOutputs,this.element.rotation=n.rotation,this._scale=e;let t=this.elemProvService.getElementById(this.element.typeId);t.calcLabels&&(this._labels=t.calcLabels(this.element)),this._symbol=t.symbol,this.clear(),this._size=Z.calcPixelElementSize(this.element),this.drawComponent()}};var zc=class extends bt{constructor(e,n,t){super(),this.workerCommunicationService=ee(fi),this.themingService=ee(Re),this.simActiveState=!1,this.shouldHaveActiveState=!1,this.interactiveChildren=!1,this.sortableChildren=!1,this._scale=e,Kn(n)?this.element={rotation:n.rotation,numInputs:n.numInputs,numOutputs:n.numOutputs,typeId:n.id}:(this.element=n,this._projectIdentifier=t),this.drawComponent(),this._projectIdentifier&&this.addClickListener()}drawComponent(){switch(this.lineStyle(1/this._scale,this.themingService.getEditorColor("wire")),this.beginFill(this.themingService.getEditorColor("background")),this.moveTo(0,0),this.drawRect(0,0,C.gridPixelWidth,C.gridPixelWidth),this.drawRect(3,3,C.gridPixelWidth-6,C.gridPixelWidth-6),this.beginFill(this.themingService.getEditorColor("wire")),this.element.rotation){case 0:this.moveTo(C.gridPixelWidth,C.gridPixelWidth/2),this.lineTo(C.gridPixelWidth+C.gridPixelWidth/2,C.gridPixelWidth/2);break;case 1:this.moveTo(C.gridPixelWidth/2,C.gridPixelWidth),this.lineTo(C.gridPixelWidth/2,C.gridPixelWidth+C.gridPixelWidth/2);break;case 2:this.moveTo(0,C.gridPixelWidth/2),this.lineTo(-C.gridPixelWidth/2,C.gridPixelWidth/2);break;case 3:this.moveTo(C.gridPixelWidth/2,0),this.lineTo(C.gridPixelWidth/2,-C.gridPixelWidth/2);break}}addClickListener(){this.interactive=!0,this.on("pointerdown",e=>{if(e.data.button===0){let n=!this.simActiveState;this.workerCommunicationService.setUserInput(this._projectIdentifier,this.element,[n]),this.setSimulationState([n],!0),ee(Xo).singleFrame(this._projectIdentifier)}})}applySimState(e){if(this.simActiveState!=this.shouldHaveActiveState){this.simActiveState=this.shouldHaveActiveState;for(let n of this.geometry.graphicsData)n.shape instanceof Ft?this.simActiveState?n.lineStyle.width=3/e:n.lineStyle.width=1/e:n.shape instanceof ze&&n.shape.width===10&&n.shape.height===10&&(this.simActiveState?n.fillStyle.color=this.themingService.getEditorColor("wire"):n.fillStyle.color=this.themingService.getEditorColor("background"));this._scale=e,this.geometry.invalidate()}}setSelected(e){e?this.tint=this.themingService.getEditorColor("selectTint"):this.tint=16777215}setSimulationState(e,n=!1){e[0]&&!n||(this.shouldHaveActiveState=e[0],this.worldVisible&&this.applySimState(this._scale))}resetSimState(){this.setSimulationState([!1],!0)}updateComponent(e,n){this.element.rotation=n.rotation,this._scale=e,this.clear(),this.drawComponent()}updateScale(e){if(this._scale!==e){this._scale=e;for(let n of this.geometry.graphicsData)n.shape instanceof Ft&&this.simActiveState?n.lineStyle.width=3/e:n.lineStyle.width=1/e;this.geometry.invalidate()}}};var Hc=class extends bt{constructor(e,n,t){super(),this.workerCommunicationService=ee(fi),this.themingService=ee(Re),this.simActiveState=!1,this.shouldHaveActiveState=!1,this.interactiveChildren=!1,this.sortableChildren=!1,this._scale=e,Kn(n)?this.element={rotation:n.rotation,numInputs:n.numInputs,numOutputs:n.numOutputs}:(this.element=n,this._projectIdentifier=t),this.drawComponent(this.simActiveState),this._projectIdentifier&&this.addClickListener()}drawComponent(e){switch(this.lineStyle(1/this._scale,this.themingService.getEditorColor("wire")),this.beginFill(this.themingService.getEditorColor("background")),this.moveTo(0,0),this.drawRect(0,0,C.gridPixelWidth,C.gridPixelWidth),e?(this.beginFill(this.themingService.getEditorColor("wire")),this.drawRect(0,0,C.gridPixelWidth,4),this.lineStyle(3/this._scale,this.themingService.getEditorColor("wire"))):(this.drawRect(0,C.gridPixelWidth-4,C.gridPixelWidth,4),this.lineStyle(1/this._scale,this.themingService.getEditorColor("wire")),this.beginFill(this.themingService.getEditorColor("wire"))),this.element.rotation){case 0:this.moveTo(C.gridPixelWidth,C.gridPixelWidth/2),this.lineTo(C.gridPixelWidth+C.gridPixelWidth/2,C.gridPixelWidth/2);break;case 1:this.moveTo(C.gridPixelWidth/2,C.gridPixelWidth),this.lineTo(C.gridPixelWidth/2,C.gridPixelWidth+C.gridPixelWidth/2);break;case 2:this.moveTo(0,C.gridPixelWidth/2),this.lineTo(-C.gridPixelWidth/2,C.gridPixelWidth/2);break;case 3:this.moveTo(C.gridPixelWidth/2,0),this.lineTo(C.gridPixelWidth/2,-C.gridPixelWidth/2);break}}addClickListener(){this.interactive=!0,this.on("pointerdown",e=>{if(e.data.button===0){let n=!this.simActiveState;this.workerCommunicationService.setUserInput(this._projectIdentifier,this.element,[n]),this.setSimulationState([n],!0),ee(Xo).singleFrame(this._projectIdentifier)}})}applySimState(e){this.simActiveState!=this.shouldHaveActiveState&&(this.simActiveState=this.shouldHaveActiveState,this.clear(),this.drawComponent(this.simActiveState),this._scale=e)}setSelected(e){e?this.tint=this.themingService.getEditorColor("selectTint"):this.tint=16777215}setSimulationState(e,n=!1){n&&(this.shouldHaveActiveState=e[0],this.worldVisible&&this.applySimState(this._scale))}resetSimState(){this.setSimulationState([!1],!0)}updateComponent(e,n){this.element.rotation=n.rotation,this._scale=e,this.clear(),this.drawComponent(this.simActiveState)}updateScale(e){if(this._scale!==e){this._scale=e;for(let n of this.geometry.graphicsData)n.shape instanceof Ft&&this.simActiveState?n.lineStyle.width=3/e:n.lineStyle.width=1/e;this.geometry.invalidate()}}};var Vp=class extends At{constructor(e,n){super(),this.themingService=ee(Re),this._texts=[],this._selected=!1,this.element=n,this._point=new bt,this.drawPoint(e),this.addChild(this._point),this.renderText(this.element.data)}renderText(e){for(let t of this._texts)t.destroy();this._texts=[];let n=e?e.split(`
`):[];for(let t=0;t<n.length;t++)this._texts[t]=new Yn(n[t],{fontName:"Roboto",fontSize:C.gridPixelWidth*this.element.options[0]/8,tint:this._selected?this.themingService.getEditorColor("selectTint"):this.themingService.getEditorColor("fontTint")}),this._texts[t].anchor=new R(0,.5),this._texts[t].x=C.gridPixelWidth,this._texts[t].y=C.gridPixelWidth/2+C.gridPixelWidth*this.element.options[0]/8*t,this.addChild(this._texts[t])}updateComponent(e,n){this.element.data=n.data,this.renderText(this.element.data)}drawPoint(e){this._point.clear(),this._point.beginFill(16777215),this._point.tint=this.themingService.getEditorColor("wire");let n=e<.5?5:7;this._point.position=new R(C.gridPixelWidth/2-n/2/e,C.gridPixelWidth/2-n/2/e),this._point.drawRect(0,0,n/e,n/e)}applySimState(){}setSelected(e){let n;e?(n=this.themingService.getEditorColor("selectTint"),this._point.tint=this.themingService.getEditorColor("wireSelectColor")):(n=this.themingService.getEditorColor("fontTint"),this._point.tint=this.themingService.getEditorColor("wire"));for(let t of this._texts)t.tint=n;this._selected=e}setSimulationState(){}updateScale(e){this.drawPoint(e)}destroy(){for(let e of this._texts)e.destroy();this._point.destroy(),super.destroy()}};var Wc=class extends bt{constructor(e,n,t){super(),this.themingService=ee(Re),this.elemProvService=ee(be),this.interactiveChildren=!1,this.sortableChildren=!1,this._scale=e,Kn(n)?(this.element={rotation:n.rotation,numInputs:n.numInputs,numOutputs:n.numOutputs,typeId:n.id},this._symbol=n.symbol):(this.element=n,this._symbol=this.element.data||this.elemProvService.getElementById(this.element.typeId).symbol,this.project=t),this.drawComponent()}drawComponent(){this.lineStyle(1/this._scale,this.themingService.getEditorColor("wire")),this.beginFill(this.themingService.getEditorColor("wire"));let e=this.element.rotation;switch(this.element.typeId===101&&(e=(this.element.rotation+2)%4),e){case 0:this.moveTo(C.gridPixelWidth,C.gridPixelWidth/2),this.lineTo(C.gridPixelWidth/2+C.gridPixelWidth,C.gridPixelWidth/2);break;case 1:this.moveTo(C.gridPixelWidth/2,C.gridPixelWidth),this.lineTo(C.gridPixelWidth/2,C.gridPixelWidth+C.gridPixelWidth/2);break;case 2:this.moveTo(0,C.gridPixelWidth/2),this.lineTo(-C.gridPixelWidth/2,C.gridPixelWidth/2);break;case 3:this.moveTo(C.gridPixelWidth/2,0),this.lineTo(C.gridPixelWidth/2,-C.gridPixelWidth/2);break}this.beginFill(this.themingService.getEditorColor("background")),this.moveTo(0,0),this.drawRect(0,0,C.gridPixelWidth,C.gridPixelWidth),this.removeChildren(0);let n=new Yn(this._symbol,{fontName:"Roboto",fontSize:this.calcFontSize(),tint:this.themingService.getEditorColor("fontTint")});if(n.anchor=.5,n.position.x=C.gridPixelWidth/2,n.position.y=C.gridPixelWidth/2-2,this.project){let t=new Yn(this.getPlugIndex(),{fontName:"Roboto",fontSize:6,tint:this.themingService.getEditorColor("fontTint")});t.position.x=C.gridPixelWidth/2,t.position.y=C.gridPixelWidth,t.anchor=new R(.5,1),this.addChild(t)}this.addChild(n)}getPlugIndex(){return this.element.typeId===100?this.element.plugIndex+1+"":this.element.plugIndex-this.project.numInputs+1+""}calcFontSize(){let e=ee(Er).getTextWidth(this._symbol,"10px Roboto"),n=10*(C.gridPixelWidth*.9/e);return n<C.gridPixelWidth*.8?n:C.gridPixelWidth*.8}applySimState(e){if(this.simActiveState!=this.shouldHaveActiveState){this.simActiveState=this.shouldHaveActiveState;for(let n of this.geometry.graphicsData)n.shape instanceof Ft&&this.simActiveState?n.lineStyle.width=3/e:n.lineStyle.width=1/e;this._scale=e,this.geometry.invalidate()}}setSelected(e){e?this.tint=this.themingService.getEditorColor("selectTint"):this.tint=16777215}setSimulationState(e){this.shouldHaveActiveState=e[0],this.worldVisible&&this.applySimState(this._scale)}updateComponent(e){this._scale=e,this._symbol=this.element.data||this.elemProvService.getElementById(this.element.typeId).symbol,this.clear(),this.drawComponent()}updateScale(e){if(this._scale!==e){this._scale=e;for(let n of this.geometry.graphicsData)n.shape instanceof Ft&&this.simActiveState?n.lineStyle.width=3/e:n.lineStyle.width=1/e;this.geometry.invalidate()}}};var Gc=class extends bt{constructor(e,n){super(),this.themingService=ee(Re),this.simActiveState=!1,this.shouldHaveActiveState=!1,this.interactiveChildren=!1,this.sortableChildren=!1,this._scale=e,Kn(n)?this.element={rotation:n.rotation,numInputs:n.numInputs,numOutputs:n.numOutputs}:this.element=n,this.drawComponent(this.simActiveState)}drawComponent(e){switch(e?this.beginFill(this.themingService.getEditorColor("ledOn")):this.beginFill(this.themingService.getEditorColor("ledOff")),this.moveTo(0,0),this.drawCircle(C.gridPixelWidth/2,C.gridPixelWidth/2,C.gridPixelWidth/2),e?this.lineStyle(3/this._scale,this.themingService.getEditorColor("wire")):this.lineStyle(1/this._scale,this.themingService.getEditorColor("wire")),this.beginFill(this.themingService.getEditorColor("wire")),this.element.rotation){case 0:this.moveTo(0,C.gridPixelWidth/2),this.lineTo(-C.gridPixelWidth/2,C.gridPixelWidth/2);break;case 1:this.moveTo(C.gridPixelWidth/2,0),this.lineTo(C.gridPixelWidth/2,-C.gridPixelWidth/2);break;case 2:this.moveTo(C.gridPixelWidth,C.gridPixelWidth/2),this.lineTo(C.gridPixelWidth+C.gridPixelWidth/2,C.gridPixelWidth/2);break;case 3:this.moveTo(C.gridPixelWidth/2,C.gridPixelWidth),this.lineTo(C.gridPixelWidth/2,C.gridPixelWidth+C.gridPixelWidth/2);break}}applySimState(e){this.simActiveState!=this.shouldHaveActiveState&&(this.simActiveState=this.shouldHaveActiveState,this.clear(),this.drawComponent(this.simActiveState),this._scale=e)}setSelected(e){e?this.tint=this.themingService.getEditorColor("selectTint"):this.tint=16777215}setSimulationState(e){this.shouldHaveActiveState=e[0],this.worldVisible&&this.applySimState(this._scale)}updateScale(e){if(this._scale!==e){this._scale=e;for(let n of this.geometry.graphicsData)n.shape instanceof Ft&&this.simActiveState?n.lineStyle.width=3/e:n.lineStyle.width=1/e;this.geometry.invalidate()}}updateComponent(e,n){this.element.rotation=n.rotation,this._scale=e,this.clear(),this.drawComponent(this.simActiveState)}};var Xc=class extends bt{constructor(e,n){if(super(),this.themingService=ee(Re),this.elemProvService=ee(be),this.simActiveState=[],this.shouldHaveActiveState=[],this.interactiveChildren=!1,this.sortableChildren=!1,this._scale=e,Kn(n))this.element={rotation:n.rotation,numInputs:n.numInputs,typeId:n.id,options:n.options},this._labels=n.calcLabels();else{this.element=n;let t=this.elemProvService.getElementById(this.element.typeId);this._labels=t.calcLabels(this.element)}this._size=Z.calcPixelElementSize(this.element),this.segmentText=this.getSegments(),this.drawComponent()}drawComponent(){switch(this.lineStyle(1/this._scale,this.themingService.getEditorColor("wire")),this.moveTo(0,0),this.beginFill(this.themingService.getEditorColor("wire")),this.removeChildren(0),this.element.rotation){case 0:this.rotation0(this.element.numInputs);break;case 1:this.rotation1(this.element.numInputs,this._size.x);break;case 2:this.rotation2(this.element.numInputs,this._size.y,this._size.x);break;case 3:this.rotation3(this.element.numInputs,this._size.y);break}this.beginFill(this.themingService.getEditorColor("background")),this.moveTo(0,0),this.drawRect(0,0,this._size.x,this._size.y),this.addChild(this.segmentText)}rotation0(e){for(let n=0;n<e;n++){this.moveTo(-(C.gridPixelWidth/2),C.gridPixelWidth/2+C.gridPixelWidth*n),this.lineTo(0,C.gridPixelWidth/2+C.gridPixelWidth*n);let t=this.getLabelText(this._labels[n]);t.anchor=new R(0,.5),t.x=1,t.y=C.gridPixelWidth/2+C.gridPixelWidth*n,this.addChild(t)}}rotation1(e,n){for(let t=0;t<e;t++){this.moveTo(n-C.gridPixelWidth/2-C.gridPixelWidth*t,0),this.lineTo(n-C.gridPixelWidth/2-C.gridPixelWidth*t,-(C.gridPixelWidth/2));let r=this.getLabelText(this._labels[t]);r.anchor=new R(.5,0),r.x=n-C.gridPixelWidth/2-C.gridPixelWidth*t,r.y=1,this.addChild(r)}}rotation2(e,n,t){for(let r=0;r<e;r++){this.moveTo(t,n-C.gridPixelWidth/2-C.gridPixelWidth*r),this.lineTo(t+C.gridPixelWidth/2,n-C.gridPixelWidth/2-C.gridPixelWidth*r);let o=this.getLabelText(this._labels[r]);o.anchor=new R(1,.5),o.x=t-1,o.y=n-C.gridPixelWidth/2-C.gridPixelWidth*r,this.addChild(o)}}rotation3(e,n){for(let t=0;t<e;t++){this.moveTo(C.gridPixelWidth/2+C.gridPixelWidth*t,n),this.lineTo(C.gridPixelWidth/2+C.gridPixelWidth*t,n+C.gridPixelWidth/2);let r=this.getLabelText(this._labels[t]);r.anchor=new R(.5,1),r.x=C.gridPixelWidth/2+C.gridPixelWidth*t,r.y=n-1,this.addChild(r)}}getLabelText(e){return new Yn(e,{fontName:"Roboto",fontSize:C.gridPixelWidth*.5,tint:this.themingService.getEditorColor("fontTint")})}getSegmentTextLength(){switch(this.element.options[0]){case 1:return Math.ceil(this.element.numInputs/4);case 2:return Math.ceil(this.element.numInputs/3);default:return Math.ceil(Math.log10(2**this.element.numInputs+1))}}getSegments(){let e=new At;this.segmentTextLength=this.getSegmentTextLength();let n=new Yn(this.getSegmentString(0,this.segmentTextLength),{fontName:this.element.options[0]===1?"DSEG14":"DSEG7",fontSize:C.gridPixelWidth*1.35,tint:this.themingService.getEditorColor("fontTint"),align:"center"});n.anchor=new R(.5,.5),n.position=new R(this._size.x/2,this._size.y/2);let t=new Yn(this.element.options[0]===0?"10":this.element.options[0]===1?"16":"8",{fontName:"DSEG7",fontSize:C.gridPixelWidth*.4,tint:this.themingService.getEditorColor("fontTint"),align:"center"});return t.anchor=new R(0,.5),t.position=new R(n.position.x+n.width/2-(this.element.options[0]!==2?C.gridPixelWidth*.2:0),n.position.y+n.height/2),e.addChild(n),e.addChild(t),e}getSegmentString(e,n){let t;switch(this.element.options[0]){case 1:t=e.toString(16);break;case 2:t=e.toString(8);break;default:t=e.toString()}for(;t.length<n;)t="0"+t;return t}applySimState(e){if(this.shouldHaveActiveState.every((r,o)=>r===this.simActiveState[o]))return;this.simActiveState=this.shouldHaveActiveState;let n=0;for(let r of this.geometry.graphicsData)r.shape instanceof Ft&&(this.simActiveState[n]?r.lineStyle.width=3/e:r.lineStyle.width=1/e,n++);this._scale=e,this.geometry.invalidate();let t=0;for(let r=this.simActiveState.length-1;r>=0;r--)this.simActiveState[r]?t=t<<1|1:t=t<<1;this.segmentText.children[0].text=this.getSegmentString(t,this.segmentTextLength)}setSimulationState(e){this.shouldHaveActiveState=e,this.worldVisible&&this.applySimState(this._scale)}updateScale(e){if(this._scale===e)return;this._scale=e;let n=0;for(let t of this.geometry.graphicsData)t.shape instanceof Ft?(this.simActiveState[n]?t.lineStyle.width=3/e:t.lineStyle.width=1/e,n++):t.lineStyle.width=1/e;this.geometry.invalidate()}setSelected(e){e?this.tint=this.themingService.getEditorColor("selectTint"):this.tint=16777215}updateComponent(e,n){this.element.numInputs=n.numInputs,this.element.rotation=n.rotation,this._scale=e;let t=this.elemProvService.getElementById(this.element.typeId);this._labels=t.calcLabels(this.element),this.clear(),this._size=Z.calcPixelElementSize(this.element),this.segmentText.destroy({children:!0}),this.segmentText=this.getSegments(),this.drawComponent()}};var qc=class extends bt{constructor(e,n){if(super(),this.themingService=ee(Re),this.elemProvService=ee(be),this.simActiveState=[],this.shouldHaveActiveState=[],this.interactiveChildren=!1,this.sortableChildren=!1,this._scale=e,Kn(n))this.element={options:n.options,typeId:n.id,rotation:n.rotation,numInputs:n.numInputs,numOutputs:n.numOutputs},this._labels=n.calcLabels();else{this.element=n;let t=this.elemProvService.getElementById(this.element.typeId);this._labels=t.calcLabels(this.element)}this._size=Z.calcPixelElementSize(this.element),this._leds=this.getLeds(),this.drawComponent()}drawComponent(){switch(this.lineStyle(1/this._scale,this.themingService.getEditorColor("wire")),this.moveTo(0,0),this.beginFill(this.themingService.getEditorColor("wire")),this.removeChildren(0),this.element.rotation){case 0:this.rotation0(this.element.numInputs);break;case 1:this.rotation1(this.element.numInputs,this._size.x);break;case 2:this.rotation2(this.element.numInputs,this._size.y,this._size.x);break;case 3:this.rotation3(this.element.numInputs,this._size.y);break}this.beginFill(this.themingService.getEditorColor("background")),this.moveTo(0,0),this.drawRect(0,0,this._size.x,this._size.y),this.addChild(this._leds)}rotation0(e){for(let n=0;n<e;n++){this.moveTo(-(C.gridPixelWidth/2),C.gridPixelWidth/2+C.gridPixelWidth*n),this.lineTo(0,C.gridPixelWidth/2+C.gridPixelWidth*n);let t=this.getLabelText(this._labels[n]);t.anchor=new R(0,.5),t.x=1,t.y=C.gridPixelWidth/2+C.gridPixelWidth*n,this.addChild(t)}}rotation1(e,n){for(let t=0;t<e;t++){this.moveTo(n-C.gridPixelWidth/2-C.gridPixelWidth*t,0),this.lineTo(n-C.gridPixelWidth/2-C.gridPixelWidth*t,-(C.gridPixelWidth/2));let r=this.getLabelText(this._labels[t]);r.anchor=new R(.5,0),r.x=n-C.gridPixelWidth/2-C.gridPixelWidth*t,r.y=1,this.addChild(r)}}rotation2(e,n,t){for(let r=0;r<e;r++){this.moveTo(t,n-C.gridPixelWidth/2-C.gridPixelWidth*r),this.lineTo(t+C.gridPixelWidth/2,n-C.gridPixelWidth/2-C.gridPixelWidth*r);let o=this.getLabelText(this._labels[r]);o.anchor=new R(1,.5),o.x=t-1,o.y=n-C.gridPixelWidth/2-C.gridPixelWidth*r,this.addChild(o)}}rotation3(e,n){for(let t=0;t<e;t++){this.moveTo(C.gridPixelWidth/2+C.gridPixelWidth*t,n),this.lineTo(C.gridPixelWidth/2+C.gridPixelWidth*t,n+C.gridPixelWidth/2);let r=this.getLabelText(this._labels[t]);r.anchor=new R(.5,1),r.x=C.gridPixelWidth/2+C.gridPixelWidth*t,r.y=n-1,this.addChild(r)}}applySimState(e){if(this.shouldHaveActiveState.every((t,r)=>t===this.simActiveState[r]))return;this.simActiveState=this.shouldHaveActiveState;let n=0;for(let t of this.geometry.graphicsData)t.shape instanceof Ft?(this.simActiveState[n]?t.lineStyle.width=3/e:t.lineStyle.width=1/e,n++):t.lineStyle.width=1/e;this.geometry.invalidate();for(let t of this._leds.children)t.tint=this.simActiveState[n]?this.themingService.getEditorColor("ledOn"):this.themingService.getEditorColor("ledOff"),n++}setSimulationState(e){this.shouldHaveActiveState=e,this.worldVisible&&this.applySimState(this._scale)}setSelected(e){e?this.tint=this.themingService.getEditorColor("selectTint"):this.tint=16777215}updateComponent(e,n){this.element.numInputs=n.numInputs,this.element.rotation=n.rotation,this._scale=e;let t=this.elemProvService.getElementById(this.element.typeId);this._labels=t.calcLabels(this.element),this.clear(),this._size=Z.calcPixelElementSize(this.element),this._leds.destroy({children:!0}),this._leds=this.getLeds(),this.drawComponent()}updateScale(e){if(this._scale===e)return;this._scale=e,this.positionLeds(this._leds);let n=0;for(let t of this.geometry.graphicsData)t.shape instanceof Ft?(this.simActiveState[n]?t.lineStyle.width=3/e:t.lineStyle.width=1/e,n++):t.lineStyle.width=1/e;this.geometry.invalidate()}getLabelText(e){return new Yn(e,{fontName:"Roboto",fontSize:C.gridPixelWidth*.5,tint:this.themingService.getEditorColor("fontTint")})}getLeds(){let e;switch(this.element.rotation){case 0:e=new R(1.5*C.gridPixelWidth,C.gridPixelWidth);break;case 1:e=new R(C.gridPixelWidth,1.5*C.gridPixelWidth);break;case 2:e=new R(.5*C.gridPixelWidth,C.gridPixelWidth);break;case 3:e=new R(C.gridPixelWidth,.5*C.gridPixelWidth);break}let n=new At;n.position=e;let t=this.element.options[0];for(let r=0;r<t;r++)for(let o=0;o<t;o++){let s=new bt;s.beginFill(16777215),s.drawRect(0,0,1,1),s.tint=this.themingService.getEditorColor("ledOff"),n.addChild(s)}return this.positionLeds(n),n}positionLeds(e){let n=this.element.options[0],t=(this._size.x-C.gridPixelWidth*2)/n-1/this._scale;for(let r=0;r<n;r++)for(let o=0;o<n;o++){let s=e.children[n*o+r];s.scale=new R(t,t),s.position.x=r*t+r/this._scale,s.position.y=o*t+o/this._scale}}};var Up=class extends Xs{getCurrentSimState(){return this.simActiveState}applySimState(e){return super.applySimState(e)&&this.onChange?(this.onChange(this.simActiveState),!0):!1}};var tr=class{static get elementProviderService(){return ee(be)}static getLGraphicsFromElement(e,n,t,r){switch(n.typeId){case 0:return new Bp(e,n);case 200:return new zc(e,n,r);case 201:return new Hc(e,n,r);case 7:return new Vp(e,n);case 100:case 101:return new Wc(e,n,t);case 202:return new Gc(e,n);case 203:return new Xc(e,n);case 204:return new qc(e,n);case 12:return new Up(e,n);default:return new Xs(e,n)}}static getLGraphicsFromType(e,n){let t=this.elementProviderService.getElementById(n);switch(n){case 200:return new zc(e,t);case 201:return new Hc(e,t);case 100:case 101:return new Wc(e,t);case 202:return new Gc(e,t);case 203:return new Xc(e,t);case 204:return new qc(e,t);default:return new Xs(e,t)}}};var Dr=class{constructor(e,n,t){this._pixelPosStartDrag=e.data.getLocalPosition(n),this._lastPixelPosDrag=this._pixelPosStartDrag,this._previousPixelPosDrag=this._pixelPosStartDrag,this._lastGridPosDrag=Ie.getGridPosForPixelPos(this._pixelPosStartDrag),this._startPosForDiff=t||this._pixelPosStartDrag}addDragPos(e,n){let t=e.data.getLocalPosition(n);this._previousPixelPosDrag=this._lastPixelPosDrag,this._lastPixelPosDrag=t;let r=Ie.getGridPosForPixelPos(t),o=new R(r.x-this._lastGridPosDrag.x,r.y-this._lastGridPosDrag.y);return(o.x!==0||o.y!==0)&&(this._lastGridPosDrag=r),Ie.getPixelPosForGridPos(o)}get pixelPosStartDrag(){return this._pixelPosStartDrag}get gridPosStart(){return Ie.getGridPosForPixelPos(this._pixelPosStartDrag)}get gridPosFloatStart(){return Ie.getFloatGridPosForPixelPos(this._pixelPosStartDrag)}get pixelPosOnGridStart(){return Ie.getPixelPosOnGridForPixelPos(this._pixelPosStartDrag)}get pixelPosOnGridStartWire(){return Ie.getPixelPosForGridPosWire(this.gridPosStart)}get gridPosStartWire(){return Ie.getPixelPosForGridPosWire(this._pixelPosStartDrag)}get lastPixelPosDrag(){return this._lastPixelPosDrag}get previousPixelPosDrag(){return this._previousPixelPosDrag}get lastGridPosDrag(){return this._lastGridPosDrag}get lastPixelPosOnGridWire(){return Ie.getPixelPosForGridPosWire(this.lastGridPosDrag)}get lastGridPosFloat(){return Ie.getFloatGridPosForPixelPos(this._lastPixelPosDrag)}get previousGridPosFloat(){return Ie.getFloatGridPosForPixelPos(this._previousPixelPosDrag)}getGridPosDiffFromStart(e){return e=e||this._lastPixelPosDrag,Ie.getGridPosForPixelPos(new R(e.x-this._startPosForDiff.x,e.y-this._startPosForDiff.y))}getPixelPosDiffFromStart(e){return e=e||this._lastPixelPosDrag,new R(e.x-this._startPosForDiff.x,e.y-this._startPosForDiff.y)}get pixelDiffFromPreviousDrag(){return new R(this._lastPixelPosDrag.x-this._previousPixelPosDrag.x,this._lastPixelPosDrag.y-this._previousPixelPosDrag.y)}get floatGridDiffFromPreviousDrag(){return Ie.getFloatGridPosForPixelPos(this.pixelDiffFromPreviousDrag)}};var hl=class extends bt{constructor(e,n,t){super(),this.themingService=ee(Re),this._gridPos=e.clone(),this._isInChunk=n,this._isSelected=!1,this.drawConnPoint(t)}drawConnPoint(e){let n=e<.5?3:5;this.clear(),this.beginFill(16777215),this.tint=this._isSelected?this.themingService.getEditorColor("wireSelectColor"):this.themingService.getEditorColor("wire");let t;this._isInChunk?t=Ie.getLocalChunkPixelPosForGridPosWire(this._gridPos):t=Ie.getPixelPosForGridPosWire(this._gridPos),this.position=new R(t.x-n/2/e,t.y-n/2/e),this.drawRect(0,0,n/e,n/e)}setPosition(e,n,t){this._isInChunk=n,this._gridPos=e.clone(),this.drawConnPoint(t)}addOffsetToPos(e,n){this._gridPos.x+=e.x,this._gridPos.y+=e.y,this.drawConnPoint(n)}updateScale(e){this.drawConnPoint(e)}setSelected(e){this._isSelected=e,this._isSelected?this.tint=this.themingService.getEditorColor("wireSelectColor"):this.tint=this.themingService.getEditorColor("wire")}applySimState(){}setSimulationState(){}};var zp=class{constructor(e,n){this._destroySubject=new _e,this._state=0,this.workModeSer=ee(mn),this.editorInteractionSer=ee(gn),this.themingSer=ee(Re),this.elemProvSer=ee(be),this.projectsSer=ee(We),this.selectionSer=ee(Si),this.copySer=ee(Ap),this._view=e,this._project=n,this._selectRect=new bt,this._selectRect.beginFill(this.themingSer.getEditorColor("selectRect"),.3),this._selectRect.drawRect(0,0,1,1),this._selectRect.interactive=!0,this._selectRect.zIndex=10,this._selectRect.visible=!1,this._view.addChild(this._selectRect),this._wireGraphics=new bt,this._view.addChild(this._wireGraphics),this.initEventListeners(),this.workModeSer.currentWorkMode$.pipe(xe(this._destroySubject)).subscribe(()=>this.cleanUp(!0)),this.editorInteractionSer.subscribeEditorAction(4,5).pipe(xe(this._destroySubject),ki(()=>this._view.project.id===this.projectsSer.currProject.id)).subscribe(()=>this.cleanUp(!0)),this.editorInteractionSer.subscribeEditorAction(3,2).pipe(xe(this._destroySubject),ki(()=>this._view.project.id===this.projectsSer.currProject.id)).subscribe(()=>this.cleanUp()),this.editorInteractionSer.subscribeEditorAction(1).pipe(xe(this._destroySubject),ki(()=>this._view.project.id===this.projectsSer.currProject.id)).subscribe(()=>this.startPaste())}addNewElement(e){ee(ye).runOutsideAngular(()=>{e.interactive=!0,e.on("pointerup",()=>this.pUpElement(e)),e.on("pointerdown",n=>this.pDownElement(n,e))})}initEventListeners(){ee(ye).runOutsideAngular(()=>{this._view.on("pointerdown",e=>this.pDownView(e)),this._view.on("pointerup",e=>this.pUpView(e)),this._view.on("pointerupoutside",e=>this.pUpView(e)),this._view.on("pointermove",e=>this.pMoveView(e)),this._selectRect.on("pointerdown",e=>this.pDownSelectRect(e))})}updateSelectionScale(){for(let e of this._selectedElements||[])e.updateScale(this.currScale);for(let e of this._selectedConnPoints||[])e.graphics.updateScale(this.currScale)}pDownView(e){if(e.data.button===0){if(this.workModeSer.currentWorkMode===2){this.cleanUp(!0),this.startEraser(e);return}if(e.target===this._view)switch(this.cleanUp(!0),this.workModeSer.currentWorkMode){case 3:this.startBuildComp(e);break;case 4:this.startBuildWire(e);break;case 5:this.toggleWireConn(e);break;case 6:this.placeText(e);break;case 0:this.startSelection(e,3);break;case 1:this.startSelection(e,4);break}}}pUpView(e){switch(this._state){case 1:this.buildNewComp(e);break;case 3:this.selectFromRect();break;case 4:this.selectCutFromRect();break;case 6:case 8:this.applyDrag();break;case 2:this.buildNewWire();break;case 10:this.applyPaste();break;case 11:this.stopEraser();break}}pMoveView(e){switch(this._state){case 1:case 6:case 8:case 10:this.dragSelection(e);break;case 3:case 4:this.dragSelectRect(e);break;case 2:this.dragNewWire(e);break;case 11:this.eraseComponents(e);break}}pDownSelectRect(e){if(e.data.button===0&&(this._state===5||this._state===9||this._state===7)){switch(this._state){case 5:this._state=6;break;case 9:this._state=10;break;case 7:this._state=8;break}this._actionPos?this._actionPos.addDragPos(e,this._view):this._actionPos=new Dr(e,this._view,Ie.getPixelPosForGridPos(this._selectedElements[0].element.pos))}}pUpElement(e){this.workModeSer.currentWorkMode===3||this.workModeSer.currentWorkMode===2||this._state===2||this._state===6||this._state===8||this._state===3||this._state===4||(this.cleanUp(!0),this._state=5,this.selectionSer.selectComponent(e.element.id),e.setSelected(!0),e.parent.removeChild(e),e.position=Ie.getPixelPosForGridPos(e.element.pos),this._view.addChild(e),this._selectedElements=[e],this._selectionNewElements=!1,this._view.requestSingleFrame())}pDownElement(e,n){e.data.button===0&&this._state===5&&!this._selectRect.visible&&this._selectedElements.includes(n)&&(this._state=6,this._actionPos||(this._actionPos=new Dr(e,this._view,n.position.clone())))}startBuildComp(e){let n=this.workModeSer.currentComponentToBuild,t=this.elemProvSer.getElementById(n);if(t.numInputs===0&&t.numOutputs===0)return;this._state=1,this._actionPos=new Dr(e,this._view);let r=tr.getLGraphicsFromType(this.currScale,n);r.position=this._actionPos.pixelPosOnGridStart,this._view.addChild(r),this._selectedElements=[r],this._selectionNewElements=!0,this._view.requestSingleFrame()}startBuildWire(e){this._state=2,this._actionPos=new Dr(e,this._view),this._wireGraphics.position=this._actionPos.pixelPosOnGridStartWire,this._wireGraphics.visible=!0}dragNewWire(e){this._actionPos.addDragPos(e,this._view),this._wireDirection===void 0&&Ce.distance(this._actionPos.gridPosStart,this._actionPos.lastGridPosDrag)>=1&&(this._actionPos.gridPosStart.x===this._actionPos.lastGridPosDrag.x?this._wireDirection=1:this._actionPos.gridPosStart.y===this._actionPos.lastGridPosDrag.y?this._wireDirection=0:this._wireDirection=1),this._wireGraphics.clear(),this._wireGraphics.lineStyle(1/this._view.zoomPan.currentScale,this.themingSer.getEditorColor("wire")),this._wireGraphics.moveTo(0,0);let n=this._actionPos.lastPixelPosOnGridWire,t=new R(n.x-this._actionPos.pixelPosOnGridStartWire.x,n.y-this._actionPos.pixelPosOnGridStartWire.y);switch(this._wireDirection){case 0:this._wireGraphics.lineTo(t.x,0),this._wireGraphics.lineTo(t.x,t.y);break;case 1:this._wireGraphics.lineTo(0,t.y),this._wireGraphics.lineTo(t.x,t.y);break}this._view.requestSingleFrame()}buildNewWire(){let e=this._actionPos.gridPosStart,n=this._actionPos.lastGridPosDrag;this._project.addWire(e,this._wireDirection===0?new R(n.x,e.y):new R(e.x,n.y),n),this.cleanUp()}startSelection(e,n){this._state=n,this._actionPos=new Dr(e,this._view),this._selectRect.width=0,this._selectRect.height=0,this._selectRect.position=this._actionPos.pixelPosStartDrag,this._selectRect.visible=!0}dragSelectRect(e){this._actionPos.addDragPos(e,this._view);let n=this._actionPos.getPixelPosDiffFromStart();this._selectRect.width=n.x,this._selectRect.height=n.y,this._view.requestSingleFrame()}selectFromRect(){let e=this.selectionSer.selectFromRect(this._project,this._actionPos.gridPosFloatStart,this._actionPos.lastGridPosFloat);if(e.length===0){this.cleanUp();return}this.setSelected(e,this.selectionSer.selectedConnections()),this._selectionNewElements=!1,delete this._actionPos,this._state=5,this._view.requestSingleFrame()}selectCutFromRect(){let e=this.selectionSer.cutFromRect(this._project,this._actionPos.gridPosFloatStart,this._actionPos.lastGridPosFloat);if(this._view.applyActionsToView(e),this.setSelected(this.selectionSer.selectedIds(),this.selectionSer.selectedConnections()),this.selectionSer.selectedIds().length===0){this.cleanUp();return}this._selectionNewElements=!1,delete this._actionPos,this._state=7,this._view.requestSingleFrame()}setSelected(e,n){this._selectedElements=[];for(let t of e){if(!this._view.allElements.has(t)){console.log("Element not in View!");continue}let r=this._view.allElements.get(t);r.setSelected(!0),r.parent.removeChild(r),this._view.addChild(r),r.element.typeId===0?r.position=Ie.getPixelPosForGridPosWire(r.element.pos):r.position=Ie.getPixelPosForGridPos(r.element.pos),this._selectedElements.push(r)}this._selectedConnPoints=[];for(let t of n){let r=this._view.connectionPoints.get(`${t.x}:${t.y}`);r&&(r.setSelected(!0),r.parent.removeChild(r),this._view.addChild(r),r.setPosition(t,!1,this.currScale),this._selectedConnPoints.push({graphics:r,pos:t}))}}buildNewComp(e){this._actionPos.addDragPos(e,this._view),this._project.addElement(this.workModeSer.currentComponentToBuild,this._actionPos.lastGridPosDrag),this.elemProvSer.isPlugElement(this.workModeSer.currentComponentToBuild)&&this.projectsSer.inputsOutputsCustomComponentChanged(this._project),this.cleanUp()}dragSelection(e){let n=this._actionPos.addDragPos(e,this._view);for(let t of this._selectedElements)t.position.x+=n.x,t.position.y+=n.y;for(let t of this._selectedConnPoints||[])t.graphics.addOffsetToPos(Ie.getGridPosForPixelPos(n),this.currScale);this._selectRect.visible&&(this._selectRect.x+=n.x,this._selectRect.y+=n.y),this._view.requestSingleFrame()}applyDrag(){if(this._project.moveElementsById(this.selectionSer.selectedIds(),this._actionPos.getGridPosDiffFromStart(this._selectedElements[0].position)))this.cleanUp(!0);else switch(this._state){case 6:this._state=5;break;case 10:this._state=9;break;case 8:this._state=7;break}}placeText(e){let n=Ie.getGridPosForPixelPos(e.data.getLocalPosition(this._view));ee(ye).run(()=>$(this,null,function*(){let t=yield ee(hn).showPopup(cp,"POPUP.TEXT.TITLE",!1);t&&this._project.addText(t,n)})),this.cleanUp()}toggleWireConn(e){this._actionPos=new Dr(e,this._view),this._project.toggleWireConnection(this._actionPos.gridPosStart),this.cleanUp()}startPaste(){if(this.copySer.copiedElements.length===0)return;this.cleanUp(!0),this._state=9;let e=this.copySer.getCopiedElementsBoundingBox(),n=Ie.getGridPosForPixelPos(new R((this._view.htmlContainer.offsetWidth/3-this._view.zoomPan.positionX)/this.currScale,(this._view.htmlContainer.offsetHeight/3-this._view.zoomPan.positionY)/this.currScale)),t=new R(n.x-e.x,n.y-e.y),r=Ie.getPixelPosForGridPos(new R(e.width+2,e.height+2));this._selectRect.position=Ie.getPixelPosForGridPos(new R(n.x-1,n.y-1)),this._selectRect.width=r.x,this._selectRect.height=r.y,this._selectRect.visible=!0,this._selectedElements=this.copySer.copiedElements.filter(o=>this._project.type==="project"?!this.elemProvSer.isPlugElement(o.typeId):!0).map(o=>{let s=tr.getLGraphicsFromElement(this.currScale,o);return s.setSelected(!0),this._view.addChild(s),s.element.typeId===0?s.position=Ie.getPixelPosForGridPosWire(new R(s.element.pos.x+t.x,s.element.pos.y+t.y)):s.position=Ie.getPixelPosForGridPos(new R(s.element.pos.x+t.x,s.element.pos.y+t.y)),s}),this._selectedConnPoints=this.copySer.copiedConPoints.map(o=>{let s=new R(o.x+t.x,o.y+t.y),a=new hl(s,!1,this.currScale);return a.setSelected(!0),this._view.addChild(a),{graphics:a,pos:o}}),this._selectionNewElements=!0,this._view.requestSingleFrame()}applyPaste(){let e=this._selectedElements.filter(n=>this._project.type==="project"?!this.elemProvSer.isPlugElement(n.element.typeId):!0).map(n=>Z.clone(n.element));this._project.addElements(e,this._actionPos.getGridPosDiffFromStart(this._selectedElements[0].position))?this.cleanUp(!0):this._state=9}startEraser(e){this._state=11,this._actionPos=new Dr(e,this._view),this._project.eraseElements(this._actionPos.previousGridPosFloat,this._actionPos.lastGridPosFloat)}eraseComponents(e){this._actionPos.addDragPos(e,this._view),this._project.eraseElements(this._actionPos.previousGridPosFloat,this._actionPos.lastGridPosFloat)}stopEraser(){this._project.stopErase(),this.cleanUp()}get currScale(){return this._view.zoomPan.currentScale}cleanUp(e=!1){this._state===7&&this.selectionSer.cancelCut(this._project),this._state=0,this.selectionSer.clearSelection(),(e||this._selectionNewElements)&&this.cleanUpSelectedElements(),this._selectRect.visible=!1,this._wireGraphics.visible=!1,this._wireGraphics.clear(),delete this._wireDirection,this._selectedElements=[],this._selectedConnPoints=[],delete this._selectionNewElements,delete this._actionPos,this._view.requestSingleFrame()}cleanUpSelectedElements(){for(let e of this._selectedElements||[])if(this._selectionNewElements)e.destroy();else try{this._view.addToCorrectChunk(e,e.element.pos)&&this._view.setLocalChunkPos(e.element,e),e.setSelected(!1)}catch(n){console.error(n)}for(let e of this._selectedConnPoints||[])if(this._selectionNewElements)e.graphics.destroy();else try{this._view.addToCorrectChunk(e.graphics,e.pos)&&(this._view.removeChild(e.graphics),e.graphics.setPosition(e.pos,!0,this.currScale)),e.graphics.setSelected(!1)}catch(n){console.error(n)}}destroy(){this._destroySubject.next(),this._destroySubject.complete()}};var iS=(()=>{let e=class e{constructor(t){this._scale=1,this._view=t}translateBy(t,r){this._view.x+=t,this._view.y+=r,this._view.x>0&&(this._view.x=0),this._view.y>0&&(this._view.y=0)}translateTo(t){this._view.x=t.x,this._view.y=t.y}zoomBy(t,r,o){let s=Math.round(this._view.scale.x*t*1e8)/1e8;return this.zoomTo(s,r,o)}zoomTo100(t,r){return this.zoomTo(1,t,r)}zoomTo(t,r,o){let s=(r-this._view.x)/this._view.scale.x,a=(o-this._view.y)/this._view.scale.y;if(t<=e.MAX_ZOOM_OUT||t>=e.MAX_ZOOM_IN)return!1;this._scale=t;let l=s*this._scale+this._view.x,c=a*this._scale+this._view.y;return this._view.x-=l-r,this._view.y-=c-o,this._view.scale.x=this._scale,this._view.scale.y=this._scale,this.positionX>0&&(this._view.x=0),this.positionY>0&&(this._view.y=0),!0}isOnScreen(t,r){return{start:new R(-this.positionX/this.currentScale,-this.positionY/this.currentScale),end:new R((r-this.positionX)/this.currentScale,(t-this.positionY)/this.currentScale)}}get positionX(){return this._view.transform?this._view.position.x:0}get positionY(){return this._view.transform?this._view.position.y:0}get currentScale(){return this._scale}setZoomPanData({scale:t,posX:r,posY:o}){this.zoomTo(t,r,o),this.translateTo(new R(r,o))}get zoomPanData(){return{posX:this.positionX,posY:this.positionY,scale:this.currentScale}}};e.MAX_ZOOM_IN=2.5,e.MAX_ZOOM_OUT=.2;let i=e;return i})();function Hp(i){return"updateComponent"in i}function rS(i){return"resetSimState"in i}var pl=class extends At{constructor(e,n,t){super(),this._chunks=[],this.connectionPoints=new Map,this.allElements=new Map,this.chunksToRenderDiffer=ee(Hl).find([]).create(this.chunksToRenderTrackBy),this._destroySubject=new _e,this.themingService=ee(Re),this._project=e,this.htmlContainer=n,this.requestSingleFrame=t,this.zoomPan=new iS(this),this.interactive=!0,this.sortableChildren=!0,this.hitArea=new ze(0,0,1/0,1/0),this.themingService.showGridChanges$.pipe(xe(this._destroySubject)).subscribe(r=>{this.onGridShowChange(r)})}applyOpenActions(){this.applyActionsToView(this._project.getOpenActions()),this.requestSingleFrame().then(()=>{for(let e of this._chunks)for(let n of e)n&&(n.container.visible=!1,n.gridGraphics.visible=!1);this.updateChunks(),this.requestSingleFrame()})}updateChunks(){let e=this.zoomPan.isOnScreen(this.htmlContainer.offsetHeight,this.htmlContainer.offsetWidth),n=this._project.chunksToRender(Ie.getGridPosForPixelPos(e.start),Ie.getGridPosForPixelPos(e.end)),t=this.chunksToRenderDiffer.diff(n);t.forEachItem(r=>{let o=r.item;if(this.createChunkIfNeeded(o.x,o.y))return;let s=this._chunks[o.x][o.y];if(s.container.visible=!0,s.container.renderable=!0,s.gridGraphics.visible=this.themingService.showGrid,s.gridGraphics.renderable=this.themingService.showGrid,s.scaledFor===this.zoomPan.currentScale)return;s.scaledFor=this.zoomPan.currentScale,this.themingService.showGrid&&(s.gridGraphics.destroy(),s.gridGraphics=Ie.generateGridGraphics(this.zoomPan.currentScale),s.gridGraphics.position=this.getChunkPos(o.x,o.y),this.addChildAt(s.gridGraphics,0));let a=s.container.children;for(let l of a)l.updateScale(this.zoomPan.currentScale)}),this.isSimulationView()&&t.forEachAddedItem(r=>{for(let o of this._chunks[r.item.x][r.item.y].container.children)o.applySimState(this.zoomPan.currentScale)}),t.forEachRemovedItem(r=>{let o=r.item;this._chunks[o.x][o.y].container.visible=!1,this._chunks[o.x][o.y].container.renderable=!1,this._chunks[o.x][o.y].gridGraphics.visible=!1,this._chunks[o.x][o.y].gridGraphics.renderable=!1})}chunksToRenderTrackBy(e,n){return`${n.x}:${n.y}`}onGridShowChange(e){let n=this.zoomPan.isOnScreen(this.htmlContainer.offsetHeight,this.htmlContainer.offsetWidth),t=ee(We).currProject.chunksToRender(Ie.getGridPosForPixelPos(n.start),Ie.getGridPosForPixelPos(n.end));for(let r of t){let o=this._chunks[r.x][r.y];e?(o.gridGraphics.destroy(),o.gridGraphics=Ie.generateGridGraphics(this.zoomPan.currentScale),o.gridGraphics.position=this.getChunkPos(r.x,r.y),this.addChildAt(o.gridGraphics,0)):o.gridGraphics.visible=!1}this.requestSingleFrame()}getChunkPos(e,n){return Ie.getPixelPosForGridPos(new R(e*C.chunkSize,n*C.chunkSize))}createChunk(e,n){if(this._chunks[e]&&this._chunks[e][n])return!1;for(let t=0;t<=e;t++)this._chunks[t]||(this._chunks[t]=[]);for(let t=0;t<=n;t++)!this._chunks[e][n]&&this._chunks[e][n]!==void 0&&this._chunks[e].push(void 0);return this._chunks[e][n]={gridGraphics:Ie.generateGridGraphics(this.zoomPan.currentScale),container:new At,scaledFor:this.zoomPan.currentScale},this._chunks[e][n].container.sortableChildren=!1,this._chunks[e][n].container.interactive=!1,this._chunks[e][n].container.visible=!0,this._chunks[e][n].gridGraphics.sortableChildren=!1,this._chunks[e][n].gridGraphics.interactive=!1,this._chunks[e][n].gridGraphics.visible=this.themingService.showGrid,!0}createChunkIfNeeded(e,n){if(this.createChunk(e,n)){let t=this._chunks[e][n],r=this.getChunkPos(e,n);return t.container.position=r,t.gridGraphics.position=r,this.addChildAt(t.gridGraphics,0),this.addChildAt(t.container,1),!0}return!1}applyZoom(e,n,t){return(!n||!t)&&(n=this.htmlContainer.offsetWidth/2,t=this.htmlContainer.offsetHeight/2),e===6?this.zoomPan.zoomBy(1.25,n,t):e===7?this.zoomPan.zoomBy(.8,n,t):e===8?this.zoomPan.zoomTo100(n,t):!1}placeWireOnView(e){let n=tr.getLGraphicsFromElement(this.zoomPan.currentScale,e);n.position=Ie.getLocalChunkPixelPosForGridPosWire(e.pos),this.addToCorrectChunk(n,e.pos),this.allElements.set(e.id,n)}addConnectionPointToView(e){let n=new hl(e,!0,this.zoomPan.currentScale);this.addToCorrectChunk(n,e),this.connectionPoints.set(`${e.x}:${e.y}`,n)}addToCorrectChunk(e,n){let t=Ce.gridPosToChunk(n);return!(this._chunks[t.x]&&this._chunks[t.x][t.y])||this._chunks[t.x][t.y].container!==e.parent?(this.createChunkIfNeeded(t.x,t.y),this._chunks[t.x][t.y].container.addChild(e),!0):!1}removeConnectionPoint(e){let n=`${e.x}:${e.y}`;this.connectionPoints.has(n)&&(this.connectionPoints.get(n).destroy(),this.connectionPoints.delete(n))}moveMultipleAction(e){e.others.forEach(n=>{let t=this.allElements.get(n.id);this.addToCorrectChunk(t,n.pos),this.setLocalChunkPos(n,t)})}removeComponentOrWire(e){this.allElements.has(e.id)&&(this.allElements.get(e.id).destroy(),this.allElements.delete(e.id))}updateComponent(e){let n=this.allElements.get(e.element.id);Hp(n)&&n.updateComponent(this.zoomPan.currentScale,e.element)}applyActionsToView(e){if(e){for(let n of e)this.applyAction(n);this.updateChunks(),this.requestSingleFrame()}}applyAction(e){switch(e.name){case"addComp":this.placeComponentOnView(e.element);break;case"addWire":this.placeWireOnView(e.element);break;case"remComp":case"remWire":this.removeComponentOrWire(e.element);break;case"conWire":this.addConnectionPointToView(e.pos);break;case"dcoWire":this.removeConnectionPoint(e.pos);break;case"movMult":this.moveMultipleAction(e);break;case"rotComp":case"numInpt":case"ediData":case"compOpt":case"plugInd":this.updateComponent(e);break}}setLocalChunkPos(e,n){e.typeId===0?n.position=Ie.getLocalChunkPixelPosForGridPosWire(e.pos):n.position=Ie.getLocalChunkPixelPosForGridPos(e.pos)}onZoom(e){this.applyZoom(e)&&(this.updateChunks(),this.requestSingleFrame())}centerView(){for(let e=0;e<this._project.currState.chunks.length;e++)for(let n=0;n<this._project.currState.chunks[e].length;n++)if(this._project.currState.chunks[e][n]&&this._project.currState.chunks[e][n].elements.size>0){this.zoomPan.translateTo(this.getChunkPos(-e,-n)),this.updateChunks(),this.requestSingleFrame();return}this.zoomPan.translateTo(new R(0,0)),this.updateChunks(),this.requestSingleFrame()}get project(){return this._project}destroy(){this._destroySubject.next(),this._destroySubject.unsubscribe(),super.destroy({children:!0})}};var Wp=class extends pl{constructor(e,n,t){super(e,n,t),this._viewInteractionManager=new zp(this,e),this.applyOpenActions(),this._project.changes.pipe(xe(this._destroySubject)).subscribe(r=>this.applyActionsToView(r))}isSimulationView(){return!1}updateSelectedElementsScale(){this._viewInteractionManager.updateSelectionScale()}updateSymbolUserDefinedElements(){let e=ee(be);for(let[n,t]of this.allElements)Hp(t)&&e.isUserElement(t.element.typeId)&&t.updateComponent(this.zoomPan.currentScale,t.element);this.requestSingleFrame()}placeComponentOnView(e){let n=tr.getLGraphicsFromElement(this.zoomPan.currentScale,e,this.project);n.position=Ie.getLocalChunkPixelPosForGridPos(e.pos),this.addToCorrectChunk(n,e.pos),this.allElements.set(e.id,n),this._viewInteractionManager.addNewElement(n)}get projectType(){return this._project.type}destroy(){this._viewInteractionManager.destroy(),super.destroy()}};var Gp=class{constructor(e){this._destroySubject=new _e,this._interactionStart=new _e,this._interactionEnd=new _e,this._zoom=new _e,this._mouseDown=!1,this._mouseMoved=!1,this._mouseX=0,this._mouseY=0,this._mouseDX=0,this._mouseDY=0,this._htmlContainer=e,this.addListeners()}addListeners(){ee(ye).runOutsideAngular(()=>{ut(this._htmlContainer,"mousemove").pipe(xe(this._destroySubject)).subscribe(e=>this.mouseMoveHandler(e)),ut(window,"mouseup").pipe(xe(this._destroySubject)).subscribe(()=>this.mouseUpHandler()),ut(window,"contextmenu").pipe(xe(this._destroySubject),ki(()=>this._mouseMoved)).subscribe(e=>e.preventDefault()),ut(this._htmlContainer,"mousedown").pipe(xe(this._destroySubject)).subscribe(e=>this.mouseDownHandler(e)),ut(this._htmlContainer,"wheel",{passive:!0}).pipe(xe(this._destroySubject)).subscribe(e=>this.mouseWheelHandler(e))})}mouseDownHandler(e){e.button===2&&(e.preventDefault(),this._mouseDown=!0,this._interactionStart.next())}mouseUpHandler(){this._mouseDown=!1,this._interactionEnd.next(),setTimeout(()=>this._mouseMoved=!1,1),this.clearMouseDelta()}mouseMoveHandler(e){e.preventDefault();let n=e.offsetX,t=e.offsetY;this._mouseDown&&(this._mouseMoved=!0,this._mouseDX+=n-this._mouseX,this._mouseDY+=t-this._mouseY),this._mouseX=n,this._mouseY=t}mouseWheelHandler(e){e.deltaY<0?this._wheelDown=!0:e.deltaY>0&&(this._wheelUp=!0),this._zoom.next()}clearMouseDelta(){this._mouseDX=0,this._mouseDY=0}get isMouseDown(){return this._mouseDown}get mouseMoved(){return this._mouseDown&&this._mouseMoved}get isDragging(){return this._mouseDown}get mouseDX(){return this._mouseDX}get mouseDY(){return this._mouseDY}get mouseX(){return this._mouseX}get mouseY(){return this._mouseY}get isZoomOut(){let e=this._wheelUp;return this._wheelUp=!1,e}get isZoomIn(){let e=this._wheelDown;return this._wheelDown=!1,e}get interactionStart$(){return this._interactionStart.asObservable()}get interactionEnd$(){return this._interactionEnd.asObservable()}get zoom$(){return this._zoom.asObservable()}destroy(){this._destroySubject.next(),this._destroySubject.unsubscribe()}};var Xp=(()=>{let e=class e{constructor(){this._destroySubject=new _e,this.ticker=ee(Xo),this.requestInspectElementInSim=new Me}initPixi(t,r){ee(Ip).loadPixiFont(),this._pixiRenderer=new Qi({height:t.nativeElement.offsetHeight,width:t.nativeElement.offsetWidth,antialias:!1,powerPreference:"high-performance",backgroundColor:ee(Re).getEditorColor("background"),resolution:Math.ceil(window.devicePixelRatio||1),autoDensity:!0}),this._pixiRenderer.plugins.interaction.moveWhenInside=!0,r.appendChild(t.nativeElement,this._pixiRenderer.view),ut(window,"resize").pipe(xe(this._destroySubject)).subscribe(()=>{this._pixiRenderer.resize(t.nativeElement.offsetWidth,t.nativeElement.offsetHeight),this._activeView&&this._activeView.updateChunks(),this.ticker.singleFrame(this.getIdentifier())})}addTickerFunction(){this.ticker.addTickerFunction(this.getIdentifier(),()=>{this._activeView&&(this.updateZoomPan(),this._pixiRenderer.render(this._activeView))})}preventContextMenu(t,r){r.listen(t.nativeElement,"contextmenu",o=>{o.preventDefault()})}initZoomPan(t){this._zoomPanInputManager=new Gp(t.nativeElement),this._zoomPanInputManager.interactionStart$.pipe(xe(this._destroySubject)).subscribe(()=>{this.ticker.startTicker(this.getIdentifier()),this._activeView&&(this._activeView.interactiveChildren=!1)}),this._zoomPanInputManager.interactionEnd$.pipe(xe(this._destroySubject)).subscribe(()=>{this.ticker.stopTicker(this.getIdentifier()),this._activeView&&(this._activeView.interactiveChildren=!0)}),this._zoomPanInputManager.zoom$.pipe(xe(this._destroySubject)).subscribe(()=>{this.ticker.singleFrame(this.getIdentifier())})}updateZoomPan(){let t=!1;this._zoomPanInputManager.isDragging&&(this._activeView.zoomPan.translateBy(this._zoomPanInputManager.mouseDX,this._zoomPanInputManager.mouseDY),this._zoomPanInputManager.clearMouseDelta(),t=!0),this._zoomPanInputManager.isZoomIn&&this._activeView.applyZoom(6,this._zoomPanInputManager.mouseX,this._zoomPanInputManager.mouseY)?(t=!0,this.updateSelectedZoomScale()):this._zoomPanInputManager.isZoomOut&&this._activeView.applyZoom(7,this._zoomPanInputManager.mouseX,this._zoomPanInputManager.mouseY)&&(t=!0,this.updateSelectedZoomScale()),t&&this._activeView.updateChunks()}updateSelectedZoomScale(){"updateSelectedElementsScale"in this._activeView&&this._activeView.updateSelectedElementsScale()}destroy(){this._zoomPanInputManager.destroy(),this._destroySubject.next(),this._destroySubject.unsubscribe(),this.ticker.removeTickerFunction(this.getIdentifier()),this._activeView&&this._activeView.destroy()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=He({type:e,outputs:{requestInspectElementInSim:"requestInspectElementInSim"}});let i=e;return i})();var qp=class{constructor(e){this._ngZone=ee(ye),this._view=e}addEventListenersToCustomElement(e){this._ngZone.runOutsideAngular(()=>{e.interactive=!0,e.on("pointerdown",n=>{this.onCompClick(n,e)})})}onCompClick(e,n){e.data.button===0&&this._ngZone.run(()=>{this._view.requestInspectElemEventEmitter.emit({identifier:`${this._view.parentProjectIdentifier}:${n.element.id}`,sprite:n,typeId:n.element.typeId,parentNames:[...this._view.parentProjectNames,this._view.project.name],parentTypeIds:[...this._view.parentTypeIds,this._view.project.id]})})}};var fl=class extends pl{constructor(e,n,t,r,o,s,a,l){super(e,n,t),this._elementProviderService=ee(be),this.requestInspectElemEventEmitter=r,this.parentProjectIdentifier=o,this.parentProjectNames=s,this.parentTypeIds=a,this._simViewInteractionManager=new qp(this),l&&this.zoomPan.setZoomPanData(l),this.applyOpenActions(),ee(ye).runOutsideAngular(()=>$(this,null,function*(){let c=ee(fi);c.subscribe(this.parentProjectIdentifier),c.boardStateWires(this.parentProjectIdentifier).pipe(xe(this._destroySubject)).subscribe(u=>this.blinkWires(u)),c.boardStateWireEnds(this.parentProjectIdentifier).pipe(xe(this._destroySubject)).subscribe(u=>this.blinkComps(u)),c.onIoCompReset(this.parentProjectIdentifier).pipe(xe(this._destroySubject)).subscribe(()=>this.resetIoComps()),e.type==="comp"&&(yield this.requestSingleFrame(),this.blinkWires(c.getWireState(this.parentProjectIdentifier)),this.blinkComps(c.getWireEndState(this.parentProjectIdentifier)))}))}isSimulationView(){return!0}placeComponentOnView(e){let n=tr.getLGraphicsFromElement(this.zoomPan.currentScale,e,this.project,this.parentProjectIdentifier);n.position=Ie.getLocalChunkPixelPosForGridPos(e.pos),this.addToCorrectChunk(n,e.pos),this.allElements.set(e.id,n),(this._elementProviderService.isCustomElement(e.typeId)||this._elementProviderService.canInspectWithPopup(e.typeId))&&this._simViewInteractionManager.addEventListenersToCustomElement(n)}blinkWires(e){for(let[n,t]of e)this.allElements.get(n.id).setSimulationState([t]);this.requestSingleFrame()}blinkComps(e){for(let[n,t]of e.entries())this.allElements.get(n.id).setSimulationState(t);this.requestSingleFrame()}resetIoComps(){for(let e of this.allElements.values())rS(e)&&e.resetSimState();this.requestSingleFrame()}destroy(){super.destroy(),ee(fi).unsubscribe(this.parentProjectIdentifier)}};var w4=["pixiCanvasContainer"],x4=["tabs"];function M4(i,e){if(i&1){let n=le();v(0,"span",11),T("click",function(r){H(n);let o=A(2).$implicit,s=A();return W(s.tabCloseClicked(o,r))}),y()}}function O4(i,e){if(i&1){let n=le();v(0,"div",7,8),T("auxclick",function(r){H(n);let o=A().$implicit,s=A();return W(s.tabCloseClicked(o,r))}),v(2,"div",9),T("mousedown",function(r){H(n);let o=ii(1),s=A().$implicit,a=A();return W(a.mouseDown(s,r,o))}),O(3),y(),J(4,M4,1,0,"span",10),y()}if(i&2){let n=A().$implicit,t=A();Ve("tab-active",n.id===(t.activeView==null?null:t.activeView.project.id)),g(2),w("desiredFontWidth",170),g(1),U(" ",n.name," "),g(1),w("ngIf",n.type!=="project")}}function E4(i,e){if(i&1&&(st(0),J(1,O4,5,5,"div",6),at()),i&2){let n=e.$implicit,t=A();g(1),w("ngIf",!t.isSimulationMode||n.type==="project")}}var oS=(()=>{let e=class e extends Xp{constructor(t,r,o,s,a,l,c){super(),this.renderer2=t,this.ngZone=r,this.projectsService=o,this.workMode=s,this.editorInteraction=a,this.elementProvider=l,this.cdr=c}ngOnInit(){this._allViews=new Map,this.ngZone.runOutsideAngular(()=>{this.addTickerFunction(),this.preventContextMenu(this._pixiCanvasContainer,this.renderer2),this.initZoomPan(this._pixiCanvasContainer),this.initPixi(this._pixiCanvasContainer,this.renderer2),this.projectsService.onProjectOpened$.pipe(xe(this._destroySubject)).subscribe(t=>this.onProjectOpen(t)),this.projectsService.onProjectClosed$.pipe(xe(this._destroySubject)).subscribe(t=>this.onProjectClose(t)),this.projectsService.onProjectSwitch$.pipe(xe(this._destroySubject)).subscribe(t=>this.onProjectSwitch(t)),this.projectsService.onUserDefinedElementsReload$.pipe(xe(this._destroySubject)).subscribe(()=>this.onUserElementsReload()),this.editorInteraction.subscribeEditorAction(6,7,8).pipe(xe(this._destroySubject)).subscribe(t=>this.activeView.onZoom(t)),ut(window,"mouseup").pipe(xe(this._destroySubject)).subscribe(()=>this.mouseUp()),ut(window,"mousemove").pipe(xe(this._destroySubject)).subscribe(t=>this.mouseMove(t)),this.workMode.isSimulationMode$.subscribe(t=>this.onSimulationModeChanged(t))})}getIdentifier(){return"0"}mouseDown(t,r,o){if(r.button===0){this.currentlyDragging=t,this.dragStart=r.clientX,this.dragElement=o,this.dragElement.style.transitionDuration="0s",this.tabChildren=[];for(let s of this._tabsElement.nativeElement.children)s!==this.dragElement&&(this.tabChildren.push({element:s,pos:s.offsetLeft}),s.style.transitionDuration="0.25s");this.switchToProject(t.id)}}mouseMove(t){if(this.currentlyDragging){let r=t.clientX-this.dragStart;this.dragElement.style.left=r+"px",this.dragElement.offsetLeft<0?this.dragElement.style.left=r-this.dragElement.offsetLeft+"px":this.dragElement.offsetLeft+this.dragElement.offsetWidth>this._tabsElement.nativeElement.offsetWidth&&(this.dragElement.style.left=r-(this.dragElement.offsetLeft+this.dragElement.offsetWidth-this._tabsElement.nativeElement.offsetWidth)+"px");for(let o of this.tabChildren)o.pos+o.element.offsetWidth/2<=this.dragElement.offsetLeft-r&&o.pos+o.element.offsetWidth/2>this.dragElement.offsetLeft?o.element.style.left=this.dragElement.offsetWidth+8+"px":o.pos-o.element.offsetWidth/2>=this.dragElement.offsetLeft-r&&o.pos-o.element.offsetWidth/2<this.dragElement.offsetLeft?o.element.style.left=-this.dragElement.offsetWidth-8+"px":o.element.style.left="0px"}}mouseUp(){if(this.currentlyDragging){let r=Array.from(this._tabsElement.nativeElement.children).sort((o,s)=>o.offsetLeft-s.offsetLeft).indexOf(this.dragElement);for(let o of this._tabsElement.nativeElement.children)o.style.left="",o.style.transitionDuration="0s";this.projectsService.moveProjectToIndex(this.currentlyDragging,r),this.cdr.detectChanges(),this.currentlyDragging=void 0}}get allProjects(){return this.projectsService.allProjects}get isSimulationMode(){return this.workMode.currentWorkMode===7}get activeView(){return this._activeView}onSimulationModeChanged(t){if(t)this._activeView=new fl(this.projectsService.mainProject,this._pixiCanvasContainer.nativeElement,()=>this.ticker.singleFrame("0"),this.requestInspectElementInSim,"0",[],[],this._activeView.zoomPan.zoomPanData),this.ticker.singleFrame("0");else{if(!this._activeView)return;let r=this._allViews.get(this._activeView.project.id);r.zoomPan.setZoomPanData(this._activeView.zoomPan.zoomPanData),r.updateChunks(),this._activeView.destroy(),delete this._activeView,this._pixiRenderer._lastObjectRendered=null,this.switchToProject(this.allProjects[0].id)}this._pixiRenderer&&this._pixiRenderer.resize(this._pixiCanvasContainer.nativeElement.offsetWidth,this._pixiCanvasContainer.nativeElement.offsetHeight)}onProjectOpen(t){let r=new Wp(this.projectsService.getProjectById(t),this._pixiCanvasContainer.nativeElement,()=>this.ticker.singleFrame("0"));this.ngZone.run(()=>{this._allViews.set(t,r),this._activeView=r,this.projectsService.switchToProject(t)}),this.ticker.singleFrame("0")}switchToProject(t){this.workMode.currentWorkMode!==7&&this.projectsService.switchToProject(t)}onProjectSwitch(t){this._activeView=this._allViews.get(t),(this.activeView.project.type==="project"&&this.elementProvider.isPlugElement(this.workMode.currentComponentToBuild)||this.activeView.project.id===this.workMode.currentComponentToBuild)&&this.workMode.setWorkMode(0),this.ticker.singleFrame("0")}onUserElementsReload(){for(let[t,r]of this._allViews)r.updateSymbolUserDefinedElements()}tabCloseClicked(t,r){(r.button===0||r.button===1)&&(r.stopPropagation(),!(this._allViews.size<=1||t.type!=="comp")&&this.projectsService.closeProject(t.id))}onProjectClose(t){let r=this._allViews.get(t);this._allViews.delete(t),r===this._activeView&&this.allProjects.length>0&&this.switchToProject(this.allProjects[0].id),r.destroy(),this._pixiRenderer._lastObjectRendered=null}ngOnDestroy(){super.destroy()}};e.\u0275fac=function(r){return new(r||e)(x(Mn),x(ye),x(We),x(mn),x(gn),x(be),x(Zt))},e.\u0275cmp=ie({type:e,selectors:[["app-work-area"]],viewQuery:function(r,o){if(r&1&&(et(w4,7),et(x4,7)),r&2){let s;Je(s=tt())&&(o._pixiCanvasContainer=s.first),Je(s=tt())&&(o._tabsElement=s.first)}},features:[ke],decls:6,vars:1,consts:[[1,"main-area"],["id","canvas-container"],["pixiCanvasContainer",""],["id","tabs"],["tabs",""],[4,"ngFor","ngForOf"],["class","tab",3,"tab-active","auxclick",4,"ngIf"],[1,"tab",3,"auxclick"],["tab",""],["appAutoFontSize","",3,"desiredFontWidth","mousedown"],["class","tab-close","tabindex","0",3,"click",4,"ngIf"],["tabindex","0",1,"tab-close",3,"click"]],template:function(r,o){r&1&&(v(0,"div",0),q(1,"div",1,2),v(3,"div",3,4),J(5,E4,2,1,"ng-container",5),y()()),r&2&&(g(5),w("ngForOf",o.allProjects))},dependencies:[sn,Be,Np],styles:[`.main-area[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;width:100%;height:100%;position:relative}.main-area[_ngcontent-%COMP%]   #canvas-container[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;cursor:crosshair}.main-area[_ngcontent-%COMP%]   #tabs[_ngcontent-%COMP%]{position:absolute;width:calc(100% - 2rem);margin-left:1rem;display:flex;flex-direction:row;justify-content:flex-start;overflow:hidden;pointer-events:none}.main-area[_ngcontent-%COMP%]   #tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{height:1.5rem;width:12rem;display:flex;position:relative;flex-direction:row;justify-content:space-between;align-items:center;transition:left ease;left:0;pointer-events:all;padding-right:.3rem;border-bottom-left-radius:.3rem;border-bottom-right-radius:.3rem;margin-right:8px}.theme-light[_nghost-%COMP%]   .main-area[_ngcontent-%COMP%]   #tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .main-area[_ngcontent-%COMP%]   #tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#000;border-left:solid #d1d1d1;border-right:solid #d1d1d1;border-bottom:solid #d1d1d1}.theme-dark[_nghost-%COMP%]   .main-area[_ngcontent-%COMP%]   #tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .main-area[_ngcontent-%COMP%]   #tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{background-color:#262a2b;color:#ccc;border-left:solid #3a4042;border-right:solid #3a4042;border-bottom:solid #3a4042}.main-area[_ngcontent-%COMP%]   #tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;align-items:center;padding-left:.4rem;-webkit-user-select:none;user-select:none;margin:0;font-size:.9rem;width:100%;height:100%}.main-area[_ngcontent-%COMP%]   #tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-close[_ngcontent-%COMP%]{border-radius:50%;width:1rem;height:1rem}.theme-light[_nghost-%COMP%]   .main-area[_ngcontent-%COMP%]   #tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-close[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .main-area[_ngcontent-%COMP%]   #tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-close[_ngcontent-%COMP%]{background-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'><path stroke='rgba(0, 0, 0)' stroke-linecap='square' stroke-width='1' d='M2 2 L6 6 M6 2 L2 6'></path></svg>")}.theme-dark[_nghost-%COMP%]   .main-area[_ngcontent-%COMP%]   #tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-close[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .main-area[_ngcontent-%COMP%]   #tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-close[_ngcontent-%COMP%]{background-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'><path stroke='rgba(204, 204, 204)' stroke-linecap='square' stroke-width='1' d='M2 2 L6 6 M6 2 L2 6'></path></svg>")}.theme-light[_nghost-%COMP%]   .main-area[_ngcontent-%COMP%]   #tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-close[_ngcontent-%COMP%]:hover, .theme-light   [_nghost-%COMP%]   .main-area[_ngcontent-%COMP%]   #tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-close[_ngcontent-%COMP%]:hover{background-color:#fff}.theme-dark[_nghost-%COMP%]   .main-area[_ngcontent-%COMP%]   #tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-close[_ngcontent-%COMP%]:hover, .theme-dark   [_nghost-%COMP%]   .main-area[_ngcontent-%COMP%]   #tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-close[_ngcontent-%COMP%]:hover{background-color:#323739}.main-area[_ngcontent-%COMP%]   #tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-dragging[_ngcontent-%COMP%]{display:none}.main-area[_ngcontent-%COMP%]   #tabs[_ngcontent-%COMP%]   .tab-active[_ngcontent-%COMP%]{z-index:10}.theme-light[_nghost-%COMP%]   .main-area[_ngcontent-%COMP%]   #tabs[_ngcontent-%COMP%]   .tab-active[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .main-area[_ngcontent-%COMP%]   #tabs[_ngcontent-%COMP%]   .tab-active[_ngcontent-%COMP%]{background-color:#d1d1d1;color:#000}.theme-light[_nghost-%COMP%]   .main-area[_ngcontent-%COMP%]   #tabs[_ngcontent-%COMP%]   .tab-active[_ngcontent-%COMP%]   .tab-close[_ngcontent-%COMP%]:hover, .theme-light   [_nghost-%COMP%]   .main-area[_ngcontent-%COMP%]   #tabs[_ngcontent-%COMP%]   .tab-active[_ngcontent-%COMP%]   .tab-close[_ngcontent-%COMP%]:hover{background-color:#dedede}.theme-dark[_nghost-%COMP%]   .main-area[_ngcontent-%COMP%]   #tabs[_ngcontent-%COMP%]   .tab-active[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .main-area[_ngcontent-%COMP%]   #tabs[_ngcontent-%COMP%]   .tab-active[_ngcontent-%COMP%]{background-color:#3a4042;color:#ccc}.theme-dark[_nghost-%COMP%]   .main-area[_ngcontent-%COMP%]   #tabs[_ngcontent-%COMP%]   .tab-active[_ngcontent-%COMP%]   .tab-close[_ngcontent-%COMP%]:hover, .theme-dark   [_nghost-%COMP%]   .main-area[_ngcontent-%COMP%]   #tabs[_ngcontent-%COMP%]   .tab-active[_ngcontent-%COMP%]   .tab-close[_ngcontent-%COMP%]:hover{background-color:#464d50}`]});let i=e;return i})();var Yc=class i{constructor(e,n,t,r,o=new R(100,t.offsetHeight+100),s=new R(1/0,1/0)){this._destroySubject=new _e,this._draggingPos=[0,0],this._changeSubject=new _e,this._dragBounding=e,this._popup=n,this._header=t,this.renderer2=r,this._minSize=o,this._maxSize=s,ee(ye).runOutsideAngular(()=>{ut(window,"mousemove").pipe(xe(this._destroySubject)).subscribe(a=>this.mouseMove(a)),ut(window,"mouseup").pipe(xe(this._destroySubject)).subscribe(()=>this.mouseUp()),ut(this._popup,"mousedown").pipe(xe(this._destroySubject)).subscribe(a=>this.mouseDown(a)),ut(this._popup,"mousemove").pipe(xe(this._destroySubject)).subscribe(a=>this.pointerOver(a)),ut(window,"resize").pipe(xe(this._destroySubject)).subscribe(()=>{if(this.collision_right(this._popup.offsetLeft)){let a=this._dragBounding.offsetLeft+this._dragBounding.offsetWidth-this._popup.offsetWidth;this.collision_left(a)&&(a=this._dragBounding.offsetLeft),this.renderer2.setStyle(this._popup,"left",a+"px")}if(this.collision_bottom(this._popup.offsetTop)){let a=this._dragBounding.offsetTop+this._dragBounding.offsetHeight-this._popup.offsetHeight;this.collision_top(a)&&(a=this._dragBounding.offsetTop),this.renderer2.setStyle(this._popup,"top",a+"px")}})})}static getBoarderCollision(e,n,t,r=7){return e>=0&&e<=r?n>=0&&n<=r?"top-left":n>=t.offsetHeight-r&&n<=t.offsetHeight?"bottom-left":"left":n>=0&&n<=r?e>=t.offsetWidth-r&&e<=t.offsetWidth?"top-right":"top":n>=t.offsetHeight-r&&n<=t.offsetHeight?e>=t.offsetWidth-r&&e<=t.offsetWidth?"bottom-right":"bottom":e>=t.offsetWidth-r&&e<=t.offsetWidth?"right":null}pointerOver(e){if(!this._currentlyDragging){if(e.target===this._header){this.renderer2.setStyle(this._popup,"cursor","move");return}switch(i.getBoarderCollision(e.offsetX,e.offsetY,this._popup)){case"top":this.renderer2.setStyle(this._popup,"cursor","n-resize");break;case"right":this.renderer2.setStyle(this._popup,"cursor","e-resize");break;case"bottom":this.renderer2.setStyle(this._popup,"cursor","s-resize");break;case"left":this.renderer2.setStyle(this._popup,"cursor","w-resize");break;case"bottom-left":this.renderer2.setStyle(this._popup,"cursor","sw-resize");break;case"bottom-right":this.renderer2.setStyle(this._popup,"cursor","se-resize"),this._popup.style.cursor="se-resize";break;case"top-left":this.renderer2.setStyle(this._popup,"cursor","nw-resize");break;case"top-right":this.renderer2.setStyle(this._popup,"cursor","ne-resize");break}}}mouseMove(e){if(this._currentlyDragging){let n=e.screenX-this._draggingPos[0],t=e.screenY-this._draggingPos[1];this._draggingPos=[e.screenX,e.screenY];let r=this._popup.offsetLeft+n,o=this._popup.offsetTop+t;switch(this._currentlyDragging){case"move":!this.collision_left(r)&&!this.collision_right(r)&&this.renderer2.setStyle(this._popup,"left",r+"px"),!this.collision_bottom(o)&&!this.collision_top(o)&&this.renderer2.setStyle(this._popup,"top",o+"px");break;case"top-left":this.collision_top(o,t)||(this.renderer2.setStyle(this._popup,"top",o+"px"),this.renderer2.setStyle(this._popup,"height",this._popup.offsetHeight-t+"px")),this.collision_left(r,n)||(this.renderer2.setStyle(this._popup,"left",r+"px"),this.renderer2.setStyle(this._popup,"width",this._popup.offsetWidth-n+"px")),this._changeSubject.next();break;case"top-right":this.collision_top(o,t)||(this.renderer2.setStyle(this._popup,"top",o+"px"),this.renderer2.setStyle(this._popup,"height",this._popup.offsetHeight-t+"px")),this.collision_right(r,n)||this.renderer2.setStyle(this._popup,"width",this._popup.offsetWidth+n+"px"),this._changeSubject.next();break;case"bottom-left":this.collision_bottom(o,t)||this.renderer2.setStyle(this._popup,"height",this._popup.offsetHeight+t+"px"),this.collision_left(r,n)||(this.renderer2.setStyle(this._popup,"left",r+"px"),this.renderer2.setStyle(this._popup,"width",this._popup.offsetWidth-n+"px")),this._changeSubject.next();break;case"bottom-right":this.collision_bottom(o,t)||this.renderer2.setStyle(this._popup,"height",this._popup.offsetHeight+t+"px"),this.collision_right(r,n)||this.renderer2.setStyle(this._popup,"width",this._popup.offsetWidth+n+"px"),this._changeSubject.next();break;case"top":this.collision_top(o,t)||(this.renderer2.setStyle(this._popup,"top",o+"px"),this.renderer2.setStyle(this._popup,"height",this._popup.offsetHeight-t+"px"),this._changeSubject.next());break;case"right":this.collision_right(r,n)||(this.renderer2.setStyle(this._popup,"width",this._popup.offsetWidth+n+"px"),this._changeSubject.next());break;case"bottom":this.collision_bottom(o,t)||(this.renderer2.setStyle(this._popup,"height",this._popup.offsetHeight+t+"px"),this._changeSubject.next());break;case"left":this.collision_left(r,n)||(this.renderer2.setStyle(this._popup,"left",r+"px"),this.renderer2.setStyle(this._popup,"width",this._popup.offsetWidth-n+"px"),this._changeSubject.next());break}}}collision_left(e,n){return e<=this._dragBounding.offsetLeft||n&&(this._popup.offsetWidth-n<this._minSize.x||this._popup.offsetWidth-n>this._maxSize.x)}collision_right(e,n){return e+this._popup.offsetWidth>=this._dragBounding.offsetLeft+this._dragBounding.offsetWidth||n&&(this._popup.offsetWidth+n<this._minSize.x||this._popup.offsetWidth+n>this._maxSize.x)}collision_top(e,n){return e<=this._dragBounding.offsetTop||n&&(this._popup.offsetHeight-n<this._minSize.y||this._popup.offsetHeight-n>this._maxSize.y)}collision_bottom(e,n){return e+this._popup.offsetHeight>=this._dragBounding.offsetTop+this._dragBounding.offsetHeight||n&&(this._popup.offsetHeight+n<this._minSize.y||this._popup.offsetHeight+n>this._maxSize.y)}mouseDown(e){if(e.button!==0)return;let n=i.getBoarderCollision(e.offsetX,e.offsetY,this._popup);n?(this._currentlyDragging=n,this._draggingPos=[e.screenX,e.screenY]):e.target===this._header&&(this._currentlyDragging="move",this._draggingPos=[e.screenX,e.screenY])}get onChange$(){return this._changeSubject.asObservable().pipe(xe(this._destroySubject))}mouseUp(){this._currentlyDragging=void 0}destroy(){this._destroySubject.next(),this._destroySubject.unsubscribe()}};var S4=["popup"],T4=["canvasContainer"],A4=["componentContainer"],D4=["componentInsertionPoint"],k4=["header"];function N4(i,e){i&1&&(v(0,"span"),O(1,"\u2192"),y())}function R4(i,e){if(i&1){let n=le();st(0),v(1,"p",15),T("click",function(){let o=H(n).index,s=A();return W(s.inspectParentElement(o))}),O(2),y(),J(3,N4,2,0,"span",16),at()}if(i&2){let n=e.$implicit,t=e.last;g(2),K(n),g(1),w("ngIf",!t)}}function F4(i,e){if(i&1){let n=le();v(0,"img",17),T("click",function(){H(n);let r=A();return W(r.doRequestHide())}),y()}}function L4(i,e){if(i&1){let n=le();v(0,"img",18),T("click",function(){H(n);let r=A();return W(r.doRequestHide())}),y()}}var sS=(()=>{let e=class e extends Xp{constructor(t,r,o,s,a,l){super(),this.renderer2=t,this.ngZone=r,this.themingService=o,this.elementProvider=s,this.componentFactoryResolver=a,this.translate=l,this.requestHide=new Me,this.requestOnTop=new Me}ngOnInit(){this.ngZone.runOutsideAngular(()=>$(this,null,function*(){this.preventContextMenu(this._pixiCanvasContainer,this.renderer2),this.initZoomPan(this._pixiCanvasContainer),this.initPixi(this._pixiCanvasContainer,this.renderer2)}))}ngOnChanges(t){if(t.showing&&(this.showing?this.show():this.hide()),t.identifier&&this.ticker.removeTickerFunction(t.identifier.previousValue),t.identifier&&this.showing){if(this._activeView&&(this._activeView.destroy(),delete this._activeView,this._pixiRenderer._lastObjectRendered=null),this._componentRef&&(this._componentRef.destroy(),delete this._componentRef),this.project)this.renderer2.setStyle(this._componentContainer.nativeElement,"display","none"),this.renderer2.setStyle(this._pixiCanvasContainer.nativeElement,"display","block"),this._pixiRenderer.resize(this._pixiCanvasContainer.nativeElement.offsetWidth,this._pixiCanvasContainer.nativeElement.offsetHeight),this.ngZone.runOutsideAngular(()=>this.addTickerFunction()),this._activeView=new fl(this.project,this._pixiCanvasContainer.nativeElement,()=>this.ticker.singleFrame(this.identifier),this.requestInspectElementInSim,this.identifier,this.parentNames,this.parentTypeIds),this._activeView.centerView(),this._dragManager&&this._dragManager.destroy(),this._dragManager=new Yc(this.dragBounding,this._popup.nativeElement,this._header.nativeElement,this.renderer2),this._dragManager.onChange$.subscribe(()=>{this._pixiRenderer.resize(this._pixiCanvasContainer.nativeElement.offsetWidth,this._pixiCanvasContainer.nativeElement.offsetHeight),this._activeView.updateChunks(),this._activeView.requestSingleFrame()});else if(this.sprite){this.renderer2.setStyle(this._componentContainer.nativeElement,"display","block"),this.renderer2.setStyle(this._pixiCanvasContainer.nativeElement,"display","none");let r=this.elementProvider.getElementById(this.sprite.element.typeId).elementInspectionComp,o=this.componentFactoryResolver.resolveComponentFactory(r);this._componentRef=this._componentInsertionPoint.createComponent(o),this._componentRef.instance.sprite=this.sprite,this._dragManager&&this._dragManager.destroy(),this.renderer2.setStyle(this._popup.nativeElement,"width","630px"),this.renderer2.setStyle(this._popup.nativeElement,"height","500px"),this._dragManager=new Yc(this.dragBounding,this._popup.nativeElement,this._header.nativeElement,this.renderer2,new R(630,200),new R(630,1e3))}}}getIdentifier(){return this.identifier}get theme(){return this.themingService.currentTheme}doRequestHide(){this.requestHide.emit()}doRequestOnTop(){this.requestOnTop.next()}hide(){this.renderer2.setStyle(this._popup.nativeElement,"display","none"),this._dragManager&&(this._dragManager.destroy(),delete this._dragManager),this._activeView&&(this._activeView.destroy(),delete this._activeView,this._pixiRenderer._lastObjectRendered=null),this._componentRef&&(this._componentRef.destroy(),delete this._componentRef)}show(){this.renderer2.setStyle(this._popup.nativeElement,"display","block"),this.project&&this._pixiRenderer.resize(this._pixiCanvasContainer.nativeElement.offsetWidth,this._pixiCanvasContainer.nativeElement.offsetHeight)}get headerNames(){if(!this.parentNames)return[];let t;return this.project?t=this.project.name:t=this.translate.instant(this.elementProvider.getElementById(this.sprite.element.typeId).name),[...this.parentNames,t]}inspectParentElement(t){if(this.parentNames.length===t)return;let r=this.identifier.split(":").slice(0,2+t);this.requestInspectElementInSim.emit({identifier:r.join(":"),typeId:this.parentTypeIds[t],parentNames:this.parentNames.splice(0,t),parentTypeIds:this.parentTypeIds.slice(0,t)})}};e.\u0275fac=function(r){return new(r||e)(x(Mn),x(ye),x(Re),x(be),x(xn),x(yn))},e.\u0275cmp=ie({type:e,selectors:[["app-window-work-area"]],viewQuery:function(r,o){if(r&1&&(et(S4,7),et(T4,7),et(A4,7),et(D4,7,dn),et(k4,7)),r&2){let s;Je(s=tt())&&(o._popup=s.first),Je(s=tt())&&(o._pixiCanvasContainer=s.first),Je(s=tt())&&(o._componentContainer=s.first),Je(s=tt())&&(o._componentInsertionPoint=s.first),Je(s=tt())&&(o._header=s.first)}},inputs:{project:"project",sprite:"sprite",projectChange:"projectChange",identifier:"identifier",parentNames:"parentNames",parentTypeIds:"parentTypeIds",dragBounding:"dragBounding",showing:"showing",zIndex:"zIndex"},outputs:{requestHide:"requestHide",requestOnTop:"requestOnTop"},features:[ke,cn],decls:16,vars:5,consts:[[1,"collision-box",3,"mousedown"],["popup",""],[1,"window-container"],[1,"header"],[1,"identifier-string"],[4,"ngFor","ngForOf"],[1,"drag-header"],["header",""],["src","assets/icons/light/close.svg","alt","close","tabindex","0",3,"click",4,"ngIf"],["src","assets/icons/dark/close.svg","alt","close","tabindex","0",3,"click",4,"ngIf"],[1,"canvas-window-container"],["canvasContainer",""],[1,"component-window-container"],["componentContainer",""],["componentInsertionPoint",""],["tabindex","0",3,"click"],[4,"ngIf"],["src","assets/icons/light/close.svg","alt","close","tabindex","0",3,"click"],["src","assets/icons/dark/close.svg","alt","close","tabindex","0",3,"click"]],template:function(r,o){r&1&&(v(0,"div",0,1),T("mousedown",function(){return o.doRequestOnTop()}),v(2,"div",2)(3,"div",3)(4,"div",4),J(5,R4,4,2,"ng-container",5),y(),q(6,"div",6,7),J(8,F4,1,0,"img",8)(9,L4,1,0,"img",9),y(),q(10,"div",10,11),v(12,"div",12,13),Hi(14,null,14),y()()()),r&2&&(Xr("z-index",o.zIndex),g(5),w("ngForOf",o.headerNames),g(3),w("ngIf",o.theme==="light"),g(1),w("ngIf",o.theme==="dark"))},dependencies:[sn,Be],styles:[".collision-box[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;width:500px;height:300px;padding:5px;position:fixed;bottom:100px;right:10px;display:none}.theme-light[_nghost-%COMP%]   .collision-box[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .collision-box[_ngcontent-%COMP%]{background-color:#0000}.theme-dark[_nghost-%COMP%]   .collision-box[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .collision-box[_ngcontent-%COMP%]{background-color:#0000}.collision-box[_ngcontent-%COMP%]   .window-container[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:.1rem}.theme-light[_nghost-%COMP%]   .collision-box[_ngcontent-%COMP%]   .window-container[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .collision-box[_ngcontent-%COMP%]   .window-container[_ngcontent-%COMP%]{background-color:#f5f5f5;border:1px solid #d1d1d1}.theme-dark[_nghost-%COMP%]   .collision-box[_ngcontent-%COMP%]   .window-container[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .collision-box[_ngcontent-%COMP%]   .window-container[_ngcontent-%COMP%]{background-color:#262a2b;border:1px solid #3a4042}.collision-box[_ngcontent-%COMP%]   .window-container[_ngcontent-%COMP%]   .canvas-window-container[_ngcontent-%COMP%]{width:100%;height:calc(100% - 2rem);cursor:crosshair}.collision-box[_ngcontent-%COMP%]   .window-container[_ngcontent-%COMP%]   .component-window-container[_ngcontent-%COMP%]{width:100%;height:calc(100% - 2rem);cursor:default}.collision-box[_ngcontent-%COMP%]   .window-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;width:100%;height:2rem;text-align:center;font-size:1.2rem;font-weight:700;justify-content:space-between;padding-bottom:2px;align-items:center}.theme-light[_nghost-%COMP%]   .collision-box[_ngcontent-%COMP%]   .window-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .collision-box[_ngcontent-%COMP%]   .window-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{background-color:#d1d1d1;color:#000}.theme-dark[_nghost-%COMP%]   .collision-box[_ngcontent-%COMP%]   .window-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .collision-box[_ngcontent-%COMP%]   .window-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{background-color:#3a4042;color:#ccc}.collision-box[_ngcontent-%COMP%]   .window-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .identifier-string[_ngcontent-%COMP%]{margin:0 0 0 .3rem;display:flex;flex-direction:row;cursor:auto}.collision-box[_ngcontent-%COMP%]   .window-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .identifier-string[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;line-height:2rem;cursor:pointer}.collision-box[_ngcontent-%COMP%]   .window-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .identifier-string[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{line-height:2rem;margin:0 .25rem}.collision-box[_ngcontent-%COMP%]   .window-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .drag-header[_ngcontent-%COMP%]{flex-grow:1;height:2rem}.collision-box[_ngcontent-%COMP%]   .window-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:.11rem;border-radius:.25rem;width:1.3rem;height:1.3rem;cursor:auto}.theme-light[_nghost-%COMP%]   .collision-box[_ngcontent-%COMP%]   .window-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover, .theme-light   [_nghost-%COMP%]   .collision-box[_ngcontent-%COMP%]   .window-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{background-color:#fff}.theme-dark[_nghost-%COMP%]   .collision-box[_ngcontent-%COMP%]   .window-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover, .theme-dark   [_nghost-%COMP%]   .collision-box[_ngcontent-%COMP%]   .window-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{background-color:#3e4446}"],changeDetection:0});let i=e;return i})();function B4(i,e){i&1&&q(0,"img",11)}function V4(i,e){i&1&&q(0,"img",12)}function U4(i,e){if(i&1&&(v(0,"p"),O(1),M(2,"translate"),y()),i&2){let n=A(2).ngIf;g(1),K(E(2,1,n[0]))}}var z4=i=>({amount:i});function H4(i,e){if(i&1&&(v(0,"p"),O(1),M(2,"translate"),y()),i&2){let n=A(2).ngIf;g(1),U(" ",xo(2,1,"STATUS_BAR.PROCESSES_RUNNING",_w(4,z4,n.length))," ")}}function W4(i,e){i&1&&q(0,"img",11)}function G4(i,e){i&1&&q(0,"img",12)}function X4(i,e){if(i&1&&(v(0,"div",15),J(1,W4,1,0,"img",8)(2,G4,1,0,"img",9),v(3,"p"),O(4),M(5,"translate"),y()()),i&2){let n=e.$implicit,t=A(4);g(1),w("ngIf",t.currTheme==="light"),g(1),w("ngIf",t.currTheme==="dark"),g(2),K(E(5,3,n))}}function q4(i,e){if(i&1&&(v(0,"div",13),J(1,X4,6,5,"div",14),y()),i&2){let n=A(2).ngIf;g(1),w("ngForOf",n)}}function Y4(i,e){if(i&1){let n=le();v(0,"div",7),T("click",function(r){H(n);let o=A().ngIf,s=A();return W(s.loadingClick(r,o))}),J(1,B4,1,0,"img",8)(2,V4,1,0,"img",9)(3,U4,3,3,"p",3)(4,H4,3,6,"p",3)(5,q4,2,1,"div",10),y()}if(i&2){let n=A().ngIf,t=A();Ve("showing-all-tasks",t.showingAllTasks),g(1),w("ngIf",t.currTheme==="light"),g(1),w("ngIf",t.currTheme==="dark"),g(1),w("ngIf",n.length===1),g(1),w("ngIf",n.length>1),g(1),w("ngIf",t.showingAllTasks)}}function Z4(i,e){if(i&1&&(st(0),J(1,Y4,6,7,"div",6),at()),i&2){let n=e.ngIf;g(1),w("ngIf",n.length>=1)}}function $4(i,e){i&1&&(v(0,"p",2),O(1),M(2,"translate"),y()),i&2&&(g(1),U(" ",E(2,1,"STATUS_BAR.UNSAVED")," "))}function K4(i,e){i&1&&(v(0,"p",2),O(1),M(2,"translate"),y()),i&2&&(g(1),K(E(2,1,"STATUS_BAR.SAVED")))}var aS=(()=>{let e=class e{constructor(t,r,o,s,a){this.selectionService=t,this.projectsService=r,this.workMode=o,this.loadingService=s,this.themingService=a,this.showingAllTasks=!1}get selected(){return this.selectionService.selectedIds().length}get isSaved(){return this.projectsService.currProject?!this.projectsService.currProject.saveDirty:!0}get workModeDescription$(){return this.workMode.workModeDescription$}get currTheme(){return this.themingService.currentTheme}get tasks$(){return this.loadingService.tasks$.pipe(Au(t=>{t.length<=1&&this.closeAllTasks()}))}loadingClick(t,r){r.length<=1||(this.showingAllTasks=!0,t.stopPropagation(),this.addCloseTasksListener())}addCloseTasksListener(){this.closeTasksSubscription||(this.closeTasksSubscription=ut(window,"mousedown").subscribe(()=>this.closeAllTasks()))}closeAllTasks(){this.showingAllTasks=!1,this.closeTasksSubscription?.unsubscribe(),delete this.closeTasksSubscription}};e.\u0275fac=function(r){return new(r||e)(x(Si),x(We),x(mn),x(Ii),x(Re))},e.\u0275cmp=ie({type:e,selectors:[["app-status-bar"]],decls:15,vars:12,consts:[[1,"status-bar"],[1,"division"],[1,"padding"],[4,"ngIf"],[1,"divider"],["class","padding",4,"ngIf"],["class","loading-in-bar padding","tabindex","0",3,"showing-all-tasks","click",4,"ngIf"],["tabindex","0",1,"loading-in-bar","padding",3,"click"],["src","assets/icons/light/loading.svg","alt","loading",4,"ngIf"],["src","assets/icons/dark/loading.svg","alt","loading",4,"ngIf"],["class","all-tasks",4,"ngIf"],["src","assets/icons/light/loading.svg","alt","loading"],["src","assets/icons/dark/loading.svg","alt","loading"],[1,"all-tasks"],["class","task",4,"ngFor","ngForOf"],[1,"task"]],template:function(r,o){r&1&&(v(0,"div",0)(1,"div",1)(2,"p",2),O(3),M(4,"async"),y()(),v(5,"div",1),J(6,Z4,2,1,"ng-container",3),M(7,"async"),q(8,"div",4),J(9,$4,3,3,"p",5)(10,K4,3,3,"p",5),q(11,"div",4),v(12,"p",2),O(13),M(14,"translate"),y()()()),r&2&&(g(3),K(E(4,6,o.workModeDescription$)),g(3),w("ngIf",E(7,8,o.tasks$)),g(3),w("ngIf",!o.isSaved),g(1),w("ngIf",o.isSaved),g(3),zg(" ",E(14,10,"STATUS_BAR.SELECTED"),": ",o.selected," "))},dependencies:[sn,Be,Mo,Pe],styles:[".status-bar[_ngcontent-%COMP%]{height:22px;width:100%;display:flex;justify-content:space-between;align-items:center;font-size:90%}.theme-light[_nghost-%COMP%]   .status-bar[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .status-bar[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#000;border-top:1px solid #d1d1d1}.theme-dark[_nghost-%COMP%]   .status-bar[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .status-bar[_ngcontent-%COMP%]{background-color:#262a2b;color:#ccc;border-top:1px solid #3a4042}.status-bar[_ngcontent-%COMP%]   .division[_ngcontent-%COMP%]{display:flex;align-items:center;height:100%}.status-bar[_ngcontent-%COMP%]   .division[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{height:100%}.theme-light[_nghost-%COMP%]   .status-bar[_ngcontent-%COMP%]   .division[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .status-bar[_ngcontent-%COMP%]   .division[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{border-left:1px solid #d1d1d1}.theme-dark[_nghost-%COMP%]   .status-bar[_ngcontent-%COMP%]   .division[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .status-bar[_ngcontent-%COMP%]   .division[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{border-left:1px solid #3a4042}.status-bar[_ngcontent-%COMP%]   .division[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.status-bar[_ngcontent-%COMP%]   .division[_ngcontent-%COMP%]   .padding[_ngcontent-%COMP%]{padding:0 .5rem}.status-bar[_ngcontent-%COMP%]   .loading-in-bar[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center;cursor:pointer;position:relative}.status-bar[_ngcontent-%COMP%]   .loading-in-bar[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-left:.25rem}.status-bar[_ngcontent-%COMP%]   .loading-in-bar[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{height:100%;padding:.25rem 0}.theme-light[_nghost-%COMP%]   .status-bar[_ngcontent-%COMP%]   .loading-in-bar[_ngcontent-%COMP%]:not(.showing-all-tasks):hover, .theme-light   [_nghost-%COMP%]   .status-bar[_ngcontent-%COMP%]   .loading-in-bar[_ngcontent-%COMP%]:not(.showing-all-tasks):hover{background-color:#fff}.theme-dark[_nghost-%COMP%]   .status-bar[_ngcontent-%COMP%]   .loading-in-bar[_ngcontent-%COMP%]:not(.showing-all-tasks):hover, .theme-dark   [_nghost-%COMP%]   .status-bar[_ngcontent-%COMP%]   .loading-in-bar[_ngcontent-%COMP%]:not(.showing-all-tasks):hover{background-color:#1a1a1a}.status-bar[_ngcontent-%COMP%]   .loading-in-bar[_ngcontent-%COMP%]   .all-tasks[_ngcontent-%COMP%]{position:absolute;right:-1px;bottom:22px;z-index:100;cursor:default}.status-bar[_ngcontent-%COMP%]   .loading-in-bar[_ngcontent-%COMP%]   .all-tasks[_ngcontent-%COMP%]   .task[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.25rem .5rem .25rem .25rem}.theme-light[_nghost-%COMP%]   .status-bar[_ngcontent-%COMP%]   .loading-in-bar[_ngcontent-%COMP%]   .all-tasks[_ngcontent-%COMP%]   .task[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .status-bar[_ngcontent-%COMP%]   .loading-in-bar[_ngcontent-%COMP%]   .all-tasks[_ngcontent-%COMP%]   .task[_ngcontent-%COMP%]{background-color:#f5f5f5;border-top:1px solid #d1d1d1;border-left:1px solid #d1d1d1;border-right:1px solid #d1d1d1}.theme-dark[_nghost-%COMP%]   .status-bar[_ngcontent-%COMP%]   .loading-in-bar[_ngcontent-%COMP%]   .all-tasks[_ngcontent-%COMP%]   .task[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .status-bar[_ngcontent-%COMP%]   .loading-in-bar[_ngcontent-%COMP%]   .all-tasks[_ngcontent-%COMP%]   .task[_ngcontent-%COMP%]{background-color:#262a2b;border-top:1px solid #3a4042;border-left:1px solid #3a4042;border-right:1px solid #3a4042}.status-bar[_ngcontent-%COMP%]   .loading-in-bar[_ngcontent-%COMP%]   .all-tasks[_ngcontent-%COMP%]   .task[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-left:.25rem;white-space:nowrap}.status-bar[_ngcontent-%COMP%]   .loading-in-bar[_ngcontent-%COMP%]   .all-tasks[_ngcontent-%COMP%]   .task[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}"]});let i=e;return i})();var J4=["windowDragBounding"];function e5(i,e){if(i&1){let n=le();v(0,"app-window-work-area",5),T("requestHide",function(){let o=H(n).index,s=A();return W(s.requestHide(o))})("requestOnTop",function(){let o=H(n).index,s=A();return W(s.setOnTop(o))})("requestInspectElementInSim",function(r){let s=H(n).index,a=A();return W(a.onRequestElementInspection(r,s))}),y()}if(i&2){let n=e.$implicit;A();let t=ii(2);w("dragBounding",t)("project",n.project)("sprite",n.sprite)("identifier",n.identifier)("parentNames",n.parentNames)("parentTypeIds",n.parentTypesIds)("showing",n.showing)("zIndex",n.zIndex)}}var lS=(()=>{let e=class e{constructor(t,r,o,s,a,l,c){this.projectSaveManagement=t,this.cdr=r,this.workMode=o,this.renderer2=s,this.errorHandling=a,this.tutorialService=l,this.elementProvider=c,this.windowWorkAreas=[{showing:!1},{showing:!1}]}ngOnInit(){this.workMode.isSimulationMode$.subscribe(t=>{t?this.renderer2.setStyle(this.workAreaContainer.nativeElement,"width","100vw"):(this.renderer2.removeStyle(this.workAreaContainer.nativeElement,"width"),this.windowWorkAreas.forEach(r=>{r.identifier=null,r.showing=!1}),this.cdr.detectChanges())}),this.errorHandling.setToastrContainer(this.toastContainer),this.tutorialService.startTutorial("gettingStarted")}onRequestElementInspection(t,r){return $(this,null,function*(){if(this.windowWorkAreas.find(s=>s.identifier===t.identifier))return;let o={showing:!0,identifier:t.identifier,parentNames:t.parentNames,parentTypesIds:t.parentTypeIds,zIndex:1};if(this.elementProvider.canInspectWithPopup(t.typeId)?o.sprite=t.sprite:o.project=yield this.projectSaveManagement.getComponent(t.typeId),this.moveAllBack(),r===void 0){o.parentNames.shift(),o.parentTypesIds.shift();let s=this.windowWorkAreas.find(a=>!a.showing);s||(s=this.windowWorkAreas[0]),s.showing=o.showing,s.identifier=o.identifier,s.project=o.project,s.sprite=o.sprite,s.parentNames=o.parentNames,s.parentTypesIds=o.parentTypesIds,s.zIndex=o.zIndex,this.cdr.detectChanges();return}this.windowWorkAreas[r].showing=o.showing,this.windowWorkAreas[r].identifier=o.identifier,this.windowWorkAreas[r].project=o.project,this.windowWorkAreas[r].sprite=o.sprite,this.windowWorkAreas[r].parentNames=o.parentNames,this.windowWorkAreas[r].parentTypesIds=o.parentTypesIds,this.windowWorkAreas[r].zIndex=o.zIndex,this.cdr.detectChanges()})}moveAllBack(){for(let t=0;t<this.windowWorkAreas.length;t++)this.windowWorkAreas[t].zIndex=0}setOnTop(t){this.moveAllBack(),this.windowWorkAreas[t].zIndex=1}requestHide(t){this.windowWorkAreas[t].showing=!1,this.windowWorkAreas[t].identifier=null,this.cdr.detectChanges()}};e.\u0275fac=function(r){return new(r||e)(x(Ei),x(Zt),x(mn),x(Mn),x(Sn),x(Lp),x(be))},e.\u0275cmp=ie({type:e,selectors:[["app-work-area-container"]],viewQuery:function(r,o){if(r&1&&(et(J4,7),et(hp,7)),r&2){let s;Je(s=tt())&&(o.workAreaContainer=s.first),Je(s=tt())&&(o.toastContainer=s.first)}},decls:6,vars:1,consts:[[1,"work-area-status-bar-container"],["toastContainer","",1,"work-area-container"],["windowDragBounding",""],[3,"requestInspectElementInSim"],[3,"dragBounding","project","sprite","identifier","parentNames","parentTypeIds","showing","zIndex","requestHide","requestOnTop","requestInspectElementInSim",4,"ngFor","ngForOf"],[3,"dragBounding","project","sprite","identifier","parentNames","parentTypeIds","showing","zIndex","requestHide","requestOnTop","requestInspectElementInSim"]],template:function(r,o){r&1&&(v(0,"div",0)(1,"div",1,2)(3,"app-work-area",3),T("requestInspectElementInSim",function(a){return o.onRequestElementInspection(a)}),y(),J(4,e5,1,8,"app-window-work-area",4),y(),q(5,"app-status-bar"),y()),r&2&&(g(4),w("ngForOf",o.windowWorkAreas))},dependencies:[sn,hp,oS,sS,aS],styles:[".work-area-status-bar-container[_ngcontent-%COMP%]{height:calc(100vh - 95px);display:flex;flex-direction:column}.work-area-status-bar-container[_ngcontent-%COMP%]   .work-area-container[_ngcontent-%COMP%]{width:calc(100vw - 16rem);height:calc(100vh - 117px);position:relative}"]});let i=e;return i})();var n5=["appRoot"];function i5(i,e){i&1&&q(0,"app-construction-box")}function r5(i,e){if(i&1&&q(0,"app-settings-info-box",5),i&2){let n=A();w("selectedElemTypeId",n.selectedElemTypeId)("selectedCompId",n.selectedCompId)}}var cS=(()=>{let e=class e{constructor(t,r,o,s,a,l,c,u,d,h,p){this.ngZone=t,this.workMode=r,this.selection=o,this.shortcutsService=s,this.projects=a,this.editorInteractionService=l,this.document=c,this.translate=u,this.elementProviderService=d,this.locationService=h,this.storage=p,this._destroySubject=new _e,this.initTranslation()}ngOnInit(){this.locationService.isValidPath||this.locationService.reset(),this.document.documentElement.lang=this.translate.currentLang,this.ngZone.runOutsideAngular(()=>{this.listenToShortcuts(),this.editorInteractionService.subscribeEditorAction(9).pipe(xe(this._destroySubject)).subscribe(()=>this.onRequestFullscreen())}),ut(window,"beforeunload").pipe(xe(this._destroySubject)).subscribe(t=>this.onTabClose(t))}ngAfterViewInit(){Vx({language:{default:"en",autoDetect:"document",translations:{en:"/cookieconsent/en.json",de:"/cookieconsent/de.json",es:"/cookieconsent/es.json",fr:"/cookieconsent/fr.json"}},categories:{necessary:{enabled:!0,readOnly:!0},analytics:{}},cookie:{expiresAfterDays:365},guiOptions:{consentModal:{layout:"bar",equalWeightButtons:!1},preferencesModal:{equalWeightButtons:!1}}}).catch(t=>console.error(t))}listenToShortcuts(){ut(this.document,"keydown").pipe(xe(this._destroySubject)).subscribe(t=>{this.shortcutsService.keyDownListener(t)})}get isSimulationMode(){return this.workMode.currentWorkMode===7}get showSettingsInfoBox(){let t=this.selectedElemTypeId;return t===void 0?!1:this.elementProviderService.getElementById(t).showSettings}get selectedElemTypeId(){if(this.workMode.currentWorkMode===3)return this.workMode.currentComponentToBuild;{let t=this.selection.selectedIds();if(!t||t.length===0||t.length>1)return;let r=this.projects.currProject.currState.getElementById(t[0]);return r?r.typeId:void 0}}get selectedCompId(){if(!(!this.selection.selectedIds()||this.workMode.currentWorkMode===3))return this.selection.selectedIds()[0]}onRequestFullscreen(){let t=this.appRoot.nativeElement;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()}onTabClose(t){C.production&&this.projects.hasUnsavedProjects&&(t.preventDefault(),t.returnValue=!0)}onDragStart(t){t.preventDefault(),t.stopPropagation()}onDragStop(t){t.preventDefault(),t.stopPropagation()}onFileDrop(t){t.preventDefault(),t.stopPropagation(),t.dataTransfer?.files&&t.dataTransfer.files.length>0&&this.editorInteractionService.openProjectFile(t.dataTransfer.files[0])}initTranslation(){this.translate.addLangs(["en","de"]);let t=this.storage.get("preferences")?.lang;t?(this.translate.setDefaultLang(t),this.translate.use(t)):(this.translate.setDefaultLang("en"),this.translate.use("en")),this.translate.onLangChange.subscribe(r=>{this.storage.set("preferences",Xe(Q({},this.storage.get("preferences")),{lang:r.lang}))})}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)(x(ye),x(mn),x(Si),x(_n),x(We),x(gn),x(Bt),x(yn),x(be),x(rl),x(Xn))},e.\u0275cmp=ie({type:e,selectors:[["app-root"]],viewQuery:function(r,o){if(r&1&&et(n5,7),r&2){let s;Je(s=tt())&&(o.appRoot=s.first)}},decls:8,vars:4,consts:[["id","app-root"],["appRoot",""],[1,"main-area",3,"dragenter","dragstart","dragover","dragend","dragleave","drop"],[4,"ngIf"],[3,"selectedElemTypeId","selectedCompId",4,"ngIf"],[3,"selectedElemTypeId","selectedCompId"]],template:function(r,o){r&1&&(v(0,"div",0,1),q(2,"app-top-bar")(3,"app-toolbar"),v(4,"div",2),T("dragenter",function(a){return o.onDragStart(a)})("dragstart",function(a){return o.onDragStart(a)})("dragover",function(a){return o.onDragStart(a)})("dragend",function(a){return o.onDragStop(a)})("dragleave",function(a){return o.onDragStop(a)})("drop",function(a){return o.onFileDrop(a)}),J(5,i5,1,0,"app-construction-box",3),q(6,"app-work-area-container"),y(),J(7,r5,1,2,"app-settings-info-box",4),y()),r&2&&(g(4),Ve("simulation-mode",o.isSimulationMode),g(1),w("ngIf",!o.isSimulationMode),g(2),w("ngIf",o.showSettingsInfoBox))},dependencies:[Be,OI,EI,TI,nS,lS],styles:["#app-root[_ngcontent-%COMP%]{width:100%;height:100%}#app-root[_ngcontent-%COMP%]   .main-area[_ngcontent-%COMP%]{top:95px;width:100%;height:calc(100% - 95px);display:flex}#app-root[_ngcontent-%COMP%]   .main-area.simulation-mode[_ngcontent-%COMP%]{display:block}"]});let i=e;return i})();function uS(i){return new ne(3e3,!1)}function o5(){return new ne(3100,!1)}function s5(){return new ne(3101,!1)}function a5(i){return new ne(3001,!1)}function l5(i){return new ne(3003,!1)}function c5(i){return new ne(3004,!1)}function u5(i,e){return new ne(3005,!1)}function d5(){return new ne(3006,!1)}function h5(){return new ne(3007,!1)}function p5(i,e){return new ne(3008,!1)}function f5(i){return new ne(3002,!1)}function m5(i,e,n,t,r){return new ne(3010,!1)}function g5(){return new ne(3011,!1)}function _5(){return new ne(3012,!1)}function v5(){return new ne(3200,!1)}function y5(){return new ne(3202,!1)}function C5(){return new ne(3013,!1)}function b5(i){return new ne(3014,!1)}function P5(i){return new ne(3015,!1)}function w5(i){return new ne(3016,!1)}function x5(i,e){return new ne(3404,!1)}function M5(i){return new ne(3502,!1)}function O5(i){return new ne(3503,!1)}function E5(){return new ne(3300,!1)}function I5(i){return new ne(3504,!1)}function S5(i){return new ne(3301,!1)}function T5(i,e){return new ne(3302,!1)}function A5(i){return new ne(3303,!1)}function D5(i,e){return new ne(3400,!1)}function k5(i){return new ne(3401,!1)}function N5(i){return new ne(3402,!1)}function R5(i,e){return new ne(3505,!1)}function $o(i){switch(i.length){case 0:return new Ho;case 1:return i[0];default:return new Fc(i)}}function xS(i,e,n=new Map,t=new Map){let r=[],o=[],s=-1,a=null;if(e.forEach(l=>{let c=l.get("offset"),u=c==s,d=u&&a||new Map;l.forEach((h,p)=>{let f=p,m=h;if(p!=="offset")switch(f=i.normalizePropertyName(f,r),m){case dp:m=n.get(p);break;case Mr:m=t.get(p);break;default:m=i.normalizeStyleValue(p,f,m,r);break}d.set(f,m)}),u||o.push(d),a=d,s=c}),r.length)throw M5(r);return o}function Ty(i,e,n,t){switch(e){case"start":i.onStart(()=>t(n&&cy(n,"start",i)));break;case"done":i.onDone(()=>t(n&&cy(n,"done",i)));break;case"destroy":i.onDestroy(()=>t(n&&cy(n,"destroy",i)));break}}function cy(i,e,n){let t=n.totalTime,r=!!n.disabled,o=Ay(i.element,i.triggerName,i.fromState,i.toState,e||i.phaseName,t??i.totalTime,r),s=i._data;return s!=null&&(o._data=s),o}function Ay(i,e,n,t,r="",o=0,s){return{element:i,triggerName:e,fromState:n,toState:t,phaseName:r,totalTime:o,disabled:!!s}}function _i(i,e,n){let t=i.get(e);return t||i.set(e,t=n),t}function dS(i){let e=i.indexOf(":"),n=i.substring(1,e),t=i.slice(e+1);return[n,t]}var F5=(()=>typeof document>"u"?null:document.documentElement)();function Dy(i){let e=i.parentNode||i.host||null;return e===F5?null:e}function L5(i){return i.substring(1,6)=="ebkit"}var qs=null,hS=!1;function j5(i){qs||(qs=B5()||{},hS=qs.style?"WebkitAppearance"in qs.style:!1);let e=!0;return qs.style&&!L5(i)&&(e=i in qs.style,!e&&hS&&(e="Webkit"+i.charAt(0).toUpperCase()+i.slice(1)in qs.style)),e}function B5(){return typeof document<"u"?document.body:null}function MS(i,e){for(;e;){if(e===i)return!0;e=Dy(e)}return!1}function OS(i,e,n){if(n)return Array.from(i.querySelectorAll(e));let t=i.querySelector(e);return t?[t]:[]}var ky=(()=>{let e=class e{validateStyleProperty(t){return j5(t)}matchesElement(t,r){return!1}containsElement(t,r){return MS(t,r)}getParentElement(t){return Dy(t)}query(t,r,o){return OS(t,r,o)}computeStyle(t,r,o){return o||""}animate(t,r,o,s,a,l=[],c){return new Ho(o,s)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let i=e;return i})(),tu=(()=>{let e=class e{};e.NOOP=new ky;let i=e;return i})(),$s=class{};var V5=1e3,ES="{{",U5="}}",IS="ng-enter",my="ng-leave",Yp="ng-trigger",Jp=".ng-trigger",pS="ng-animating",gy=".ng-animating";function uo(i){if(typeof i=="number")return i;let e=i.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:_y(parseFloat(e[1]),e[2])}function _y(i,e){switch(e){case"s":return i*V5;default:return i}}function ef(i,e,n){return i.hasOwnProperty("duration")?i:z5(i,e,n)}function z5(i,e,n){let t=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,r,o=0,s="";if(typeof i=="string"){let a=i.match(t);if(a===null)return e.push(uS(i)),{duration:0,delay:0,easing:""};r=_y(parseFloat(a[1]),a[2]);let l=a[3];l!=null&&(o=_y(parseFloat(l),a[4]));let c=a[5];c&&(s=c)}else r=i;if(!n){let a=!1,l=e.length;r<0&&(e.push(o5()),a=!0),o<0&&(e.push(s5()),a=!0),a&&e.splice(l,0,uS(i))}return{duration:r,delay:o,easing:s}}function nu(i,e={}){return Object.keys(i).forEach(n=>{e[n]=i[n]}),e}function SS(i){let e=new Map;return Object.keys(i).forEach(n=>{let t=i[n];e.set(n,t)}),e}function H5(i){return i.length?i[0]instanceof Map?i:i.map(e=>SS(e)):[]}function gl(i,e=new Map,n){if(n)for(let[t,r]of n)e.set(t,r);for(let[t,r]of i)e.set(t,r);return e}function kr(i,e,n){e.forEach((t,r)=>{let o=Ny(r);n&&!n.has(r)&&n.set(r,i.style[o]),i.style[o]=t})}function Zs(i,e){e.forEach((n,t)=>{let r=Ny(t);i.style[r]=""})}function Zc(i){return Array.isArray(i)?i.length==1?i[0]:JE(i):i}function W5(i,e,n){let t=e.params||{},r=TS(i);r.length&&r.forEach(o=>{t.hasOwnProperty(o)||n.push(a5(o))})}var vy=new RegExp(`${ES}\\s*(.+?)\\s*${U5}`,"g");function TS(i){let e=[];if(typeof i=="string"){let n;for(;n=vy.exec(i);)e.push(n[1]);vy.lastIndex=0}return e}function Kc(i,e,n){let t=i.toString(),r=t.replace(vy,(o,s)=>{let a=e[s];return a==null&&(n.push(l5(s)),a=""),a.toString()});return r==t?i:r}function tf(i){let e=[],n=i.next();for(;!n.done;)e.push(n.value),n=i.next();return e}var G5=/-+([a-z0-9])/g;function Ny(i){return i.replace(G5,(...e)=>e[1].toUpperCase())}function X5(i,e){return i===0||e===0}function q5(i,e,n){if(n.size&&e.length){let t=e[0],r=[];if(n.forEach((o,s)=>{t.has(s)||r.push(s),t.set(s,o)}),r.length)for(let o=1;o<e.length;o++){let s=e[o];r.forEach(a=>s.set(a,AS(i,a)))}}return e}function gi(i,e,n){switch(e.type){case 7:return i.visitTrigger(e,n);case 0:return i.visitState(e,n);case 1:return i.visitTransition(e,n);case 2:return i.visitSequence(e,n);case 3:return i.visitGroup(e,n);case 4:return i.visitAnimate(e,n);case 5:return i.visitKeyframes(e,n);case 6:return i.visitStyle(e,n);case 8:return i.visitReference(e,n);case 9:return i.visitAnimateChild(e,n);case 10:return i.visitAnimateRef(e,n);case 11:return i.visitQuery(e,n);case 12:return i.visitStagger(e,n);default:throw c5(e.type)}}function AS(i,e){return window.getComputedStyle(i)[e]}var Y5=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),nf=class extends $s{normalizePropertyName(e,n){return Ny(e)}normalizeStyleValue(e,n,t,r){let o="",s=t.toString().trim();if(Y5.has(n)&&t!==0&&t!=="0")if(typeof t=="number")o="px";else{let a=t.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&r.push(u5(e,t))}return s+o}};var rf="*";function Z5(i,e){let n=[];return typeof i=="string"?i.split(/\s*,\s*/).forEach(t=>$5(t,n,e)):n.push(i),n}function $5(i,e,n){if(i[0]==":"){let l=K5(i,n);if(typeof l=="function"){e.push(l);return}i=l}let t=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(t==null||t.length<4)return n.push(P5(i)),e;let r=t[1],o=t[2],s=t[3];e.push(fS(r,s));let a=r==rf&&s==rf;o[0]=="<"&&!a&&e.push(fS(s,r))}function K5(i,e){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(n,t)=>parseFloat(t)>parseFloat(n);case":decrement":return(n,t)=>parseFloat(t)<parseFloat(n);default:return e.push(w5(i)),"* => *"}}var Zp=new Set(["true","1"]),$p=new Set(["false","0"]);function fS(i,e){let n=Zp.has(i)||$p.has(i),t=Zp.has(e)||$p.has(e);return(r,o)=>{let s=i==rf||i==r,a=e==rf||e==o;return!s&&n&&typeof r=="boolean"&&(s=r?Zp.has(i):$p.has(i)),!a&&t&&typeof o=="boolean"&&(a=o?Zp.has(e):$p.has(e)),s&&a}}var DS=":self",Q5=new RegExp(`s*${DS}s*,?`,"g");function kS(i,e,n,t){return new yy(i).build(e,n,t)}var mS="",yy=class{constructor(e){this._driver=e}build(e,n,t){let r=new Cy(n);return this._resetContextStyleTimingState(r),gi(this,Zc(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector=mS,e.collectedStyles=new Map,e.collectedStyles.set(mS,new Map),e.currentTime=0}visitTrigger(e,n){let t=n.queryCount=0,r=n.depCount=0,o=[],s=[];return e.name.charAt(0)=="@"&&n.errors.push(d5()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(n),a.type==0){let l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,o.push(this.visitState(l,n))}),l.name=c}else if(a.type==1){let l=this.visitTransition(a,n);t+=l.queryCount,r+=l.depCount,s.push(l)}else n.errors.push(h5())}),{type:7,name:e.name,states:o,transitions:s,queryCount:t,depCount:r,options:null}}visitState(e,n){let t=this.visitStyle(e.styles,n),r=e.options&&e.options.params||null;if(t.containsDynamicStyles){let o=new Set,s=r||{};if(t.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{TS(l).forEach(c=>{s.hasOwnProperty(c)||o.add(c)})})}),o.size){let a=tf(o.values());n.errors.push(p5(e.name,a))}}return{type:0,name:e.name,style:t,options:r?{params:r}:null}}visitTransition(e,n){n.queryCount=0,n.depCount=0;let t=gi(this,Zc(e.animation),n);return{type:1,matchers:Z5(e.expr,n.errors),animation:t,queryCount:n.queryCount,depCount:n.depCount,options:Ys(e.options)}}visitSequence(e,n){return{type:2,steps:e.steps.map(t=>gi(this,t,n)),options:Ys(e.options)}}visitGroup(e,n){let t=n.currentTime,r=0,o=e.steps.map(s=>{n.currentTime=t;let a=gi(this,s,n);return r=Math.max(r,n.currentTime),a});return n.currentTime=r,{type:3,steps:o,options:Ys(e.options)}}visitAnimate(e,n){let t=nz(e.timings,n.errors);n.currentAnimateTimings=t;let r,o=e.styles?e.styles:Bs({});if(o.type==5)r=this.visitKeyframes(o,n);else{let s=e.styles,a=!1;if(!s){a=!0;let c={};t.easing&&(c.easing=t.easing),s=Bs(c)}n.currentTime+=t.duration+t.delay;let l=this.visitStyle(s,n);l.isEmptyStep=a,r=l}return n.currentAnimateTimings=null,{type:4,timings:t,style:r,options:null}}visitStyle(e,n){let t=this._makeStyleAst(e,n);return this._validateStyleAst(t,n),t}_makeStyleAst(e,n){let t=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)typeof a=="string"?a===Mr?t.push(a):n.errors.push(f5(a)):t.push(SS(a));let o=!1,s=null;return t.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o)){for(let l of a.values())if(l.toString().indexOf(ES)>=0){o=!0;break}}}),{type:6,styles:t,easing:s,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,n){let t=n.currentAnimateTimings,r=n.currentTime,o=n.currentTime;t&&o>0&&(o-=t.duration+t.delay),e.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,l)=>{let c=n.collectedStyles.get(n.currentQuerySelector),u=c.get(l),d=!0;u&&(o!=r&&o>=u.startTime&&r<=u.endTime&&(n.errors.push(m5(l,u.startTime,u.endTime,o,r)),d=!1),o=u.startTime),d&&c.set(l,{startTime:o,endTime:r}),n.options&&W5(a,n.options,n.errors)})})}visitKeyframes(e,n){let t={type:5,styles:[],options:null};if(!n.currentAnimateTimings)return n.errors.push(g5()),t;let r=1,o=0,s=[],a=!1,l=!1,c=0,u=e.steps.map(P=>{let I=this._makeStyleAst(P,n),b=I.offset!=null?I.offset:tz(I.styles),S=0;return b!=null&&(o++,S=I.offset=b),l=l||S<0||S>1,a=a||S<c,c=S,s.push(S),I});l&&n.errors.push(_5()),a&&n.errors.push(v5());let d=e.steps.length,h=0;o>0&&o<d?n.errors.push(y5()):o==0&&(h=r/(d-1));let p=d-1,f=n.currentTime,m=n.currentAnimateTimings,_=m.duration;return u.forEach((P,I)=>{let b=h>0?I==p?1:h*I:s[I],S=b*_;n.currentTime=f+m.delay+S,m.duration=S,this._validateStyleAst(P,n),P.offset=b,t.styles.push(P)}),t}visitReference(e,n){return{type:8,animation:gi(this,Zc(e.animation),n),options:Ys(e.options)}}visitAnimateChild(e,n){return n.depCount++,{type:9,options:Ys(e.options)}}visitAnimateRef(e,n){return{type:10,animation:this.visitReference(e.animation,n),options:Ys(e.options)}}visitQuery(e,n){let t=n.currentQuerySelector,r=e.options||{};n.queryCount++,n.currentQuery=e;let[o,s]=J5(e.selector);n.currentQuerySelector=t.length?t+" "+o:o,_i(n.collectedStyles,n.currentQuerySelector,new Map);let a=gi(this,Zc(e.animation),n);return n.currentQuery=null,n.currentQuerySelector=t,{type:11,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:a,originalSelector:e.selector,options:Ys(e.options)}}visitStagger(e,n){n.currentQuery||n.errors.push(C5());let t=e.timings==="full"?{duration:0,delay:0,easing:"full"}:ef(e.timings,n.errors,!0);return{type:12,animation:gi(this,Zc(e.animation),n),timings:t,options:null}}};function J5(i){let e=!!i.split(/\s*,\s*/).find(n=>n==DS);return e&&(i=i.replace(Q5,"")),i=i.replace(/@\*/g,Jp).replace(/@\w+/g,n=>Jp+"-"+n.slice(1)).replace(/:animating/g,gy),[i,e]}function ez(i){return i?nu(i):null}var Cy=class{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function tz(i){if(typeof i=="string")return null;let e=null;if(Array.isArray(i))i.forEach(n=>{if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}});else if(i instanceof Map&&i.has("offset")){let n=i;e=parseFloat(n.get("offset")),n.delete("offset")}return e}function nz(i,e){if(i.hasOwnProperty("duration"))return i;if(typeof i=="number"){let o=ef(i,e).duration;return uy(o,0,"")}let n=i;if(n.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=uy(0,0,"");return o.dynamic=!0,o.strValue=n,o}let r=ef(n,e);return uy(r.duration,r.delay,r.easing)}function Ys(i){return i?(i=nu(i),i.params&&(i.params=ez(i.params))):i={},i}function uy(i,e,n){return{duration:i,delay:e,easing:n}}function Ry(i,e,n,t,r,o,s=null,a=!1){return{type:1,element:i,keyframes:e,preStyleProps:n,postStyleProps:t,duration:r,delay:o,totalTime:r+o,easing:s,subTimeline:a}}var Qc=class{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,n){let t=this._map.get(e);t||this._map.set(e,t=[]),t.push(...n)}has(e){return this._map.has(e)}clear(){this._map.clear()}},iz=1,rz=":enter",oz=new RegExp(rz,"g"),sz=":leave",az=new RegExp(sz,"g");function NS(i,e,n,t,r,o=new Map,s=new Map,a,l,c=[]){return new by().buildKeyframes(i,e,n,t,r,o,s,a,l,c)}var by=class{buildKeyframes(e,n,t,r,o,s,a,l,c,u=[]){c=c||new Qc;let d=new Py(e,n,c,r,o,u,[]);d.options=l;let h=l.delay?uo(l.delay):0;d.currentTimeline.delayNextStep(h),d.currentTimeline.setStyles([s],null,d.errors,l),gi(this,t,d);let p=d.timelines.filter(f=>f.containsAnimation());if(p.length&&a.size){let f;for(let m=p.length-1;m>=0;m--){let _=p[m];if(_.element===n){f=_;break}}f&&!f.allowOnlyTimelineStyles()&&f.setStyles([a],null,d.errors,l)}return p.length?p.map(f=>f.buildKeyframes()):[Ry(n,[],[],[],0,h,"",!1)]}visitTrigger(e,n){}visitState(e,n){}visitTransition(e,n){}visitAnimateChild(e,n){let t=n.subInstructions.get(n.element);if(t){let r=n.createSubContext(e.options),o=n.currentTimeline.currentTime,s=this._visitSubInstructions(t,r,r.options);o!=s&&n.transformIntoNewTimeline(s)}n.previousNode=e}visitAnimateRef(e,n){let t=n.createSubContext(e.options);t.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],n,t),this.visitReference(e.animation,t),n.transformIntoNewTimeline(t.currentTimeline.currentTime),n.previousNode=e}_applyAnimationRefDelays(e,n,t){for(let r of e){let o=r?.delay;if(o){let s=typeof o=="number"?o:uo(Kc(o,r?.params??{},n.errors));t.delayNextStep(s)}}}_visitSubInstructions(e,n,t){let o=n.currentTimeline.currentTime,s=t.duration!=null?uo(t.duration):null,a=t.delay!=null?uo(t.delay):null;return s!==0&&e.forEach(l=>{let c=n.appendInstructionToTimeline(l,s,a);o=Math.max(o,c.duration+c.delay)}),o}visitReference(e,n){n.updateOptions(e.options,!0),gi(this,e.animation,n),n.previousNode=e}visitSequence(e,n){let t=n.subContextCount,r=n,o=e.options;if(o&&(o.params||o.delay)&&(r=n.createSubContext(o),r.transformIntoNewTimeline(),o.delay!=null)){r.previousNode.type==6&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=of);let s=uo(o.delay);r.delayNextStep(s)}e.steps.length&&(e.steps.forEach(s=>gi(this,s,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>t&&r.transformIntoNewTimeline()),n.previousNode=e}visitGroup(e,n){let t=[],r=n.currentTimeline.currentTime,o=e.options&&e.options.delay?uo(e.options.delay):0;e.steps.forEach(s=>{let a=n.createSubContext(e.options);o&&a.delayNextStep(o),gi(this,s,a),r=Math.max(r,a.currentTimeline.currentTime),t.push(a.currentTimeline)}),t.forEach(s=>n.currentTimeline.mergeTimelineCollectedStyles(s)),n.transformIntoNewTimeline(r),n.previousNode=e}_visitTiming(e,n){if(e.dynamic){let t=e.strValue,r=n.params?Kc(t,n.params,n.errors):t;return ef(r,n.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,n){let t=n.currentAnimateTimings=this._visitTiming(e.timings,n),r=n.currentTimeline;t.delay&&(n.incrementTime(t.delay),r.snapshotCurrentStyles());let o=e.style;o.type==5?this.visitKeyframes(o,n):(n.incrementTime(t.duration),this.visitStyle(o,n),r.applyStylesToKeyframe()),n.currentAnimateTimings=null,n.previousNode=e}visitStyle(e,n){let t=n.currentTimeline,r=n.currentAnimateTimings;!r&&t.hasCurrentStyleProperties()&&t.forwardFrame();let o=r&&r.easing||e.easing;e.isEmptyStep?t.applyEmptyStep(o):t.setStyles(e.styles,o,n.errors,n.options),n.previousNode=e}visitKeyframes(e,n){let t=n.currentAnimateTimings,r=n.currentTimeline.duration,o=t.duration,a=n.createSubContext().currentTimeline;a.easing=t.easing,e.styles.forEach(l=>{let c=l.offset||0;a.forwardTime(c*o),a.setStyles(l.styles,l.easing,n.errors,n.options),a.applyStylesToKeyframe()}),n.currentTimeline.mergeTimelineCollectedStyles(a),n.transformIntoNewTimeline(r+o),n.previousNode=e}visitQuery(e,n){let t=n.currentTimeline.currentTime,r=e.options||{},o=r.delay?uo(r.delay):0;o&&(n.previousNode.type===6||t==0&&n.currentTimeline.hasCurrentStyleProperties())&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=of);let s=t,a=n.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,n.errors);n.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{n.currentQueryIndex=u;let d=n.createSubContext(e.options,c);o&&d.delayNextStep(o),c===n.element&&(l=d.currentTimeline),gi(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe();let h=d.currentTimeline.currentTime;s=Math.max(s,h)}),n.currentQueryIndex=0,n.currentQueryTotal=0,n.transformIntoNewTimeline(s),l&&(n.currentTimeline.mergeTimelineCollectedStyles(l),n.currentTimeline.snapshotCurrentStyles()),n.previousNode=e}visitStagger(e,n){let t=n.parentContext,r=n.currentTimeline,o=e.timings,s=Math.abs(o.duration),a=s*(n.currentQueryTotal-1),l=s*n.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":l=a-l;break;case"full":l=t.currentStaggerTime;break}let u=n.currentTimeline;l&&u.delayNextStep(l);let d=u.currentTime;gi(this,e.animation,n),n.previousNode=e,t.currentStaggerTime=r.currentTime-d+(r.startTime-t.currentTimeline.startTime)}},of={},Py=class i{constructor(e,n,t,r,o,s,a,l){this._driver=e,this.element=n,this.subInstructions=t,this._enterClassName=r,this._leaveClassName=o,this.errors=s,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=of,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new sf(this._driver,n,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,n){if(!e)return;let t=e,r=this.options;t.duration!=null&&(r.duration=uo(t.duration)),t.delay!=null&&(r.delay=uo(t.delay));let o=t.params;if(o){let s=r.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!n||!s.hasOwnProperty(a))&&(s[a]=Kc(o[a],s,this.errors))})}}_copyOptions(){let e={};if(this.options){let n=this.options.params;if(n){let t=e.params={};Object.keys(n).forEach(r=>{t[r]=n[r]})}}return e}createSubContext(e=null,n,t){let r=n||this.element,o=new i(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,t||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=of,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,n,t){let r={duration:n??e.duration,delay:this.currentTimeline.currentTime+(t??0)+e.delay,easing:""},o=new wy(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,n,t,r,o,s){let a=[];if(r&&a.push(this.element),e.length>0){e=e.replace(oz,"."+this._enterClassName),e=e.replace(az,"."+this._leaveClassName);let l=t!=1,c=this._driver.query(this.element,e,l);t!==0&&(c=t<0?c.slice(c.length+t,c.length):c.slice(0,t)),a.push(...c)}return!o&&a.length==0&&s.push(b5(n)),a}},sf=class i{constructor(e,n,t,r){this._driver=e,this.element=n,this.startTime=t,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let n=this._keyframes.size===1&&this._pendingStyles.size;this.duration||n?(this.forwardTime(this.currentTime+e),n&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,n){return this.applyStylesToKeyframe(),new i(this._driver,e,n||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=iz,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,n){this._localTimelineStyles.set(e,n),this._globalTimelineStyles.set(e,n),this._styleSummary.set(e,{time:this.currentTime,value:n})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[n,t]of this._globalTimelineStyles)this._backFill.set(n,t||Mr),this._currentKeyframe.set(n,Mr);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,n,t,r){n&&this._previousKeyframe.set("easing",n);let o=r&&r.params||{},s=lz(e,this._globalTimelineStyles);for(let[a,l]of s){let c=Kc(l,o,t);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Mr),this._updateStyle(a,c)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,n)=>{this._currentKeyframe.set(n,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,n)=>{this._currentKeyframe.has(n)||this._currentKeyframe.set(n,e)}))}snapshotCurrentStyles(){for(let[e,n]of this._localTimelineStyles)this._pendingStyles.set(e,n),this._updateStyle(e,n)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let n in this._currentKeyframe)e.push(n);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((n,t)=>{let r=this._styleSummary.get(t);(!r||n.time>r.time)&&this._updateStyle(t,n.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,n=new Set,t=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((a,l)=>{let c=gl(a,new Map,this._backFill);c.forEach((u,d)=>{u===dp?e.add(d):u===Mr&&n.add(d)}),t||c.set("offset",l/this.duration),r.push(c)});let o=e.size?tf(e.values()):[],s=n.size?tf(n.values()):[];if(t){let a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return Ry(this.element,r,o,s,this.duration,this.startTime,this.easing,!1)}},wy=class extends sf{constructor(e,n,t,r,o,s,a=!1){super(e,n,s.delay),this.keyframes=t,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:n,duration:t,easing:r}=this.timings;if(this._stretchStartingKeyframe&&n){let o=[],s=t+n,a=n/s,l=gl(e[0]);l.set("offset",0),o.push(l);let c=gl(e[0]);c.set("offset",gS(a)),o.push(c);let u=e.length-1;for(let d=1;d<=u;d++){let h=gl(e[d]),p=h.get("offset"),f=n+p*t;h.set("offset",gS(f/s)),o.push(h)}t=s,n=0,r="",e=o}return Ry(this.element,e,this.preStyleProps,this.postStyleProps,t,n,r,!0)}};function gS(i,e=3){let n=Math.pow(10,e-1);return Math.round(i*n)/n}function lz(i,e){let n=new Map,t;return i.forEach(r=>{if(r==="*"){t=t||e.keys();for(let o of t)n.set(o,Mr)}else gl(r,n)}),n}function _S(i,e,n,t,r,o,s,a,l,c,u,d,h){return{type:0,element:i,triggerName:e,isRemovalTransition:r,fromState:n,fromStyles:o,toState:t,toStyles:s,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:d,errors:h}}var dy={},af=class{constructor(e,n,t){this._triggerName=e,this.ast=n,this._stateStyles=t}match(e,n,t,r){return cz(this.ast.matchers,e,n,t,r)}buildStyles(e,n,t){let r=this._stateStyles.get("*");return e!==void 0&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(n,t):new Map}build(e,n,t,r,o,s,a,l,c,u){let d=[],h=this.ast.options&&this.ast.options.params||dy,p=a&&a.params||dy,f=this.buildStyles(t,p,d),m=l&&l.params||dy,_=this.buildStyles(r,m,d),P=new Set,I=new Map,b=new Map,S=r==="void",k={params:uz(m,h),delay:this.ast.options?.delay},N=u?[]:NS(e,n,this.ast.animation,o,s,f,_,k,c,d),X=0;if(N.forEach(j=>{X=Math.max(j.duration+j.delay,X)}),d.length)return _S(n,this._triggerName,t,r,S,f,_,[],[],I,b,X,d);N.forEach(j=>{let z=j.element,ue=_i(I,z,new Set);j.preStyleProps.forEach(ge=>ue.add(ge));let se=_i(b,z,new Set);j.postStyleProps.forEach(ge=>se.add(ge)),z!==n&&P.add(z)});let F=tf(P.values());return _S(n,this._triggerName,t,r,S,f,_,N,F,I,b,X)}};function cz(i,e,n,t,r){return i.some(o=>o(e,n,t,r))}function uz(i,e){let n=nu(e);for(let t in i)i.hasOwnProperty(t)&&i[t]!=null&&(n[t]=i[t]);return n}var xy=class{constructor(e,n,t){this.styles=e,this.defaultParams=n,this.normalizer=t}buildStyles(e,n){let t=new Map,r=nu(this.defaultParams);return Object.keys(e).forEach(o=>{let s=e[o];s!==null&&(r[o]=s)}),this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((s,a)=>{s&&(s=Kc(s,r,n));let l=this.normalizer.normalizePropertyName(a,n);s=this.normalizer.normalizeStyleValue(a,l,s,n),t.set(a,s)})}),t}};function dz(i,e,n){return new My(i,e,n)}var My=class{constructor(e,n,t){this.name=e,this.ast=n,this._normalizer=t,this.transitionFactories=[],this.states=new Map,n.states.forEach(r=>{let o=r.options&&r.options.params||{};this.states.set(r.name,new xy(r.style,o,t))}),vS(this.states,"true","1"),vS(this.states,"false","0"),n.transitions.forEach(r=>{this.transitionFactories.push(new af(e,r,this.states))}),this.fallbackTransition=hz(e,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,n,t,r){return this.transitionFactories.find(s=>s.match(e,n,t,r))||null}matchStyles(e,n,t){return this.fallbackTransition.buildStyles(e,n,t)}};function hz(i,e,n){let o={type:1,animation:{type:2,steps:[],options:null},matchers:[(s,a)=>!0],options:null,queryCount:0,depCount:0};return new af(i,o,e)}function vS(i,e,n){i.has(e)?i.has(n)||i.set(n,i.get(e)):i.has(n)&&i.set(e,i.get(n))}var pz=new Qc,Oy=class{constructor(e,n,t){this.bodyNode=e,this._driver=n,this._normalizer=t,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,n){let t=[],r=[],o=kS(this._driver,n,t,r);if(t.length)throw O5(t);r.length&&void 0,this._animations.set(e,o)}_buildPlayer(e,n,t){let r=e.element,o=xS(this._normalizer,e.keyframes,n,t);return this._driver.animate(r,o,e.duration,e.delay,e.easing,[],!0)}create(e,n,t={}){let r=[],o=this._animations.get(e),s,a=new Map;if(o?(s=NS(this._driver,n,o,IS,my,new Map,new Map,t,pz,r),s.forEach(u=>{let d=_i(a,u.element,new Map);u.postStyleProps.forEach(h=>d.set(h,null))})):(r.push(E5()),s=[]),r.length)throw I5(r);a.forEach((u,d)=>{u.forEach((h,p)=>{u.set(p,this._driver.computeStyle(d,p,Mr))})});let l=s.map(u=>{let d=a.get(u.element);return this._buildPlayer(u,new Map,d)}),c=$o(l);return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){let n=this._getPlayer(e);n.destroy(),this._playersById.delete(e);let t=this.players.indexOf(n);t>=0&&this.players.splice(t,1)}_getPlayer(e){let n=this._playersById.get(e);if(!n)throw S5(e);return n}listen(e,n,t,r){let o=Ay(n,"","","");return Ty(this._getPlayer(e),t,o,r),()=>{}}command(e,n,t,r){if(t=="register"){this.register(e,r[0]);return}if(t=="create"){let s=r[0]||{};this.create(e,n,s);return}let o=this._getPlayer(e);switch(t){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e);break}}},yS="ng-animate-queued",fz=".ng-animate-queued",hy="ng-animate-disabled",mz=".ng-animate-disabled",gz="ng-star-inserted",_z=".ng-star-inserted",vz=[],RS={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},yz={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},nr="__ng_removed",Jc=class{get params(){return this.options.params}constructor(e,n=""){this.namespaceId=n;let t=e&&e.hasOwnProperty("value"),r=t?e.value:e;if(this.value=bz(r),t){let o=nu(e);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let n=e.params;if(n){let t=this.options.params;Object.keys(n).forEach(r=>{t[r]==null&&(t[r]=n[r])})}}},$c="void",py=new Jc($c),Ey=class{constructor(e,n,t){this.id=e,this.hostElement=n,this._engine=t,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ai(n,this._hostClassName)}listen(e,n,t,r){if(!this._triggers.has(n))throw T5(t,n);if(t==null||t.length==0)throw A5(n);if(!Pz(t))throw D5(t,n);let o=_i(this._elementListeners,e,[]),s={name:n,phase:t,callback:r};o.push(s);let a=_i(this._engine.statesByElement,e,new Map);return a.has(n)||(Ai(e,Yp),Ai(e,Yp+"-"+n),a.set(n,py)),()=>{this._engine.afterFlush(()=>{let l=o.indexOf(s);l>=0&&o.splice(l,1),this._triggers.has(n)||a.delete(n)})}}register(e,n){return this._triggers.has(e)?!1:(this._triggers.set(e,n),!0)}_getTrigger(e){let n=this._triggers.get(e);if(!n)throw k5(e);return n}trigger(e,n,t,r=!0){let o=this._getTrigger(n),s=new eu(this.id,n,e),a=this._engine.statesByElement.get(e);a||(Ai(e,Yp),Ai(e,Yp+"-"+n),this._engine.statesByElement.set(e,a=new Map));let l=a.get(n),c=new Jc(t,this.id);if(!(t&&t.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(n,c),l||(l=py),!(c.value===$c)&&l.value===c.value){if(!Mz(l.params,c.params)){let m=[],_=o.matchStyles(l.value,l.params,m),P=o.matchStyles(c.value,c.params,m);m.length?this._engine.reportError(m):this._engine.afterFlush(()=>{Zs(e,_),kr(e,P)})}return}let h=_i(this._engine.playersByElement,e,[]);h.forEach(m=>{m.namespaceId==this.id&&m.triggerName==n&&m.queued&&m.destroy()});let p=o.matchTransition(l.value,c.value,e,c.params),f=!1;if(!p){if(!r)return;p=o.fallbackTransition,f=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:n,transition:p,fromState:l,toState:c,player:s,isFallbackTransition:f}),f||(Ai(e,yS),s.onStart(()=>{ml(e,yS)})),s.onDone(()=>{let m=this.players.indexOf(s);m>=0&&this.players.splice(m,1);let _=this._engine.playersByElement.get(e);if(_){let P=_.indexOf(s);P>=0&&_.splice(P,1)}}),this.players.push(s),h.push(s),s}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(n=>n.delete(e)),this._elementListeners.forEach((n,t)=>{this._elementListeners.set(t,n.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let n=this._engine.playersByElement.get(e);n&&(n.forEach(t=>t.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,n){let t=this._engine.driver.query(e,Jp,!0);t.forEach(r=>{if(r[nr])return;let o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(s=>s.triggerLeaveAnimation(r,n,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>t.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,n,t,r){let o=this._engine.statesByElement.get(e),s=new Map;if(o){let a=[];if(o.forEach((l,c)=>{if(s.set(c,l.value),this._triggers.has(c)){let u=this.trigger(e,c,$c,r);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,n,s),t&&$o(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let n=this._elementListeners.get(e),t=this._engine.statesByElement.get(e);if(n&&t){let r=new Set;n.forEach(o=>{let s=o.name;if(r.has(s))return;r.add(s);let l=this._triggers.get(s).fallbackTransition,c=t.get(s)||py,u=new Jc($c),d=new eu(this.id,s,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:s,transition:l,fromState:c,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,n){let t=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,n),this.triggerLeaveAnimation(e,n,!0))return;let r=!1;if(t.totalAnimations){let o=t.players.length?t.playersByQueriedElement.get(e):[];if(o&&o.length)r=!0;else{let s=e;for(;s=s.parentNode;)if(t.statesByElement.get(s)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)t.markElementAsRemoved(this.id,e,!1,n);else{let o=e[nr];(!o||o===RS)&&(t.afterFlush(()=>this.clearElementCache(e)),t.destroyInnerAnimations(e),t._onRemovalComplete(e,n))}}insertNode(e,n){Ai(e,this._hostClassName)}drainQueuedTransitions(e){let n=[];return this._queue.forEach(t=>{let r=t.player;if(r.destroyed)return;let o=t.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==t.triggerName){let l=Ay(o,t.triggerName,t.fromState.value,t.toState.value);l._data=e,Ty(t.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):n.push(t)}),this._queue=[],n.sort((t,r)=>{let o=t.transition.ast.depCount,s=r.transition.ast.depCount;return o==0||s==0?o-s:this._engine.driver.containsElement(t.element,r.element)?1:-1})}destroy(e){this.players.forEach(n=>n.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},Iy=class{_onRemovalComplete(e,n){this.onRemovalComplete(e,n)}constructor(e,n,t){this.bodyNode=e,this.driver=n,this._normalizer=t,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,o)=>{}}get queuedPlayers(){let e=[];return this._namespaceList.forEach(n=>{n.players.forEach(t=>{t.queued&&e.push(t)})}),e}createNamespace(e,n){let t=new Ey(e,n,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,n)?this._balanceNamespaceList(t,n):(this.newHostElements.set(n,t),this.collectEnterElement(n)),this._namespaceLookup[e]=t}_balanceNamespaceList(e,n){let t=this._namespaceList,r=this.namespacesByHostElement;if(t.length-1>=0){let s=!1,a=this.driver.getParentElement(n);for(;a;){let l=r.get(a);if(l){let c=t.indexOf(l);t.splice(c+1,0,e),s=!0;break}a=this.driver.getParentElement(a)}s||t.unshift(e)}else t.push(e);return r.set(n,e),e}register(e,n){let t=this._namespaceLookup[e];return t||(t=this.createNamespace(e,n)),t}registerTrigger(e,n,t){let r=this._namespaceLookup[e];r&&r.register(n,t)&&this.totalAnimations++}destroy(e,n){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let t=this._fetchNamespace(e);this.namespacesByHostElement.delete(t.hostElement);let r=this._namespaceList.indexOf(t);r>=0&&this._namespaceList.splice(r,1),t.destroy(n),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let n=new Set,t=this.statesByElement.get(e);if(t){for(let r of t.values())if(r.namespaceId){let o=this._fetchNamespace(r.namespaceId);o&&n.add(o)}}return n}trigger(e,n,t,r){if(Kp(n)){let o=this._fetchNamespace(e);if(o)return o.trigger(n,t,r),!0}return!1}insertNode(e,n,t,r){if(!Kp(n))return;let o=n[nr];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let s=this.collectedLeaveElements.indexOf(n);s>=0&&this.collectedLeaveElements.splice(s,1)}if(e){let s=this._fetchNamespace(e);s&&s.insertNode(n,t)}r&&this.collectEnterElement(n)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,n){n?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ai(e,hy)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),ml(e,hy))}removeNode(e,n,t){if(Kp(n)){let r=e?this._fetchNamespace(e):null;r?r.removeNode(n,t):this.markElementAsRemoved(e,n,!1,t);let o=this.namespacesByHostElement.get(n);o&&o.id!==e&&o.removeNode(n,t)}else this._onRemovalComplete(n,t)}markElementAsRemoved(e,n,t,r,o){this.collectedLeaveElements.push(n),n[nr]={namespaceId:e,setForRemoval:r,hasAnimation:t,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,n,t,r,o){return Kp(n)?this._fetchNamespace(e).listen(n,t,r,o):()=>{}}_buildInstruction(e,n,t,r,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,t,r,e.fromState.options,e.toState.options,n,o)}destroyInnerAnimations(e){let n=this.driver.query(e,Jp,!0);n.forEach(t=>this.destroyActiveAnimationsForElement(t)),this.playersByQueriedElement.size!=0&&(n=this.driver.query(e,gy,!0),n.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(e){let n=this.playersByElement.get(e);n&&n.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(e){let n=this.playersByQueriedElement.get(e);n&&n.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return $o(this.players).onDone(()=>e());e()})}processLeaveNode(e){let n=e[nr];if(n&&n.setForRemoval){if(e[nr]=RS,n.namespaceId){this.destroyInnerAnimations(e);let t=this._fetchNamespace(n.namespaceId);t&&t.clearElementCache(e)}this._onRemovalComplete(e,n.setForRemoval)}e.classList?.contains(hy)&&this.markElementAsDisabled(e,!1),this.driver.query(e,mz,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(e=-1){let n=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,r)=>this._balanceNamespaceList(t,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let t=0;t<this.collectedEnterElements.length;t++){let r=this.collectedEnterElements[t];Ai(r,gz)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let t=[];try{n=this._flushAnimations(t,e)}finally{for(let r=0;r<t.length;r++)t[r]()}}else for(let t=0;t<this.collectedLeaveElements.length;t++){let r=this.collectedLeaveElements[t];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){let t=this._whenQuietFns;this._whenQuietFns=[],n.length?$o(n).onDone(()=>{t.forEach(r=>r())}):t.forEach(r=>r())}}reportError(e){throw N5(e)}_flushAnimations(e,n){let t=new Qc,r=[],o=new Map,s=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(B=>{u.add(B);let L=this.driver.query(B,fz,!0);for(let V=0;V<L.length;V++)u.add(L[V])});let d=this.bodyNode,h=Array.from(this.statesByElement.keys()),p=PS(h,this.collectedEnterElements),f=new Map,m=0;p.forEach((B,L)=>{let V=IS+m++;f.set(L,V),B.forEach(te=>Ai(te,V))});let _=[],P=new Set,I=new Set;for(let B=0;B<this.collectedLeaveElements.length;B++){let L=this.collectedLeaveElements[B],V=L[nr];V&&V.setForRemoval&&(_.push(L),P.add(L),V.hasAnimation?this.driver.query(L,_z,!0).forEach(te=>P.add(te)):I.add(L))}let b=new Map,S=PS(h,Array.from(P));S.forEach((B,L)=>{let V=my+m++;b.set(L,V),B.forEach(te=>Ai(te,V))}),e.push(()=>{p.forEach((B,L)=>{let V=f.get(L);B.forEach(te=>ml(te,V))}),S.forEach((B,L)=>{let V=b.get(L);B.forEach(te=>ml(te,V))}),_.forEach(B=>{this.processLeaveNode(B)})});let k=[],N=[];for(let B=this._namespaceList.length-1;B>=0;B--)this._namespaceList[B].drainQueuedTransitions(n).forEach(V=>{let te=V.player,he=V.element;if(k.push(te),this.collectedEnterElements.length){let Ae=he[nr];if(Ae&&Ae.setForMove){if(Ae.previousTriggersValues&&Ae.previousTriggersValues.has(V.triggerName)){let Le=Ae.previousTriggersValues.get(V.triggerName),ae=this.statesByElement.get(V.element);if(ae&&ae.has(V.triggerName)){let Qe=ae.get(V.triggerName);Qe.value=Le,ae.set(V.triggerName,Qe)}}te.destroy();return}}let Se=!d||!this.driver.containsElement(d,he),ve=b.get(he),rt=f.get(he),Te=this._buildInstruction(V,t,rt,ve,Se);if(Te.errors&&Te.errors.length){N.push(Te);return}if(Se){te.onStart(()=>Zs(he,Te.fromStyles)),te.onDestroy(()=>kr(he,Te.toStyles)),r.push(te);return}if(V.isFallbackTransition){te.onStart(()=>Zs(he,Te.fromStyles)),te.onDestroy(()=>kr(he,Te.toStyles)),r.push(te);return}let Lt=[];Te.timelines.forEach(Ae=>{Ae.stretchStartingKeyframe=!0,this.disabledNodes.has(Ae.element)||Lt.push(Ae)}),Te.timelines=Lt,t.append(he,Te.timelines);let Ze={instruction:Te,player:te,element:he};s.push(Ze),Te.queriedElements.forEach(Ae=>_i(a,Ae,[]).push(te)),Te.preStyleProps.forEach((Ae,Le)=>{if(Ae.size){let ae=l.get(Le);ae||l.set(Le,ae=new Set),Ae.forEach((Qe,Ge)=>ae.add(Ge))}}),Te.postStyleProps.forEach((Ae,Le)=>{let ae=c.get(Le);ae||c.set(Le,ae=new Set),Ae.forEach((Qe,Ge)=>ae.add(Ge))})});if(N.length){let B=[];N.forEach(L=>{B.push(R5(L.triggerName,L.errors))}),k.forEach(L=>L.destroy()),this.reportError(B)}let X=new Map,F=new Map;s.forEach(B=>{let L=B.element;t.has(L)&&(F.set(L,L),this._beforeAnimationBuild(B.player.namespaceId,B.instruction,X))}),r.forEach(B=>{let L=B.element;this._getPreviousPlayers(L,!1,B.namespaceId,B.triggerName,null).forEach(te=>{_i(X,L,[]).push(te),te.destroy()})});let j=_.filter(B=>wS(B,l,c)),z=new Map;bS(z,this.driver,I,c,Mr).forEach(B=>{wS(B,l,c)&&j.push(B)});let se=new Map;p.forEach((B,L)=>{bS(se,this.driver,new Set(B),l,dp)}),j.forEach(B=>{let L=z.get(B),V=se.get(B);z.set(B,new Map([...L?.entries()??[],...V?.entries()??[]]))});let ge=[],Ye=[],oe={};s.forEach(B=>{let{element:L,player:V,instruction:te}=B;if(t.has(L)){if(u.has(L)){V.onDestroy(()=>kr(L,te.toStyles)),V.disabled=!0,V.overrideTotalTime(te.totalTime),r.push(V);return}let he=oe;if(F.size>1){let ve=L,rt=[];for(;ve=ve.parentNode;){let Te=F.get(ve);if(Te){he=Te;break}rt.push(ve)}rt.forEach(Te=>F.set(Te,he))}let Se=this._buildAnimation(V.namespaceId,te,X,o,se,z);if(V.setRealPlayer(Se),he===oe)ge.push(V);else{let ve=this.playersByElement.get(he);ve&&ve.length&&(V.parentPlayer=$o(ve)),r.push(V)}}else Zs(L,te.fromStyles),V.onDestroy(()=>kr(L,te.toStyles)),Ye.push(V),u.has(L)&&r.push(V)}),Ye.forEach(B=>{let L=o.get(B.element);if(L&&L.length){let V=$o(L);B.setRealPlayer(V)}}),r.forEach(B=>{B.parentPlayer?B.syncPlayerEvents(B.parentPlayer):B.destroy()});for(let B=0;B<_.length;B++){let L=_[B],V=L[nr];if(ml(L,my),V&&V.hasAnimation)continue;let te=[];if(a.size){let Se=a.get(L);Se&&Se.length&&te.push(...Se);let ve=this.driver.query(L,gy,!0);for(let rt=0;rt<ve.length;rt++){let Te=a.get(ve[rt]);Te&&Te.length&&te.push(...Te)}}let he=te.filter(Se=>!Se.destroyed);he.length?wz(this,L,he):this.processLeaveNode(L)}return _.length=0,ge.forEach(B=>{this.players.push(B),B.onDone(()=>{B.destroy();let L=this.players.indexOf(B);this.players.splice(L,1)}),B.play()}),ge}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,n,t,r,o){let s=[];if(n){let a=this.playersByQueriedElement.get(e);a&&(s=a)}else{let a=this.playersByElement.get(e);if(a){let l=!o||o==$c;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||s.push(c)})}}return(t||r)&&(s=s.filter(a=>!(t&&t!=a.namespaceId||r&&r!=a.triggerName))),s}_beforeAnimationBuild(e,n,t){let r=n.triggerName,o=n.element,s=n.isRemovalTransition?void 0:e,a=n.isRemovalTransition?void 0:r;for(let l of n.timelines){let c=l.element,u=c!==o,d=_i(t,c,[]);this._getPreviousPlayers(c,u,s,a,n.toState).forEach(p=>{let f=p.getRealPlayer();f.beforeDestroy&&f.beforeDestroy(),p.destroy(),d.push(p)})}Zs(o,n.fromStyles)}_buildAnimation(e,n,t,r,o,s){let a=n.triggerName,l=n.element,c=[],u=new Set,d=new Set,h=n.timelines.map(f=>{let m=f.element;u.add(m);let _=m[nr];if(_&&_.removedBeforeQueried)return new Ho(f.duration,f.delay);let P=m!==l,I=xz((t.get(m)||vz).map(X=>X.getRealPlayer())).filter(X=>{let F=X;return F.element?F.element===m:!1}),b=o.get(m),S=s.get(m),k=xS(this._normalizer,f.keyframes,b,S),N=this._buildPlayer(f,k,I);if(f.subTimeline&&r&&d.add(m),P){let X=new eu(e,a,m);X.setRealPlayer(N),c.push(X)}return N});c.forEach(f=>{_i(this.playersByQueriedElement,f.element,[]).push(f),f.onDone(()=>Cz(this.playersByQueriedElement,f.element,f))}),u.forEach(f=>Ai(f,pS));let p=$o(h);return p.onDestroy(()=>{u.forEach(f=>ml(f,pS)),kr(l,n.toStyles)}),d.forEach(f=>{_i(r,f,[]).push(p)}),p}_buildPlayer(e,n,t){return n.length>0?this.driver.animate(e.element,n,e.duration,e.delay,e.easing,t):new Ho(e.duration,e.delay)}},eu=class{constructor(e,n,t){this.namespaceId=e,this.triggerName=n,this.element=t,this._player=new Ho,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((n,t)=>{n.forEach(r=>Ty(e,t,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let n=this._player;n.triggerCallback&&e.onStart(()=>n.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,n){_i(this._queuedCallbacks,e,[]).push(n)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let n=this._player;n.triggerCallback&&n.triggerCallback(e)}};function Cz(i,e,n){let t=i.get(e);if(t){if(t.length){let r=t.indexOf(n);t.splice(r,1)}t.length==0&&i.delete(e)}return t}function bz(i){return i??null}function Kp(i){return i&&i.nodeType===1}function Pz(i){return i=="start"||i=="done"}function CS(i,e){let n=i.style.display;return i.style.display=e??"none",n}function bS(i,e,n,t,r){let o=[];n.forEach(l=>o.push(CS(l)));let s=[];t.forEach((l,c)=>{let u=new Map;l.forEach(d=>{let h=e.computeStyle(c,d,r);u.set(d,h),(!h||h.length==0)&&(c[nr]=yz,s.push(c))}),i.set(c,u)});let a=0;return n.forEach(l=>CS(l,o[a++])),s}function PS(i,e){let n=new Map;if(i.forEach(a=>n.set(a,[])),e.length==0)return n;let t=1,r=new Set(e),o=new Map;function s(a){if(!a)return t;let l=o.get(a);if(l)return l;let c=a.parentNode;return n.has(c)?l=c:r.has(c)?l=t:l=s(c),o.set(a,l),l}return e.forEach(a=>{let l=s(a);l!==t&&n.get(l).push(a)}),n}function Ai(i,e){i.classList?.add(e)}function ml(i,e){i.classList?.remove(e)}function wz(i,e,n){$o(n).onDone(()=>i.processLeaveNode(e))}function xz(i){let e=[];return FS(i,e),e}function FS(i,e){for(let n=0;n<i.length;n++){let t=i[n];t instanceof Fc?FS(t.players,e):e.push(t)}}function Mz(i,e){let n=Object.keys(i),t=Object.keys(e);if(n.length!=t.length)return!1;for(let r=0;r<n.length;r++){let o=n[r];if(!e.hasOwnProperty(o)||i[o]!==e[o])return!1}return!0}function wS(i,e,n){let t=n.get(i);if(!t)return!1;let r=e.get(i);return r?t.forEach(o=>r.add(o)):e.set(i,t),n.delete(i),!0}var _l=class{constructor(e,n,t){this._driver=n,this._normalizer=t,this._triggerCache={},this.onRemovalComplete=(r,o)=>{},this._transitionEngine=new Iy(e.body,n,t),this._timelineEngine=new Oy(e.body,n,t),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(e,n,t,r,o){let s=e+"-"+r,a=this._triggerCache[s];if(!a){let l=[],c=[],u=kS(this._driver,o,l,c);if(l.length)throw x5(r,l);c.length&&void 0,a=dz(r,u,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(n,r,a)}register(e,n){this._transitionEngine.register(e,n)}destroy(e,n){this._transitionEngine.destroy(e,n)}onInsert(e,n,t,r){this._transitionEngine.insertNode(e,n,t,r)}onRemove(e,n,t){this._transitionEngine.removeNode(e,n,t)}disableAnimations(e,n){this._transitionEngine.markElementAsDisabled(e,n)}process(e,n,t,r){if(t.charAt(0)=="@"){let[o,s]=dS(t),a=r;this._timelineEngine.command(o,n,s,a)}else this._transitionEngine.trigger(e,n,t,r)}listen(e,n,t,r,o){if(t.charAt(0)=="@"){let[s,a]=dS(t);return this._timelineEngine.listen(s,n,a,o)}return this._transitionEngine.listen(e,n,t,r,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function Oz(i,e){let n=null,t=null;return Array.isArray(e)&&e.length?(n=fy(e[0]),e.length>1&&(t=fy(e[e.length-1]))):e instanceof Map&&(n=fy(e)),n||t?new Ez(i,n,t):null}var Ez=(()=>{let e=class e{constructor(t,r,o){this._element=t,this._startStyles=r,this._endStyles=o,this._state=0;let s=e.initialStylesByElement.get(t);s||e.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&kr(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(kr(this._element,this._initialStyles),this._endStyles&&(kr(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(Zs(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Zs(this._element,this._endStyles),this._endStyles=null),kr(this._element,this._initialStyles),this._state=3)}};e.initialStylesByElement=new WeakMap;let i=e;return i})();function fy(i){let e=null;return i.forEach((n,t)=>{Iz(t)&&(e=e||new Map,e.set(t,n))}),e}function Iz(i){return i==="display"||i==="position"}var lf=class{constructor(e,n,t,r){this.element=e,this.keyframes=n,this.options=t,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=t.duration,this._delay=t.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let n=()=>this._onFinish();this.domPlayer.addEventListener("finish",n),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",n)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let n=[];return e.forEach(t=>{n.push(Object.fromEntries(t))}),n}_triggerWebAnimation(e,n,t){return e.animate(this._convertKeyframesToObject(n),t)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((t,r)=>{r!=="offset"&&e.set(r,this._finished?t:AS(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){let n=e==="start"?this._onStartFns:this._onDoneFns;n.forEach(t=>t()),n.length=0}},cf=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,n){return!1}containsElement(e,n){return MS(e,n)}getParentElement(e){return Dy(e)}query(e,n,t){return OS(e,n,t)}computeStyle(e,n,t){return window.getComputedStyle(e)[n]}animate(e,n,t,r,o,s=[]){let a=r==0?"both":"forwards",l={duration:t,delay:r,fill:a};o&&(l.easing=o);let c=new Map,u=s.filter(p=>p instanceof lf);X5(t,r)&&u.forEach(p=>{p.currentSnapshot.forEach((f,m)=>c.set(m,f))});let d=H5(n).map(p=>gl(p));d=q5(e,d,c);let h=Oz(e,d);return new lf(e,d,l,h)}};var Qp="@",LS="@.disabled",uf=class{constructor(e,n,t,r){this.namespaceId=e,this.delegate=n,this.engine=t,this._onDestroy=r,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,n){return this.delegate.createElement(e,n)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,n){this.delegate.appendChild(e,n),this.engine.onInsert(this.namespaceId,n,e,!1)}insertBefore(e,n,t,r=!0){this.delegate.insertBefore(e,n,t),this.engine.onInsert(this.namespaceId,n,e,r)}removeChild(e,n,t){this.engine.onRemove(this.namespaceId,n,this.delegate)}selectRootElement(e,n){return this.delegate.selectRootElement(e,n)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,n,t,r){this.delegate.setAttribute(e,n,t,r)}removeAttribute(e,n,t){this.delegate.removeAttribute(e,n,t)}addClass(e,n){this.delegate.addClass(e,n)}removeClass(e,n){this.delegate.removeClass(e,n)}setStyle(e,n,t,r){this.delegate.setStyle(e,n,t,r)}removeStyle(e,n,t){this.delegate.removeStyle(e,n,t)}setProperty(e,n,t){n.charAt(0)==Qp&&n==LS?this.disableAnimations(e,!!t):this.delegate.setProperty(e,n,t)}setValue(e,n){this.delegate.setValue(e,n)}listen(e,n,t){return this.delegate.listen(e,n,t)}disableAnimations(e,n){this.engine.disableAnimations(e,n)}},Sy=class extends uf{constructor(e,n,t,r,o){super(n,t,r,o),this.factory=e,this.namespaceId=n}setProperty(e,n,t){n.charAt(0)==Qp?n.charAt(1)=="."&&n==LS?(t=t===void 0?!0:!!t,this.disableAnimations(e,t)):this.engine.process(this.namespaceId,e,n.slice(1),t):this.delegate.setProperty(e,n,t)}listen(e,n,t){if(n.charAt(0)==Qp){let r=Sz(e),o=n.slice(1),s="";return o.charAt(0)!=Qp&&([o,s]=Tz(o)),this.engine.listen(this.namespaceId,r,o,s,a=>{let l=a._data||-1;this.factory.scheduleListenerCallback(l,t,a)})}return this.delegate.listen(e,n,t)}};function Sz(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}function Tz(i){let e=i.indexOf("."),n=i.substring(0,e),t=i.slice(e+1);return[n,t]}var df=class{constructor(e,n,t){this.delegate=e,this.engine=n,this._zone=t,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,n.onRemovalComplete=(r,o)=>{let s=o?.parentNode(r);s&&o.removeChild(s,r)}}createRenderer(e,n){let t="",r=this.delegate.createRenderer(e,n);if(!e||!n?.data?.animation){let c=this._rendererCache,u=c.get(r);if(!u){let d=()=>c.delete(r);u=new uf(t,r,this.engine,d),c.set(r,u)}return u}let o=n.id,s=n.id+"-"+this._currentId;this._currentId++,this.engine.register(s,e);let a=c=>{Array.isArray(c)?c.forEach(a):this.engine.registerTrigger(o,s,e,c.name,c)};return n.data.animation.forEach(a),new Sy(this,s,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,n,t){if(e>=0&&e<this._microtaskId){this._zone.run(()=>n(t));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(o=>{let[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),r.push([n,t])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var Dz=(()=>{let e=class e extends _l{constructor(t,r,o,s){super(t,r,o)}ngOnDestroy(){this.flush()}};e.\u0275fac=function(r){return new(r||e)(D(Bt),D(tu),D($s),D(vn))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let i=e;return i})();function kz(){return new nf}function Nz(i,e,n){return new df(i,e,n)}var BS=[{provide:$s,useFactory:kz},{provide:_l,useClass:Dz},{provide:ps,useFactory:Nz,deps:[Qd,_l,ye]}],jS=[{provide:tu,useFactory:()=>new cf},{provide:yg,useValue:"BrowserAnimations"},...BS],Rz=[{provide:tu,useClass:ky},{provide:yg,useValue:"NoopAnimations"},...BS],VS=(()=>{let e=class e{static withConfig(t){return{ngModule:e,providers:t.disableAnimations?Rz:jS}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Yt({type:e}),e.\u0275inj=qt({providers:jS,imports:[eh]});let i=e;return i})();var Pae=Ly({"../../../assets/i18n/de.json":()=>import("./chunk-K2ICLVLB.js"),"../../../assets/i18n/en.json":()=>import("./chunk-N4XGAZMV.js"),"../../../assets/i18n/es.json":()=>import("./chunk-LUP4EQYY.js"),"../../../assets/i18n/fr.json":()=>import("./chunk-5RVRRQGL.js")});var hf=class{getTranslation(e){try{return Vn(Pae(`../../../assets/i18n/${e}.json`))}catch{return e="en",Vn(Pae(`../../../assets/i18n/${e}.json`))}}};var pf=class extends Qr{handle(e){return e.key}};var ff=class{constructor(e){this._pointer=0,this._buffer=new Array(e).fill(0)}push(e){this._buffer[++this._pointer%this._buffer.length]=e}get average(){return this._buffer.reduce((e,n)=>e+n)/this._buffer.length}get buffer(){return this._buffer}};var US=(()=>{let e=class e{constructor(t,r,o,s,a,l){this.projectsService=t,this.stateCompiler=r,this.ngZone=o,this.errorHandling=s,this.elementProvider=a,this.eastereggs=l,this._initialized=!1,this._frameAverage=new ff(5),this._targetSpeed=0,this._targetLastRun=Date.now(),this._targetUnprocessedFraction=0,this._status={tick:0,componentCount:0,linkCount:0,speed:0,state:0},this._powerSubjectsWires=new Map,this._powerSubjectsWireEnds=new Map,this._ioComponentsResetSubject=new Map,this.initWorker()}handleResponse(t){if(!this._initialized){if(t.data.initialized===void 0)return;t.data.initialized===!0?this._initialized=!0:(console.log(t.data),this.errorHandling.showErrorMessage("ERROR.COMPILE.WORKER_INIT"));return}let r=t.data;if(r.success){let o=new Uint8Array(r.state);if(o.length!==this.stateCompiler.highestLinkId+1&&(console.error(r),this.errorHandling.showErrorMessage("Response data length does not match component count")),this._dataCache=o,r.method===0||r.method===4){let s=new Map,a=new Map;for(let l of this._powerSubjectsWires.keys())s.set(l,this.getWireState(l,o)),a.set(l,this.getWireEndState(l,o));for(let l of this._powerSubjectsWires.keys())this._powerSubjectsWires.get(l).next(s.get(l)),this._powerSubjectsWireEnds.get(l).next(a.get(l))}if(r.method===4)for(let s of this._ioComponentsResetSubject.values())s.next();if(r.method===0&&this._mode==="continuous"){let s={method:0,time:this._frameAverage.average};this._worker.postMessage(s)}else if(r.method===0&&this._mode==="target"){let s=Date.now(),a=(s-this._targetLastRun)*this._targetSpeed/1e3+this._targetUnprocessedFraction,l=Math.trunc(a),c={method:0,time:this._frameAverage.average,ticks:l};l?(this._targetUnprocessedFraction=a%1,this._worker.postMessage(c),this._targetLastRun=s):setTimeout(()=>{this._worker.postMessage(c)},this._frameAverage.average/2)}r.method===3&&this.ngZone.run(()=>this._status=r.status)}else console.error("error",r)}getWireState(t,r){r||(r=this._dataCache);let o=new Map;if(!this.stateCompiler.wiresOnLinks.has(t))return o;for(let[s,a]of this.stateCompiler.wiresOnLinks.get(t).entries())for(let l of a)o.set(l,r[s]);return o}getWireEndState(t,r){r||(r=this._dataCache);let o=new Map;if(!this.stateCompiler.wireEndsOnLinks.has(t))return o;for(let[s,a]of this.stateCompiler.wireEndsOnLinks.get(t).entries())for(let l of a){let c=l.component;o.has(c)||o.set(c,new Array(c.numInputs+c.numOutputs)),o.get(c)[l.wireIndex]=r[s]}return o}init(){return $(this,null,function*(){if(!this._initialized)return;let t=this.projectsService.mainProject;try{let r=yield this.stateCompiler.compileAsInt32Array(t);if(!r)throw new Hs("ERROR.COMPILE.FAILED");r.length>1e5&&this.eastereggs.achieve("GBOGH"),this.finalizeInit(r.buffer)}catch(r){throw console.error(r),r instanceof ll&&this.errorHandling.showErrorMessage(r.message,{comp:this.elementProvider.getElementById(r.comp).name,plugIndex:r.plugIndex}),r instanceof Hs&&(r.comp!==void 0&&r.src!==void 0?this.errorHandling.showErrorMessage(r.message,{comp:this.elementProvider.getElementById(r.comp).name,src:this.elementProvider.getElementById(r.src).name}):this.errorHandling.showErrorMessage(r.message)),r}})}initWorker(){this._worker&&this._worker.terminate(),this._initialized=!1,this._worker=new Worker(new URL("worker-BUGJIZ5D.js",import.meta.url),{type:"classic"}),this.ngZone.runOutsideAngular(()=>{this._worker.addEventListener("message",t=>this.handleResponse(t))})}finalizeInit(t){this._worker.postMessage({method:2,board:{links:this.stateCompiler.highestLinkId+1,components:t}},[t])}stop(){this._mode=void 0,this._worker.postMessage({method:4})}pause(){this._mode=void 0}start(){if(this._mode==="continuous")return;let t={method:0,time:this._frameAverage.average};this._mode="continuous",this._worker.postMessage(t),this._worker.postMessage(t),this.registerStatusWatch()}startTarget(t){if(this._mode==="target")return;t&&t>=0&&(this._targetSpeed=t);let r={method:0,time:this._frameAverage.average,ticks:1};this._mode="target",this._worker.postMessage(r),this._targetLastRun=Date.now(),this.registerStatusWatch()}startSync(){this._mode!=="sync"&&(this._mode="sync",this.registerStatusWatch(),this.singleStep())}setTarget(t){t>=0&&(this._targetSpeed=t)}registerStatusWatch(){let t=this._mode;this.ngZone.runOutsideAngular(()=>{is(0,1e3).pipe(kf(()=>t===this._mode)).subscribe(()=>{this._worker.postMessage({method:3})})})}singleStep(){let t={method:0,ticks:1};this._worker.postMessage(t),this._worker.postMessage({method:3})}setFrameTime(t){if(this._frameAverage.push(t>this._frameAverage.average+100?this._frameAverage.average+100:t),this._mode==="sync"){let r={method:0,ticks:1};this._worker.postMessage(r)}}setUserInput(t,r,o){let s=this.stateCompiler.ioElemIndexes.get(t).get(r.id),a;r.typeId===200?a=1:r.typeId===201&&(a=0);let l=Int8Array.from(o).buffer,c={method:1,userInput:{index:s,inputEvent:a,state:l}};this._worker.postMessage(c,[l])}boardStateWires(t){return this._powerSubjectsWires.get(t).asObservable()}boardStateWireEnds(t){return this._powerSubjectsWireEnds.get(t).asObservable()}onIoCompReset(t){return this._ioComponentsResetSubject.get(t).asObservable()}get status(){return this._status}get isRunning(){return!!this._mode}subscribe(t){this._powerSubjectsWires.has(t)||(this._powerSubjectsWires.set(t,new _e),this._powerSubjectsWireEnds.set(t,new _e),this._ioComponentsResetSubject.set(t,new _e))}unsubscribe(t){this._powerSubjectsWires.delete(t),this._powerSubjectsWireEnds.delete(t),this._ioComponentsResetSubject.delete(t)}};e.\u0275fac=function(r){return new(r||e)(D(We),D(kp),D(ye),D(Sn),D(be),D(nl))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let i=e;return i})();var zS=(()=>{let e=class e extends th{get(t){if(!this.has(t))return;let r=document.cookie.split("; ").find(o=>o.startsWith(t)).split("=")[1];try{let o=decodeURIComponent(r);return o.startsWith("j:")?JSON.parse(o.substring(2)):o}catch{return}}set(t,r){let o;typeof r=="object"?o=`j:${JSON.stringify(r)}`:o=String(r);let s=new Date;s.setTime(s.getTime()+30*24*60*60*1e3),document.cookie=`${t}=${encodeURIComponent(o)};expires=${s.toUTCString()};path=/`}remove(t){let r=new Date;r.setTime(r.getTime()-24*60*60*1e3),document.cookie=`${t}=;expires=${r.toUTCString()};path=/`}has(t){return document.cookie.split(";").some(r=>r.trim().startsWith(t+"="))}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=un(e)))(o||e)}})(),e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var HS=(()=>{let e=class e{constructor(t){this.injector=t,gE(t)}};e.\u0275fac=function(r){return new(r||e)(D(nn))},e.\u0275mod=Yt({type:e,bootstrap:[cS]}),e.\u0275inj=qt({providers:[{provide:fi,useClass:US},{provide:Xn,useClass:zS}],imports:[eh,$E,qI.forRoot(),tx,KE,VS,iI.forRoot({positionClass:"toastr-position",easeTime:100,timeOut:5e3,tapToDismiss:!0}),Xx.forRoot({loader:{provide:To,useClass:hf},missingTranslationHandler:{provide:Qr,useClass:pf}})]});let i=e;return i})();var mf=!1;window.addEventListener("error",i=>{if(!(!(i instanceof ErrorEvent)||mf)&&!(i.filename&&!i.filename.includes(C.url)))try{ee(_n).disableShortcutListener()}finally{mf=!0,Fz(i)}});function Fz(i){console.log(i);let e=document.body.classList.contains("theme-dark")?"dark":"light",n=i.error?.stack?.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")??"Stack trace not available.",t=`
		<div class="global-error-popup">
			<div class="global-error-popup-content">
				<div class="global-error-popup-header">
					<div>A critical Error occurred!</div>
					<img src="assets/icons/${e}/close.svg" alt="close" class="global-error-popup-close" />
				</div>
				<div class="global-error-popup-body">
					<p class="global-error-popup-message">${i.message??"Message not available."}</p>
					<p>If you encounter further issues, try saving your work and reloading the project.</p>
					<pre class="global-error-popup-stack">${n}</pre>
					<label>To help us identify the problem, please describe what you where doing when the error occurred.</label>
					<textarea class="global-error-popup-textarea" maxlength="512"></textarea>
					<button class="btn-raised primary global-error-popup-send">Send Error Information</button>
				</div>
			</div>
		</div>
	`,r=document.createElement("div");r.innerHTML=t;let o=r.firstElementChild;document.body.insertAdjacentElement("beforeend",o),o.querySelector(".global-error-popup-close").addEventListener("click",()=>{o.remove();try{ee(_n).enableShortcutListener()}catch(a){console.error(a)}mf=!1}),o.querySelector(".global-error-popup-send").addEventListener("click",a=>$(this,null,function*(){a.target.disabled=!0;let l=o.querySelector(".global-error-popup-textarea").value;yield s(l),o.remove();try{ee(_n).enableShortcutListener()}catch(c){console.error(c)}mf=!1}));function s(a){return $(this,null,function*(){let l;try{let c=ee(We);l=yield ee(Ei).generateFileToExport(c.mainProject)}catch(c){console.error(c)}yield fetch(C.api+"/report-error",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q(Q(Q(Q(Q(Q(Q(Q({},i.lineno&&{line:i.lineno}),i.colno&&{col:i.colno}),i.filename&&{file:i.filename}),i.message&&{message:i.message}),i.error?.stack&&{stack:i.error.stack}),navigator?.userAgent&&{userAgent:navigator.userAgent}),l&&{project:l}),a&&{userMessage:a}))})})}}C.production&&void 0;lx().bootstrapModule(HS).catch(i=>console.error(i));
